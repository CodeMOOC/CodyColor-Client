/*! 12-09-2019 */

!function(e){"use strict";var t={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(e){if(!B(e))return t;U(e.objectMaxDepth)&&(t.objectMaxDepth=i(e.objectMaxDepth)?e.objectMaxDepth:NaN),U(e.urlErrorParamsEnabled)&&X(e.urlErrorParamsEnabled)&&(t.urlErrorParamsEnabled=e.urlErrorParamsEnabled)}function i(e){return q(e)&&e>0}function r(e,n){n=n||Error;var i="https://errors.angularjs.org/1.7.8/",r=i.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(r,"g");return function(){var r,a,s=arguments[0],u=arguments[1],c="["+(e?e+":":"")+s+"] ",l=fe(arguments,2).map(function(e){return ze(e,t.objectMaxDepth)});if(c+=u.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<l.length?l[t].replace(o,""):e}),c+="\n"+i+(e?e+"/":"")+s,t.urlErrorParamsEnabled)for(a=0,r="?";a<l.length;a++,r="&")c+=r+"p"+a+"="+encodeURIComponent(l[a]);return new n(c)}}var o,a,s,u,c=/^\/(.+)\/([a-z]*)$/,l="validity",h=Object.prototype.hasOwnProperty,f=function(e){return V(e)?e.toLowerCase():e},d=function(e){return V(e)?e.toUpperCase():e},p=[].slice,g=[].splice,m=[].push,v=Object.prototype.toString,y=Object.getPrototypeOf,b=r("ng"),A=e.angular||(e.angular={}),w=0;function _(e){if(null==e||Q(e))return!1;if(W(e)||V(e)||a&&e instanceof a)return!0;var t="length"in Object(e)&&e.length;return q(t)&&(t>=0&&t-1 in e||"function"==typeof e.item)}function C(e,t,n){var i,r;if(e)if(z(e))for(i in e)"prototype"!==i&&"length"!==i&&"name"!==i&&e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else if(W(e)||_(e)){var o="object"!=typeof e;for(i=0,r=e.length;i<r;i++)(o||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==C)e.forEach(t,n,e);else if(j(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)h.call(e,i)&&t.call(n,e[i],i,e);return e}function S(e,t,n){for(var i=Object.keys(e).sort(),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function E(e){return function(t,n){e(n,t)}}function T(){return++w}function k(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function I(e,t,n){for(var i=e.$$hashKey,r=0,o=t.length;r<o;++r){var a=t[r];if(B(a)||z(a))for(var s=Object.keys(a),u=0,c=s.length;u<c;u++){var l=s[u],h=a[l];n&&B(h)?H(h)?e[l]=new Date(h.valueOf()):K(h)?e[l]=new RegExp(h):h.nodeName?e[l]=h.cloneNode(!0):ne(h)?e[l]=h.clone():(B(e[l])||(e[l]=W(h)?[]:{}),I(e[l],[h],!0)):e[l]=h}}return k(e,i),e}function x(e){return I(e,p.call(arguments,1),!1)}function D(e){return I(e,p.call(arguments,1),!0)}function N(e){return parseInt(e,10)}o=e.document.documentMode;var P=Number.isNaN||function(e){return e!=e};function O(e,t){return x(Object.create(e),t)}function M(){}function R(e){return e}function $(e){return function(){return e}}function L(e){return z(e.toString)&&e.toString!==v}function F(e){return void 0===e}function U(e){return void 0!==e}function B(e){return null!==e&&"object"==typeof e}function j(e){return null!==e&&"object"==typeof e&&!y(e)}function V(e){return"string"==typeof e}function q(e){return"number"==typeof e}function H(e){return"[object Date]"===v.call(e)}function W(e){return Array.isArray(e)||e instanceof Array}function G(e){switch(v.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function z(e){return"function"==typeof e}function K(e){return"[object RegExp]"===v.call(e)}function Q(e){return e&&e.window===e}function Y(e){return e&&e.$evalAsync&&e.$watch}function X(e){return"boolean"==typeof e}function J(e){return e&&z(e.then)}M.$inject=[],R.$inject=[];var Z=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var ee=function(e){return V(e)?e.trim():e},te=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function ne(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function ie(e){return f(e.nodeName||e[0]&&e[0].nodeName)}function re(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function oe(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function ae(e,t,n){var r,o,a=[],s=[];if(n=i(n)?n:NaN,t){if((o=t)&&q(o.length)&&Z.test(v.call(o))||(r=t,"[object ArrayBuffer]"===v.call(r)))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw b("cpi","Can't copy! Source and destination are identical.");return W(t)?t.length=0:C(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),s.push(t),u(e,t,n)}return c(e,n);function u(e,t,n){if(--n<0)return"...";var i,r=t.$$hashKey;if(W(e))for(var o=0,a=e.length;o<a;o++)t.push(c(e[o],n));else if(j(e))for(i in e)t[i]=c(e[i],n);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=c(e[i],n));else for(i in e)h.call(e,i)&&(t[i]=c(e[i],n));return k(t,r),t}function c(e,t){if(!B(e))return e;var n=a.indexOf(e);if(-1!==n)return s[n];if(Q(e)||Y(e))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(e){switch(v.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(c(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(z(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===r&&(r=W(e)?[]:Object.create(y(e)),i=!0),a.push(e),s.push(r),i?u(e,r,t):r}}function se(e,t){return e===t||e!=e&&t!=t}function ue(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,i,r,o=typeof e;if(o===typeof t&&"object"===o){if(!W(e)){if(H(e))return!!H(t)&&se(e.getTime(),t.getTime());if(K(e))return!!K(t)&&e.toString()===t.toString();if(Y(e)||Y(t)||Q(e)||Q(t)||W(t)||H(t)||K(t))return!1;for(i in r=Ue(),e)if("$"!==i.charAt(0)&&!z(e[i])){if(!ue(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&"$"!==i.charAt(0)&&U(t[i])&&!z(t[i]))return!1;return!0}if(!W(t))return!1;if((n=e.length)===t.length){for(i=0;i<n;i++)if(!ue(e[i],t[i]))return!1;return!0}}return!1}var ce=function(){if(!U(ce.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");ce.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ce.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return ce.rules},le=function(){if(U(le.name_))return le.name_;var t,n,i,r,o=Te.length;for(n=0;n<o;++n)if(i=Te[n],t=e.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=t.getAttribute(i+"jq");break}return le.name_=r};function he(e,t,n){return e.concat(p.call(t,n))}function fe(e,t){return p.call(e,t||0)}function de(e,t){var n=arguments.length>2?fe(arguments,2):[];return!z(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,he(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function pe(t,n){var i=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=void 0:Q(n)?i="$WINDOW":n&&e.document===n?i="$DOCUMENT":Y(n)&&(i="$SCOPE"),i}function ge(e,t){if(!F(e))return q(t)||(t=t?2:null),JSON.stringify(e,pe,t)}function me(e){return V(e)?JSON.parse(e):e}var ve=/:/g;function ye(e,t){e=e.replace(ve,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return P(n)?t:n}function be(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function Ae(e,t,n){n=n?-1:1;var i=e.getTimezoneOffset();return be(e,n*(ye(t,i)-i))}function we(e){e=a(e).clone().empty();var t=a("<div></div>").append(e).html();try{return e[0].nodeType===Ve?f(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+f(t)})}catch(e){return f(t)}}function _e(e){try{return decodeURIComponent(e)}catch(e){}}function Ce(e){var t={};return C((e||"").split("&"),function(e){var n,i,r;e&&(i=e=e.replace(/\+/g,"%20"),-1!==(n=e.indexOf("="))&&(i=e.substring(0,n),r=e.substring(n+1)),U(i=_e(i))&&(r=!U(r)||_e(r),h.call(t,i)?W(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r))}),t}function Se(e){return Ee(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ee(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var Te=["ng-","data-ng-","ng:","x-ng-"];var ke=function(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var i=n.attributes;return[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(e.document);function Ie(t,n){var i,r,o={};if(C(Te,function(e){var n=e+"app";!i&&t.hasAttribute&&t.hasAttribute(n)&&(i=t,r=t.getAttribute(n))}),C(Te,function(e){var n,o=e+"app";!i&&(n=t.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))}),i){if(!ke)return void e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(e,t){var n,i,r=Te.length;for(i=0;i<r;++i)if(n=Te[i]+t,V(n=e.getAttribute(n)))return n;return null}(i,"strict-di"),n(i,r?[r]:[],o)}}function xe(t,n,i){B(i)||(i={});i=x({strictDi:!1},i);var r=function(){if((t=a(t)).injector()){var r=t[0]===e.document?"document":we(t);throw b("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Xt(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&o.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(o,"")),e&&!s.test(e.name))return r();e.name=e.name.replace(s,""),A.resumeBootstrap=function(e){return C(e,function(e){n.push(e)}),r()},z(A.resumeDeferredBootstrap)&&A.resumeDeferredBootstrap()}function De(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Ne(e){var t=A.element(e).injector();if(!t)throw b("test","no injector found for element argument to getTestability");return t.get("$$testability")}var Pe=/[A-Z]/g;function Oe(e,t){return t=t||"_",e.replace(Pe,function(e,n){return(n?t:"")+e.toLowerCase()})}var Me=!1;function Re(e,t,n){if(!e)throw b("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function $e(e,t,n){return n&&W(e)&&(e=e[e.length-1]),Re(z(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Le(e,t){if("hasOwnProperty"===e)throw b("badname","hasOwnProperty is not a valid {0} name",t)}function Fe(e){for(var t,n=e[0],i=e[e.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(t||e[r]!==n)&&(t||(t=a(p.call(e,0,r))),t.push(n));return t||e}function Ue(){return Object.create(null)}function Be(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!L(e)||W(e)||H(e)?ge(e):e.toString()}return e}var je=1,Ve=3,qe=8,He=9,We=11;function Ge(e,t){if(W(e)){t=t||[];for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}else if(B(e))for(var r in t=t||{},e)"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t||e}function ze(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):F(e)?"undefined":"string"!=typeof e?function(e,t){var n=[];return i(t)&&(e=A.copy(e,null,t)),JSON.stringify(e,function(e,t){if(B(t=pe(e,t))){if(n.indexOf(t)>=0)return"...";n.push(t)}return t})}(e,t):e}var Ke={full:"1.7.8",major:1,minor:7,dot:8,codeName:"enthusiastic-oblation"};ft.expando="ng339";var Qe=ft.cache={},Ye=1;ft._data=function(e){return this.cache[e[this.expando]]||{}};var Xe=/-([a-z])/g,Je=/^-ms-/,Ze={mouseleave:"mouseout",mouseenter:"mouseover"},et=r("jqLite");function tt(e,t){return t.toUpperCase()}function nt(e){return e.replace(Xe,tt)}var it=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,rt=/<|&#?\w+;/,ot=/<([\w:-]+)/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,st={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ut(e){return!rt.test(e)}function ct(e){var t=e.nodeType;return t===je||!t||t===He}function lt(e,t){var n,i,r,o,a=t.createDocumentFragment(),s=[];if(ut(e))s.push(t.createTextNode(e));else{for(n=a.appendChild(t.createElement("div")),i=(ot.exec(e)||["",""])[1].toLowerCase(),r=st[i]||st._default,n.innerHTML=r[1]+e.replace(at,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;s=he(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",C(s,function(e){a.appendChild(e)}),a}st.optgroup=st.option,st.tbody=st.tfoot=st.colgroup=st.caption=st.thead,st.th=st.td;var ht=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function ft(t){if(t instanceof ft)return t;var n,i,r,o;if(V(t)&&(t=ee(t),n=!0),!(this instanceof ft)){if(n&&"<"!==t.charAt(0))throw et("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ft(t)}n?St(this,(i=t,r=r||e.document,(o=it.exec(i))?[r.createElement(o[1])]:(o=lt(i,r))?o.childNodes:[])):z(t)?xt(t):St(this,t)}function dt(e){return e.cloneNode(!0)}function pt(e,t){!t&&ct(e)&&a.cleanData([e]),e.querySelectorAll&&a.cleanData(e.querySelectorAll("*"))}function gt(e){var t;for(t in e)return!1;return!0}function mt(e){var t=e.ng339,n=t&&Qe[t],i=n&&n.events,r=n&&n.data;r&&!gt(r)||i&&!gt(i)||(delete Qe[t],e.ng339=void 0)}function vt(e,t,n,i){if(U(i))throw et("offargs","jqLite#off() does not support the `selector` argument");var r=bt(e),o=r&&r.events,a=r&&r.handle;if(a){if(t){var s=function(t){var i=o[t];U(n)&&oe(i||[],n),U(n)&&i&&i.length>0||(e.removeEventListener(t,a),delete o[t])};C(t.split(" "),function(e){s(e),Ze[e]&&s(Ze[e])})}else for(t in o)"$destroy"!==t&&e.removeEventListener(t,a),delete o[t];mt(e)}}function yt(e,t){var n=e.ng339,i=n&&Qe[n];i&&(t?delete i.data[t]:i.data={},mt(e))}function bt(e,t){var n=e.ng339,i=n&&Qe[n];return t&&!i&&(e.ng339=n=++Ye,i=Qe[n]={events:{},data:{},handle:void 0}),i}function At(e,t,n){if(ct(e)){var i,r=U(n),o=!r&&t&&!B(t),a=!t,s=bt(e,!o),u=s&&s.data;if(r)u[nt(t)]=n;else{if(a)return u;if(o)return u&&u[nt(t)];for(i in t)u[nt(i)]=t[i]}}}function wt(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function _t(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;C(t.split(" "),function(e){e=ee(e),i=i.replace(" "+e+" "," ")}),i!==n&&e.setAttribute("class",ee(i))}}function Ct(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;C(t.split(" "),function(e){e=ee(e),-1===i.indexOf(" "+e+" ")&&(i+=e+" ")}),i!==n&&e.setAttribute("class",ee(i))}}function St(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;i<n;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Et(e,t){return Tt(e,"$"+(t||"ngController")+"Controller")}function Tt(e,t,n){e.nodeType===He&&(e=e.documentElement);for(var i=W(t)?t:[t];e;){for(var r=0,o=i.length;r<o;r++)if(U(n=a.data(e,i[r])))return n;e=e.parentNode||e.nodeType===We&&e.host}}function kt(e){for(pt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function It(e,t){t||pt(e);var n=e.parentNode;n&&n.removeChild(e)}function xt(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}var Dt=ft.prototype={ready:xt,toString:function(){var e=[];return C(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return a(e>=0?this[e]:this[this.length+e])},length:0,push:m,sort:[].sort,splice:[].splice},Nt={};C("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Nt[f(e)]=e});var Pt={};C("input,select,option,textarea,button,form,details".split(","),function(e){Pt[e]=!0});var Ot={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Mt(e,t){var n=Nt[t.toLowerCase()];return n&&Pt[ie(e)]&&n}function Rt(e,t,n){n.call(e,t)}function $t(e,t,n){var i=t.relatedTarget;i&&(i===e||ht.call(e,i))||n.call(e,t)}function Lt(){this.$get=function(){return x(ft,{hasClass:function(e,t){return e.attr&&(e=e[0]),wt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Ct(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),_t(e,t)}})}}function Ft(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"===i||"object"===i&&null!==e?e.$$hashKey=i+":"+(t||T)():i+":"+e}C({data:At,removeData:yt,hasData:function(e){for(var t in Qe[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)yt(e[t]),vt(e[t])}},function(e,t){ft[t]=e}),C({data:At,inheritedData:Tt,scope:function(e){return a.data(e,"$scope")||Tt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return a.data(e,"$isolateScope")||a.data(e,"$isolateScopeNoTemplate")},controller:Et,injector:function(e){return Tt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:wt,css:function(e,t,n){if(t=function(e){return nt(e.replace(Je,"ms-"))}(t),!U(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var i,r=e.nodeType;if(r!==Ve&&2!==r&&r!==qe&&e.getAttribute){var o=f(t),a=Nt[o];if(!U(n))return i=e.getAttribute(t),a&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&a?e.removeAttribute(t):e.setAttribute(t,a?o:n)}},prop:function(e,t,n){if(!U(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(F(t)){var n=e.nodeType;return n===je||n===Ve?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(F(t)){if(e.multiple&&"select"===ie(e)){var n=[];return C(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(F(t))return e.innerHTML;pt(e,!0),e.innerHTML=t},empty:kt},function(e,t){ft.prototype[t]=function(t,n){var i,r,o=this.length;if(e!==kt&&F(2===e.length&&e!==wt&&e!==Et?t:n)){if(B(t)){for(i=0;i<o;i++)if(e===At)e(this[i],t);else for(r in t)e(this[i],r,t[r]);return this}for(var a=e.$dv,s=F(a)?Math.min(o,1):o,u=0;u<s;u++){var c=e(this[u],t,n);a=a?a+c:c}return a}for(i=0;i<o;i++)e(this[i],t,n);return this}}),C({removeData:yt,on:function(e,t,n,i){if(U(i))throw et("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ct(e)){var r=bt(e,!0),o=r.events,a=r.handle;a||(a=r.handle=function(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],o=r?r.length:0;if(o){if(F(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=r.specialHandlerWrapper||Rt;o>1&&(r=Ge(r));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||s(e,n,r[u])}};return n.elem=e,n}(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length,c=function(t,i,r){var s=o[t];s||((s=o[t]=[]).specialHandlerWrapper=i,"$destroy"===t||r||e.addEventListener(t,a)),s.push(n)};u--;)t=s[u],Ze[t]?(c(Ze[t],$t),c(t,void 0,!0)):c(t)}},off:vt,one:function(e,t,n){(e=a(e)).on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;pt(e),C(new ft(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return C(e.childNodes,function(e){e.nodeType===je&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===je||n===We)for(var i=0,r=(t=new ft(t)).length;i<r;i++){var o=t[i];e.appendChild(o)}},prepend:function(e,t){if(e.nodeType===je){var n=e.firstChild;C(new ft(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){var n,i,r;n=e,i=a(t).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:It,detach:function(e){It(e,!0)},after:function(e,t){var n=e,i=e.parentNode;if(i)for(var r=0,o=(t=new ft(t)).length;r<o;r++){var a=t[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:Ct,removeClass:_t,toggleClass:function(e,t,n){t&&C(t.split(" "),function(t){var i=n;F(i)&&(i=!wt(e,t)),(i?Ct:_t)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==We?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:dt,triggerHandler:function(e,t,n){var i,r,o,a=t.type||t,s=bt(e),u=s&&s.events,c=u&&u[a];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:M,type:a,target:e},t.type&&(i=x(i,t)),r=Ge(c),o=n?[i].concat(n):[i],C(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){ft.prototype[t]=function(t,n,i){for(var r,o=0,s=this.length;o<s;o++)F(r)?U(r=e(this[o],t,n,i))&&(r=a(r)):St(r,e(this[o],t,n,i));return U(r)?r:this}}),ft.prototype.bind=ft.prototype.on,ft.prototype.unbind=ft.prototype.off;var Ut=Object.create(null);function Bt(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Bt.prototype={_idx:function(e){return e!==this._lastKey&&(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return P(e)?Ut:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},has:function(e){return e=this._transformKey(e),-1!==this._idx(e)},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var jt=Bt,Vt=[function(){this.$get=[function(){return jt}]}],qt=/^([^(]+?)=>/,Ht=/^[^(]*\(\s*([^)]*)\)/m,Wt=/,/,Gt=/^\s*(_?)(\S+?)\1\s*$/,zt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Kt=r("$injector");function Qt(e){return Function.prototype.toString.call(e)}function Yt(e){var t=Qt(e).replace(zt,"");return t.match(qt)||t.match(Ht)}function Xt(e,t){t=!0===t;var n={},i="Provider",r=[],a=new jt,s={$provide:{provider:p(g),factory:p(m),service:p(function(e,t){return m(e,["$injector",function(e){return e.instantiate(t)}])}),value:p(function(e,t){return m(e,$(t),!1)}),constant:p(function(e,t){Le(e,"constant"),s[e]=t,l[e]=t}),decorator:function(e,t){var n=c.get(e+i),r=n.$get;n.$get=function(){var e=f.invoke(r,n);return f.invoke(t,null,{$delegate:e})}}}},c=s.$injector=y(s,function(e,t){throw A.isString(t)&&r.push(t),Kt("unpr","Unknown provider: {0}",r.join(" <- "))}),l={},h=y(l,function(e,t){var n=c.get(e+i,t);return f.invoke(n.$get,n,void 0,e)}),f=h;s["$injector"+i]={$get:$(h)},f.modules=c.modules=Ue();var d=v(e);return(f=h.get("$injector")).strictDi=t,C(d,function(e){e&&f.invoke(e)}),f.loadNewModules=function(e){C(v(e),function(e){e&&f.invoke(e)})},f;function p(e){return function(t,n){if(!B(t))return e(t,n);C(t,E(e))}}function g(e,t){if(Le(e,"service"),(z(t)||W(t))&&(t=c.instantiate(t)),!t.$get)throw Kt("pget","Provider '{0}' must define $get factory method.",e);return s[e+i]=t}function m(e,t,n){return g(e,{$get:!1!==n?function(e,t){return function(){var n=f.invoke(t,this);if(F(n))throw Kt("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}(e,t):t})}function v(e){Re(F(e)||W(e),"modulesToLoad","not an array");var t,n=[];return C(e,function(e){if(!a.get(e)){a.set(e,!0);try{V(e)?(t=u(e),f.modules[e]=t,n=n.concat(v(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):z(e)?n.push(c.invoke(e)):W(e)?n.push(c.invoke(e)):$e(e,"module")}catch(t){throw W(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Kt("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function i(e){var t,n;for(t=0,n=e.length;t<n;t++){var i=e[t],r=c.get(i[0]);r[i[1]].apply(r,i[2])}}}),n}function y(e,a){function u(t,i){if(e.hasOwnProperty(t)){if(e[t]===n)throw Kt("cdep","Circular dependency found: {0}",t+" <- "+r.join(" <- "));return e[t]}try{return r.unshift(t),e[t]=n,e[t]=a(t,i),e[t]}catch(i){throw e[t]===n&&delete e[t],i}finally{r.shift()}}function c(e,n,i){for(var r=[],o=Xt.$$annotate(e,t,i),a=0,s=o.length;a<s;a++){var c=o[a];if("string"!=typeof c)throw Kt("itkn","Incorrect injection token! Expected service name as string, got {0}",c);r.push(n&&n.hasOwnProperty(c)?n[c]:u(c,i))}return r}return{invoke:function(e,t,n,i){"string"==typeof n&&(i=n,n=null);var r=c(e,n,i);return W(e)&&(e=e[e.length-1]),function(e){if(o||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return X(t)||(t=e.$$ngIsClass=/^class\b/.test(Qt(e))),t}(e)?(r.unshift(null),new(Function.prototype.bind.apply(e,r))):e.apply(t,r)},instantiate:function(e,t,n){var i=W(e)?e[e.length-1]:e,r=c(e,t,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:u,annotate:Xt.$$annotate,has:function(t){return s.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}}function Jt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function s(e){if(e){e.scrollIntoView();var t=function(){var e=u.yOffset;if(z(e))e=e();else if(ne(e)){var t=e[0];e="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else q(e)||(e=0);return e}();if(t){var i=e.getBoundingClientRect().top;n.scrollBy(0,i-t)}}else n.scrollTo(0,0)}function u(e){var t,n,r;(e=V(e)?e:q(e)?e.toString():i.hash())?(t=o.getElementById(e))?s(t):(n=o.getElementsByName(e),r=null,Array.prototype.some.call(n,function(e){if("a"===ie(e))return r=e,!0}),(t=r)?s(t):"top"===e&&s(null)):s(null)}return t&&r.$watch(function(){return i.hash()},function(t,n){var i,o;t===n&&""===t||(i=function(){r.$evalAsync(u)},"complete"===(o=o||e).document.readyState?o.setTimeout(i):a(o).on("load",i))}),u}]}Xt.$$annotate=function(e,t,n){var i,r;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw V(n)&&n||(n=e.name||function(e){var t=Yt(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(e)),Kt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);C(Yt(e)[1].split(Wt),function(e){e.replace(Gt,function(e,t,n){i.push(n)})})}e.$inject=i}}else W(e)?($e(e[r=e.length-1],"fn"),i=e.slice(0,r)):$e(e,"fn",!0);return i};var Zt=r("$animate"),en=1;function tn(e,t){return e||t?e?t?(W(e)&&(e=e.join(" ")),W(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function nn(e){return B(e)?e:{}}var rn=function(){this.$get=M},on=function(){var e=new jt,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:M,on:M,off:M,pin:M,push:function(a,s,u,c){c&&c(),(u=u||{}).from&&a.css(u.from),u.to&&a.css(u.to),(u.addClass||u.removeClass)&&function(n,a,s){var u=e.get(n)||{},c=r(u,a,!0),l=r(u,s,!1);(c||l)&&(e.set(n,u),t.push(n),1===t.length&&i.$$postDigest(o))}(a,u.addClass,u.removeClass);var l=new n;return l.complete(),l}};function r(e,t,n){var i=!1;return t&&C(t=V(t)?t.split(" "):W(t)?t:[],function(t){t&&(i=!0,e[t]=n)}),i}function o(){C(t,function(t){var n=e.get(t);if(n){var i=function(e){V(e)&&(e=e.split(" "));var t=Ue();return C(e,function(e){e.length&&(t[e]=!0)}),t}(t.attr("class")),r="",o="";C(n,function(e,t){e!==!!i[t]&&(e?r+=(r.length?" ":"")+t:o+=(o.length?" ":"")+t)}),C(t,function(e){r&&Ct(e,r),o&&_t(e,o)}),e.delete(t)}}),t.length=0}}]},an=["$provide",function(e){var t=this,n=null,i=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Zt("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";t.$$registeredAnimations[n.substr(1)]=r,e.factory(r,i)},this.customFilter=function(e){return 1===arguments.length&&(i=z(e)?e:null),i},this.classNameFilter=function(e){if(1===arguments.length&&((n=e instanceof RegExp?e:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString())))throw n=null,Zt("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var i=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===en)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.cancel&&e.cancel()},enter:function(n,i,r,o){return i=i&&a(i),r=r&&a(r),t(n,i=i||r.parent(),r),e.push(n,"enter",nn(o))},move:function(n,i,r,o){return i=i&&a(i),r=r&&a(r),t(n,i=i||r.parent(),r),e.push(n,"move",nn(o))},leave:function(t,n){return e.push(t,"leave",nn(n),function(){t.remove()})},addClass:function(t,n,i){return(i=nn(i)).addClass=tn(i.addclass,n),e.push(t,"addClass",i)},removeClass:function(t,n,i){return(i=nn(i)).removeClass=tn(i.removeClass,n),e.push(t,"removeClass",i)},setClass:function(t,n,i,r){return(r=nn(r)).addClass=tn(r.addClass,n),r.removeClass=tn(r.removeClass,i),e.push(t,"setClass",r)},animate:function(t,n,i,r,o){return(o=nn(o)).from=o.from?x(o.from,n):n,o.to=o.to?x(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=tn(o.tempClasses,r),e.push(t,"animate",o)}}}]}],sn=function(){this.$get=["$$rAF",function(e){var t=[];function n(n){t.push(n),t.length>1||e(function(){for(var e=0;e<t.length;e++)t[e]();t=[]})}return function(){var e=!1;return n(function(){e=!0}),function(t){e?t():n(t)}}}]},un=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,i,r){function o(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){i()?function(e){r(e,0,!1)}(e):t(e)},this._state=0}return o.chain=function(e,t){var n=0;!function i(){if(n===e.length)return void t(!0);e[n](function(e){!1!==e?(n++,i()):t(!1)})}()},o.all=function(e,t){var n=0,i=!0;function r(r){i=i&&r,++n===e.length&&t(i)}C(e,function(e){e.done(r)})},o.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:M,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(e){2!==this._state&&(C(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},o}]},cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,i){var r=i||{};r.$$prepared||(r=ae(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(t.css(r.from),r.from=null);var o,a=new n;return{start:s,end:s};function s(){return e(function(){!function(){r.addClass&&(t.addClass(r.addClass),r.addClass=null);r.removeClass&&(t.removeClass(r.removeClass),r.removeClass=null);r.to&&(t.css(r.to),r.to=null)}(),o||a.complete(),o=!0}),a}}}]};function ln(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(e,t,n,i,r){return new function(e,t,n,i,r){var o=this,s=e.location,u=e.history,c=e.setTimeout,l=e.clearTimeout,h={},f=r(n);o.isMock=!1,o.$$completeOutstandingRequest=f.completeTask,o.$$incOutstandingRequestCount=f.incTaskCount,o.notifyWhenNoOutstandingRequests=f.notifyWhenNoPendingTasks;var d,p,g=s.href,m=t.find("base"),v=null,y=i.history?function(){try{return u.state}catch(e){}}:M;S(),o.url=function(t,n,r){if(F(r)&&(r=null),s!==e.location&&(s=e.location),u!==e.history&&(u=e.history),t){var a=p===r;if(t=cr(t).href,g===t&&(!i.history||a))return o;var c=g&&si(g)===si(t);return g=t,p=r,!i.history||c&&a?(c||(v=t),n?s.replace(t):c?s.hash=function(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}(t):s.href=t,s.href!==t&&(v=t)):(u[n?"replaceState":"pushState"](r,"",t),S()),v&&(v=t),o}return function(e){return e.replace(/#$/,"")}(v||s.href)},o.state=function(){return d};var b=[],A=!1;function w(){v=null,E()}var _=null;function S(){ue(d=F(d=y())?null:d,_)&&(d=_),_=d,p=d}function E(){var e=p;S(),g===o.url()&&e===d||(g=o.url(),p=d,C(b,function(e){e(o.url(),d)}))}o.onUrlChange=function(t){return A||(i.history&&a(e).on("popstate",w),a(e).on("hashchange",w),A=!0),b.push(t),t},o.$$applicationDestroyed=function(){a(e).off("hashchange popstate",w)},o.$$checkUrlChange=E,o.baseHref=function(){var e=m.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},o.defer=function(e,t,n){var i;return t=t||0,n=n||f.DEFAULT_TASK_TYPE,f.incTaskCount(n),i=c(function(){delete h[i],f.completeTask(e,n)},t),h[i]=n,i},o.defer.cancel=function(e){if(h.hasOwnProperty(e)){var t=h[e];return delete h[e],l(e),f.completeTask(M,t),!0}return!1}}(e,i,t,n,r)}]}function hn(){this.$get=function(){var e={};function t(t,n){if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var i=0,o=x({},n,{id:t}),a=Ue(),s=n&&n.capacity||Number.MAX_VALUE,u=Ue(),c=null,l=null;return e[t]={put:function(e,t){if(!F(t)){if(s<Number.MAX_VALUE)h(u[e]||(u[e]={key:e}));return e in a||i++,a[e]=t,i>s&&this.remove(l.key),t}},get:function(e){if(s<Number.MAX_VALUE){var t=u[e];if(!t)return;h(t)}return a[e]},remove:function(e){if(s<Number.MAX_VALUE){var t=u[e];if(!t)return;t===c&&(c=t.p),t===l&&(l=t.n),f(t.n,t.p),delete u[e]}e in a&&(delete a[e],i--)},removeAll:function(){a=Ue(),i=0,u=Ue(),c=l=null},destroy:function(){a=null,o=null,u=null,delete e[t]},info:function(){return x({},o,{size:i})}};function h(e){e!==c&&(l?l===e&&(l=e.n):l=e,f(e.n,e.p),f(e,c),(c=e).n=null)}function f(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return t.info=function(){var t={};return C(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function fn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var dn=r("$compile");var pn=new function(){};function gn(t,n){var i={},r="Directive",s=/^\s*directive:\s*([\w-]+)\s+(.*)$/,u=/(([\w-]+)(?::([^;]+))?;?)/,c=function(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,d=/^(on[a-z]+|formaction)$/,p=Ue();function g(e,t,n){var i=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,r=Ue();return C(e,function(e,o){if((e=e.trim())in p)r[o]=p[e];else{var a=e.match(i);if(!a)throw dn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,o,e,n?"controller bindings definition":"isolate scope definition");r[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(p[e]=r[o])}}),r}function m(e,t){var n={isolateScope:null,bindToController:null};if(B(e.scope)&&(!0===e.bindToController?(n.bindToController=g(e.scope,t,!0),n.isolateScope={}):n.isolateScope=g(e.scope,t,!1)),B(e.bindToController)&&(n.bindToController=g(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw dn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function e(n,o){return Re(n,"name"),Le(n,"directive"),V(n)?(!function(e){var t=e.charAt(0);if(!t||t!==f(t))throw dn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw dn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(n),Re(o,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],t.factory(n+r,["$injector","$exceptionHandler",function(e,t){var r=[];return C(i[n],function(i,o){try{var a=e.invoke(i);z(a)?a={compile:$(a)}:!a.compile&&a.link&&(a.compile=$(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(e){var t=e.require||e.controller&&e.name;return!W(t)&&B(t)&&C(t,function(e,n){var i=e.match(l);e.substring(i[0].length)||(t[n]=i[0]+n)}),t}(a),a.restrict=function(e,t){if(e&&(!V(e)||!/[EACM]/.test(e)))throw dn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(a.restrict,n),a.$$moduleName=i.$$moduleName,r.push(a)}catch(e){t(e)}}),r}])),i[n].push(o)):C(n,E(e)),this},this.component=function e(t,n){if(!V(t))return C(t,E(de(this,e))),this;var i=n.controller||function(){};function r(e){function t(t){return z(t)||W(t)?function(n,i){return e.invoke(t,this,{$element:n,$attrs:i})}:t}var r=n.template||n.templateUrl?n.template:"",o={controller:i,controllerAs:function(e,t){if(t&&V(t))return t;if(V(e)){var n=Cn.exec(e);if(n)return n[3]}}(n.controller)||n.controllerAs||"$ctrl",template:t(r),templateUrl:t(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return C(n,function(e,t){"$"===t.charAt(0)&&(o[t]=e)}),o}return C(n,function(e,t){"$"===t.charAt(0)&&(r[t]=e,z(i)&&(i[t]=e))}),r.$inject=["$injector"],this.directive(t,r)},this.aHrefSanitizationWhitelist=function(e){return U(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return U(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(e){return U(e)?(y=e,this):y};var b=!1;this.strictComponentBindingsEnabled=function(e){return U(e)?(b=e,this):b};var A=10;this.onChangesTtl=function(e){return arguments.length?(A=e,this):A};var w=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(w=e,this):w};var _=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(_=e,this):_};var S=Ue();this.addPropertySecurityContext=function(e,t,n){var i=e.toLowerCase()+"|"+t.toLowerCase();if(i in S&&S[i]!==n)throw dn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",e,t,S[i],n);return S[i]=n,this},function(){function e(e,t){C(t,function(t){S[t.toLowerCase()]=e})}e(Gi.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),e(Gi.CSS,["*|style"]),e(Gi.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),e(Gi.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),e(Gi.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(t,n,p,g,E,T,k,I,D){var N,P=/^\w/,$=e.document.createElement("div"),L=w,U=_,j=A;function q(){try{if(!--j)throw N=void 0,dn("infchng","{0} $onChanges() iterations reached. Aborting!\n",A);k.$apply(function(){for(var e=0,t=N.length;e<t;++e)try{N[e]()}catch(e){p(e)}N=void 0})}finally{j++}}function H(e,t){if(!e)return e;if(!V(e))throw dn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',t,e.toString());for(var n="",i=ee(e),r=/\s/.test(i)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=i.split(r),a=Math.floor(o.length/2),s=0;s<a;s++){var u=2*s;n+=I.getTrustedMediaUrl(ee(o[u])),n+=" "+ee(o[u+1])}var c=ee(o[2*s]).split(/\s/);return n+=I.getTrustedMediaUrl(ee(c[0])),2===c.length&&(n+=" "+ee(c[1])),n}function K(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=t[r]}else this.$attr={};this.$$element=e}function Q(e,t){try{e.addClass(t)}catch(e){}}K.prototype={$normalize:bn,$addClass:function(e){e&&e.length>0&&D.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&D.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=An(e,t);n&&n.length&&D.addClass(this.$$element,n);var i=An(t,e);i&&i.length&&D.removeClass(this.$$element,i)},$set:function(e,t,n,i){var r=Mt(this.$$element[0],e),o=Ot[e],a=e;r?(this.$$element.prop(e,t),i=r):o&&(this[o]=t,a=o),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=Oe(e,"-")),"img"===ie(this.$$element)&&"srcset"===e&&(this[e]=t=H(t,"$set('srcset', value)")),!1!==n&&(null===t||F(t)?this.$$element.removeAttr(i):P.test(i)?r&&!1===t?this.$$element.removeAttr(i):this.$$element.attr(i,t):function(e,t,n){$.innerHTML="<span "+t+">";var i=$.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,e.attributes.setNamedItem(r)}(this.$$element[0],i,t));var s=this.$$observers;s&&C(s[a],function(e){try{e(t)}catch(e){p(e)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=Ue()),r=i[e]||(i[e]=[]);return r.push(t),k.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(e)||F(n[e])||t(n[e])}),function(){oe(r,t)}}};var J=n.startSymbol(),Z=n.endSymbol(),te="{{"===J&&"}}"===Z?R:function(e){return e.replace(/\{\{/g,J).replace(/}}/g,Z)},ne=/^ng(Attr|Prop|On)([A-Z].*)$/,re=/^(.+)Start$/;return ae.$$addBindingInfo=y?function(e,t){var n=e.data("$binding")||[];W(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:M,ae.$$addBindingClass=y?function(e){Q(e,"ng-binding")}:M,ae.$$addScopeInfo=y?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:M,ae.$$addScopeClass=y?function(e,t){Q(e,t?"ng-isolate-scope":"ng-scope")}:M,ae.$$createComment=function(t,n){var i="";return y&&(i=" "+(t||"")+": ",n&&(i+=n+" ")),e.document.createComment(i)},ae;function ae(e,t,n,i,r){e instanceof a||(e=a(e));var o=ce(e,t,e,n,i,r);ae.$$addScopeClass(e);var s=null;return function(t,n,i){if(!e)throw dn("multilink","This element has already been linked.");Re(t,"scope"),r&&r.needsNewScope&&(t=t.$parent.$new());var u,c,l,h=(i=i||{}).parentBoundTranscludeFn,f=i.transcludeControllers,d=i.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),s||(c=(u=d)&&u[0],s=c&&"foreignobject"!==ie(c)&&v.call(c).match(/SVG/)?"svg":"html"),l="html"!==s?a(Ie(s,a("<div></div>").append(e).html())):n?Dt.clone.call(e):e,f)for(var p in f)l.data("$"+p+"Controller",f[p].instance);return ae.$$addScopeInfo(l,t),n&&n(l,t),o&&o(t,l,l,h),n||(e=o=null),l}}function ce(e,t,n,i,r,s){for(var u,c,l,h,f,d,p,g=[],m=W(e)||e instanceof a,v=0;v<e.length;v++)u=new K,11===o&&le(e,v,m),(l=(c=pe(e[v],[],u,0===v?i:void 0,r)).length?ye(c,e[v],u,t,n,null,[],[],s):null)&&l.scope&&ae.$$addScopeClass(u.$$element),f=l&&l.terminal||!(h=e[v].childNodes)||!h.length?null:ce(h,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),(l||f)&&(g.push(v,l,f),d=!0,p=p||l),s=null;return d?function(e,n,i,r){var o,s,u,c,l,h,f,d,m;if(p){var v=n.length;for(m=new Array(v),l=0;l<g.length;l+=3)f=g[l],m[f]=n[f]}else m=n;for(l=0,h=g.length;l<h;)u=m[g[l++]],o=g[l++],s=g[l++],o?(o.scope?(c=e.$new(),ae.$$addScopeInfo(a(u),c)):c=e,d=o.transcludeOnThisElement?he(e,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&t?he(e,t):null,o(s,c,u,i,d)):s&&s(e,u.childNodes,void 0,r)}:null}function le(e,t,n){var i,r=e[t],o=r.parentNode;if(r.nodeType===Ve)for(;(i=o?r.nextSibling:e[t+1])&&i.nodeType===Ve;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===e[t+1]&&e.splice(t+1,1)}function he(e,t,n){function i(i,r,o,a,s){return i||((i=e.$new(!1,s)).$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var r=i.$$slots=Ue();for(var o in t.$$slots)t.$$slots[o]?r[o]=he(e,t.$$slots[o],n):r[o]=null;return i}function pe(e,t,i,r,o){var a,c,l,h=e.nodeType,f=i.$attr;switch(h){case je:_e(t,bn(c=ie(e)),"E",r,o);for(var d,p,g,m,v,y=e.attributes,b=0,A=y&&y.length;b<A;b++){var w,_=!1,C=!1,S=!1,E=!1,T=!1;p=(d=y[b]).name,m=d.value,(v=(g=bn(p.toLowerCase())).match(ne))?(S="Attr"===v[1],E="Prop"===v[1],T="On"===v[1],p=p.replace(vn,"").toLowerCase().substr(4+v[1].length).replace(/_(.)/g,function(e,t){return t.toUpperCase()})):(w=g.match(re))&&Ce(w[1])&&(_=p,C=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),E||T?(i[g]=m,f[g]=d.name,E?De(e,t,g,p):Ne(t,g,p)):(f[g=bn(p.toLowerCase())]=p,!S&&i.hasOwnProperty(g)||(i[g]=m,Mt(e,g)&&(i[g]=!0)),Pe(e,t,m,g,S),_e(t,g,"A",r,o,_,C))}if("input"===c&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!U)break;if(B(l=e.className)&&(l=l.animVal),V(l)&&""!==l)for(;a=u.exec(l);)_e(t,g=bn(a[2]),"C",r,o)&&(i[g]=ee(a[3])),l=l.substr(a.index+a[0].length);break;case Ve:!function(e,t){var i=n(t,!0);i&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&ae.$$addBindingClass(t),function(e,t){var r=t.parent();n||ae.$$addBindingClass(r),ae.$$addBindingInfo(r,i.expressions),e.$watch(i,function(e){t[0].nodeValue=e})}}})}(t,e.nodeValue);break;case qe:if(!L)break;!function(e,t,n,i,r){try{var o=s.exec(e.nodeValue);if(o){var a=bn(o[1]);_e(t,a,"M",i,r)&&(n[a]=ee(o[2]))}}catch(e){}}(e,t,i,r,o)}return t.sort(Te),t}function ge(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw dn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===je&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0);else i.push(e);return a(i)}function me(e,t,n){return function(i,r,o,a,s){return r=ge(r[0],t,n),e(i,r,o,a,s)}}function ve(e,t,n,i,r,o){var a;return e?ae(t,n,i,r,o):function(){return a||(a=ae(t,n,i,r,o),t=n=o=null),a.apply(this,arguments)}}function ye(t,n,i,r,o,s,u,c,l){l=l||{};for(var h,f,d,g,m,v=-Number.MAX_VALUE,y=l.newScopeDirective,b=l.controllerDirectives,A=l.newIsolateScopeDirective,w=l.templateDirective,_=l.nonTlbTranscludeDirective,S=!1,E=!1,k=l.hasElementTranscludeDirective,I=i.$$element=a(n),D=s,N=r,P=!1,O=!1,M=0,R=t.length;M<R;M++){var $=(h=t[M]).$$start,L=h.$$end;if($&&(I=ge(n,$,L)),d=void 0,v>h.priority)break;if((m=h.scope)&&(h.templateUrl||(B(m)?(ke("new/isolated scope",A||y,h,I),A=h):ke("new/isolated scope",A,h,I)),y=y||h),f=h.name,!P&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var U,j=M+1;U=t[j++];)if(U.transclude&&!U.$$tlb||U.replace&&(U.templateUrl||U.template)){O=!0;break}P=!0}if(!h.templateUrl&&h.controller&&(b=b||Ue(),ke("'"+f+"' controller",b[f],h,I),b[f]=h),m=h.transclude)if(S=!0,h.$$tlb||(ke("transclusion",_,h,I),_=h),"element"===m)k=!0,v=h.priority,d=I,I=i.$$element=a(ae.$$createComment(f,i[f])),n=I[0],Me(o,fe(d),n),N=ve(O,d,r,v,D&&D.name,{nonTlbTranscludeDirective:_});else{var V=Ue();if(B(m)){d=e.document.createDocumentFragment();var q=Ue(),H=Ue();for(var G in C(m,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,q[e]=t,V[t]=null,H[t]=n}),C(I.contents(),function(t){var n=q[bn(ie(t))];n?(H[n]=!0,V[n]=V[n]||e.document.createDocumentFragment(),V[n].appendChild(t)):d.appendChild(t)}),C(H,function(e,t){if(!e)throw dn("reqslot","Required transclusion slot `{0}` was not filled.",t)}),V)if(V[G]){var Q=a(V[G].childNodes);V[G]=ve(O,Q,r)}d=a(d.childNodes)}else d=a(dt(n)).contents();I.empty(),(N=ve(O,d,r,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=V}if(h.template)if(E=!0,ke("template",w,h,I),w=h,m=z(h.template)?h.template(I,i):h.template,m=te(m),h.replace){if(D=h,d=ut(m)?[]:wn(Ie(h.templateNamespace,ee(m))),n=d[0],1!==d.length||n.nodeType!==je)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f,"");Me(o,I,n);var X={$attr:{}},J=pe(n,[],X),Z=t.splice(M+1,t.length-(M+1));(A||y)&&Ae(J,A,y),t=t.concat(J).concat(Z),Se(i,X),R=t.length}else I.html(m);if(h.templateUrl)E=!0,ke("template",w,h,I),w=h,h.replace&&(D=h),oe=Ee(t.splice(M,t.length-M),I,i,o,S&&N,u,c,{controllerDirectives:b,newScopeDirective:y!==h&&y,newIsolateScopeDirective:A,templateDirective:w,nonTlbTranscludeDirective:_}),R=t.length;else if(h.compile)try{g=h.compile(I,i,N);var ne=h.$$originalDirective||h;z(g)?re(null,de(ne,g),$,L):g&&re(de(ne,g.pre),de(ne,g.post),$,L)}catch(e){p(e,we(I))}h.terminal&&(oe.terminal=!0,v=Math.max(v,h.priority))}return oe.scope=y&&!0===y.scope,oe.transcludeOnThisElement=S,oe.templateOnThisElement=E,oe.transclude=N,l.hasElementTranscludeDirective=k,oe;function re(e,t,n,i){e&&(n&&(e=me(e,n,i)),e.require=h.require,e.directiveName=f,(A===h||h.$$isolateScope)&&(e=$e(e,{isolateScope:!0})),u.push(e)),t&&(n&&(t=me(t,n,i)),t.require=h.require,t.directiveName=f,(A===h||h.$$isolateScope)&&(t=$e(t,{isolateScope:!0})),c.push(t))}function oe(e,t,r,o,s){var l,h,f,d,g,m,v,_,S,E;for(var I in n===r?(S=i,_=i.$$element):S=new K(_=a(r),i),g=t,A?d=t.$new(!0):y&&(g=t.$parent),s&&((v=function(e,t,n,i){var r;Y(e)||(i=n,n=t,t=e,e=void 0);k&&(r=m);n||(n=k?_.parent():_);if(!i)return s(e,t,r,n,O);var o=s.$$slots[i];if(o)return o(e,t,r,n,O);if(F(o))throw dn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,we(_))}).$$boundTransclude=s,v.isSlotFilled=function(e){return!!s.$$slots[e]}),b&&(m=function(e,t,n,i,r,o,a){var s=Ue();for(var u in i){var c=i[u],l={$scope:c===a||c.$$isolateScope?r:o,$element:e,$attrs:t,$transclude:n},h=c.controller;"@"===h&&(h=t[c.name]);var f=T(h,l,!0,c.controllerAs);s[c.name]=f,e.data("$"+c.name+"Controller",f.instance)}return s}(_,S,v,b,d,t,A)),A&&(ae.$$addScopeInfo(_,d,!0,!(w&&(w===A||w===A.$$originalDirective))),ae.$$addScopeClass(_,!0),d.$$isolateBindings=A.$$isolateBindings,(E=Be(t,S,d,d.$$isolateBindings,A)).removeWatches&&d.$on("$destroy",E.removeWatches)),m){var D=b[I],N=m[I],P=D.$$bindings.bindToController;N.instance=N(),_.data("$"+D.name+"Controller",N.instance),N.bindingInfo=Be(g,S,N.instance,P,D)}for(C(b,function(e,t){var n=e.require;e.bindToController&&!W(n)&&B(n)&&x(m[t].instance,be(t,n,_,m))}),C(m,function(e){var t=e.instance;if(z(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){p(e)}if(z(t.$onInit))try{t.$onInit()}catch(e){p(e)}z(t.$doCheck)&&(g.$watch(function(){t.$doCheck()}),t.$doCheck()),z(t.$onDestroy)&&g.$on("$destroy",function(){t.$onDestroy()})}),l=0,h=u.length;l<h;l++)Le(f=u[l],f.isolateScope?d:t,_,S,f.require&&be(f.directiveName,f.require,_,m),v);var O=t;for(A&&(A.template||null===A.templateUrl)&&(O=d),e&&e(O,r.childNodes,void 0,s),l=c.length-1;l>=0;l--)Le(f=c[l],f.isolateScope?d:t,_,S,f.require&&be(f.directiveName,f.require,_,m),v);C(m,function(e){var t=e.instance;z(t.$postLink)&&t.$postLink()})}}function be(e,t,n,i){var r;if(V(t)){var o=t.match(l),a=t.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():r=(r=i&&i[a])&&r.instance,!r){var c="$"+a+"Controller";r="^^"===s&&n[0]&&n[0].nodeType===He?null:s?n.inheritedData(c):n.data(c)}if(!r&&!u)throw dn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,e)}else if(W(t)){r=[];for(var h=0,f=t.length;h<f;h++)r[h]=be(e,t[h],n,i)}else B(t)&&(r={},C(t,function(t,o){r[o]=be(e,t,n,i)}));return r||null}function Ae(e,t,n){for(var i=0,r=e.length;i<r;i++)e[i]=O(e[i],{$$isolateScope:t,$$newScope:n})}function _e(e,n,o,a,s,u,c){if(n===s)return null;var l=null;if(i.hasOwnProperty(n))for(var h,f=t.get(n+r),d=0,p=f.length;d<p;d++)if(h=f[d],(F(a)||a>h.priority)&&-1!==h.restrict.indexOf(o)){if(u&&(h=O(h,{$$start:u,$$end:c})),!h.$$bindings){var g=h.$$bindings=m(h,h.name);B(g.isolateScope)&&(h.$$isolateBindings=g.isolateScope)}e.push(h),l=h}return l}function Ce(e){if(i.hasOwnProperty(e))for(var n=t.get(e+r),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function Se(e,t){var n=t.$attr,i=e.$attr;C(e,function(i,r){"$"!==r.charAt(0)&&(t[r]&&t[r]!==i&&(i.length?i+=("style"===r?";":" ")+t[r]:i=t[r]),e.$set(r,i,!0,n[r]))}),C(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function Ee(e,t,n,i,r,o,s,u){var c,l,h=[],f=t[0],d=e.shift(),m=O(d,{templateUrl:null,transclude:null,replace:null,$$originalDirective:d}),v=z(d.templateUrl)?d.templateUrl(t,n):d.templateUrl,y=d.templateNamespace;return t.empty(),g(v).then(function(p){var g,b,A,w;if(p=te(p),d.replace){if(A=ut(p)?[]:wn(Ie(y,ee(p))),g=A[0],1!==A.length||g.nodeType!==je)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d.name,v);b={$attr:{}},Me(i,t,g);var _=pe(g,[],b);B(d.scope)&&Ae(_,!0),e=_.concat(e),Se(n,b)}else g=f,t.html(p);for(e.unshift(m),c=ye(e,g,n,r,t,d,o,s,u),C(i,function(e,n){e===g&&(i[n]=t[0])}),l=ce(t[0].childNodes,r);h.length;){var S=h.shift(),E=h.shift(),T=h.shift(),k=h.shift(),I=t[0];if(!S.$$destroyed){if(E!==f){var x=E.className;u.hasElementTranscludeDirective&&d.replace||(I=dt(g)),Me(T,a(E),I),Q(a(I),x)}w=c.transcludeOnThisElement?he(S,c.transclude,k):k,c(l,S,I,i,w)}}h=null}).catch(function(e){G(e)&&p(e)}),function(e,t,n,i,r){var o=r;t.$$destroyed||(h?h.push(t,n,i,o):(c.transcludeOnThisElement&&(o=he(t,c.transclude,r)),c(l,t,n,i,o)))}}function Te(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ke(e,t,n,i){function r(e){return e?" (module: "+e+")":""}if(t)throw dn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,r(t.$$moduleName),n.name,r(n.$$moduleName),e,we(i))}function Ie(t,n){switch(t=f(t||"html")){case"svg":case"math":var i=e.document.createElement("div");return i.innerHTML="<"+t+">"+n+"</"+t+">",i.childNodes[0].childNodes;default:return n}}function xe(e){return H(I.valueOf(e),"ng-prop-srcset")}function De(e,t,n,i){if(d.test(i))throw dn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var r=ie(e),o=function(e,t){var n=t.toLowerCase();return S[e+"|"+n]||S["*|"+n]}(r,i),a=R;"srcset"!==i||"img"!==r&&"source"!==r?o&&(a=I.getTrusted.bind(I,o)):a=xe,t.push({priority:100,compile:function(e,t){var r=E(t[n]),o=E(t[n],function(e){return I.valueOf(e)});return{pre:function(e,t){function n(){var n=r(e);t[0][i]=a(n)}n(),e.$watch(o,n)}}}})}function Ne(e,t,n){e.push(Fo(E,k,p,t,n,!1))}function Pe(e,t,i,r,o){var a=ie(e),s=function(e,t){return"srcdoc"===t?I.HTML:"src"===t||"ngSrc"===t?-1===["img","video","audio","source","track"].indexOf(e)?I.RESOURCE_URL:I.MEDIA_URL:"xlinkHref"===t?"image"===e?I.MEDIA_URL:"a"===e?I.URL:I.RESOURCE_URL:"form"===e&&"action"===t||"base"===e&&"href"===t||"link"===e&&"href"===t?I.RESOURCE_URL:"a"!==e||"href"!==t&&"ngHref"!==t?void 0:I.URL}(a,r),u=!o,l=c[r]||o,h=n(i,u,s,l);if(h){if("multiple"===r&&"select"===a)throw dn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",we(e));if(d.test(r))throw dn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");t.push({priority:100,compile:function(){return{pre:function(e,t,o){var a=o.$$observers||(o.$$observers=Ue()),u=o[r];u!==i&&(h=u&&n(u,!0,s,l),i=u),h&&(o[r]=h(e),(a[r]||(a[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||e).$watch(h,function(e,t){"class"===r&&e!==t?o.$updateClass(e,t):o.$set(r,e)}))}}}})}}function Me(t,n,i){var r,o,s=n[0],u=n.length,c=s.parentNode;if(t)for(r=0,o=t.length;r<o;r++)if(t[r]===s){t[r++]=i;for(var l=r,h=l+u-1,f=t.length;l<f;l++,h++)h<f?t[l]=t[h]:delete t[l];t.length-=u-1,t.context===s&&(t.context=i);break}c&&c.replaceChild(i,s);var d=e.document.createDocumentFragment();for(r=0;r<u;r++)d.appendChild(n[r]);for(a.hasData(s)&&(a.data(i,a.data(s)),a(s).off("$destroy")),a.cleanData(d.querySelectorAll("*")),r=1;r<u;r++)delete n[r];n[0]=i,n.length=1}function $e(e,t){return x(function(){return e.apply(null,arguments)},e,t)}function Le(e,t,n,i,r,o){try{e(t,n,i,r,o)}catch(e){p(e,we(n))}}function Fe(e,t){if(b)throw dn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function Be(e,t,i,r,o){var a,s=[],u={};function c(t,n,r){z(i.$onChanges)&&!se(n,r)&&(N||(e.$$postDigest(q),N=[]),a||(a={},N.push(l)),a[t]&&(r=a[t].previousValue),a[t]=new mn(r,n))}function l(){i.$onChanges(a),a=void 0}return C(r,function(r,a){var l,f,d,p,g,m=r.attrName,v=r.optional;switch(r.mode){case"@":v||h.call(t,m)||(Fe(m,o.name),i[a]=t[m]=void 0),g=t.$observe(m,function(e){if(V(e)||X(e)){var t=i[a];c(a,e,t),i[a]=e}}),t.$$observers[m].$$scope=e,V(l=t[m])?i[a]=n(l)(e):X(l)&&(i[a]=l),u[a]=new mn(pn,i[a]),s.push(g);break;case"=":if(!h.call(t,m)){if(v)break;Fe(m,o.name),t[m]=void 0}if(v&&!t[m])break;f=E(t[m]),p=f.literal?ue:se,d=f.assign||function(){throw l=i[a]=f(e),dn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[m],m,o.name)},l=i[a]=f(e);var y=function(t){return p(t,i[a])||(p(t,l)?d(e,t=i[a]):i[a]=t),l=t};y.$stateful=!0,g=r.collection?e.$watchCollection(t[m],y):e.$watch(E(t[m],y),null,f.literal),s.push(g);break;case"<":if(!h.call(t,m)){if(v)break;Fe(m,o.name),t[m]=void 0}if(v&&!t[m])break;var b=(f=E(t[m])).literal,A=i[a]=f(e);u[a]=new mn(pn,i[a]),g=e[r.collection?"$watchCollection":"$watch"](f,function(e,t){if(t===e){if(t===A||b&&ue(t,A))return;t=A}c(a,e,t),i[a]=e}),s.push(g);break;case"&":if(v||h.call(t,m)||Fe(m,o.name),(f=t.hasOwnProperty(m)?E(t[m]):M)===M&&v)break;i[a]=function(t){return f(e,t)}}}),{initialChanges:u,removeWatches:s.length&&function(){for(var e=0,t=s.length;e<t;++e)s[e]()}}}}]}function mn(e,t){this.previousValue=e,this.currentValue=t}gn.$inject=["$provide","$$sanitizeUriProvider"],mn.prototype.isFirstChange=function(){return this.previousValue===pn};var vn=/^((?:x|data)[:\-_])/i,yn=/[:\-_]+(.)/g;function bn(e){return e.replace(vn,"").replace(yn,function(e,t,n){return n?t.toUpperCase():t})}function An(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a===r[s])continue e;n+=(n.length>0?" ":"")+a}return n}function wn(e){var t=(e=a(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===qe||n.nodeType===Ve&&""===n.nodeValue.trim())&&g.call(e,t,1)}return e}var _n=r("$controller"),Cn=/^(\S+)(\s+as\s+([\w$]+))?$/;function Sn(){var e={};this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){Le(t,"controller"),B(t)?x(e,t):e[t]=n},this.$get=["$injector",function(t){return function(i,r,o,a){var s,u,c,l;if(o=!0===o,a&&V(a)&&(l=a),V(i)){if(!(u=i.match(Cn)))throw _n("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(c=u[1],l=l||u[3],!(i=e.hasOwnProperty(c)?e[c]:function(e,t,n){if(!t)return e;for(var i,r=t.split("."),o=e,a=r.length,s=0;s<a;s++)i=r[s],e&&(e=(o=e)[i]);return!n&&z(e)?de(o,e):e}(r.$scope,c,!0)))throw _n("ctrlreg","The controller with the name '{0}' is not registered.",c);$e(i,c,!0)}if(o){var h=(W(i)?i[i.length-1]:i).prototype;return s=Object.create(h||null),l&&n(r,l,s,c||i.name),x(function(){var e=t.invoke(i,s,r,c);return e!==s&&(B(e)||z(e))&&(s=e,l&&n(r,l,s,c||i.name)),s},{instance:s,identifier:l})}return s=t.instantiate(i,r,c),l&&n(r,l,s,c||i.name),s};function n(e,t,n,i){if(!e||!B(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}}]}function En(){this.$get=["$window",function(e){return a(e.document)}]}function Tn(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],i=n&&n.hidden;function r(){i=n.hidden}return e.on("visibilitychange",r),t.$on("$destroy",function(){e.off("visibilitychange",r)}),function(){return i}}]}function kn(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}var In=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof a&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},xn="application/json",Dn={"Content-Type":xn+";charset=utf-8"},Nn=/^\[|^\{(?!\{)/,Pn={"[":/]$/,"{":/}$/},On=/^\)]\}',?\n/,Mn=r("$http");function Rn(e){return B(e)?H(e)?e.toISOString():ge(e):e}function $n(){this.$get=function(){return function(e){if(!e)return"";var t=[];return S(e,function(e,n){null===e||F(e)||z(e)||(W(e)?C(e,function(e){t.push(Ee(n)+"="+Ee(Rn(e)))}):t.push(Ee(n)+"="+Ee(Rn(e))))}),t.join("&")}}}function Ln(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function e(n,i,r){W(n)?C(n,function(t,n){e(t,i+"["+(B(t)?n:"")+"]")}):B(n)&&!H(n)?S(n,function(t,n){e(t,i+(r?"":"[")+n+(r?"":"]"))}):(z(n)&&(n=n()),t.push(Ee(i)+"="+(null==n?"":Ee(Rn(n)))))}(e,"",!0),t.join("&")}}}function Fn(e,t){if(V(e)){var n=e.replace(On,"").trim();if(n){var i=t("Content-Type"),r=i&&0===i.indexOf(xn);if(r||(a=(o=n).match(Nn))&&Pn[a[0]].test(o))try{e=me(n)}catch(t){if(!r)return e;throw Mn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}var o,a;return e}function Un(e){var t,n=Ue();function i(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return V(e)?C(e.split("\n"),function(e){t=e.indexOf(":"),i(f(ee(e.substr(0,t))),ee(e.substr(t+1)))}):B(e)&&C(e,function(e,t){i(f(t),ee(e))}),n}function Bn(e){var t;return function(n){if(t||(t=Un(e)),n){var i=t[f(n)];return void 0===i&&(i=null),i}return t}}function jn(e,t,n,i){return z(i)?i(e,t,n):(C(i,function(i){e=i(e,t,n)}),e)}function Vn(e){return 200<=e&&e<300}function qn(){var e=this.defaults={transformResponse:[Fn],transformRequest:[function(e){return!B(e)||(t=e,"[object File]"===v.call(t))||function(e){return"[object Blob]"===v.call(e)}(e)||function(e){return"[object FormData]"===v.call(e)}(e)?e:ge(e);var t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ge(Dn),put:Ge(Dn),patch:Ge(Dn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return U(e)?(t=!!e,this):t};var n=this.interceptors=[],i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,u,c,l,h,p){var g=u("$http");e.paramSerializer=V(e.paramSerializer)?h.get(e.paramSerializer):e.paramSerializer;var m=[];C(n,function(e){m.unshift(V(e)?h.get(e):h.invoke(e))});var v,y=(v=[sr].concat(i.map(cr)),function(e){var t=cr(e);return v.some(lr.bind(null,t))});function b(n){if(!B(n))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!V(p.valueOf(n.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var i=x({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);i.headers=function(t){var n,i,r,o=e.headers,a=x({},t.headers);o=x({},o.common,o[f(t.method)]);e:for(n in o){for(r in i=f(n),a)if(f(r)===i)continue e;a[n]=o[n]}return function(e,t){var n,i={};return C(e,function(e,r){z(e)?null!=(n=e(t))&&(i[r]=n):i[r]=e}),i}(a,Ge(t))}(n),i.method=d(i.method),i.paramSerializer=V(i.paramSerializer)?h.get(i.paramSerializer):i.paramSerializer,o.$$incOutstandingRequestCount("$http");var u=[],v=[],A=l.resolve(i);return C(m,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&v.push(e.response,e.responseError)}),A=(A=w(A=(A=w(A,u)).then(function(n){var i=n.headers,r=jn(n.data,Bn(i),void 0,n.transformRequest);F(r)&&C(i,function(e,t){"content-type"===f(t)&&delete i[t]});F(n.withCredentials)&&!F(e.withCredentials)&&(n.withCredentials=e.withCredentials);return function(n,i){var r,o,u=l.defer(),h=u.promise,d=n.headers,m="jsonp"===f(n.method),v=n.url;m?v=p.getTrustedResourceUrl(v):V(v)||(v=p.valueOf(v));v=function(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}(v,n.paramSerializer(n.params)),m&&(v=function(e,t){var n=e.split("?");if(n.length>2)throw Mn("badjsonp",'Illegal use more than one "?", in url, "{1}"',e);return C(Ce(n[1]),function(n,i){if("JSON_CALLBACK"===n)throw Mn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(i===t)throw Mn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e)}),e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}(v,n.jsonpCallbackParam));b.pendingRequests.push(n),h.then(E,E),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(r=B(n.cache)?n.cache:B(e.cache)?e.cache:g);r&&(U(o=r.get(v))?J(o)?o.then(S,S):W(o)?_(o[1],o[0],Ge(o[2]),o[3],o[4]):_(o,200,{},"OK","complete"):r.put(v,h));if(F(o)){var A=y(n.url)?s()[n.xsrfCookieName||e.xsrfCookieName]:void 0;A&&(d[n.xsrfHeaderName||e.xsrfHeaderName]=A),a(n.method,v,i,function(e,n,i,o,a){r&&(Vn(e)?r.put(v,[e,n,Un(i),o,a]):r.remove(v));function s(){_(n,e,i,o,a)}t?c.$applyAsync(s):(s(),c.$$phase||c.$apply())},d,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return h;function w(e){if(e){var n={};return C(e,function(e,i){n[i]=function(n){function i(){e(n)}t?c.$applyAsync(i):c.$$phase?i():c.$apply(i)}}),n}}function _(e,t,i,r,o){(Vn(t=t>=-1?t:0)?u.resolve:u.reject)({data:e,status:t,headers:Bn(i),config:n,statusText:r,xhrStatus:o})}function S(e){_(e.data,e.status,Ge(e.headers()),e.statusText,e.xhrStatus)}function E(){var e=b.pendingRequests.indexOf(n);-1!==e&&b.pendingRequests.splice(e,1)}}(n,r).then(_,_)}),v)).finally(function(){o.$$completeOutstandingRequest(M,"$http")});function w(e,t){for(var n=0,i=t.length;n<i;){var r=t[n++],o=t[n++];e=e.then(r,o)}return t.length=0,e}function _(e){var t=x({},e);return t.data=jn(e.data,e.headers,e.status,i.transformResponse),Vn(e.status)?t:l.reject(t)}}return b.pendingRequests=[],function(e){C(arguments,function(e){b[e]=function(t,n){return b(x({},n||{},{method:e,url:t}))}})}("get","delete","head","jsonp"),function(e){C(arguments,function(e){b[e]=function(t,n,i){return b(x({},i||{},{method:e,url:t,data:n}))}})}("post","put","patch"),b.defaults=e,b}]}function Hn(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Wn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,i){return function(e,t,n,i,r){return function(o,a,s,u,c,l,h,d,p,g){if(a=a||e.url(),"jsonp"===f(o))var m=i.createCallback(a),v=function(e,t,n){e=e.replace("JSON_CALLBACK",t);var o=r.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){o.removeEventListener("load",a),o.removeEventListener("error",a),r.body.removeChild(o),o=null;var s=-1,u="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},o.addEventListener("load",a),o.addEventListener("error",a),r.body.appendChild(o),a}(a,m,function(e,t){var n=200===e&&i.getResponse(m);_(u,e,n,"",t,"complete"),i.removeCallback(m)});else{var y=t(o,a),b=!1;y.open(o,a,!0),C(c,function(e,t){U(e)&&y.setRequestHeader(t,e)}),y.onload=function(){var e=y.statusText||"",t="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=t?200:"file"===cr(a).protocol?404:0),_(u,n,t,y.getAllResponseHeaders(),e,"complete")};if(y.onerror=function(){_(u,-1,null,null,"","error")},y.ontimeout=function(){_(u,-1,null,null,"","timeout")},y.onabort=function(){_(u,-1,null,null,"",b?"timeout":"abort")},C(p,function(e,t){y.addEventListener(t,e)}),C(g,function(e,t){y.upload.addEventListener(t,e)}),h&&(y.withCredentials=!0),d)try{y.responseType=d}catch(e){if("json"!==d)throw e}y.send(F(s)?null:s)}if(l>0)var A=n(function(){w("timeout")},l);else J(l)&&l.then(function(){w(U(l.$$timeoutId)?"timeout":"abort")});function w(e){b="timeout"===e,v&&v(),y&&y.abort()}function _(e,t,i,r,o,a){U(A)&&n.cancel(A),v=y=null,e(t,i,r,o,a)}}}(e,i,e.defer,t,n[0])}]}var Gn=A.$interpolateMinErr=r("$interpolate");function zn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=e.length,a=t.length,s=new RegExp(e.replace(/./g,c),"g"),u=new RegExp(t.replace(/./g,c),"g");function c(e){return"\\\\\\"+e}function l(n){return n.replace(s,e).replace(u,t)}function h(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function f(s,u,c,f){var d=c===r.URL||c===r.MEDIA_URL;if(!s.length||-1===s.indexOf(e)){if(u)return;var p=l(s);d&&(p=r.getTrusted(c,p));var g=$(p);return g.exp=s,g.expressions=[],g.$$watchDelegate=h,g}f=!!f;for(var m,v,y,b,A,w=0,_=[],C=s.length,S=[],E=[];w<C;){if(-1===(m=s.indexOf(e,w))||-1===(v=s.indexOf(t,m+o))){w!==C&&S.push(l(s.substring(w)));break}w!==m&&S.push(l(s.substring(w,m))),b=s.substring(m+o,v),_.push(b),w=v+a,E.push(S.length),S.push("")}A=1===S.length&&1===E.length;var T=d&&A?void 0:function(e){try{return e=c&&!d?r.getTrusted(c,e):r.valueOf(e),f&&!U(e)?e:Be(e)}catch(e){i(Gn.interr(s,e))}};if(y=_.map(function(e){return n(e,T)}),!u||_.length){var k=function(e){for(var t=0,n=_.length;t<n;t++){if(f&&F(e[t]))return;S[E[t]]=e[t]}return d?r.getTrusted(c,A?S[0]:S.join("")):(c&&S.length>1&&Gn.throwNoconcat(s),S.join(""))};return x(function(e){var t=0,n=_.length,r=new Array(n);try{for(;t<n;t++)r[t]=y[t](e);return k(r)}catch(e){i(Gn.interr(s,e))}},{exp:s,expressions:_,$$watchDelegate:function(e,t){var n;return e.$watchGroup(y,function(i,r){var o=k(i);t.call(this,o,i!==r?n:o,e),n=o})}})}}return f.startSymbol=function(){return e},f.endSymbol=function(){return t},f}]}Gn.throwNoconcat=function(e){throw Gn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Gn.interr=function(e,t){return Gn("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Kn=r("$interval");function Qn(){this.$get=["$$intervalFactory","$window",function(e,t){var n={},i=function(e){t.clearInterval(e),delete n[e]},r=e(function(e,i,r){var o=t.setInterval(e,i);return n[o]=r,o},i);return r.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$intervalId"))throw Kn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(e.$$intervalId))return!1;var t=e.$$intervalId,r=n[t];return ji(r.promise),r.reject("canceled"),i(t),!0},r}]}function Yn(){this.$get=["$browser","$q","$$q","$rootScope",function(e,t,n,i){return function(r,o){return function(a,s,u,c){var l=arguments.length>4,h=l?fe(arguments,4):[],f=0,d=U(c)&&!c,p=(d?n:t).defer(),g=p.promise;function m(){l?a.apply(null,h):a(f)}return u=U(u)?u:0,g.$$intervalId=r(function(){d?e.defer(m):i.$evalAsync(m),p.notify(f++),u>0&&f>=u&&(p.resolve(f),o(g.$$intervalId)),d||i.$apply()},s,p,d),g}}}]}var Xn=function(){this.$get=function(){var e=A.callbacks,t={};return{createCallback:function(n){var i="_"+(e.$$counter++).toString(36),r="angular.callbacks."+i,o=function(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}(i);return t[r]=e[i]=o,r},wasCalled:function(e){return t[e].called},getResponse:function(e){return t[e].data},removeCallback:function(n){var i=t[n];delete e[i.id],delete t[n]}}}},Jn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Zn={http:80,https:443,ftp:21},ei=r("$location");function ti(e,t,n){var i,r=(i=[],C(t,function(e,t){W(e)?C(e,function(e){i.push(Ee(t,!0)+(!0===e?"":"="+Ee(e,!0)))}):i.push(Ee(t,!0)+(!0===e?"":"="+Ee(e,!0)))}),i.length?i.join("&"):""),o=n?"#"+Se(n):"";return function(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Se(t[n].replace(/%2F/g,"/"));return t.join("/")}(e)+(r?"?"+r:"")+o}function ni(e,t){var n=cr(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=N(n.port)||Zn[n.protocol]||null}var ii=/^\s*[\\/]{2,}/;function ri(e,t,n){if(ii.test(e))throw ei("badpath",'Invalid url "{0}".',e);var i="/"!==e.charAt(0);i&&(e="/"+e);var r=cr(e),o=i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname;t.$$path=function(e,t){for(var n=e.split("/"),i=n.length;i--;)n[i]=decodeURIComponent(n[i]),t&&(n[i]=n[i].replace(/\//g,"%2F"));return n.join("/")}(o,n),t.$$search=Ce(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function oi(e,t){return e.slice(0,t.length)===t}function ai(e,t){if(oi(t,e))return t.substr(e.length)}function si(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function ui(e,t,n){this.$$html5=!0,n=n||"",ni(e,this),this.$$parse=function(e){var n=ai(t,e);if(!V(n))throw ei("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);ri(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(e){return t+e.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(U(o=ai(e,i))?(a=o,s=n&&U(o=ai(n,o))?t+(ai("/",o)||o):e+a):U(o=ai(t,i))?s=t+o:t===i+"/"&&(s=t),s&&this.$$parse(s),!!s);var o,a,s}}function ci(e,t,n){ni(e,this),this.$$parse=function(i){var r,o=ai(e,i)||ai(t,i);F(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",F(o)&&(e=i,this.replace())):F(r=ai(n,o))&&(r=o),ri(r,this,!1),this.$$path=function(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;oi(t,n)&&(t=t.replace(n,""));if(r.exec(t))return e;return(i=r.exec(e))?i[1]:e}(this.$$path,r,e),this.$$compose()},this.$$normalizeUrl=function(t){return e+(t?n+t:"")},this.$$parseLinkUrl=function(t,n){return si(e)===si(t)&&(this.$$parse(t),!0)}}function li(e,t,n){this.$$html5=!0,ci.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(e===si(i)?o=i:(a=ai(t,i))?o=e+n+a:t===i+"/"&&(o=t),o&&this.$$parse(o),!!o);var o,a},this.$$normalizeUrl=function(t){return e+n+t}}var hi={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=ti(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:fi("$$absUrl"),url:function(e){if(F(e))return this.$$url;var t=Jn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:fi("$$protocol"),host:fi("$$host"),port:fi("$$port"),path:di("$$path",function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(V(e)||q(e))e=e.toString(),this.$$search=Ce(e);else{if(!B(e))throw ei("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");C(e=ae(e,{}),function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:F(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:di("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};function fi(e){return function(){return this[e]}}function di(e,t){return function(n){return F(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function pi(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return U(t)?(e=t,this):e},this.html5Mode=function(e){return X(e)?(t.enabled=e,this):B(e)?(X(e.enabled)&&(t.enabled=e.enabled),X(e.requireBase)&&(t.requireBase=e.requireBase),(X(e.rewriteLinks)||V(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){var u,c,l,h,f=i.baseHref(),d=i.url();if(t.enabled){if(!f&&t.requireBase)throw ei("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=(h=d).substring(0,h.indexOf("/",h.indexOf("//")+2))+(f||"/"),c=r.history?ui:li}else l=si(d),c=ci;var p=function(e){return e.substr(0,si(e).lastIndexOf("/")+1)}(l);(u=new c(l,p,"#"+e)).$$parseLinkUrl(d,d),u.$$state=i.state();var g=/^\s*(javascript|mailto):/i;function m(e,t,n){var r=u.url(),o=u.$$state;try{i.url(e,t,n),u.$$state=i.state()}catch(e){throw u.url(r),u.$$state=o,e}}o.on("click",function(e){var r=t.rewriteLinks;if(r&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=a(e.target);"a"!==ie(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!V(r)||!F(s.attr(r))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");B(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=cr(c.animVal).href),g.test(c)||!c||s.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(e.preventDefault(),u.absUrl()!==i.url()&&n.$apply())}}}),u.absUrl()!==d&&i.url(u.absUrl(),!0);var v=!0;return i.onUrlChange(function(e,t){oi(e,p)?(n.$evalAsync(function(){var i,r=u.absUrl(),o=u.$$state;u.$$parse(e),u.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,o).defaultPrevented,u.absUrl()===e&&(i?(u.$$parse(r),u.$$state=o,m(r,!1,o)):(v=!1,y(r,o)))}),n.$$phase||n.$digest()):s.location.href=e}),n.$watch(function(){if(v||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var e=i.url(),t=u.absUrl(),o=i.state(),a=u.$$replace,s=!((c=e)===(l=t)||cr(c).href===cr(l).href)||u.$$html5&&r.history&&o!==u.$$state;(v||s)&&(v=!1,n.$evalAsync(function(){var t=u.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,u.$$state,o).defaultPrevented;u.absUrl()===t&&(i?(u.$$parse(e),u.$$state=o):(s&&m(t,a,o===u.$$state?null:u.$$state),y(e,o)))}))}var c,l;u.$$replace=!1}),u;function y(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}}]}function gi(){var e=!0,t=this;this.debugEnabled=function(t){return U(t)?(e=t,this):e},this.$get=["$window",function(n){var i,r=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(i=a("debug"),function(){e&&i.apply(t,arguments)})};function a(e){var t=n.console||{},i=t[e]||t.log||M;return function(){var e=[];return C(arguments,function(t){e.push(function(e){return G(e)&&(e.stack&&r?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}(t))}),Function.prototype.apply.call(i,t,e)}}}]}C([li,ci,ui],function(e){e.prototype=Object.create(hi),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==ui||!this.$$html5)throw ei("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=F(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var mi=r("$parse"),vi={}.constructor.prototype.valueOf;function yi(e){return e+""}var bi=Ue();C("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){bi[e]=!0});var Ai={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wi=function(e){this.options=e};wi.prototype={constructor:wi,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=bi[t],o=bi[n],a=bi[i];if(r||o||a){var s=a?i:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),i=t.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=U(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw mi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=f(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=Ai[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var _i=function(e,t){this.lexer=e,this.options=t};function Ci(e,t){return void 0!==e?e:t}function Si(e,t){return void 0===e?t:void 0===t?e:e+t}_i.Program="Program",_i.ExpressionStatement="ExpressionStatement",_i.AssignmentExpression="AssignmentExpression",_i.ConditionalExpression="ConditionalExpression",_i.LogicalExpression="LogicalExpression",_i.BinaryExpression="BinaryExpression",_i.UnaryExpression="UnaryExpression",_i.CallExpression="CallExpression",_i.MemberExpression="MemberExpression",_i.Identifier="Identifier",_i.Literal="Literal",_i.ArrayExpression="ArrayExpression",_i.Property="Property",_i.ObjectExpression="ObjectExpression",_i.ThisExpression="ThisExpression",_i.LocalsExpression="LocalsExpression",_i.NGValueParameter="NGValueParameter",_i.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:_i.Program,body:e}},expressionStatement:function(){return{type:_i.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!xi(e))throw mi("lval","Trying to assign a value to a non l-value");e={type:_i.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:_i.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:_i.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:_i.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:_i.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:_i.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:_i.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:_i.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:_i.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=ae(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:_i.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:_i.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:_i.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:_i.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:_i.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:_i.Identifier,name:e.text}},constant:function(){return{type:_i.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:_i.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:_i.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:_i.ObjectExpression,properties:t}},throwError:function(e,t){throw mi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw mi("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw mi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===i||a===r||!t&&!n&&!i&&!r)return o}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:_i.ThisExpression},$locals:{type:_i.LocalsExpression}}};var Ei=1,Ti=2;function ki(e,t,n){var i,r,o,a=e.isPure=function(e,t){switch(e.type){case _i.MemberExpression:if(e.computed)return!1;break;case _i.UnaryExpression:return Ei;case _i.BinaryExpression:return"+"!==e.operator&&Ei;case _i.CallExpression:return!1}return void 0===t?Ti:t}(e,n);switch(e.type){case _i.Program:i=!0,C(e.body,function(e){ki(e.expression,t,a),i=i&&e.expression.constant}),e.constant=i;break;case _i.Literal:e.constant=!0,e.toWatch=[];break;case _i.UnaryExpression:ki(e.argument,t,a),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case _i.BinaryExpression:ki(e.left,t,a),ki(e.right,t,a),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case _i.LogicalExpression:ki(e.left,t,a),ki(e.right,t,a),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case _i.ConditionalExpression:ki(e.test,t,a),ki(e.alternate,t,a),ki(e.consequent,t,a),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case _i.Identifier:e.constant=!1,e.toWatch=[e];break;case _i.MemberExpression:ki(e.object,t,a),e.computed&&ki(e.property,t,a),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case _i.CallExpression:o=!!e.filter&&function(e,t){return!e(t).$stateful}(t,e.callee.name),i=o,r=[],C(e.arguments,function(e){ki(e,t,a),i=i&&e.constant,r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=o?r:[e];break;case _i.AssignmentExpression:ki(e.left,t,a),ki(e.right,t,a),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case _i.ArrayExpression:i=!0,r=[],C(e.elements,function(e){ki(e,t,a),i=i&&e.constant,r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=r;break;case _i.ObjectExpression:i=!0,r=[],C(e.properties,function(e){ki(e.value,t,a),i=i&&e.value.constant,r.push.apply(r,e.value.toWatch),e.computed&&(ki(e.key,t,!1),i=i&&e.key.constant,r.push.apply(r,e.key.toWatch))}),e.constant=i,e.toWatch=r;break;case _i.ThisExpression:case _i.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Ii(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function xi(e){return e.type===_i.Identifier||e.type===_i.MemberExpression}function Di(e){if(1===e.body.length&&xi(e.body[0].expression))return{type:_i.AssignmentExpression,left:e.body[0].expression,right:{type:_i.NGValueParameter},operator:"="}}function Ni(e){this.$filter=e}function Pi(e){this.$filter=e}function Oi(e,t,n){this.ast=new _i(e,n),this.astCompiler=n.csp?new Pi(t):new Ni(t)}function Mi(e){return z(e.valueOf)?e.valueOf():vi.call(e)}function Ri(){var e,t,n=Ue(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){i[e]=t},this.setIdentifierFns=function(n,i){return e=n,t=i,this},this.$get=["$filter",function(r){var o={csp:ce().noUnsafeEval,literals:ae(i),isIdentifierStart:z(e)&&e,isIdentifierContinue:z(t)&&t};return a.$$getAst=function(e){return new Oi(new wi(o),r,o).getAst(e).ast},a;function a(e,t){var i,a;switch(typeof e){case"string":if(e=e.trim(),!(i=n[a=e]))i=new Oi(new wi(o),r,o).parse(e),n[a]=f(i);return d(i,t);case"function":return d(e,t);default:return d(M,t)}}function s(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Mi(e))&&!n)&&(e===t||e!=e&&t!=t)}function u(e,t,n,i,r){var o,a=i.inputs;if(1===a.length){var u=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,u,a.isPure)||(o=i(e,void 0,void 0,[t]),u=t&&Mi(t)),o},t,n,r)}for(var c=[],l=[],h=0,f=a.length;h<f;h++)c[h]=s,l[h]=null;return e.$watch(function(e){for(var t=!1,n=0,r=a.length;n<r;n++){var u=a[n](e);(t||(t=!s(u,c[n],a[n].isPure)))&&(l[n]=u,c[n]=u&&Mi(u))}return t&&(o=i(e,void 0,void 0,l)),o},t,n,r)}function c(e,t,n,i,r){var o,a,s=i.literal?l:U,u=i.$$intercepted||i,c=i.$$interceptor||R,h=i.inputs&&!u.inputs;return p.literal=i.literal,p.constant=i.constant,p.inputs=i.inputs,f(p),o=e.$watch(p,t,n,r);function d(){s(a)&&o()}function p(e,t,n,i){return a=h&&i?i[0]:u(e,t,n,i),s(a)&&e.$$postDigest(d),c(a)}}function l(e){var t=!0;return C(e,function(e){U(e)||(t=!1)}),t}function h(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function f(e){return e.constant?e.$$watchDelegate=h:e.oneTime?e.$$watchDelegate=c:e.inputs&&(e.$$watchDelegate=u),e}function d(e,t){if(!t)return e;e.$$interceptor&&(t=function(e,t){function n(n){return t(e(n))}return n.$stateful=e.$stateful||t.$stateful,n.$$pure=e.$$pure&&t.$$pure,n}(e.$$interceptor,t),e=e.$$intercepted);var n=!1,i=function(i,r,o,a){var s=n&&a?a[0]:e(i,r,o,a);return t(s)};return i.$$intercepted=e,i.$$interceptor=t,i.literal=e.literal,i.oneTime=e.oneTime,i.constant=e.constant,t.$stateful||(n=!e.inputs,i.inputs=e.inputs?e.inputs:[e],t.$$pure||(i.inputs=i.inputs.map(function(e){return e.isPure===Ti?function(t){return e(t)}:e}))),f(i)}}]}function $i(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return Fi(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return U(t)?(e=t,this):e}}function Li(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return Fi(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return U(t)?(e=t,this):e}}function Fi(e,t,n){var i=r("$q",TypeError),o=0,a=[];function s(){return new function(){var e=this.promise=new u;this.resolve=function(t){h(e,t)},this.reject=function(t){f(e,t)},this.notify=function(t){p(e,t)}}}function u(){this.$$state={status:0}}function c(){for(;!o&&a.length;){var e=a.shift();if(!Ui(e)){Bi(e);var n="Possibly unhandled rejection: "+ze(e.value);G(e.value)?t(e.value,n):t(n)}}}function l(i){!n||i.pending||2!==i.status||Ui(i)||(0===o&&0===a.length&&e(c),a.push(i)),!i.processScheduled&&i.pending&&(i.processScheduled=!0,++o,e(function(){!function(i){var r,a,s;s=i.pending,i.processScheduled=!1,i.pending=void 0;try{for(var u=0,l=s.length;u<l;++u){Bi(i),a=s[u][0],r=s[u][i.status];try{z(r)?h(a,r(i.value)):1===i.status?h(a,i.value):f(a,i.value)}catch(e){f(a,e),e&&!0===e.$$passToExceptionHandler&&t(e)}}}finally{--o,n&&0===o&&e(c)}}(i)}))}function h(e,t){e.$$state.status||(t===e?d(e,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):function e(t,n){var i;var r=!1;try{(B(n)||z(n))&&(i=n.then),z(i)?(t.$$state.status=-1,i.call(n,function o(e){if(r)return;r=!0,function e(t,n){var i;var r=!1;try{(B(n)||z(n))&&(i=n.then),z(i)?(t.$$state.status=-1,i.call(n,o,a,function(e){p(t,e)})):(t.$$state.value=n,t.$$state.status=1,l(t.$$state))}catch(e){a(e)}function o(n){r||(r=!0,e(t,n))}function a(e){r||(r=!0,d(t,e))}}(t,e)},a,function(e){p(t,e)})):(t.$$state.value=n,t.$$state.status=1,l(t.$$state))}catch(e){a(e)}function o(n){r||(r=!0,e(t,n))}function a(e){r||(r=!0,d(t,e))}}(e,t))}function f(e,t){e.$$state.status||d(e,t)}function d(e,t){e.$$state.value=t,e.$$state.status=2,l(e.$$state)}function p(n,i){var r=n.$$state.pending;n.$$state.status<=0&&r&&r.length&&e(function(){for(var e,n,o=0,a=r.length;o<a;o++){n=r[o][0],e=r[o][3];try{p(n,z(e)?e(i):i)}catch(e){t(e)}}})}function g(e){var t=new u;return f(t,e),t}function m(e,t,n){var i=null;try{z(n)&&(i=n())}catch(e){return g(e)}return J(i)?i.then(function(){return t(e)},g):t(e)}function v(e,t,n,i){var r=new u;return h(r,e),r.then(t,n,i)}x(u.prototype,{then:function(e,t,n){if(F(e)&&F(t)&&F(n))return this;var i=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&l(this.$$state),i},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return m(t,y,e)},function(t){return m(t,g,e)},t)}});var y=v;function b(e){if(!z(e))throw i("norslvr","Expected resolverFn, got '{0}'",e);var t=new u;return e(function(e){h(t,e)},function(e){f(t,e)}),t}return b.prototype=u.prototype,b.defer=s,b.reject=g,b.when=v,b.resolve=y,b.all=function(e){var t=new u,n=0,i=W(e)?[]:{};return C(e,function(e,r){n++,v(e).then(function(e){i[r]=e,--n||h(t,i)},function(e){f(t,e)})}),0===n&&h(t,i),t},b.race=function(e){var t=s();return C(e,function(e){v(e).then(t.resolve,t.reject)}),t.promise},b}function Ui(e){return!!e.pur}function Bi(e){e.pur=!0}function ji(e){e.$$state&&Bi(e.$$state)}function Vi(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=r,o}]}function qi(){var e=10,t=r("$rootScope"),n=null,i=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$exceptionHandler","$parse","$browser",function(r,a,s){function u(e){e.currentScope.$$destroyed=!0}function c(){this.$id=T(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(e,t){var n;return t=t||this,e?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=T(),this.$$ChildScope=null,this.$$suspended=!1}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",u),n},$watch:function(e,t,i,r){var o=a(e),s=z(t)?t:M;if(o.$$watchDelegate)return o.$$watchDelegate(this,s,i,o,e);var u=this,c=u.$$watchers,l={fn:s,last:A,get:o,exp:r||e,eq:!!i};return n=null,c||((c=u.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,y(this,1),function(){var e=oe(c,l);e>=0&&(y(u,-1),e<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(e,t){var n=new Array(e.length),i=new Array(e.length),r=[],o=this,a=!1,s=!0;if(!e.length){var u=!0;return o.$evalAsync(function(){u&&t(i,i,o)}),function(){u=!1}}if(1===e.length)return this.$watch(e[0],function(e,r,o){i[0]=e,n[0]=r,t(i,e===r?i:n,o)});function c(){a=!1;try{s?(s=!1,t(i,i,o)):t(i,n,o)}finally{for(var r=0;r<e.length;r++)n[r]=i[r]}}return C(e,function(e,t){var n=o.$watch(e,function(e){i[t]=e,a||(a=!0,o.$evalAsync(c))});r.push(n)}),function(){for(;r.length;)r.shift()()}},$watchCollection:function(e,t){g.$$pure=a(e).literal,g.$stateful=!g.$$pure;var n,i,r,o=this,s=t.length>1,u=0,c=a(e,g),l=[],f={},d=!0,p=0;function g(e){var t,r,o,a;if(!F(n=e)){if(B(n))if(_(n)){i!==l&&(p=(i=l).length=0,u++),t=n.length,p!==t&&(u++,i.length=p=t);for(var s=0;s<t;s++)a=i[s],o=n[s],a!=a&&o!=o||a===o||(u++,i[s]=o)}else{for(r in i!==f&&(i=f={},p=0,u++),t=0,n)h.call(n,r)&&(t++,o=n[r],a=i[r],r in i?a!=a&&o!=o||a===o||(u++,i[r]=o):(p++,i[r]=o,u++));if(p>t)for(r in u++,i)h.call(n,r)||(p--,delete i[r])}else i!==n&&(i=n,u++);return u}}return this.$watch(c,function(){if(d?(d=!1,t(n,n,o)):t(n,r,o),s)if(B(n))if(_(n)){r=new Array(n.length);for(var e=0;e<n.length;e++)r[e]=n[e]}else for(var i in r={},n)h.call(n,i)&&(r[i]=n[i]);else r=n})},$digest:function(){var o,a,u,c,h,p,y,b,_,C=e,S=f.length?l:this,E=[];m("$digest"),s.$$checkUrlChange(),this===l&&null!==i&&(s.defer.cancel(i),w()),n=null;do{h=!1,y=S;for(var T=0;T<f.length;T++){try{(0,(_=f[T]).fn)(_.scope,_.locals)}catch(e){r(e)}n=null}f.length=0;e:do{if(c=!y.$$suspended&&y.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((a=(0,o.get)(y))===(u=o.last)||(o.eq?ue(a,u):P(a)&&P(u))){if(o===n){h=!1;break e}}else h=!0,n=o,o.last=o.eq?ae(a,null):a,(0,o.fn)(a,u===A?a:u,y),C<5&&(E[b=4-C]||(E[b]=[]),E[b].push({msg:z(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:a,oldVal:u}))}catch(e){r(e)}if(!(p=!y.$$suspended&&y.$$watchersCount&&y.$$childHead||y!==S&&y.$$nextSibling))for(;y!==S&&!(p=y.$$nextSibling);)y=y.$parent}while(y=p);if((h||f.length)&&!C--)throw v(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,E)}while(h||f.length);for(v();g<d.length;)try{d[g++]()}catch(e){r(e)}d.length=g=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===l&&s.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=M,this.$on=this.$watch=this.$watchGroup=function(){return M},this.$$listeners={},this.$$nextSibling=null,function e(t){9===o&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e,t){l.$$phase||f.length||s.defer(function(){f.length&&l.$digest()},null,"$evalAsync"),f.push({scope:this,fn:a(e),locals:t})},$$postDigest:function(e){d.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{v()}}catch(e){r(e)}finally{try{l.$digest()}catch(e){throw r(e),e}}},$applyAsync:function(e){var t=this;e&&p.push(function(){t.$eval(e)}),e=a(e),null===i&&(i=s.defer(function(){l.$apply(w)},null,"$applyAsync"))},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do{i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(delete n[i],b(r,1,e))}},$emit:function(e,t){var n,i,o,a=[],s=this,u=!1,c={name:e,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=he([c],arguments,1);do{for(n=s.$$listeners[e]||a,c.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,l)}catch(e){r(e)}else n.splice(i,1),i--,o--;if(u)break;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,i=this,o={name:e,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return o;for(var a,s,u,c=he([o],arguments,1);n=i;){for(o.currentScope=n,s=0,u=(a=n.$$listeners[e]||[]).length;s<u;s++)if(a[s])try{a[s].apply(null,c)}catch(e){r(e)}else a.splice(s,1),s--,u--;if(!(i=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var l=new c,f=l.$$asyncQueue=[],d=l.$$postDigestQueue=[],p=l.$$applyAsyncQueue=[],g=0;return l;function m(e){if(l.$$phase)throw t("inprog","{0} already in progress",l.$$phase);l.$$phase=e}function v(){l.$$phase=null}function y(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function b(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function A(){}function w(){for(;p.length;)try{p.shift()()}catch(e){r(e)}i=null}}]}function Hi(){var e=/^\s*(https?|s?ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return U(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return U(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r=i?t:e,o=cr(n&&n.trim()).href;return""===o||o.match(r)?n:"unsafe:"+o}}}Ni.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},ki(e,t.$filter);var n,i="";if(this.stage="assign",n=Di(e)){this.state.computing="assign";var r=this.nextId();this.recurse(n,r),this.return_(r),i="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Ii(e.body);t.stage="inputs",C(o,function(e,n){var i="fn"+n;t.state[i]={vars:[],body:[],own:{}},t.state.computing=i;var r=t.nextId();t.recurse(e,r),t.return_(r),t.state.inputs.push({name:i,isPure:e.isPure}),e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(e);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,yi,Ci,Si);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return C(t,function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")}),t.length&&e.push("fn.inputs=["+t.map(function(e){return e.name}).join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return C(this.state.filters,function(n,i){e.push(n+"=$filter("+t.escape(i)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,r,o){var a,s,u,c,l,h=this;if(i=i||M,!o&&U(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,r,!0));switch(e.type){case _i.Program:C(e.body,function(t,n){h.recurse(t.expression,void 0,void 0,function(e){s=e}),n!==e.body.length-1?h.current().body.push(s,";"):h.return_(s)});break;case _i.Literal:c=this.escape(e.value),this.assign(t,c),i(t||c);break;case _i.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){s=e}),c=e.operator+"("+this.ifDefined(s,0)+")",this.assign(t,c),i(c);break;case _i.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){a=e}),this.recurse(e.right,void 0,void 0,function(e){s=e}),c="+"===e.operator?this.plus(a,s):"-"===e.operator?this.ifDefined(a,0)+e.operator+this.ifDefined(s,0):"("+a+")"+e.operator+"("+s+")",this.assign(t,c),i(c);break;case _i.LogicalExpression:t=t||this.nextId(),h.recurse(e.left,t),h.if_("&&"===e.operator?t:h.not(t),h.lazyRecurse(e.right,t)),i(t);break;case _i.ConditionalExpression:t=t||this.nextId(),h.recurse(e.test,t),h.if_(t,h.lazyRecurse(e.alternate,t),h.lazyRecurse(e.consequent,t)),i(t);break;case _i.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",e.name)),function(){h.if_("inputs"===h.stage||"s",function(){r&&1!==r&&h.if_(h.isNull(h.nonComputedMember("s",e.name)),h.lazyAssign(h.nonComputedMember("s",e.name),"{}")),h.assign(t,h.nonComputedMember("s",e.name))})},t&&h.lazyAssign(t,h.nonComputedMember("l",e.name))),i(t);break;case _i.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(e.object,a,void 0,function(){h.if_(h.notNull(a),function(){e.computed?(s=h.nextId(),h.recurse(e.property,s),h.getStringValue(s),r&&1!==r&&h.if_(h.not(h.computedMember(a,s)),h.lazyAssign(h.computedMember(a,s),"{}")),c=h.computedMember(a,s),h.assign(t,c),n&&(n.computed=!0,n.name=s)):(r&&1!==r&&h.if_(h.isNull(h.nonComputedMember(a,e.property.name)),h.lazyAssign(h.nonComputedMember(a,e.property.name),"{}")),c=h.nonComputedMember(a,e.property.name),h.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))},function(){h.assign(t,"undefined")}),i(t)},!!r);break;case _i.CallExpression:t=t||this.nextId(),e.filter?(s=h.filter(e.callee.name),u=[],C(e.arguments,function(e){var t=h.nextId();h.recurse(e,t),u.push(t)}),c=s+"("+u.join(",")+")",h.assign(t,c),i(t)):(s=h.nextId(),a={},u=[],h.recurse(e.callee,s,a,function(){h.if_(h.notNull(s),function(){C(e.arguments,function(t){h.recurse(t,e.constant?void 0:h.nextId(),void 0,function(e){u.push(e)})}),c=a.name?h.member(a.context,a.name,a.computed)+"("+u.join(",")+")":s+"("+u.join(",")+")",h.assign(t,c)},function(){h.assign(t,"undefined")}),i(t)}));break;case _i.AssignmentExpression:s=this.nextId(),a={},this.recurse(e.left,void 0,a,function(){h.if_(h.notNull(a.context),function(){h.recurse(e.right,s),c=h.member(a.context,a.name,a.computed)+e.operator+s,h.assign(t,c),i(t||c)})},1);break;case _i.ArrayExpression:u=[],C(e.elements,function(t){h.recurse(t,e.constant?void 0:h.nextId(),void 0,function(e){u.push(e)})}),c="["+u.join(",")+"]",this.assign(t,c),i(t||c);break;case _i.ObjectExpression:u=[],l=!1,C(e.properties,function(e){e.computed&&(l=!0)}),l?(t=t||this.nextId(),this.assign(t,"{}"),C(e.properties,function(e){e.computed?(a=h.nextId(),h.recurse(e.key,a)):a=e.key.type===_i.Identifier?e.key.name:""+e.key.value,s=h.nextId(),h.recurse(e.value,s),h.assign(h.member(t,a,e.computed),s)})):(C(e.properties,function(t){h.recurse(t.value,e.constant?void 0:h.nextId(),void 0,function(e){u.push(h.escape(t.key.type===_i.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+u.join(",")+"}",this.assign(t,c)),i(t||c);break;case _i.ThisExpression:this.assign(t,"s"),i(t||"s");break;case _i.LocalsExpression:this.assign(t,"l"),i(t||"l");break;case _i.NGValueParameter:this.assign(t,"v"),i(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),i[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var i=this.current().body;i.push("if(",e,"){"),t(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,i,r,o){var a=this;return function(){a.recurse(e,t,n,i,r,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(V(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(q(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw mi("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Pi.prototype={compile:function(e){var t,n,i=this;ki(e,i.$filter),(t=Di(e))&&(n=this.recurse(t));var r,o=Ii(e.body);o&&(r=[],C(o,function(e,t){var n=i.recurse(e);n.isPure=e.isPure,e.input=n,r.push(n),e.watchId=t}));var a=[];C(e.body,function(e){a.push(i.recurse(e.expression))});var s=0===e.body.length?M:1===e.body.length?a[0]:function(e,t){var n;return C(a,function(i){n=i(e,t)}),n};return n&&(s.assign=function(e,t,i){return n(e,i,t)}),r&&(s.inputs=r),s},recurse:function(e,t,n){var i,r,o,a=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case _i.Literal:return this.value(e.value,t);case _i.UnaryExpression:return r=this.recurse(e.argument),this["unary"+e.operator](r,t);case _i.BinaryExpression:case _i.LogicalExpression:return i=this.recurse(e.left),r=this.recurse(e.right),this["binary"+e.operator](i,r,t);case _i.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case _i.Identifier:return a.identifier(e.name,t,n);case _i.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(r=e.property.name),e.computed&&(r=this.recurse(e.property)),e.computed?this.computedMember(i,r,t,n):this.nonComputedMember(i,r,t,n);case _i.CallExpression:return o=[],C(e.arguments,function(e){o.push(a.recurse(e))}),e.filter&&(r=this.$filter(e.callee.name)),e.filter||(r=this.recurse(e.callee,!0)),e.filter?function(e,n,i,a){for(var s=[],u=0;u<o.length;++u)s.push(o[u](e,n,i,a));var c=r.apply(void 0,s,a);return t?{context:void 0,name:void 0,value:c}:c}:function(e,n,i,a){var s,u=r(e,n,i,a);if(null!=u.value){for(var c=[],l=0;l<o.length;++l)c.push(o[l](e,n,i,a));s=u.value.apply(u.context,c)}return t?{value:s}:s};case _i.AssignmentExpression:return i=this.recurse(e.left,!0,1),r=this.recurse(e.right),function(e,n,o,a){var s=i(e,n,o,a),u=r(e,n,o,a);return s.context[s.name]=u,t?{value:u}:u};case _i.ArrayExpression:return o=[],C(e.elements,function(e){o.push(a.recurse(e))}),function(e,n,i,r){for(var a=[],s=0;s<o.length;++s)a.push(o[s](e,n,i,r));return t?{value:a}:a};case _i.ObjectExpression:return o=[],C(e.properties,function(e){e.computed?o.push({key:a.recurse(e.key),computed:!0,value:a.recurse(e.value)}):o.push({key:e.key.type===_i.Identifier?e.key.name:""+e.key.value,computed:!1,value:a.recurse(e.value)})}),function(e,n,i,r){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(e,n,i,r)]=o[s].value(e,n,i,r):a[o[s].key]=o[s].value(e,n,i,r);return t?{value:a}:a};case _i.ThisExpression:return function(e){return t?{value:e}:e};case _i.LocalsExpression:return function(e,n){return t?{value:n}:n};case _i.NGValueParameter:return function(e,n,i){return t?{value:i}:i}}},"unary+":function(e,t){return function(n,i,r,o){var a=e(n,i,r,o);return a=U(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,i,r,o){var a=e(n,i,r,o);return a=U(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(n,i,r,o){var a=!e(n,i,r,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(i,r,o,a){var s=Si(e(i,r,o,a),t(i,r,o,a));return n?{value:s}:s}},"binary-":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a),u=t(i,r,o,a),c=(U(s)?s:0)-(U(u)?u:0);return n?{value:c}:c}},"binary*":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)*t(i,r,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)/t(i,r,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)%t(i,r,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)===t(i,r,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)!==t(i,r,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)==t(i,r,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)!=t(i,r,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)<t(i,r,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)>t(i,r,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)<=t(i,r,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)>=t(i,r,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)&&t(i,r,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)||t(i,r,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,i){return function(r,o,a,s){var u=e(r,o,a,s)?t(r,o,a,s):n(r,o,a,s);return i?{value:u}:u}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(i,r,o,a){var s=r&&e in r?r:i;n&&1!==n&&s&&null==s[e]&&(s[e]={});var u=s?s[e]:void 0;return t?{context:s,name:e,value:u}:u}},computedMember:function(e,t,n,i){return function(r,o,a,s){var u,c,l=e(r,o,a,s);return null!=l&&(u=yi(u=t(r,o,a,s)),i&&1!==i&&l&&!l[u]&&(l[u]={}),c=l[u]),n?{context:l,name:u,value:c}:c}},nonComputedMember:function(e,t,n,i){return function(r,o,a,s){var u=e(r,o,a,s);i&&1!==i&&u&&null==u[t]&&(u[t]={});var c=null!=u?u[t]:void 0;return n?{context:u,name:t,value:c}:c}},inputs:function(e,t){return function(n,i,r,o){return o?o[t]:e(n,i,r)}}},Oi.prototype={constructor:Oi,parse:function(e){var t=this.getAst(e),n=this.astCompiler.compile(t.ast);return n.literal=function(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===_i.Literal||e.body[0].expression.type===_i.ArrayExpression||e.body[0].expression.type===_i.ObjectExpression)}(t.ast),n.constant=function(e){return e.constant}(t.ast),n.oneTime=t.oneTime,n},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var Wi=r("$sce"),Gi={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},zi=/_([a-z])/g;function Ki(e){return e.replace(zi,tt)}function Qi(e){var t=[];return U(e)&&C(e,function(e){t.push(function(e){if("self"===e)return e;if(V(e)){if(e.indexOf("***")>-1)throw Wi("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=te(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(K(e))return new RegExp("^"+e.source+"$");throw Wi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))}),t}function Yi(){this.SCE_CONTEXTS=Gi;var t=["self"],n=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Qi(e)),t},this.resourceUrlBlacklist=function(e){return arguments.length&&(n=Qi(e)),n},this.$get=["$injector","$$sanitizeUri",function(i,r){var o=function(e){throw Wi("unsafe","Attempting to use an unsafe value in a safe context.")};function a(t,n){return"self"===t?lr(n,sr)||function(t){return lr(t,function(){if(e.document.baseURI)return e.document.baseURI;or||((or=e.document.createElement("a")).href=".",or=or.cloneNode(!1));return or.href}())}(n):!!t.exec(n.href)}function s(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}i.has("$sanitize")&&(o=i.get("$sanitize"));var u=s(),c={};return c[Gi.HTML]=s(u),c[Gi.CSS]=s(u),c[Gi.MEDIA_URL]=s(u),c[Gi.URL]=s(c[Gi.MEDIA_URL]),c[Gi.JS]=s(u),c[Gi.RESOURCE_URL]=s(c[Gi.URL]),{trustAs:function(e,t){var n=c.hasOwnProperty(e)?c[e]:null;if(!n)throw Wi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||F(t)||""===t)return t;if("string"!=typeof t)throw Wi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,i){if(null===i||F(i)||""===i)return i;var s=c.hasOwnProperty(e)?c[e]:null;if(s&&i instanceof s)return i.$$unwrapTrustedValue();if(z(i.$$unwrapTrustedValue)&&(i=i.$$unwrapTrustedValue()),e===Gi.MEDIA_URL||e===Gi.URL)return r(i.toString(),e===Gi.MEDIA_URL);if(e===Gi.RESOURCE_URL){if(function(e){var i,r,o=cr(e.toString()),s=!1;for(i=0,r=t.length;i<r;i++)if(a(t[i],o)){s=!0;break}if(s)for(i=0,r=n.length;i<r;i++)if(a(n[i],o)){s=!1;break}return s}(i))return i;throw Wi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",i.toString())}if(e===Gi.HTML)return o(i);throw Wi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof u?e.$$unwrapTrustedValue():e}}}]}function Xi(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&o<8)throw Wi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Ge(Gi);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=R),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,a=i.getTrusted,s=i.trustAs;return C(Gi,function(e,t){var n=f(t);i[Ki("parse_as_"+n)]=function(t){return r(e,t)},i[Ki("get_trusted_"+n)]=function(t){return a(e,t)},i[Ki("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Ji(){this.$get=["$window","$document",function(e,t){var n={},i=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,r=N((/android (\d+)/.exec(f((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.body&&s.body.style,c=!1,l=!1;return u&&(c=!!("transition"in u||"webkitTransition"in u),l=!!("animation"in u||"webkitAnimation"in u)),{history:!(!i||r<4||a),hasEvent:function(e){if("input"===e&&o)return!1;if(F(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:ce(),transitions:c,animations:l,android:r}}]}function Zi(){this.$get=$(function(e){return new function(e){var t={},n=[],i=this.ALL_TASKS_TYPE="$$all$$",r=this.DEFAULT_TASK_TYPE="$$default$$";function o(){var e=n.pop();return e&&e.cb}function a(e){for(var t=n.length-1;t>=0;--t){var i=n[t];if(i.type===e)return n.splice(t,1),i.cb}}this.completeTask=function(n,s){s=s||r;try{n()}finally{!function(e){t[e=e||r]&&(t[e]--,t[i]--)}(s);var u=t[s],c=t[i];if(!c||!u)for(var l,h=c?a:o;l=h(s);)try{l()}catch(t){e.error(t)}}},this.incTaskCount=function(e){t[e=e||r]=(t[e]||0)+1,t[i]=(t[i]||0)+1},this.notifyWhenNoPendingTasks=function(e,r){t[r=r||i]?n.push({type:r,cb:e}):e()}}(e)})}var er=r("$templateRequest");function tr(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,i,r,o){function a(s,u){a.totalPendingRequests++,V(s)&&!F(n.get(s))||(s=o.getTrustedResourceUrl(s));var c=i.defaults&&i.defaults.transformResponse;return W(c)?c=c.filter(function(e){return e!==Fn}):c===Fn&&(c=null),i.get(s,x({cache:n,transformResponse:c},e)).finally(function(){a.totalPendingRequests--}).then(function(e){return n.put(s,e.data)},function(e){u||(e=er("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e));return r.reject(e)})}return a.totalPendingRequests=0,a}]}function nr(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={findBindings:function(e,t,n){var i=[];return C(e.getElementsByClassName("ng-binding"),function(e){var r=A.element(e).data("$binding");r&&C(r,function(r){n?new RegExp("(^|\\s)"+te(t)+"(\\s|\\||$)").test(r)&&i.push(e):-1!==r.indexOf(t)&&i.push(e)})}),i},findModels:function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+t+'"]',a=e.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}};return i}]}var ir=r("$timeout");function rr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){var o={};function a(a,s,u){z(a)||(u=s,s=a,a=M);var c,l=fe(arguments,3),h=U(u)&&!u,f=(h?i:n).defer(),d=f.promise;return c=t.defer(function(){try{f.resolve(a.apply(null,l))}catch(e){f.reject(e),r(e)}finally{delete o[d.$$timeoutId]}h||e.$apply()},s,"$timeout"),d.$$timeoutId=c,o[c]=f,d}return a.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$timeoutId"))throw ir("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(e.$$timeoutId))return!1;var n=e.$$timeoutId,i=o[n];return ji(i.promise),i.reject("canceled"),delete o[n],t.defer.cancel(n)},a}]}var or,ar=e.document.createElement("a"),sr=cr(e.location.href);ar.href="http://[::1]";var ur="[::1]"===ar.hostname;function cr(e){if(!V(e))return e;var t=e;o&&(ar.setAttribute("href",t),t=ar.href),ar.setAttribute("href",t);var n=ar.hostname;return!ur&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:ar.href,protocol:ar.protocol?ar.protocol.replace(/:$/,""):"",host:ar.host,search:ar.search?ar.search.replace(/^\?/,""):"",hash:ar.hash?ar.hash.replace(/^#/,""):"",hostname:n,port:ar.port,pathname:"/"===ar.pathname.charAt(0)?ar.pathname:"/"+ar.pathname}}function lr(e,t){return e=cr(e),t=cr(t),e.protocol===t.protocol&&e.host===t.host}function hr(){this.$get=$(e)}function fr(e){var t=e[0]||{},n={},i="";function r(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var e,o,a,s,u,c=function(e){try{return e.cookie||""}catch(e){return""}}(t);if(c!==i)for(e=(i=c).split("; "),n={},a=0;a<e.length;a++)(s=(o=e[a]).indexOf("="))>0&&(u=r(o.substring(0,s)),F(n[u])&&(n[u]=r(o.substring(s+1))));return n}}function dr(){this.$get=fr}function pr(e){var t="Filter";function n(i,r){if(B(i)){var o={};return C(i,function(e,t){o[t]=n(t,e)}),o}return e.factory(i+t,r)}this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",wr),n("date",Or),n("filter",gr),n("json",Mr),n("limitTo",Lr),n("lowercase",Rr),n("number",_r),n("orderBy",Ur),n("uppercase",$r)}function gr(){return function(e,t,n,i){if(!_(e)){if(null==e)return e;throw r("filter")("notarray","Expected array but received: {0}",e)}var o,a;switch(i=i||"$",vr(t)){case"function":o=t;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(e,t,n,i){var r=B(e)&&n in e;!0===t?t=ue:z(t)||(t=function(e,t){return!F(e)&&(null===e||null===t?e===t:!(B(t)||B(e)&&!L(e))&&(e=f(""+e),t=f(""+t),-1!==e.indexOf(t)))});return function(o){return r&&!B(o)?mr(o,e[n],t,n,!1):mr(o,e,t,n,i)}}(t,n,i,a);break;default:return e}return Array.prototype.filter.call(e,o)}}function mr(e,t,n,i,r,o){var a=vr(e),s=vr(t);if("string"===s&&"!"===t.charAt(0))return!mr(e,t.substring(1),n,i,r);if(W(e))return e.some(function(e){return mr(e,t,n,i,r)});switch(a){case"object":var u;if(r){for(u in e)if(u.charAt&&"$"!==u.charAt(0)&&mr(e[u],t,n,i,!0))return!0;return!o&&mr(e,t,n,i,!1)}if("object"===s){for(u in t){var c=t[u];if(!z(c)&&!F(c)){var l=u===i;if(!mr(l?e:e[u],c,n,i,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function vr(e){return null===e?"null":typeof e}fr.$inject=["$document"],pr.$inject=["$provide"];var yr=22,br=".",Ar="0";function wr(e){var t=e.NUMBER_FORMATS;return function(e,n,i){F(n)&&(n=t.CURRENCY_SYM),F(i)&&(i=t.PATTERNS[1].maxFrac);var r=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:Cr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(r,n)}}function _r(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Cr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Cr(e,t,n,i,r){if(!V(e)&&!q(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,u=Math.abs(e)+"",c="";if(a)c="∞";else{(function(e,t,n,i){var r=e.d,o=r.length-e.i,a=(t=F(t)?Math.min(Math.max(n,o),i):+t)+e.i,s=r[a];if(a>0){r.splice(Math.max(e.i,a));for(var u=a;u<r.length;u++)r[u]=0}else{o=Math.max(0,o),e.i=1,r.length=Math.max(1,a=t+1),r[0]=0;for(var c=1;c<a;c++)r[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)r.unshift(0),e.i++;r.unshift(1),e.i++}else r[a-1]++;for(;o<Math.max(0,t);o++)r.push(0);var h=r.reduceRight(function(e,t,n,i){return t+=e,i[n]=t%10,Math.floor(t/10)},0);h&&(r.unshift(h),e.i++)})(o=function(e){var t,n,i,r,o,a=0;for((n=e.indexOf(br))>-1&&(e=e.replace(br,"")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charAt(i)===Ar;i++);if(i===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===Ar;)o--;for(n-=i,t=[],r=0;i<=o;i++,r++)t[r]=+e.charAt(i)}return n>yr&&(t=t.splice(0,yr-1),a=n-1,n=1),{d:t,e:a,i:n}}(u),r,t.minFrac,t.maxFrac);var l=o.d,h=o.i,f=o.e,d=[];for(s=l.reduce(function(e,t){return e&&!t},!0);h<0;)l.unshift(0),h++;h>0?d=l.splice(h,l.length):(d=l,l=[0]);var p=[];for(l.length>=t.lgSize&&p.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)p.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&p.unshift(l.join("")),c=p.join(n),d.length&&(c+=i+d.join("")),f&&(c+="e+"+f)}return e<0&&!s?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function Sr(e,t,n,i){var r="";for((e<0||i&&e<=0)&&(i?e=1-e:(e=-e,r="-")),e=""+e;e.length<t;)e=Ar+e;return n&&(e=e.substr(e.length-t)),r+e}function Er(e,t,n,i,r){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),Sr(a,t,i,r)}}function Tr(e,t,n){return function(i,r){var o=i["get"+e]();return r[d((n?"STANDALONE":"")+(t?"SHORT":"")+e)][o]}}function kr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Ir(e){return function(t){var n,i=kr(t.getFullYear()),r=+(n=t,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+i;return Sr(1+Math.round(r/6048e5),e)}}function xr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}wr.$inject=["$locale"],_r.$inject=["$locale"];var Dr={yyyy:Er("FullYear",4,0,!1,!0),yy:Er("FullYear",2,0,!0,!0),y:Er("FullYear",1,0,!1,!0),MMMM:Tr("Month"),MMM:Tr("Month",!0),MM:Er("Month",2,1),M:Er("Month",1,1),LLLL:Tr("Month",!1,!0),dd:Er("Date",2),d:Er("Date",1),HH:Er("Hours",2),H:Er("Hours",1),hh:Er("Hours",2,-12),h:Er("Hours",1,-12),mm:Er("Minutes",2),m:Er("Minutes",1),ss:Er("Seconds",2),s:Er("Seconds",1),sss:Er("Milliseconds",3),EEEE:Tr("Day"),EEE:Tr("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var i=-1*n,r=i>=0?"+":"";return r+=Sr(Math[i>0?"floor":"ceil"](i/60),2)+Sr(Math.abs(i%60),2)},ww:Ir(2),w:Ir(1),G:xr,GG:xr,GGG:xr,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Nr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Pr=/^-?\d+$/;function Or(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,a,s="",u=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,V(n)&&(n=Pr.test(n)?N(n):function(e){var n;if(n=e.match(t)){var i=new Date(0),r=0,o=0,a=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=N(n[9]+n[10]),o=N(n[9]+n[11])),a.call(i,N(n[1]),N(n[2])-1,N(n[3]));var u=N(n[4]||0)-r,c=N(n[5]||0)-o,l=N(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(i,u,c,l,h),i}return e}(n)),q(n)&&(n=new Date(n)),!H(n)||!isFinite(n.getTime()))return n;for(;i;)(a=Nr.exec(i))?i=(u=he(u,a,1)).pop():(u.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=ye(r,c),n=Ae(n,r,!0)),C(u,function(t){o=Dr[t],s+=o?o(n,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Mr(){return function(e,t){return F(t)&&(t=2),ge(e,t)}}Or.$inject=["$locale"];var Rr=$(f),$r=$(d);function Lr(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):N(t),P(t)?e:(q(e)&&(e=e.toString()),_(e)?(n=(n=!n||isNaN(n)?0:N(n))<0?Math.max(0,e.length+n):n,t>=0?Fr(e,n,n+t):0===n?Fr(e,t,e.length):Fr(e,Math.max(0,n+t),n)):e)}}function Fr(e,t,n){return V(e)?e.slice(t,n):p.call(e,t,n)}function Ur(e){return function(i,o,a,s){if(null==i)return i;if(!_(i))throw r("orderBy")("notarray","Expected array but received: {0}",i);W(o)||(o=[o]),0===o.length&&(o=["+"]);var u=o.map(function(t){var n=1,i=R;if(z(t))i=t;else if(V(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=e(t)).constant)){var r=i();i=function(e){return e[r]}}return{get:i,descending:n}}),c=a?-1:1,l=z(s)?s:n,h=Array.prototype.map.call(i,function(e,n){return{value:e,tieBreaker:{value:n,type:"number",index:n},predicateValues:u.map(function(i){return function(e,n){var i=typeof e;null===e?i="null":"object"===i&&(e=function(e){if(z(e.valueOf)&&t(e=e.valueOf()))return e;if(L(e)&&t(e=e.toString()))return e;return e}(e));return{value:e,type:i,index:n}}(i.get(e),n)})}});return h.sort(function(e,t){for(var i=0,r=u.length;i<r;i++){var o=l(e.predicateValues[i],t.predicateValues[i]);if(o)return o*u[i].descending*c}return(l(e.tieBreaker,t.tieBreaker)||n(e.tieBreaker,t.tieBreaker))*c}),i=h.map(function(e){return e.value})};function t(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function n(e,t){var n=0,i=e.type,r=t.type;if(i===r){var o=e.value,a=t.value;"string"===i?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===i&&(B(o)&&(o=e.index),B(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n="undefined"===i?1:"undefined"===r?-1:"null"===i?1:"null"===r?-1:i<r?-1:1;return n}}function Br(e){return z(e)&&(e={link:e}),e.restrict=e.restrict||"AC",$(e)}Ur.$inject=["$parse"];var jr=$({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===v.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Vr={};C(Nt,function(e,t){if("multiple"!==e){var n=bn("ng-"+t),i=r;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[n]&&r(e,0,i)}),Vr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}}),C(Ot,function(e,t){Vr[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"===i.ngPattern.charAt(0)){var r=i.ngPattern.match(c);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(i[t],function(e){i.$set(t,e)})}}}}),C(["src","srcset","href"],function(e){var t=bn("ng-"+e);Vr[t]=["$sce",function(n){return{priority:99,link:function(i,r,a){var s=e,u=e;"href"===e&&"[object SVGAnimatedString]"===v.call(r.prop("href"))&&(u="xlinkHref",a.$attr[u]="xlink:href",s=null),a.$set(t,n.getTrustedMediaUrl(a[t])),a.$observe(t,function(t){t?(a.$set(u,t),o&&s&&r.prop(s,a[u])):"href"===e&&a.$set(u,null)})}}}]});var qr={$addControl:M,$getControls:$([]),$$renameControl:function(e,t){e.$name=t},$removeControl:M,$setValidity:M,$setDirty:M,$setPristine:M,$setSubmitted:M,$$setSubmitted:M},Hr="ng-pending";function Wr(e,t,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=qr,this.$$element=e,this.$$animate=i,Qr(this)}Wr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Wr.prototype={$rollbackViewValue:function(){C(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){C(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){Le(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$getControls:function(){return Ge(this.$$controls)},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],C(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),C(this.$error,function(t,n){this.$setValidity(n,null,e)},this),C(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),oe(this.$$controls,e),e.$$parentForm=qr},$setDirty:function(){this.$$animate.removeClass(this.$$element,Go),this.$$animate.addClass(this.$$element,zo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Go,zo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,C(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){C(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){for(var e=this;e.$$parentForm&&e.$$parentForm!==qr;)e=e.$$parentForm;e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,C(this.$$controls,function(e){e.$$setSubmitted&&e.$$setSubmitted()})}},Yr({clazz:Wr,set:function(e,t,n){var i=e[t];i?-1===i.indexOf(n)&&i.push(n):e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(oe(i,n),0===i.length&&delete e[t])}});var Gr=function(e){return["$timeout","$parse",function(t,n){return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:Wr,compile:function(n,r){n.addClass(Go).addClass(Ho);var o=r.name?"name":!(!e||!r.ngForm)&&"ngForm";return{pre:function(e,n,r,a){var s=a[0];if(!("action"in r)){var u=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",u),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",u)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var c=o?i(s.$name):M;o&&(c(e,s),r.$observe(o,function(t){s.$name!==t&&(c(e,void 0),s.$$parentForm.$$renameControl(s,t),(c=i(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),c(e,void 0),x(s,qr)})}}}};function i(e){return""===e?n('this[""]').assign:n(e).assign||M}}]},zr=Gr(),Kr=Gr(!0);function Qr(e){e.$$classCache={},e.$$classCache[Wo]=!(e.$$classCache[Ho]=e.$$element.hasClass(Ho))}function Yr(e){var t=e.clazz,n=e.set,i=e.unset;function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function o(e,t,n){t=t?"-"+Oe(t,"-"):"",r(e,Ho+t,!0===n),r(e,Wo+t,!1===n)}t.prototype.$setValidity=function(e,t,a){var s;F(t)?function(e,t,i,r){e[t]||(e[t]={});n(e[t],i,r)}(this,"$pending",e,a):function(e,t,n,r){e[t]&&i(e[t],n,r);Xr(e[t])&&(e[t]=void 0)}(this,"$pending",e,a),X(t)?t?(i(this.$error,e,a),n(this.$$success,e,a)):(n(this.$error,e,a),i(this.$$success,e,a)):(i(this.$error,e,a),i(this.$$success,e,a)),this.$pending?(r(this,Hr,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(r(this,Hr,!1),this.$valid=Xr(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,e,s=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,s,this)}}function Xr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Jr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Zr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,eo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,to=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,no=/^(\d{4,})-(\d{2})-(\d{2})$/,io=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro=/^(\d{4,})-W(\d\d)$/,oo=/^(\d{4,})-(\d\d)$/,ao=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,so="keydown wheel mousedown",uo=Ue();C("date,datetime-local,month,time,week".split(","),function(e){uo[e]=!0});var co={text:function(e,t,n,i,r,o){ho(e,t,n,i,r,o),lo(i)},date:po("date",no,fo(no,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":po("datetimelocal",io,fo(io,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:po("time",ao,fo(ao,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:po("week",ro,function(e,t){if(H(e))return e;if(V(e)){ro.lastIndex=0;var n=ro.exec(e);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,u=0,c=kr(i),l=7*(r-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(i,0,c.getDate()+l,o,a,s,u)}}return NaN},"yyyy-Www"),month:po("month",oo,fo(oo,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,i,r,o,a,s){var u;if(go(e,t,n,i,"number"),mo(i),ho(e,t,n,i,r,o),U(n.min)||n.ngMin){var c=n.min||s(n.ngMin)(e);u=vo(c),i.$validators.min=function(e,t){return i.$isEmpty(t)||F(u)||t>=u},n.$observe("min",function(e){e!==c&&(u=vo(e),c=e,i.$validate())})}if(U(n.max)||n.ngMax){var l=n.max||s(n.ngMax)(e),h=vo(l);i.$validators.max=function(e,t){return i.$isEmpty(t)||F(h)||t<=h},n.$observe("max",function(e){e!==l&&(h=vo(e),l=e,i.$validate())})}if(U(n.step)||n.ngStep){var f=n.step||s(n.ngStep)(e),d=vo(f);i.$validators.step=function(e,t){return i.$isEmpty(t)||F(d)||Ao(t,u||0,d)},n.$observe("step",function(e){e!==f&&(d=vo(e),f=e,i.$validate())})}},url:function(e,t,n,i,r,o){ho(e,t,n,i,r,o),lo(i),i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Zr.test(n)}},email:function(e,t,n,i,r,o){ho(e,t,n,i,r,o),lo(i),i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||eo.test(n)}},radio:function(e,t,n,i){var r=!n.ngTrim||"false"!==ee(n.ngTrim);F(n.name)&&t.attr("name",T());t.on("change",function(e){var o;t[0].checked&&(o=n.value,r&&(o=ee(o)),i.$setViewValue(o,e&&e.type))}),i.$render=function(){var e=n.value;r&&(e=ee(e)),t[0].checked=e===i.$viewValue},n.$observe("value",i.$render)},range:function(e,t,n,i,r,o){go(e,t,n,i,"range"),mo(i),ho(e,t,n,i,r,o);var a=i.$$hasNativeValidators&&"range"===t[0].type,s=a?0:void 0,u=a?100:void 0,c=a?1:void 0,l=t[0].validity,h=U(n.min),f=U(n.max),d=U(n.step),p=i.$render;i.$render=a&&U(l.rangeUnderflow)&&U(l.rangeOverflow)?function(){p(),i.$setViewValue(t.val())}:p,h&&(s=vo(n.min),i.$validators.min=a?function(){return!0}:function(e,t){return i.$isEmpty(t)||F(s)||t>=s},g("min",function(e){if(s=vo(e),P(i.$modelValue))return;if(a){var n=t.val();s>n&&(n=s,t.val(n)),i.$setViewValue(n)}else i.$validate()}));f&&(u=vo(n.max),i.$validators.max=a?function(){return!0}:function(e,t){return i.$isEmpty(t)||F(u)||t<=u},g("max",function(e){if(u=vo(e),P(i.$modelValue))return;if(a){var n=t.val();u<n&&(t.val(u),n=u<s?s:u),i.$setViewValue(n)}else i.$validate()}));d&&(c=vo(n.step),i.$validators.step=a?function(){return!l.stepMismatch}:function(e,t){return i.$isEmpty(t)||F(c)||Ao(t,s||0,c)},g("step",function(e){if(c=vo(e),P(i.$modelValue))return;a?i.$viewValue!==t.val()&&i.$setViewValue(t.val()):i.$validate()}));function g(e,i){t.attr(e,n[e]);var r=n[e];n.$observe(e,function(e){e!==r&&(r=e,i(e))})}},checkbox:function(e,t,n,i,r,o,a,s){var u=wo(s,e,"ngTrueValue",n.ngTrueValue,!0),c=wo(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("change",function(e){i.$setViewValue(t[0].checked,e&&e.type)}),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return!1===e},i.$formatters.push(function(e){return ue(e,u)}),i.$parsers.push(function(e){return e?u:c})},hidden:M,button:M,submit:M,reset:M,file:M};function lo(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function ho(e,t,n,i,r,o){var a,s=f(t[0].type);if(!r.android){var u=!1;t.on("compositionstart",function(){u=!0}),t.on("compositionupdate",function(e){(F(e.data)||""===e.data)&&(u=!1)}),t.on("compositionend",function(){u=!1,c()})}var c=function(e){if(a&&(o.defer.cancel(a),a=null),!u){var r=t.val(),c=e&&e.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(r=ee(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,c)}};if(r.hasEvent("input"))t.on("input",c);else{var h=function(e,t,n){a||(a=o.defer(function(){a=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||h(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut drop",h)}t.on("change",c),uo[s]&&i.$$hasNativeValidators&&s===n.type&&t.on(so,function(e){if(!a){var t=this[l],n=t.badInput,i=t.typeMismatch;a=o.defer(function(){a=null,t.badInput===n&&t.typeMismatch===i||c(e)})}}),i.$render=function(){var e=i.$isEmpty(i.$viewValue)?"":i.$viewValue;t.val()!==e&&t.val(e)}}function fo(e,t){return function(n,i){var r,o;if(H(n))return n;if(V(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Jr.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n)){r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},C(r,function(e,n){n<t.length&&(o[t[n]]=+e)});var a=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&a.setFullYear(o.yyyy),a}}return NaN}}function po(e,t,n,i){return function(r,o,a,s,u,c,l,h){go(r,o,a,s,e),ho(0,o,a,s,u,c);var f,d,p="time"===e||"datetimelocal"===e;if(s.$parsers.push(function(n){return s.$isEmpty(n)?null:t.test(n)?w(n,f):void(s.$$parserName=e)}),s.$formatters.push(function(e){if(e&&!H(e))throw Ko("datefmt","Expected `{0}` to be a date",e);if(b(e)){f=e;var t=s.$options.getOption("timezone");return t&&(d=t,f=Ae(f,t,!0)),function(e,t){var n=i;p&&V(s.$options.getOption("timeSecondsFormat"))&&(n=i.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var r=l("date")(e,n,t);p&&s.$options.getOption("timeStripZeroSeconds")&&(r=r.replace(/(?::00)?(?:\.000)?$/,""));return r}(e,t)}return f=null,d=null,""}),U(a.min)||a.ngMin){var g=a.min||h(a.ngMin)(r),m=A(g);s.$validators.min=function(e){return!b(e)||F(m)||n(e)>=m},a.$observe("min",function(e){e!==g&&(m=A(e),g=e,s.$validate())})}if(U(a.max)||a.ngMax){var v=a.max||h(a.ngMax)(r),y=A(v);s.$validators.max=function(e){return!b(e)||F(y)||n(e)<=y},a.$observe("max",function(e){e!==v&&(y=A(e),v=e,s.$validate())})}function b(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function A(e){return U(e)&&!H(e)?w(e)||void 0:e}function w(e,t){var i=s.$options.getOption("timezone");d&&d!==i&&(t=be(t,ye(d)));var r=n(e,t);return!isNaN(r)&&i&&(r=Ae(r,i)),r}}}function go(e,t,n,i,r){var o=t[0];(i.$$hasNativeValidators=B(o.validity))&&i.$parsers.push(function(e){var n=t.prop(l)||{};if(!n.badInput&&!n.typeMismatch)return e;i.$$parserName=r})}function mo(e){e.$parsers.push(function(t){return e.$isEmpty(t)?null:to.test(t)?parseFloat(t):void(e.$$parserName="number")}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!q(t))throw Ko("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function vo(e){return U(e)&&!q(e)&&(e=parseFloat(e)),P(e)?void 0:e}function yo(e){return(0|e)===e}function bo(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var i=/e-(\d+)$/.exec(t);if(i)return Number(i[1])}return 0}return t.length-n-1}function Ao(e,t,n){var i=Number(e),r=!yo(i),o=!yo(t),a=!yo(n);if(r||o||a){var s=r?bo(i):0,u=o?bo(t):0,c=a?bo(n):0,l=Math.max(s,u,c),h=Math.pow(10,l);i*=h,t*=h,n*=h,r&&(i=Math.round(i)),o&&(t=Math.round(t)),a&&(n=Math.round(n))}return(i-t)%n==0}function wo(e,t,n,i,r){var o;if(U(i)){if(!(o=e(i)).constant)throw Ko("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return r}var _o=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,a,s){s[0]&&(co[f(a.type)]||co.text)(r,o,a,s[0],t,e,n,i)}}}}],Co=function(){var e={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(e){this.setAttribute("value",e)}};return{restrict:"E",priority:200,compile:function(t,n){if("hidden"===f(n.type))return{pre:function(t,n,i,r){var o=n[0];o.parentNode&&o.parentNode.insertBefore(o,o.nextSibling),Object.defineProperty&&Object.defineProperty(o,"value",e)}}}}},So=/^(true|false|\d+)$/,Eo=function(){function e(e,t,n){var i=U(n)?n:9===o?"":null;e.prop("value",i),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return So.test(n.ngValue)?function(t,n,i){e(n,i,t.$eval(i.ngValue))}:function(t,n,i){t.$watch(i.ngValue,function(t){e(n,i,t)})}}}},To=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,i){e.$$addBindingInfo(n,i.ngBind),n=n[0],t.$watch(i.ngBind,function(e){n.textContent=Be(e)})}}}}],ko=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,i,r){var o=e(i.attr(r.$attr.ngBindTemplate));t.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(e){i.textContent=F(e)?"":e})}}}}],Io=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var o=t(r.ngBindHtml),a=t(r.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(a,function(){var n=o(t);i.html(e.getTrustedHtml(n)||"")})}}}}],xo=$({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}});function Do(e,t){var n;return e="ngClass"+e,["$parse",function(a){return{restrict:"AC",link:function(s,u,c){var l,h=u.data("$classCounts"),f=!0;function d(e,t){var n=[];return C(e,function(e){(t>0||h[e])&&(h[e]=(h[e]||0)+t,h[e]===+(t>0)&&n.push(e))}),n.join(" ")}h||(h=Ue(),u.data("$classCounts",h)),"ngClass"!==e&&(n||(n=a("$index",function(e){return 1&e})),s.$watch(n,function(e){e===t?(n=d(r(n=l),1),c.$addClass(n)):function(e){e=d(r(e),-1),c.$removeClass(e)}(l);var n;f=e})),s.$watch(a(c[e],o),function(e){f===t&&function(e,t){var n=r(e),o=r(t),a=i(n,o),s=i(o,n),u=d(a,-1),l=d(s,1);c.$addClass(l),c.$removeClass(u)}(l,e);l=e})}}}];function i(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r===t[o])continue e;n.push(r)}return n}function r(e){return e&&e.split(" ")}function o(e){if(!e)return e;var t=e;return W(e)?t=e.map(o).join(" "):B(e)?t=Object.keys(e).filter(function(t){return e[t]}).join(" "):V(e)||(t=e+""),t}}var No=Do("",!0),Po=Do("Odd",0),Oo=Do("Even",1),Mo=Br({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Ro=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],$o={},Lo={blur:!0,focus:!0};function Fo(e,t,n,i,r,o){return{restrict:"A",compile:function(a,s){var u=e(s[i]);return function(e,i){i.on(r,function(i){var r=function(){u(e,{$event:i})};if(t.$$phase)if(o)e.$evalAsync(r);else try{r()}catch(e){n(e)}else e.$apply(r)})}}}}C("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=bn("ng-"+e);$o[t]=["$parse","$rootScope","$exceptionHandler",function(n,i,r){return Fo(n,i,r,t,e,Lo[e])}]});var Uo=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,u,c;n.$watch(r.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=t.$$createComment("end ngIf",r.ngIf),s={clone:n},e.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=Fe(s.clone),e.leave(c).done(function(e){!1!==e&&(c=null)}),s=null))})}}}],Bo=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:A.noop,compile:function(i,r){var o=r.ngInclude||r.src,a=r.onload||"",s=r.autoscroll;return function(i,r,u,c,l){var h,f,d,p=0,g=function(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).done(function(e){!1!==e&&(f=null)}),f=d,d=null)};i.$watch(o,function(o){var u=function(e){!1===e||!U(s)||s&&!i.$eval(s)||t()},f=++p;o?(e(o,!0).then(function(e){if(!i.$$destroyed&&f===p){var t=i.$new();c.template=e;var s=l(t,function(e){g(),n.enter(e,null,r).done(u)});d=s,(h=t).$emit("$includeContentLoaded",o),i.$eval(a)}},function(){i.$$destroyed||f===p&&(g(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(g(),c.template=null)})}}}}],jo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(v.call(i[0]).match(/SVG/))return i.empty(),void t(lt(o.template,e.document).childNodes)(n,function(e){i.append(e)},{futureParentElement:i});i.html(o.template),t(i.contents())(n)}}}],Vo=Br({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),qo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,a=o?ee(r):r;i.$parsers.push(function(e){if(!F(e)){var t=[];return e&&C(e.split(a),function(e){e&&t.push(o?ee(e):e)}),t}}),i.$formatters.push(function(e){if(W(e))return e.join(r)}),i.$isEmpty=function(e){return!e||!e.length}}}},Ho="ng-valid",Wo="ng-invalid",Go="ng-pristine",zo="ng-dirty",Ko=r("ngModel");function Qo(e,t,n,i,r,o,a,s,u){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(e),this.$$parentForm=qr,this.$options=Yo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=e,this.$$rootScope=e.$root,this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=a,this.$$parse=r,this.$$q=s,this.$$exceptionHandler=t,Qr(this),(c=this).$$scope.$watch(function(e){var t=c.$$ngModelGet(e);return t===c.$modelValue||c.$modelValue!=c.$modelValue&&t!=t||c.$$setModelValue(t),t})}Qo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Qo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return z(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){z(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw Ko("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,we(this.$$element))},$render:M,$isEmpty:function(e){return F(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,zo),this.$$animate.addClass(this.$$element,Go)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Go),this.$$animate.addClass(this.$$element,zo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!P(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){r||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==i&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,n){this.$$currentValidationRunId++;var i,r,o=this.$$currentValidationRunId,a=this;(function(){var e=a.$$parserName;if(!F(a.$$parserValid))return a.$$parserValid||(C(a.$validators,function(e,t){s(t,null)}),C(a.$asyncValidators,function(e,t){s(t,null)})),s(e,a.$$parserValid),a.$$parserValid;s(e,null);return!0})()?!function(){var n=!0;if(C(a.$validators,function(i,r){var o=Boolean(i(e,t));n=n&&o,s(r,o)}),!n)return C(a.$asyncValidators,function(e,t){s(t,null)}),!1;return!0}()?u(!1):(i=[],r=!0,C(a.$asyncValidators,function(n,o){var a=n(e,t);if(!J(a))throw Ko("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),i.push(a.then(function(){s(o,!0)},function(){r=!1,s(o,!1)}))}),i.length?a.$$q.all(i).then(function(){u(r)},M):u(!0)):u(!1);function s(e,t){o===a.$$currentValidationRunId&&a.$setValidity(e,t)}function u(e){o===a.$$currentValidationRunId&&n(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue,t=this;if(this.$$parserValid=!F(e)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(F(e=this.$parsers[n](e))){this.$$parserValid=!1;break}P(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){t.$modelValue!==i&&t.$$writeModelToScope()}this.$$rawModelValue=e,r&&(this.$modelValue=e,o()),this.$$runValidators(e,this.$$lastCommittedViewValue,function(n){r||(t.$modelValue=n?e:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),C(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");q(t[e])?t=t[e]:q(t.default)&&-1===this.$options.getOption("updateOn").indexOf(e)?t=t.default:q(t["*"])&&(t=t["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,M))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},Yr({clazz:Qo,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Yo,Xo=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Qo,priority:1,compile:function(t){return t.addClass(Go).addClass("ng-untouched").addClass(Ho),{pre:function(e,t,n,i){var r=i[0],o=i[1]||r.$$parentForm,a=i[2];a&&(r.$options=a.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",function(e){r.$name!==e&&r.$$parentForm.$$renameControl(r,e)}),e.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(t,n,i,r){var o=r[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(a):t.$apply(a))})}}}}}],Jo=/(\s+|^)default(\s+|$)/;function Zo(e){this.$$options=e}Zo.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return C(e=x({},e),function(n,i){"$inherit"===n?"*"===i?t=!0:(e[i]=this.$$options[i],"updateOn"===i&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===i&&(e.updateOnDefault=!1,e[i]=ee(n.replace(Jo,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],ta(e,this.$$options)),ta(e,Yo.$$options),new Zo(e)}},Yo=new Zo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ea=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Yo,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function ta(e,t){C(t,function(t,n){U(e[n])||(e[n]=t)})}var na=Br({terminal:!0,priority:1e3}),ia=r("ngOptions"),ra=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,oa=["$compile","$document","$parse",function(t,n,i){var r=e.document.createElement("option"),o=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,i){i[0].registerOption=M},post:function(e,s,u,c){for(var l=c[0],h=c[1],f=u.multiple,d=0,p=s.children(),g=p.length;d<g;d++)if(""===p[d].value){l.hasEmptyOption=!0,l.emptyOption=p.eq(d);break}s.empty();var m,v=!!l.emptyOption;a(r.cloneNode(!1)).val("?");var y=function(e,t,n){var r=e.match(ra);if(!r)throw ia("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,we(t));var o=r[5]||r[7],a=r[6],s=/ as /.test(r[0])&&r[1],u=r[9],c=i(r[2]?r[1]:o),l=s&&i(s)||c,h=u&&i(u),f=u?function(e,t){return h(n,t)}:function(e){return Ft(e)},d=function(e,t){return f(e,b(e,t))},p=i(r[2]||r[1]),g=i(r[3]||""),m=i(r[4]||""),v=i(r[8]),y={},b=a?function(e,t){return y[a]=t,y[o]=e,y}:function(e){return y[o]=e,y};function A(e,t,n,i,r){this.selectValue=e,this.viewValue=t,this.label=n,this.group=i,this.disabled=r}function w(e){var t;if(!a&&_(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:u,getTrackByValue:d,getWatchables:i(v,function(e){for(var t=[],i=w(e=e||[]),o=i.length,a=0;a<o;a++){var s=e===i?a:i[a],u=e[s],c=b(u,s),l=f(u,c);if(t.push(l),r[2]||r[1]){var h=p(n,c);t.push(h)}if(r[4]){var d=m(n,c);t.push(d)}}return t}),getOptions:function(){for(var e=[],t={},i=v(n)||[],r=w(i),o=r.length,a=0;a<o;a++){var s=i===r?a:r[a],c=i[s],h=b(c,s),y=l(n,h),_=f(y,h),C=new A(_,y,p(n,h),g(n,h),m(n,h));e.push(C),t[_]=C}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[d(e)]},getViewValueFromOption:function(e){return u?ae(e.viewValue):e.viewValue}}}}}(u.ngOptions,s,e),b=n[0].createDocumentFragment();function A(e,t){var n=r.cloneNode(!1);t.appendChild(n),function(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}(e,n)}function w(e){var t=m.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}l.generateUnknownOptionValue=function(e){return"?"},f?(l.writeValue=function(e){if(m){var t=e&&e.map(w)||[];m.items.forEach(function(e){e.element.selected&&!re(t,e)&&(e.element.selected=!1)})}},l.readValue=function(){var e=[];return C(s.val()||[],function(t){var n=m.selectValueMap[t];n&&!n.disabled&&e.push(m.getViewValueFromOption(n))}),e},y.trackBy&&e.$watchCollection(function(){if(W(h.$viewValue))return h.$viewValue.map(function(e){return y.getTrackByValue(e)})},function(){h.$render()})):(l.writeValue=function(e){if(m){var t=s[0].options[s[0].selectedIndex],n=m.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(l.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(e)}},l.readValue=function(){var e=m.selectValueMap[s.val()];return e&&!e.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),m.getViewValueFromOption(e)):null},y.trackBy&&e.$watch(function(){return y.getTrackByValue(h.$viewValue)},function(){h.$render()})),v&&(t(l.emptyOption)(e),s.prepend(l.emptyOption),l.emptyOption[0].nodeType===qe?(l.hasEmptyOption=!1,l.registerOption=function(e,t){""===t.val()&&(l.hasEmptyOption=!0,l.emptyOption=t,l.emptyOption.removeClass("ng-scope"),h.$render(),t.on("$destroy",function(){var e=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,e&&h.$render()}))}):l.emptyOption.removeClass("ng-scope")),e.$watchCollection(y.getWatchables,function(){var e=m&&l.readValue();if(m)for(var t=m.items.length-1;t>=0;t--){var n=m.items[t];U(n.group)?It(n.element.parentNode):It(n.element)}var i={};if((m=y.getOptions()).items.forEach(function(e){var t;U(e.group)?((t=i[e.group])||(t=o.cloneNode(!1),b.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),A(e,t)):A(e,b)}),s[0].appendChild(b),h.$render(),!h.$isEmpty(e)){var r=l.readValue(),a=y.trackBy||f;(a?ue(e,r):e===r)||(h.$setViewValue(r),h.$render())}})}}}}],aa=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var u,c=s.count,l=s.$attr.when&&a.attr(s.$attr.when),h=s.offset||0,d=o.$eval(l)||{},p={},g=t.startSymbol(),m=t.endSymbol(),v=g+c+"-"+h+m,y=A.noop;function b(e){a.text(e||"")}C(s,function(e,t){var n=r.exec(t);if(n){var i=(n[1]?"-":"")+f(n[2]);d[i]=a.attr(s.$attr[t])}}),C(d,function(e,n){p[n]=t(e.replace(i,v))}),o.$watch(c,function(t){var i=parseFloat(t),r=P(i);if(r||i in d||(i=e.pluralCat(i-h)),!(i===u||r&&P(u))){y();var a=p[i];F(a)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+l),y=M,b()):y=o.$watch(a,b),u=i}})}}}],sa=r("ngRef"),ua=["$parse",function(e){return{priority:-1,restrict:"A",compile:function(t,n){var i=bn(ie(t)),r=e(n.ngRef),o=r.assign||function(){throw sa("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(e,t,a){var s;if(a.hasOwnProperty("ngRefRead")){if("$element"===a.ngRefRead)s=t;else if(!(s=t.data("$"+a.ngRefRead+"Controller")))throw sa("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',a.ngRefRead,n.ngRef)}else s=t.data("$"+i+"Controller");o(e,s=s||t),t.on("$destroy",function(){r(e)===s&&o(e,null)})}}}}],ca=["$parse","$animate","$compile",function(e,t,n){var i=r("ngRepeat"),o=function(e,t,n,i,r,o,a){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},a=function(e){return e.clone[0]},s=function(e){return e.clone[e.clone.length-1]},u=function(e,t,n){return Ft(n)},c=function(e,t){return t};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,l){var f=l.ngRepeat,d=n.$$createComment("end ngRepeat",f),p=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var g=p[1],m=p[2],v=p[3],y=p[4];if(!(p=g.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var b,A=p[3]||p[1],w=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);if(y){var S={$id:Ft},E=e(y);b=function(e,t,n,i){return w&&(S[w]=t),S[A]=n,S.$index=i,E(e,S)}}return function(e,n,r,l,p){var g=Ue();e.$watchCollection(m,function(r){var l,m,y,E,T,k,I,x,D,N,P,O,M=n[0],R=Ue();if(v&&(e[v]=r),_(r))D=r,x=b||u;else for(var $ in x=b||c,D=[],r)h.call(r,$)&&"$"!==$.charAt(0)&&D.push($);for(E=D.length,P=new Array(E),l=0;l<E;l++)if(T=r===D?l:D[l],k=r[T],I=x(e,T,k,l),g[I])N=g[I],delete g[I],R[I]=N,P[l]=N;else{if(R[I])throw C(P,function(e){e&&e.scope&&(g[e.id]=e)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,I,k);P[l]={id:I,scope:void 0,clone:void 0},R[I]=!0}for(var L in S&&(S[A]=void 0),g){if(O=Fe((N=g[L]).clone),t.leave(O),O[0].parentNode)for(l=0,m=O.length;l<m;l++)O[l].$$NG_REMOVED=!0;N.scope.$destroy()}for(l=0;l<E;l++)if(T=r===D?l:D[l],k=r[T],(N=P[l]).scope){y=M;do{y=y.nextSibling}while(y&&y.$$NG_REMOVED);a(N)!==y&&t.move(Fe(N.clone),null,M),M=s(N),o(N.scope,l,A,k,w,T,E)}else p(function(e,n){N.scope=n;var i=d.cloneNode(!1);e[e.length++]=i,t.enter(e,null,M),M=i,N.clone=e,R[N.id]=N,o(N.scope,l,A,k,w,T,E)});g=R})}}}}],la=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ha=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],fa=Br(function(e,t,n){e.$watchCollection(n.ngStyle,function(e,n){n&&e!==n&&(e||(e={}),C(n,function(t,n){null==e[n]&&(e[n]="")})),e&&t.css(e)})}),da=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var a=r.ngSwitch||r.on,s=[],u=[],c=[],l=[],h=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(a,function(n){for(var i,r;c.length;)e.cancel(c.pop());for(i=0,r=l.length;i<r;++i){var a=Fe(u[i].clone);l[i].$destroy(),(c[i]=e.leave(a)).done(h(c,i))}u.length=0,l.length=0,(s=o.cases["!"+n]||o.cases["?"])&&C(s,function(n){n.transclude(function(i,r){l.push(r);var o=n.element;i[i.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:i};u.push(a),e.enter(i,o.parent(),o)})})})}}}],pa=Br({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){C(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:r,element:t})})}}),ga=Br({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),ma=r("ngTransclude"),va=["$compile",function(e){return{restrict:"EAC",compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,i,r,o){if(!o)throw ma("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",we(t));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var a=i.ngTransclude||i.ngTranscludeSlot;function s(){n(e,function(e){t.append(e)})}o(function(e,n){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i.nodeType!==Ve||i.nodeValue.trim())return!0}}(e)?t.append(e):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],ya=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],ba={$setViewValue:M,$render:M};function Aa(e,t){e.prop("selected",t),e.attr("selected",t)}var wa=["$element","$scope",function(t,n){var i=this,r=new jt;i.selectValueMap={},i.ngModelCtrl=ba,i.multiple=!1,i.unknownOption=a(e.document.createElement("option")),i.hasEmptyOption=!1,i.emptyOption=void 0,i.renderUnknownOption=function(e){var n=i.generateUnknownOptionValue(e);i.unknownOption.val(n),t.prepend(i.unknownOption),Aa(i.unknownOption,!0),t.val(n)},i.updateUnknownOption=function(e){var n=i.generateUnknownOptionValue(e);i.unknownOption.val(n),Aa(i.unknownOption,!0),t.val(n)},i.generateUnknownOptionValue=function(e){return"? "+Ft(e)+" ?"},i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.selectEmptyOption=function(){i.emptyOption&&(t.val(""),Aa(i.emptyOption,!0))},i.unselectEmptyOption=function(){i.hasEmptyOption&&Aa(i.emptyOption,!1)},n.$on("$destroy",function(){i.renderUnknownOption=M}),i.readValue=function(){var e=t.val(),n=e in i.selectValueMap?i.selectValueMap[e]:e;return i.hasOption(n)?n:null},i.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&Aa(a(n),!1),i.hasOption(e)){i.removeUnknownOption();var r=Ft(e);t.val(r in i.selectValueMap?r:e);var o=t[0].options[t[0].selectedIndex];Aa(a(o),!0)}else i.selectUnknownOrEmptyOption(e)},i.addOption=function(e,t){if(t[0].nodeType!==qe){Le(e,'"option value"'),""===e&&(i.hasEmptyOption=!0,i.emptyOption=t);var n=r.get(e)||0;r.set(e,n+1),s()}},i.removeOption=function(e){var t=r.get(e);t&&(1===t?(r.delete(e),""===e&&(i.hasEmptyOption=!1,i.emptyOption=void 0)):r.set(e,t-1))},i.hasOption=function(e){return!!r.get(e)},i.$hasEmptyOption=function(){return i.hasEmptyOption},i.$isUnknownOptionSelected=function(){return t[0].options[0]===i.unknownOption[0]},i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&t[0].options[t[0].selectedIndex]===i.emptyOption[0]},i.selectUnknownOrEmptyOption=function(e){null==e&&i.emptyOption?(i.removeUnknownOption(),i.selectEmptyOption()):i.unknownOption.parent().length?i.updateUnknownOption(e):i.renderUnknownOption(e)};var o=!1;function s(){o||(o=!0,n.$$postDigest(function(){o=!1,i.ngModelCtrl.$render()}))}var u=!1;function c(e){u||(u=!0,n.$$postDigest(function(){n.$$destroyed||(u=!1,i.ngModelCtrl.$setViewValue(i.readValue()),e&&i.ngModelCtrl.$render())}))}i.registerOption=function(e,t,n,r,o){var a,u;n.$attr.ngValue?n.$observe("value",function(e){var n,r=t.prop("selected");U(u)&&(i.removeOption(a),delete i.selectValueMap[u],n=!0),u=Ft(e),a=e,i.selectValueMap[u]=e,i.addOption(e,t),t.attr("value",u),n&&r&&c()}):r?n.$observe("value",function(e){var n;i.readValue();var r=t.prop("selected");U(a)&&(i.removeOption(a),n=!0),a=e,i.addOption(e,t),n&&r&&c()}):o?e.$watch(o,function(e,r){n.$set("value",e);var o=t.prop("selected");r!==e&&i.removeOption(r),i.addOption(e,t),r&&o&&c()}):i.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(i.multiple?c(!0):(i.ngModelCtrl.$setViewValue(null),i.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=i.readValue(),t=n.value;i.removeOption(t),s(),(i.multiple&&e&&-1!==e.indexOf(t)||e===t)&&c(!0)})}}],_a=function(){return{restrict:"E",require:["select","?ngModel"],controller:wa,priority:1,link:{pre:function(e,t,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=M);if(r.ngModelCtrl=o,t.on("change",function(){r.removeUnknownOption(),e.$apply(function(){o.$setViewValue(r.readValue())})}),n.multiple){r.multiple=!0,r.readValue=function(){var e=[];return C(t.find("option"),function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in r.selectValueMap?r.selectValueMap[n]:n)}}),e},r.writeValue=function(e){C(t.find("option"),function(t){var n=!!e&&(re(e,t.value)||re(e,r.selectValueMap[t.value])),i=t.selected;n!==i&&Aa(a(t),n)})};var s,u=NaN;e.$watch(function(){u!==o.$viewValue||ue(s,o.$viewValue)||(s=Ge(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},Ca=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var i,r;return U(n.ngValue)||(U(n.value)?i=e(n.value,!0):(r=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var o=t.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(e,t,n,i,r)}}}}],Sa=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o=i.hasOwnProperty("required")||e(i.ngRequired)(t);i.ngRequired||(i.required=!0),r.$validators.required=function(e,t){return!o||!r.$isEmpty(t)},i.$observe("required",function(e){o!==e&&(o=e,r.$validate())})}}}}],Ea=["$parse",function(e){return{restrict:"A",require:"?ngModel",compile:function(t,n){var i,r;return n.ngPattern&&(i=n.ngPattern,r="/"===n.ngPattern.charAt(0)&&c.test(n.ngPattern)?function(){return n.ngPattern}:e(n.ngPattern)),function(e,t,n,o){if(o){var a=n.pattern;n.ngPattern?a=r(e):i=n.pattern;var s=Ia(a,i,t);n.$observe("pattern",function(e){var n=s;s=Ia(e,i,t),(n&&n.toString())!==(s&&s.toString())&&o.$validate()}),o.$validators.pattern=function(e,t){return o.$isEmpty(t)||F(s)||s.test(t)}}}}}}],Ta=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o=i.maxlength||e(i.ngMaxlength)(t),a=xa(o);i.$observe("maxlength",function(e){o!==e&&(a=xa(e),o=e,r.$validate())}),r.$validators.maxlength=function(e,t){return a<0||r.$isEmpty(t)||t.length<=a}}}}}],ka=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o=i.minlength||e(i.ngMinlength)(t),a=xa(o)||-1;i.$observe("minlength",function(e){o!==e&&(a=xa(e)||-1,o=e,r.$validate())}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=a}}}}}];function Ia(e,t,n){if(e){if(V(e)&&(e=new RegExp("^"+e+"$")),!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",t,e,we(n));return e}}function xa(e){var t=N(e);return P(t)?-1:t}e.angular.bootstrap?e.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var t;if(!Me){var n=le();(s=F(n)?e.jQuery:n?e[n]:void 0)&&s.fn.on?(a=s,x(s.fn,{scope:Dt.scope,isolateScope:Dt.isolateScope,controller:Dt.controller,injector:Dt.injector,inheritedData:Dt.inheritedData})):a=ft,t=a.cleanData,a.cleanData=function(e){for(var n,i,r=0;null!=(i=e[r]);r++)(n=(a._data(i)||{}).events)&&n.$destroy&&a(i).triggerHandler("$destroy");t(e)},A.element=a,Me=!0}}(),function(t){x(t,{errorHandlingConfig:n,bootstrap:xe,copy:ae,extend:x,merge:D,equals:ue,element:a,forEach:C,injector:Xt,noop:M,bind:de,toJson:ge,fromJson:me,identity:R,isUndefined:F,isDefined:U,isString:V,isFunction:z,isObject:B,isNumber:q,isElement:ne,isArray:W,version:Ke,isDate:H,callbacks:{$$counter:0},getTestability:Ne,reloadWithDebugInfo:De,$$minErr:r,$$csp:ce,$$encodeUriSegment:Se,$$encodeUriQuery:Ee,$$lowercase:f,$$stringify:Be,$$uppercase:d}),(u=function(e){var t=r("$injector"),n=r("ng");function i(e,t,n){return e[t]||(e[t]=n())}var o=i(e,"angular",Object);return o.$$minErr=o.$$minErr||r,i(o,"module",function(){var e={};return function(r,o,a){var s={};return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(r,"module"),o&&e.hasOwnProperty(r)&&(e[r]=null),i(e,r,function(){if(!o)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var e=[],i=[],u=[],c=h("$injector","invoke","push",i),l={_invokeQueue:e,_configBlocks:i,_runBlocks:u,info:function(e){if(U(e)){if(!B(e))throw n("aobj","Argument '{0}' must be an object","value");return s=e,this}return s},requires:o,name:r,provider:f("$provide","provider"),factory:f("$provide","factory"),service:f("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:f("$provide","decorator",i),animation:f("$animateProvider","register"),filter:f("$filterProvider","register"),controller:f("$controllerProvider","register"),directive:f("$compileProvider","directive"),component:f("$compileProvider","component"),config:c,run:function(e){return u.push(e),this}};return a&&c(a),l;function h(t,n,i,r){return r||(r=e),function(){return r[i||"push"]([t,n,arguments]),l}}function f(t,n,i){return i||(i=e),function(e,o){return o&&z(o)&&(o.$$moduleName=r),i.push([t,n,arguments]),l}}})}})}(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Hi}),e.provider("$compile",gn).directive({a:jr,input:_o,textarea:_o,form:zr,script:ya,select:_a,option:Ca,ngBind:To,ngBindHtml:Io,ngBindTemplate:ko,ngClass:No,ngClassEven:Oo,ngClassOdd:Po,ngCloak:Mo,ngController:Ro,ngForm:Kr,ngHide:ha,ngIf:Uo,ngInclude:Bo,ngInit:Vo,ngNonBindable:na,ngPluralize:aa,ngRef:ua,ngRepeat:ca,ngShow:la,ngStyle:fa,ngSwitch:da,ngSwitchWhen:pa,ngSwitchDefault:ga,ngOptions:oa,ngTransclude:va,ngModel:Xo,ngList:qo,ngChange:xo,pattern:Ea,ngPattern:Ea,required:Sa,ngRequired:Sa,minlength:ka,ngMinlength:ka,maxlength:Ta,ngMaxlength:Ta,ngValue:Eo,ngModelOptions:ea}).directive({ngInclude:jo,input:Co}).directive(Vr).directive($o),e.provider({$anchorScroll:Jt,$animate:an,$animateCss:cn,$$animateJs:rn,$$animateQueue:on,$$AnimateRunner:un,$$animateAsyncRun:sn,$browser:ln,$cacheFactory:hn,$controller:Sn,$document:En,$$isDocumentHidden:Tn,$exceptionHandler:kn,$filter:pr,$$forceReflow:In,$interpolate:zn,$interval:Qn,$$intervalFactory:Yn,$http:qn,$httpParamSerializer:$n,$httpParamSerializerJQLike:Ln,$httpBackend:Wn,$xhrFactory:Hn,$jsonpCallbacks:Xn,$location:pi,$log:gi,$parse:Ri,$rootScope:qi,$q:$i,$$q:Li,$sce:Xi,$sceDelegate:Yi,$sniffer:Ji,$$taskTrackerFactory:Zi,$templateCache:fn,$templateRequest:tr,$$testability:nr,$timeout:rr,$window:hr,$$rAF:Vi,$$jqLite:Lt,$$Map:Vt,$$cookieReader:dr})}]).info({angularVersion:"1.7.8"})}(A),A.module("ngLocale",[],["$provide",function(e){var t="one",n="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,i){var r=0|e,o=function(e,t){var n=t;void 0===n&&(n=Math.min(function(e){var t=(e+="").indexOf(".");return-1==t?0:e.length-t-1}(e),3));var i=Math.pow(10,n);return{v:n,f:(e*i|0)%i}}(e,i);return 1==r&&0==o.v?t:n}})}]),a(function(){Ie(e.document,xe)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(e,t){"use strict";var n,i,r,o,a=1,s="-add",u="-remove",c="ng-",l="ng-animate",h="$$ngAnimateChildren";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?("-webkit-",n="WebkitTransition",i="webkitTransitionEnd transitionend"):(n="transition",i="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?("-webkit-",r="WebkitAnimation",o="webkitAnimationEnd animationend"):(r="animation",o="animationend");var f="Duration",d="TimingFunction",p="PlayState",g=r+"Delay",m=r+f,v=n+"Delay",y=n+f,b=t.$$minErr("ng");function A(e,t,n){if(!e)throw b("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function w(e,t){return e||t?e?t?(X(e)&&(e=e.join(" ")),X(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function _(e,t,n){var i="";return e=X(e)?e:e&&ne(e)&&e.length?e.split(/\s+/):[],Y(e,function(e,r){e&&e.length>0&&(i+=r>0?" ":"",i+=n?t+e:e+t)}),i}function C(e){if(e instanceof re)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===a)return e;break;default:return re(S(e))}if(e.nodeType===a)return re(e)}function S(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===a)return n}}function E(e){return function(t,n){n.addClass&&(!function(e,t,n){Y(t,function(t){e.addClass(t,n)})}(e,t,n.addClass),n.addClass=null),n.removeClass&&(!function(e,t,n){Y(t,function(t){e.removeClass(t,n)})}(e,t,n.removeClass),n.removeClass=null)}}function T(e){if(!(e=e||{}).$$prepared){var t=e.domOperation||oe;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=oe},e.$$prepared=!0}return e}function k(e,t){I(e,t),x(e,t)}function I(e,t){t.from&&(e.css(t.from),t.from=null)}function x(e,t){t.to&&(e.css(t.to),t.to=null)}function D(e,t,n){var i=t.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),a=(i.removeClass||"")+" "+(r.removeClass||""),c=function(e,t,n){var i={};e=o(e),t=o(t),Y(t,function(e,t){i[t]=1}),n=o(n),Y(n,function(e,t){i[t]=1===i[t]?null:-1});var r={addClass:"",removeClass:""};function o(e){ne(e)&&(e=e.split(" "));var t={};return Y(e,function(e){e.length&&(t[e]=!0)}),t}return Y(i,function(t,n){var i,o;1===t?(i="addClass",o=!e[n]||e[n+u]):-1===t&&(i="removeClass",o=e[n]||e[n+s]),o&&(r[i].length&&(r[i]+=" "),r[i]+=n)}),r}(e.attr("class"),o,a);r.preparationClasses&&(i.preparationClasses=M(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var l=i.domOperation!==oe?i.domOperation:null;return Q(i,r),l&&(i.domOperation=l),c.addClass?i.addClass=c.addClass:i.addClass=null,c.removeClass?i.removeClass=c.removeClass:i.removeClass=null,t.addClass=i.addClass,t.removeClass=i.removeClass,i}function N(e){return e instanceof re?e[0]:e}function P(e,t){var n=t?"paused":"",i=r+p;return O(e,[i,n]),[i,n]}function O(e,t){var n=t[0],i=t[1];e.style[n]=i}function M(e,t){return e?t?e+" "+t:e:t}var R={blockTransitions:function(e,t){var n=t?"-"+t+"s":"";return O(e,[v,n]),[v,n]}},$=["$interpolate",function(e){return{link:function(t,n,i){var r=i.ngAnimateChildren;function o(e){e="on"===e||"true"===e,n.data(h,e)}ne(r)&&0===r.length?n.data(h,!0):(o(e(r)(t)),i.$observe("ngAnimateChildren",o))}}}],L="$$animateCss",F=1e3,U=3,B=1.5,j={transitionDuration:y,transitionDelay:v,transitionProperty:n+"Property",animationDuration:m,animationDelay:g,animationIterationCount:r+"IterationCount"},V={transitionDuration:y,transitionDelay:v,animationDuration:m,animationDelay:g};function q(e,t){return[t?g:v,e+"s"]}function H(e,t,n){var i=Object.create(null),r=e.getComputedStyle(t)||{};return Y(n,function(e,t){var n,o,a=r[e];if(a){var s=a.charAt(0);("-"===s||"+"===s||s>=0)&&(n=0,o=a.split(/\s*,\s*/),Y(o,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,n=n?Math.max(e,n):e}),a=n),0===a&&(a=null),i[t]=a}}),i}function W(e){return 0===e||null!=e}function G(e,t){var i=n,r=e+"s";return t?i+=f:r+=" linear all",[i,r]}function z(e,t,n){Y(n,function(n){e[n]=J(e[n])?e[n]:t.style.getPropertyValue(n)})}var K,Q,Y,X,J,Z,ee,te,ne,ie,re,oe,ae=["$animateProvider",function(e){this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$animateCache","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,t,a,l,h,f,p,g,v){var y=E(t);var b=[];function A(e){b.push(e),g.waitUntilQuiet(function(){h.flush();for(var e=f(),t=0;t<b.length;t++)b[t](e);b.length=0})}function w(t,n,i,r){var o=function(t,n,i,r,o){var a=h.get(i);a||"infinite"===(a=H(e,t,o)).animationIterationCount&&(a.animationIterationCount=1);var s=r||a.transitionDuration>0||a.animationDuration>0;return h.put(i,a,s),a}(t,0,i,r,j),a=o.animationDelay,s=o.transitionDelay;return o.maxDelay=a&&s?Math.max(a,s):a||s,o.maxDuration=Math.max(o.animationDuration*o.animationIterationCount,o.transitionDuration),o}return function(f,g){var b=g||{};b.$$prepared||(b=T(K(b)));var C={},S=N(f);if(!S||!S.parentNode||!v.enabled())return De();var E,D,M,$,j,Q,J,Z,ee,te,ne=[],ie=(f.attr("class"),function(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}(b)),re=[];if(0===b.duration||!p.animations&&!p.transitions)return De();var ae=b.event&&X(b.event)?b.event.join(" "):b.event,se=ae&&b.structural,ue="",ce="";se?ue=_(ae,c,!0):ae&&(ue=ae),b.addClass&&(ce+=_(b.addClass,s)),b.removeClass&&(ce.length&&(ce+=" "),ce+=_(b.removeClass,u)),b.applyClassesEarly&&ce.length&&y(f,b);var le=[ue,ce].join(" ").trim(),he=ie.to&&Object.keys(ie.to).length>0;if(!((b.keyframeStyle||"").length>0)&&!he&&!le)return De();var fe,de,pe=h.cacheKey(S,ae,b.addClass,b.removeClass);if(h.containsCachedAnimationWithoutDuration(pe))return le=null,De();if(b.stagger>0){var ge=parseFloat(b.stagger);fe={transitionDelay:ge,animationDelay:ge,transitionDuration:0,animationDuration:0}}else fe=function(n,i,r,o){var a,s="stagger-"+r;if(h.count(r)>0&&!(a=h.get(s))){var u=_(i,"-stagger");t.addClass(n,u),(a=H(e,n,o)).animationDuration=Math.max(a.animationDuration,0),a.transitionDuration=Math.max(a.transitionDuration,0),t.removeClass(n,u),h.put(s,a,!0)}return a||{}}(S,le,pe,V);if(b.$$skipPreparationClasses||t.addClass(f,le),b.transitionStyle){var me=[n,b.transitionStyle];O(S,me),ne.push(me)}if(b.duration>=0){de=S.style[n].length>0;var ve=G(b.duration,de);O(S,ve),ne.push(ve)}if(b.keyframeStyle){var ye=[r,b.keyframeStyle];O(S,ye),ne.push(ye)}var be=fe?b.staggerIndex>=0?b.staggerIndex:h.count(pe):0,Ae=0===be;Ae&&!b.skipBlocking&&R.blockTransitions(S,9999);var we=w(S,0,pe,!se),_e=we.maxDelay;Q=Math.max(_e,0),Z=we.maxDuration;var Ce={};if(Ce.hasTransitions=we.transitionDuration>0,Ce.hasAnimations=we.animationDuration>0,Ce.hasTransitionAll=Ce.hasTransitions&&"all"===we.transitionProperty,Ce.applyTransitionDuration=he&&(Ce.hasTransitions&&!Ce.hasTransitionAll||Ce.hasAnimations&&!Ce.hasTransitions),Ce.applyAnimationDuration=b.duration&&Ce.hasAnimations,Ce.applyTransitionDelay=W(b.delay)&&(Ce.applyTransitionDuration||Ce.hasTransitions),Ce.applyAnimationDelay=W(b.delay)&&Ce.hasAnimations,Ce.recalculateTimingStyles=ce.length>0,(Ce.applyTransitionDuration||Ce.applyAnimationDuration)&&(Z=b.duration?parseFloat(b.duration):Z,Ce.applyTransitionDuration&&(Ce.hasTransitions=!0,we.transitionDuration=Z,de=S.style[n+"Property"].length>0,ne.push(G(Z,de))),Ce.applyAnimationDuration&&(Ce.hasAnimations=!0,we.animationDuration=Z,ne.push([m,Z+"s"]))),0===Z&&!Ce.recalculateTimingStyles)return De();var Se,Ee=_(le,"-active");null!=b.delay&&("boolean"!=typeof b.delay&&(Se=parseFloat(b.delay),Q=Math.max(Se,0)),Ce.applyTransitionDelay&&ne.push(q(Se)),Ce.applyAnimationDelay&&ne.push(q(Se,!0)));return null==b.duration&&we.transitionDuration>0&&(Ce.recalculateTimingStyles=Ce.recalculateTimingStyles||Ae),J=Q*F,ee=Z*F,b.skipBlocking||(Ce.blockTransition=we.transitionDuration>0,Ce.blockKeyframeAnimation=we.animationDuration>0&&fe.animationDelay>0&&0===fe.animationDuration),b.from&&(b.cleanupStyles&&z(C,S,Object.keys(b.from)),I(f,b)),Ce.blockTransition||Ce.blockKeyframeAnimation?xe(Z):b.skipBlocking||R.blockTransitions(S,!1),{$$willAnimate:!0,end:Te,start:function(){if(!E)return $=new a(j={end:Te,cancel:ke,resume:null,pause:null}),A(Pe),$}};function Te(){Ie()}function ke(){Ie(!0)}function Ie(e){if(!(E||M&&D)){E=!0,D=!1,le&&!b.$$skipPreparationClasses&&t.removeClass(f,le),Ee&&t.removeClass(f,Ee),P(S,!1),R.blockTransitions(S,!1),Y(ne,function(e){S.style[e[0]]=""}),y(f,b),k(f,b),Object.keys(C).length&&Y(C,function(e,t){e?S.style.setProperty(t,e):S.style.removeProperty(t)}),b.onDone&&b.onDone(),re&&re.length&&f.off(re.join(" "),Ne);var n=f.data(L);n&&(l.cancel(n[0].timer),f.removeData(L)),$&&$.complete(!e)}}function xe(e){Ce.blockTransition&&R.blockTransitions(S,e),Ce.blockKeyframeAnimation&&P(S,!!e)}function De(){return $=new a({end:Te,cancel:ke}),A(oe),Ie(),{$$willAnimate:!1,start:function(){return $},end:Te}}function Ne(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target===S){var n=t.$manualTimeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(U));Math.max(n-te,0)>=J&&i>=Z&&(M=!0,Ie())}}function Pe(){if(!E)if(S.parentNode){var e=function(e){if(M)D&&e&&(D=!1,Ie());else if(D=!e,we.animationDuration){var t=P(S,D);D?ne.push(t):(i=t,r=(n=ne).indexOf(i),i>=0&&n.splice(r,1))}var n,i,r},a=be>0&&(we.transitionDuration&&0===fe.transitionDuration||we.animationDuration&&0===fe.animationDuration)&&Math.max(fe.animationDelay,fe.transitionDelay);a?l(s,Math.floor(a*be*F),!1):s(),j.resume=function(){e(!0)},j.pause=function(){e(!1)}}else Ie();function s(){if(!E){if(xe(!1),Y(ne,function(e){var t=e[0],n=e[1];S.style[t]=n}),y(f,b),t.addClass(f,Ee),Ce.recalculateTimingStyles){if(S.getAttribute("class")+" "+le,pe=h.cacheKey(S,ae,b.addClass,b.removeClass),we=w(S,0,pe,!1),_e=we.maxDelay,Q=Math.max(_e,0),0===(Z=we.maxDuration))return void Ie();Ce.hasTransitions=we.transitionDuration>0,Ce.hasAnimations=we.animationDuration>0}if(Ce.applyAnimationDelay&&(_e="boolean"!=typeof b.delay&&W(b.delay)?parseFloat(b.delay):_e,Q=Math.max(_e,0),we.animationDelay=_e,Se=q(_e,!0),ne.push(Se),S.style[Se[0]]=Se[1]),J=Q*F,ee=Z*F,b.easing){var e,a=b.easing;Ce.hasTransitions&&(e=n+d,ne.push([e,a]),S.style[e]=a),Ce.hasAnimations&&(e=r+d,ne.push([e,a]),S.style[e]=a)}we.transitionDuration&&re.push(i),we.animationDuration&&re.push(o),te=Date.now();var s=J+B*ee,c=te+s,p=f.data(L)||[],g=!0;if(p.length){var m=p[0];(g=c>m.expectedEndTime)?l.cancel(m.timer):p.push(Ie)}if(g){var v=l(u,s,!1);p[0]={timer:v,expectedEndTime:c},p.push(Ie),f.data(L,p)}re.length&&f.on(re.join(" "),Ne),b.to&&(b.cleanupStyles&&z(C,S,Object.keys(b.to)),x(f,b))}}function u(){var e=f.data(L);if(e){for(var t=1;t<e.length;t++)e[t]();f.removeData(L)}}}}}]}],se=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");var t="ng-animate-shim",n="ng-anchor",i="ng-anchor-out",r="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,o,a,s,u,c,l){if(!u.animations&&!u.transitions)return oe;var h,f=l[0].body,d=N(s),p=re((h=d).parentNode&&11===h.parentNode.nodeType||f.contains(d)?d:f);return function(o){return o.from&&o.to?function(o,s,u,c){var l=v(o),h=v(s),d=[];if(Y(c,function(o){var s=function(o,s,u){var c=re(N(s).cloneNode(!0)),l=g(A(c));s.addClass(t),u.addClass(t),c.addClass(n),p.append(c);var h,d,v=(d=e(c,{addClass:i,delay:!0,from:b(s)})).$$willAnimate?d:null;if(!v&&!(h=w()))return _();var y=v||h;return{start:function(){var e,t=y.start();return t.done(function(){if(t=null,!h&&(h=w()))return(t=h.start()).done(function(){t=null,_(),e.complete()}),t;_(),e.complete()}),e=new a({end:n,cancel:n});function n(){t&&t.end()}}};function b(e){var t={},n=N(e).getBoundingClientRect();return Y(["width","height","top","left"],function(e){var i=n[e];switch(e){case"top":i+=f.scrollTop;break;case"left":i+=f.scrollLeft}t[e]=Math.floor(i)+"px"}),t}function A(e){return e.attr("class")||""}function w(){var t=g(A(u)),n=m(t,l),o=m(l,t),a=e(c,{to:b(u),addClass:r+" "+n,removeClass:i+" "+o,delay:!0});return a.$$willAnimate?a:null}function _(){c.remove(),s.removeClass(t),u.removeClass(t)}}(0,o.out,o.in);s&&d.push(s)}),!l&&!h&&0===d.length)return;return{start:function(){var e=[];l&&e.push(l.start()),h&&e.push(h.start()),Y(d,function(t){e.push(t.start())});var t=new a({end:n,cancel:n});return a.all(e,function(e){t.complete(e)}),t;function n(){Y(e,function(e){e.end()})}}}}(o.from,o.to,o.classes,o.anchors):v(o)};function g(e){return e.replace(/\bng-\S+\b/g,"")}function m(e,t){return ne(e)&&(e=e.split(" ")),ne(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function v(t){var n=t.element,i=t.options||{};t.structural&&(i.event=t.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===t.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=M(i.event,i.preparationClasses));var r=e(n,i);return r.$$willAnimate?r:null}}]}],ue=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,i){var r=E(i);return function(i,o,a,s){var u=!1;3===arguments.length&&te(a)&&(s=a,a=null),s=T(s),a||(a=i.attr("class")||"",s.addClass&&(a+=" "+s.addClass),s.removeClass&&(a+=" "+s.removeClass));var c,l,h,f,d,p=s.addClass,g=s.removeClass,m=function(n){n=X(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];s&&!r[a]&&(i.push(t.get(s)),r[a]=!0)}return i}(a);m.length&&("leave"===o?(f="leave",h="afterLeave"):(f="before"+o.charAt(0).toUpperCase()+o.substr(1),h=o),"enter"!==o&&"move"!==o&&(c=A(i,o,s,m,f)),l=A(i,o,s,m,h));if(c||l)return{$$willAnimate:!0,end:function(){return d?d.end():(y(),(d=new n).complete(!0)),d},start:function(){if(d)return d;var e;d=new n;var t=[];return c&&t.push(function(t){e=c(t)}),t.length?t.push(function(e){v(),e(!0)}):v(),l&&t.push(function(t){e=l(t)}),d.setHost({end:function(){r()},cancel:function(){r(!0)}}),n.chain(t,i),d;function i(e){y(),d.complete(e)}function r(t){u||((e||oe)(t),i(t))}}};function v(){s.domOperation(),r(i,s)}function y(){u=!0,v(),k(i,s)}function b(e,t,i,r,o){var a=[];return Y(r,function(r){var s=r[o];s&&a.push(function(){var r,o,a=!1,u=function(e){a||(a=!0,(o||oe)(e),r.complete(!e))};return r=new n({end:function(){u()},cancel:function(){u(!0)}}),o=function(e,t,i,r,o){var a;switch(i){case"animate":a=[t,r.from,r.to,o];break;case"setClass":a=[t,p,g,o];break;case"addClass":a=[t,p,o];break;case"removeClass":a=[t,g,o];break;default:a=[t,o]}a.push(r);var s=e.apply(e,a);if(s)if(ee(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(ee(s))return s;return oe}(s,e,t,i,function(e){u(!1===e)}),r})}),a}function A(e,t,i,r,o){var a,s,u=b(e,t,i,r,o);0===u.length&&("beforeSetClass"===o?(a=b(e,"removeClass",i,r,"beforeRemoveClass"),s=b(e,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(a=b(e,"removeClass",i,r,"removeClass"),s=b(e,"addClass",i,r,"addClass")),a&&(u=u.concat(a)),s&&(u=u.concat(s)));if(0!==u.length)return function(e){var t=[];return u.length&&Y(u,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){Y(t,function(t){e?t.cancel():t.end()})}}}}}]}],ce=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){return function(e){if(e.from&&e.to){var i=n(e.from),r=n(e.to);if(!i&&!r)return;return{start:function(){var e=[];i&&e.push(i.start()),r&&e.push(r.start()),t.all(e,function(e){n.complete(e)});var n=new t({end:o(),cancel:o()});return n;function o(){return function(){Y(e,function(e){e.end()})}}}}}return n(e)};function n(t){var n=t.element,i=t.event,r=t.options,o=t.classes;return e(n,i,o,r)}}]}],le="data-ng-animate",he="$ngAnimatePin",fe=["$animateProvider",function(t){var n=1,i=2,r=" ",o=this.rules={skip:[],cancel:[],join:[]};function l(e){return{addClass:e.addClass,removeClass:e.removeClass,from:e.from,to:e.to}}function f(e,t){if(e&&t){var n=function(e){if(!e)return null;var t=e.split(r),n=Object.create(null);return Y(t,function(e){n[e]=!0}),n}(t);return e.split(r).some(function(e){return n[e]})}}function d(e,t,n){return o[e].some(function(e){return e(t,n)})}function p(e,t){var n=(e.addClass||"").length>0,i=(e.removeClass||"").length>0;return t?n&&i:n||i}o.join.push(function(e,t){return!e.structural&&p(e)}),o.skip.push(function(e,t){return!e.structural&&!p(e)}),o.skip.push(function(e,t){return"leave"===t.event&&e.structural}),o.skip.push(function(e,t){return t.structural&&t.state===i&&!e.structural}),o.cancel.push(function(e,t){return t.structural&&e.structural}),o.cancel.push(function(e,t){return t.state===i&&e.structural}),o.cancel.push(function(e,t){if(t.structural)return!1;var n=e.addClass,i=e.removeClass,r=t.addClass,o=t.removeClass;return!(ie(n)&&ie(i)||ie(r)&&ie(o))&&(f(n,o)||f(i,r))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(r,o,f,g,m,v,y,b,w,I,x){var P=new m,O=new m,R=null;function $(e){O.delete(e.target)}var L=o.$watch(function(){return 0===b.totalPendingRequests},function(e){e&&(L(),o.$$postDigest(function(){o.$$postDigest(function(){null===R&&(R=!0)})}))}),F=Object.create(null),U=t.customFilter(),B=t.classNameFilter(),j=function(){return!0},V=U||j,q=B?function(e,t){var n=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return B.test(n)}:j,H=E(w);function W(e,t){return D(e,t,{})}var G=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))};function z(e,t,n){var i=S(t);return e.filter(function(e){return!(e.node===i&&(!n||e.callback===n))})}function ee(e,t){"close"!==e||t.parentNode||oe.off(t)}var oe={on:function(e,t,n){var i=S(t);F[e]=F[e]||[],F[e].push({node:i,callback:n}),re(t).on("$destroy",function(){P.get(i)||oe.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||ne(arguments[0])){var i=F[e];i&&(F[e]=1===arguments.length?null:z(i,t,n))}else for(var r in t=arguments[0],F)F[r]=z(F[r],t)},pin:function(e,t){A(Z(e),"element","not an element"),A(Z(t),"parentElement","not an element"),e.data(he,t)},push:function(e,t,m,b){return(m=m||{}).domOperation=b,function(e,t,m){var b=K(m),A=C(e),w=N(A),S=w&&w.parentNode;b=T(b);var E=new y,I=($=!1,function(e){$?e():o.$$postDigest(function(){$=!0,e()})});var $;X(b.addClass)&&(b.addClass=b.addClass.join(" "));b.addClass&&!ne(b.addClass)&&(b.addClass=null);X(b.removeClass)&&(b.removeClass=b.removeClass.join(" "));b.removeClass&&!ne(b.removeClass)&&(b.removeClass=null);b.from&&!te(b.from)&&(b.from=null);b.to&&!te(b.to)&&(b.to=null);if(!(R&&w&&V(w,t,m)&&q(w,b)))return pe(),E;var L=["enter","move","leave"].indexOf(t)>=0,U=x(),B=U||O.get(w),j=!B&&P.get(w)||{},z=!!j.state;B||z&&j.state===n||(B=!function(e,t,n){var i,r=g[0].body,o=N(f),s=e===r||"HTML"===e.nodeName,u=e===o,c=!1,l=O.get(e),d=re.data(e,he);d&&(t=N(d));for(;t&&(u||(u=t===o),t.nodeType===a);){var p=P.get(t)||{};if(!c){var m=O.get(t);if(!0===m&&!1!==l){l=!0;break}!1===m&&(l=!1),c=p.structural}if(ie(i)||!0===i){var v=re.data(t,h);J(v)&&(i=v)}if(c&&!1===i)break;if(s||(s=t===r),s&&u)break;t=u||!(d=re.data(t,he))?t.parentNode:N(d)}return(!c||i)&&!0!==l&&u&&s}(w,S));if(B)return U&&de(E,t,"start",l(b)),pe(),U&&de(E,t,"close",l(b)),E;L&&function(e){var t=e.querySelectorAll("["+le+"]");Y(t,function(e){var t=parseInt(e.getAttribute(le),10),r=P.get(e);if(r)switch(t){case i:r.runner.end();case n:P.delete(e)}})}(w);var Q={structural:L,element:A,event:t,addClass:b.addClass,removeClass:b.removeClass,close:pe,options:b,runner:E};if(z){var Z=d("skip",Q,j);if(Z)return j.state===i?(pe(),E):(D(A,j,Q),j.runner);var oe=d("cancel",Q,j);if(oe)if(j.state===i)j.runner.end();else{if(!j.structural)return D(A,j,Q),j.runner;j.close()}else{var ue=d("join",Q,j);if(ue){if(j.state!==i)return function(e,t,n,i){var r="";n&&(r=_(n,c,!0)),i.addClass&&(r=M(r,_(i.addClass,s))),i.removeClass&&(r=M(r,_(i.removeClass,u))),r.length&&(i.preparationClasses=r,t.addClass(r))}(0,A,L?t:null,b),t=Q.event=j.event,b=D(A,j,Q),j.runner;W(A,Q)}}}else W(A,Q);var ce=Q.structural;ce||(ce="animate"===Q.event&&Object.keys(Q.options.to||{}).length>0||p(Q));if(!ce)return pe(),ae(w),E;var fe=(j.counter||0)+1;return Q.counter=fe,se(w,n,Q),o.$$postDigest(function(){A=C(e);var n=P.get(w),r=!n;n=n||{};var o=(A.parent()||[]).length>0&&("animate"===n.event||n.structural||p(n));if(r||n.counter!==fe||!o)return r&&(H(A,b),k(A,b)),(r||L&&n.event!==t)&&(b.domOperation(),E.end()),void(o||ae(w));t=!n.structural&&p(n,!0)?"setClass":n.event,se(w,i);var a=v(A,t,n.options);E.setHost(a),de(E,t,"start",l(b)),a.done(function(e){pe(!e);var n=P.get(w);n&&n.counter===fe&&ae(w),de(E,t,"close",l(b))})}),E;function de(e,t,n,i){I(function(){var e=function(e,t,n){var i=[],r=F[n];return r&&Y(r,function(r){G.call(r.node,t)?i.push(r.callback):"leave"===n&&G.call(r.node,e)&&i.push(r.callback)}),i}(S,w,t);e.length?r(function(){Y(e,function(e){e(A,n,i)}),ee(n,w)}):ee(n,w)}),e.progress(t,n,i)}function pe(e){!function(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}(A,b),H(A,b),k(A,b),b.domOperation(),E.complete(!e)}}(e,t,m)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!R;else if(Z(e)){var i=N(e);1===n?t=!O.get(i):(O.has(i)||re(e).on("$destroy",$),O.set(i,!t))}else t=R=!!e;return t}};return oe;function ae(e){e.removeAttribute(le),P.delete(e)}function se(e,t,n){(n=n||{}).state=t,e.setAttribute(le,t);var i=P.get(e),r=i?Q(i,n):n;P.set(e,r)}}]}],de=["$animateProvider",function(e){var t="ng-animate-ref",n=this.drivers=[],i="$$animationRunner",r="$$animatePrepareClasses";function o(e){return e.data(i)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler","$$animateCache",function(e,a,s,u,c,h,f){var d=[],p=E(e);return function(g,m,v){v=T(v);var y=["enter","move","leave"].indexOf(m)>=0,b=new u({end:function(){S()},cancel:function(){S(!0)}});if(!n.length)return S(),b;var A=w(g.attr("class"),w(v.addClass,v.removeClass)),_=v.tempClasses;return _&&(A+=" "+_,v.tempClasses=null),y&&g.data(r,"ng-"+m+"-prepare"),function(e,t){e.data(i,t)}(g,b),d.push({element:g,classes:A,event:m,structural:y,options:v,beforeStart:function(){_=(_?_+" ":"")+l,e.addClass(g,_);var t=g.data(r);t&&(e.removeClass(g,t),t=null)},close:S}),g.on("$destroy",C),d.length>1?b:(a.$$postDigest(function(){var i=[];Y(d,function(e){o(e.element)?i.push(e):e.close()}),d.length=0;var a=function(e){var n=[],i={};Y(e,function(e,r){var o=e.element,a=N(o),s=e.event,u=["enter","move"].indexOf(s)>=0,c=e.structural?function(e){var n="["+t+"]",i=e.hasAttribute(t)?[e]:e.querySelectorAll(n),r=[];return Y(i,function(e){var n=e.getAttribute(t);n&&n.length&&r.push(e)}),r}(a):[];if(c.length){var l=u?"to":"from";Y(c,function(e){var n=e.getAttribute(t);i[n]=i[n]||{},i[n][l]={animationID:r,element:re(e)}})}else n.push(e)});var r={},o={};return Y(i,function(t,i){var a=t.from,s=t.to;if(a&&s){var u=e[a.animationID],c=e[s.animationID],l=a.animationID.toString();if(!o[l]){var h=o[l]={structural:!0,beforeStart:function(){u.beforeStart(),c.beforeStart()},close:function(){u.close(),c.close()},classes:function(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],i=0;i<e.length;i++){var r=e[i];if("ng-"!==r.substring(0,3))for(var o=0;o<t.length;o++)if(r===t[o]){n.push(r);break}}return n.join(" ")}(u.classes,c.classes),from:u,to:c,anchors:[]};h.classes.length?n.push(h):(n.push(u),n.push(c))}o[l].anchors.push({out:a.element,in:s.element})}else{var f=a?a.animationID:s.animationID,d=f.toString();r[d]||(r[d]=!0,n.push(e[f]))}}),n}(i),u=[];Y(a,function(e){var t=e.from?e.from.element:e.element,i=v.addClass;i=(i?i+" ":"")+l;var r=f.cacheKey(t[0],e.event,i,v.removeClass);u.push({element:t,domNode:N(t),fn:function(){var t,i=e.close;if(f.containsCachedAnimationWithoutDuration(r))i();else{if(e.beforeStart(),o(e.anchors?e.from.element||e.to.element:e.element)){var a=function(e){for(var t=n.length-1;t>=0;t--){var i=n[t],r=s.get(i),o=r(e);if(o)return o}}(e);a&&(t=a.start)}if(t){var u=t();u.done(function(e){i(!e)}),function(e,t){e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element);function n(e){var n=o(e);n&&n.setHost(t)}}(e,u)}else i()}}})});for(var p=function(e){var t,n={children:[]},i=new c;for(t=0;t<e.length;t++){var r=e[t];i.set(r.domNode,e[t]={domNode:r.domNode,element:r.element,fn:r.fn,children:[]})}for(t=0;t<e.length;t++)o(e[t]);return function(e){var t,n=[],i=[];for(t=0;t<e.children.length;t++)i.push(e.children[t]);var r=i.length,o=0,a=[];for(t=0;t<i.length;t++){var s=i[t];r<=0&&(r=o,o=0,n.push(a),a=[]),a.push(s),s.children.forEach(function(e){o++,i.push(e)}),r--}return a.length&&n.push(a),n}(n);function o(e){if(e.processed)return e;e.processed=!0;var t,r=e.domNode,a=r.parentNode;for(i.set(r,e);a;){if(t=i.get(a)){t.processed||(t=o(t));break}a=a.parentNode}return(t||n).children.push(e),e}}(u),g=0;g<p.length;g++)for(var m=p[g],y=0;y<m.length;y++){var b=m[y],A=b.element;if(p[g][y]=b.fn,0!==g){var w=A.data(r);w&&e.addClass(A,w)}else A.removeData(r)}h(p)}),b);function C(){var e=o(g);!e||"leave"===m&&v.$$domOperationFired||e.end()}function S(t){g.off("$destroy",C),function(e){e.removeData(i)}(g),p(g,v),k(g,v),v.domOperation(),_&&e.removeClass(g,_),b.complete(!t)}}}]}];t.module("ngAnimate",[],function(){oe=t.noop,K=t.copy,Q=t.extend,re=t.element,Y=t.forEach,X=t.isArray,ne=t.isString,te=t.isObject,ie=t.isUndefined,J=t.isDefined,ee=t.isFunction,Z=t.isElement}).info({angularVersion:"1.7.8"}).directive("ngAnimateSwap",["$animate",function(e){return{restrict:"A",transclude:"element",terminal:!0,priority:550,link:function(t,n,i,r,o){var a,s;t.$watchCollection(i.ngAnimateSwap||i.for,function(t){a&&e.leave(a),s&&(s.$destroy(),s=null),(t||0===t)&&o(function(t,i){a=t,s=i,e.enter(t,null,n)})})}}}]).directive("ngAnimateChildren",$).factory("$$rAFScheduler",["$$rAF",function(e){var t,n;function i(e){t=t.concat(e),r()}return t=i.queue=[],i.waitUntilQuiet=function(t){n&&n(),n=e(function(){n=null,t(),r()})},i;function r(){if(t.length){for(var i=t.shift(),o=0;o<i.length;o++)i[o]();n||e(function(){n||r()})}}}]).provider("$$animateQueue",fe).provider("$$animateCache",function(){var e="$$ngAnimateParentKey",t=0,n=Object.create(null);this.$get=[function(){return{cacheKey:function(n,i,r,o){var a=n.parentNode,s=[a[e]||(a[e]=++t),i,n.getAttribute("class")];return r&&s.push(r),o&&s.push(o),s.join(" ")},containsCachedAnimationWithoutDuration:function(e){var t=n[e];return t&&!t.isValid||!1},flush:function(){n=Object.create(null)},count:function(e){var t=n[e];return t?t.total:0},get:function(e){var t=n[e];return t&&t.value},put:function(e,t,i){n[e]?(n[e].total++,n[e].value=t):n[e]={total:1,value:t,isValid:i}}}}]}).provider("$$animation",de).provider("$animateCss",ae).provider("$$animateCssDriver",se).provider("$$animateJs",ue).provider("$$animateJsDriver",ce)}(window,window.angular),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],i=e.document,r=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,c={},l=c.toString,h=c.hasOwnProperty,f=h.toString,d=f.call(Object),p={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},m=function(e){return null!=e&&e===e.window},v={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,n){var r,o,a=(n=n||i).createElement("script");if(a.text=e,t)for(r in v)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,o);n.head.appendChild(a).parentNode.removeChild(a)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[l.call(e)]||"object":typeof e}var A=function(e,t){return new A.fn.init(e,t)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function _(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!g(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}A.fn=A.prototype={jquery:"3.4.1",constructor:A,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=A.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return A.each(this,e)},map:function(e){return this.pushStack(A.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},A.extend=A.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(c&&i&&(A.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],o=r&&!Array.isArray(n)?[]:r||A.isPlainObject(n)?n:{},r=!1,a[t]=A.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},A.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==l.call(e))&&(!(t=r(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&f.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){y(e,{nonce:t&&t.nonce})},each:function(e,t){var n,i=0;if(_(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?A.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,s=[];if(_(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&s.push(r);return a.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=n[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var C=function(e){var t,n,i,r,o,a,s,u,c,l,h,f,d,p,g,m,v,y,b,A="sizzle"+1*new Date,w=e.document,_=0,C=0,S=ue(),E=ue(),T=ue(),k=ue(),I=function(e,t){return e===t&&(h=!0),0},x={}.hasOwnProperty,D=[],N=D.pop,P=D.push,O=D.push,M=D.slice,R=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",j=new RegExp(L+"+","g"),V=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),q=new RegExp("^"+L+"*,"+L+"*"),H=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp(L+"|>"),G=new RegExp(B),z=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},ae=Ae(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{O.apply(D=M.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(e){O={apply:D.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,r){var o,s,c,l,h,p,v,y=t&&t.ownerDocument,_=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return i;if(!r&&((t?t.ownerDocument||t:w)!==d&&f(t),t=t||d,g)){if(11!==_&&(h=Z.exec(e)))if(o=h[1]){if(9===_){if(!(c=t.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(y&&(c=y.getElementById(o))&&b(t,c)&&c.id===o)return i.push(c),i}else{if(h[2])return O.apply(i,t.getElementsByTagName(e)),i;if((o=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&!k[e+" "]&&(!m||!m.test(e))&&(1!==_||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===_&&W.test(e)){for((l=t.getAttribute("id"))?l=l.replace(ie,re):t.setAttribute("id",l=A),s=(p=a(e)).length;s--;)p[s]="#"+l+" "+be(p[s]);v=p.join(","),y=ee.test(e)&&ve(t.parentNode)||t}try{return O.apply(i,y.querySelectorAll(v)),i}catch(t){k(e,!0)}finally{l===A&&t.removeAttribute("id")}}}return u(e.replace(V,"$1"),t,i,r)}function ue(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ce(e){return e[A]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function fe(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce(function(t){return t=+t,ce(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(p=(d=a).documentElement,g=!o(d),w!==d&&(r=d.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",oe,!1):r.attachEvent&&r.attachEvent("onunload",oe)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(d.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=A,!d.getElementsByName||!d.getElementsByName(A).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=J.test(d.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+A+"'></a><select id='"+A+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+$+")"),e.querySelectorAll("[id~="+A+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+A+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",B)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return h=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===d||e.ownerDocument===w&&b(w,e)?-1:t===d||t.ownerDocument===w&&b(w,t)?1:l?R(l,e)-R(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===d?-1:t===d?1:r?-1:o?1:l?R(l,e)-R(l,t):0;if(r===o)return fe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?fe(a[i],s[i]):a[i]===w?-1:s[i]===w?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&f(e),n.matchesSelector&&g&&!k[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){k(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==d&&f(e);var r=i.attrHandle[t.toLowerCase()],o=r&&x.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(ie,re)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],r=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(I),h){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return l=null,e},r=se.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=se.selectors={cacheLength:50,createPseudo:ce,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=se.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(j," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var c,l,h,f,d,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(b=(d=(c=(l=(h=(f=m)[A]||(f[A]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(b=d=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[_,d,b];break}}else if(y&&(b=d=(c=(l=(h=(f=t)[A]||(f[A]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(f=++d&&f&&f[g]||(b=d=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((l=(h=f[A]||(f[A]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[_,b]),f!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return r[A]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=R(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ce(function(e){var t=[],n=[],i=s(e.replace(V,"$1"));return i[A]?ce(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:ce(function(e){return function(t){return se(e,t).length>0}}),contains:ce(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}}),lang:ce(function(e){return z.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:me(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ye(){}function be(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function Ae(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,u){var c,l,h,f=[_,s];if(u){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(l=(h=t[A]||(t[A]={}))[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=l[o])&&c[0]===_&&c[1]===s)return f[2]=c[2];if(l[o]=f,f[2]=e(t,n,u))return!0}return!1}}function we(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function _e(e,t,n,i,r){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function Ce(e,t,n,i,r,o){return i&&!i[A]&&(i=Ce(i)),r&&!r[A]&&(r=Ce(r,o)),ce(function(o,a,s,u){var c,l,h,f=[],d=[],p=a.length,g=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)se(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:_e(g,f,e,s,u),v=n?r||(o?e:p||i)?[]:a:m;if(n&&n(m,v,s,u),i)for(c=_e(v,d),i(c,[],s,u),l=c.length;l--;)(h=c[l])&&(v[d[l]]=!(m[d[l]]=h));if(o){if(r||e){if(r){for(c=[],l=v.length;l--;)(h=v[l])&&c.push(m[l]=h);r(null,v=[],c,u)}for(l=v.length;l--;)(h=v[l])&&(c=r?R(o,h):f[l])>-1&&(o[c]=!(a[c]=h))}}else v=_e(v===a?v.splice(p,v.length):v),r?r(null,a,v,u):O.apply(a,v)})}function Se(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,l=Ae(function(e){return e===t},s,!0),h=Ae(function(e){return R(t,e)>-1},s,!0),f=[function(e,n,i){var r=!a&&(i||n!==c)||((t=n).nodeType?l(e,n,i):h(e,n,i));return t=null,r}];u<o;u++)if(n=i.relative[e[u].type])f=[Ae(we(f),n)];else{if((n=i.filter[e[u].type].apply(null,e[u].matches))[A]){for(r=++u;r<o&&!i.relative[e[r].type];r++);return Ce(u>1&&we(f),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(V,"$1"),n,u<r&&Se(e.slice(u,r)),r<o&&Se(e=e.slice(r)),r<o&&be(e))}f.push(n)}return we(f)}return ye.prototype=i.filters=i.pseudos,i.setFilters=new ye,a=se.tokenize=function(e,t){var n,r,o,a,s,u,c,l=E[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=i.preFilter;s;){for(a in n&&!(r=q.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=H.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(V," ")}),s=s.slice(n.length)),i.filter)!(r=K[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):E(e,u).slice(0)},s=se.compile=function(e,t){var n,r=[],o=[],s=T[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Se(t[n]))[A]?r.push(s):o.push(s);(s=T(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,u,l){var h,p,m,v=0,y="0",b=o&&[],A=[],w=c,C=o||r&&i.find.TAG("*",l),S=_+=null==w?1:Math.random()||.1,E=C.length;for(l&&(c=a===d||a||l);y!==E&&null!=(h=C[y]);y++){if(r&&h){for(p=0,a||h.ownerDocument===d||(f(h),s=!g);m=e[p++];)if(m(h,a||d,s)){u.push(h);break}l&&(_=S)}n&&((h=!m&&h)&&v--,o&&b.push(h))}if(v+=y,n&&y!==v){for(p=0;m=t[p++];)m(b,A,a,s);if(o){if(v>0)for(;y--;)b[y]||A[y]||(A[y]=N.call(u));A=_e(A)}O.apply(u,A),l&&!o&&A.length>0&&v+t.length>1&&se.uniqueSort(u)}return l&&(_=S,c=w),b};return n?ce(o):o}(o,r))).selector=e}return s},u=se.select=function(e,t,n,r){var o,u,c,l,h,f="function"==typeof e&&e,d=!r&&a(e=f.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&g&&i.relative[u[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=K.needsContext.test(e)?0:u.length;o--&&(c=u[o],!i.relative[l=c.type]);)if((h=i.find[l])&&(r=h(c.matches[0].replace(te,ne),ee.test(u[0].type)&&ve(t.parentNode)||t))){if(u.splice(o,1),!(e=r.length&&be(u)))return O.apply(n,r),n;break}}return(f||s(e,d))(r,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=A.split("").sort(I).join("")===A,n.detectDuplicates=!!h,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||he("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||he("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||he($,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),se}(e);A.find=C,A.expr=C.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=C.uniqueSort,A.text=C.getText,A.isXMLDoc=C.isXML,A.contains=C.contains,A.escapeSelector=C.escape;var S=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&A(e).is(n))break;i.push(e)}return i},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=A.expr.match.needsContext;function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function x(e,t,n){return g(t)?A.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?A.grep(e,function(e){return e===t!==n}):"string"!=typeof t?A.grep(e,function(e){return u.call(t,e)>-1!==n}):A.filter(t,e,n)}A.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?A.find.matchesSelector(i,e)?[i]:[]:A.find.matches(e,A.grep(t,function(e){return 1===e.nodeType}))},A.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(A(e).filter(function(){for(t=0;t<i;t++)if(A.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)A.find(e,r[t],n);return i>1?A.uniqueSort(n):n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&T.test(e)?A(e):e||[],!1).length}});var D,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:i,!0)),I.test(r[1])&&A.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=i.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(A):A.makeArray(e,this)}).prototype=A.fn,D=A(i);var P=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(A.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&A(e);if(!T.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&A.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?A.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(A(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(k(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},function(e,t){A.fn[e]=function(n,i){var r=A.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=A.filter(i,r)),this.length>1&&(O[e]||A.uniqueSort(r),P.test(e)&&r.reverse()),this.pushStack(r)}});var R=/[^\x20\t\r\n\f]+/g;function $(e){return e}function L(e){throw e}function F(e,t,n,i){var r;try{e&&g(r=e.promise)?r.call(e).done(t).fail(n):e&&g(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}A.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return A.each(e.match(R)||[],function(e,n){t[n]=!0}),t}(e):A.extend({},e);var t,n,i,r,o=[],a=[],s=-1,u=function(){for(r=r||e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){A.each(n,function(n,i){g(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==b(i)&&t(i)})}(arguments),n&&!t&&u()),this},remove:function(){return A.each(arguments,function(e,t){for(var n;(n=A.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?A.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},A.extend({Deferred:function(t){var n=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return A.Deferred(function(t){A.each(n,function(n,i){var r=g(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=r&&r.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,i,r){var o=0;function a(t,n,i,r){return function(){var s=this,u=arguments,c=function(){var e,c;if(!(t<o)){if((e=i.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(c)?r?c.call(e,a(o,n,$,r),a(o,n,L,r)):(o++,c.call(e,a(o,n,$,r),a(o,n,L,r),a(o,n,$,n.notifyWith))):(i!==$&&(s=void 0,u=[e]),(r||n.resolveWith)(s,u))}},l=r?c:function(){try{c()}catch(e){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(e,l.stackTrace),t+1>=o&&(i!==L&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?l():(A.Deferred.getStackHook&&(l.stackTrace=A.Deferred.getStackHook()),e.setTimeout(l))}}return A.Deferred(function(e){n[0][3].add(a(0,e,g(r)?r:$,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:$)),n[2][3].add(a(0,e,g(i)?i:L))}).promise()},promise:function(e){return null!=e?A.extend(e,r):r}},o={};return A.each(n,function(e,t){var a=t[2],s=t[5];r[t[1]]=a.add,s&&a.add(function(){i=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=o.call(arguments),a=A.Deferred(),s=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(i,r)}};if(t<=1&&(F(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(r[n]&&r[n].then)))return a.then();for(;n--;)F(r[n],s(n),a.reject);return a.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&U.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},A.readyException=function(t){e.setTimeout(function(){throw t})};var B=A.Deferred();function j(){i.removeEventListener("DOMContentLoaded",j),e.removeEventListener("load",j),A.ready()}A.fn.ready=function(e){return B.then(e).catch(function(e){A.readyException(e)}),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0,!0!==e&&--A.readyWait>0||B.resolveWith(i,[A]))}}),A.ready.then=B.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?e.setTimeout(A.ready):(i.addEventListener("DOMContentLoaded",j),e.addEventListener("load",j));var V=function(e,t,n,i,r,o,a){var s=0,u=e.length,c=null==n;if("object"===b(n))for(s in r=!0,n)V(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,g(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(A(e),n)})),t))for(;s<u;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):u?t(e[0],n):o},q=/^-ms-/,H=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function G(e){return e.replace(q,"ms-").replace(H,W)}var z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=A.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[G(t)]=n;else for(i in t)r[G(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in i?[t]:t.match(R)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||A.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!A.isEmptyObject(t)}};var Q=new K,Y=new K,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:X.test(e)?JSON.parse(e):e)}(n)}catch(e){}Y.set(e,t,n)}else n=void 0;return n}A.extend({hasData:function(e){return Y.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Y.access(e,t,n)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),A.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Y.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=G(i.slice(5)),Z(o,i,r[i]));Q.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Y.set(this,e)}):V(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Y.get(o,e))?n:void 0!==(n=Z(o,e))?n:void 0;this.each(function(){Y.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Y.remove(this,e)})}}),A.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Q.get(e,t),n&&(!i||Array.isArray(n)?i=Q.access(e,t,A.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=A.queue(e,t),i=n.length,r=n.shift(),o=A._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){A.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:A.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),A.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?A.queue(this[0],e):void 0===t?this:this.each(function(){var n=A.queue(this,e,t);A._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&A.dequeue(this,e)})},dequeue:function(e){return this.each(function(){A.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=A.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=i.documentElement,re=function(e){return A.contains(e.ownerDocument,e)},oe={composed:!0};ie.getRootNode&&(re=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===A.css(e,"display")},se=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=a[o];return r};function ue(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return A.css(e,t,"")},u=s(),c=n&&n[3]||(A.cssNumber[t]?"":"px"),l=e.nodeType&&(A.cssNumber[t]||"px"!==c&&+u)&&te.exec(A.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)A.style(e,t,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,A.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=l,i.end=r)),r}var ce={};function le(e){var t,n=e.ownerDocument,i=e.nodeName,r=ce[i];return r||(t=n.body.appendChild(n.createElement(i)),r=A.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ce[i]=r,r)}function he(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=Q.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ae(i)&&(r[o]=le(i))):"none"!==n&&(r[o]="none",Q.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}A.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?A(this).show():A(this).hide()})}});var fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pe=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?A.merge([e],n):n}function ve(e,t){for(var n=0,i=e.length;n<i;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var ye,be,Ae=/<|&#?\w+;/;function we(e,t,n,i,r){for(var o,a,s,u,c,l,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if((o=e[d])||0===o)if("object"===b(o))A.merge(f,o.nodeType?[o]:o);else if(Ae.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+A.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;A.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(i&&A.inArray(o,i)>-1)r&&r.push(o);else if(c=re(o),a=me(h.appendChild(o),"script"),c&&ve(a),n)for(l=0;o=a[l++];)pe.test(o.type||"")&&n.push(o);return h}ye=i.createDocumentFragment().appendChild(i.createElement("div")),(be=i.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ye.appendChild(be),p.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var _e=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function Te(){return!1}function ke(e,t){return e===function(){try{return i.activeElement}catch(e){}}()==("focus"===t)}function Ie(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Ie(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Te;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return A().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=A.guid++)),e.each(function(){A.event.add(this,t,r,i,n)})}function xe(e,t,n){n?(Q.set(e,t,!1),A.event.add(e,t,{namespace:!1,handler:function(e){var i,r,a=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(A.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=o.call(arguments),Q.set(this,t,a),i=n(this,t),this[t](),a!==(r=Q.get(this,t))||i?Q.set(this,t,!1):r={},a!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else a.length&&(Q.set(this,t,{value:A.event.trigger(A.extend(a[0],A.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&A.event.add(e,t,Ee)}A.event={global:{},add:function(e,t,n,i,r){var o,a,s,u,c,l,h,f,d,p,g,m=Q.get(e);if(m)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&A.find.matchesSelector(ie,r),n.guid||(n.guid=A.guid++),(u=m.events)||(u=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==A&&A.event.triggered!==t.type?A.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(R)||[""]).length;c--;)d=g=(s=Se.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(h=A.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=A.event.special[d]||{},l=A.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&A.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(d,a)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,l):f.push(l),A.event.global[d]=!0)},remove:function(e,t,n,i,r){var o,a,s,u,c,l,h,f,d,p,g,m=Q.hasData(e)&&Q.get(e);if(m&&(u=m.events)){for(c=(t=(t||"").match(R)||[""]).length;c--;)if(d=g=(s=Se.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=A.event.special[d]||{},f=u[d=(i?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!r&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||A.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)A.event.remove(e,d+t[c],n,i,!0);A.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=A.event.fix(e),u=new Array(arguments.length),c=(Q.get(this,"events")||{})[s.type]||[],l=A.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=A.event.handlers.call(this,s,c),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((A.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,u))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,o,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?A(r,this).index(c)>-1:A.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(A.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&k(t,"input")&&xe(t,"click",Ee),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&k(t,"input")&&xe(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&k(t,"input")&&Q.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(e,t){A.event.special[e]={setup:function(){return xe(this,e,ke),!1},trigger:function(){return xe(this,e),!0},delegateType:t}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){A.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||A.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),A.fn.extend({on:function(e,t,n,i){return Ie(this,e,t,n,i)},one:function(e,t,n,i){return Ie(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,A(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){A.event.remove(this,e,n,t)})}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ne=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function $e(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,i,r,o,a,s,u,c;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)A.event.add(t,r,c[r][n]);Y.hasData(e)&&(s=Y.access(e),u=A.extend({},s),Y.set(t,u))}}function Fe(e,t,n,i){t=a.apply([],t);var r,o,s,u,c,l,h=0,f=e.length,d=f-1,m=t[0],v=g(m);if(v||f>1&&"string"==typeof m&&!p.checkClone&&Pe.test(m))return e.each(function(r){var o=e.eq(r);v&&(t[0]=m.call(this,r,o.html())),Fe(o,t,n,i)});if(f&&(o=(r=we(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(u=(s=A.map(me(r,"script"),Re)).length;h<f;h++)c=r,h!==d&&(c=A.clone(c,!0,!0),u&&A.merge(s,me(c,"script"))),n.call(e[h],c,h);if(u)for(l=s[s.length-1].ownerDocument,A.map(s,$e),h=0;h<u;h++)c=s[h],pe.test(c.type||"")&&!Q.access(c,"globalEval")&&A.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?A._evalUrl&&!c.noModule&&A._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):y(c.textContent.replace(Oe,""),c,l))}return e}function Ue(e,t,n){for(var i,r=t?A.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||A.cleanData(me(i)),i.parentNode&&(n&&re(i)&&ve(me(i,"script")),i.parentNode.removeChild(i));return e}A.extend({htmlPrefilter:function(e){return e.replace(De,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,u,c,l=e.cloneNode(!0),h=re(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(a=me(l),i=0,r=(o=me(e)).length;i<r;i++)s=o[i],u=a[i],void 0,"input"===(c=u.nodeName.toLowerCase())&&fe.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||me(e),a=a||me(l),i=0,r=o.length;i<r;i++)Le(o[i],a[i]);else Le(e,l);return(a=me(l,"script")).length>0&&ve(a,!h&&me(e,"script")),l},cleanData:function(e){for(var t,n,i,r=A.event.special,o=0;void 0!==(n=e[o]);o++)if(z(n)){if(t=n[Q.expando]){if(t.events)for(i in t.events)r[i]?A.event.remove(n,i):A.removeEvent(n,i,t.handle);n[Q.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),A.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return V(this,function(e){return void 0===e?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Fe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Fe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return A.clone(this,e,t)})},html:function(e){return V(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(A.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,function(t){var n=this.parentNode;A.inArray(this,e)<0&&(A.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){A.fn[e]=function(e){for(var n,i=[],r=A(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),A(r[a])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Be=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),je=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ve=new RegExp(ne.join("|"),"i");function qe(e,t,n){var i,r,o,a,s=e.style;return(n=n||je(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||re(e)||(a=A.style(e,t)),!p.pixelBoxStyles()&&Be.test(a)&&Ve.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function He(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(c).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,u=12===n(t.marginLeft),l.style.right="60%",s=36===n(t.right),o=36===n(t.width),l.style.position="absolute",a=12===n(l.offsetWidth/3),ie.removeChild(c),l=null}}function n(e){return Math.round(parseFloat(e))}var r,o,a,s,u,c=i.createElement("div"),l=i.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===l.style.backgroundClip,A.extend(p,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();var We=["Webkit","Moz","ms"],Ge=i.createElement("div").style,ze={};function Ke(e){var t=A.cssProps[e]||ze[e];return t||(e in Ge?e:ze[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in Ge)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Xe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function et(e,t,n,i,r,o){var a="width"===t?1:0,s=0,u=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=A.css(e,n+ne[a],!0,r)),i?("content"===n&&(u-=A.css(e,"padding"+ne[a],!0,r)),"margin"!==n&&(u-=A.css(e,"border"+ne[a]+"Width",!0,r))):(u+=A.css(e,"padding"+ne[a],!0,r),"padding"!==n?u+=A.css(e,"border"+ne[a]+"Width",!0,r):s+=A.css(e,"border"+ne[a]+"Width",!0,r));return!i&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var i=je(e),r=(!p.boxSizingReliable()||n)&&"border-box"===A.css(e,"boxSizing",!1,i),o=r,a=qe(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Be.test(a)){if(!n)return a;a="auto"}return(!p.boxSizingReliable()&&r||"auto"===a||!parseFloat(a)&&"inline"===A.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===A.css(e,"boxSizing",!1,i),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(r?"border":"content"),o,i,a)+"px"}function nt(e,t,n,i,r){return new nt.prototype.init(e,t,n,i,r)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=G(t),u=Ye.test(t),c=e.style;if(u||(t=Ke(s)),a=A.cssHooks[t]||A.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=te.exec(n))&&r[1]&&(n=ue(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=r&&r[3]||(A.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,a,s=G(t);return Ye.test(t)||(t=Ke(s)),(a=A.cssHooks[t]||A.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=qe(e,t,i)),"normal"===r&&t in Je&&(r=Je[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),A.each(["height","width"],function(e,t){A.cssHooks[t]={get:function(e,n,i){if(n)return!Qe.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,i):se(e,Xe,function(){return tt(e,t,i)})},set:function(e,n,i){var r,o=je(e),a=!p.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===A.css(e,"boxSizing",!1,o),u=i?et(e,t,i,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-et(e,t,"border",!1,o)-.5)),u&&(r=te.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=A.css(e,t)),Ze(0,n,u)}}}),A.cssHooks.marginLeft=He(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(e,t){A.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+ne[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(A.cssHooks[e+t].set=Ze)}),A.fn.extend({css:function(e,t){return V(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=je(e),r=t.length;a<r;a++)o[t[a]]=A.css(e,t[a],!1,i);return o}return void 0!==n?A.style(e,t,n):A.css(e,t)},e,t,arguments.length>1)}}),A.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(A.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=A.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=nt.prototype.init,A.fx.step={};var it,rt,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){rt&&(!1===i.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,A.fx.interval),A.fx.tick())}function ut(){return e.setTimeout(function(){it=void 0}),it=Date.now()}function ct(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ne[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function lt(e,t,n){for(var i,r=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function ht(e,t,n){var i,r,o=0,a=ht.prefilters.length,s=A.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var t=it||ut(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:A.extend({},t),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var i=A.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(!function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=G(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=A.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(l,c.opts.specialEasing);o<a;o++)if(i=ht.prefilters[o].call(c,e,l,c.opts))return g(i.stop)&&(A._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return A.map(l,lt,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),A.fx.timer(A.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}A.Animation=A.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(R);for(var n,i=0,r=e.length;i<r;i++)n=e[i],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,u,c,l,h="width"in t||"height"in t,f=this,d={},p=e.style,g=e.nodeType&&ae(e),m=Q.get(e,"fxshow");for(i in n.queue||(null==(a=A._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,A.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],ot.test(r)){if(delete t[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}d[i]=m&&m[i]||A.style(e,i)}if((u=!A.isEmptyObject(t))||!A.isEmptyObject(d))for(i in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Q.get(e,"display")),"none"===(l=A.css(e,"display"))&&(c?l=c:(he([e],!0),c=e.style.display||c,l=A.css(e,"display"),he([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===A.css(e,"float")&&(u||(f.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(m?"hidden"in m&&(g=m.hidden):m=Q.access(e,"fxshow",{display:c}),o&&(m.hidden=!g),g&&he([e],!0),f.done(function(){for(i in g||he([e]),Q.remove(e,"fxshow"),d)A.style(e,i,d[i])})),u=lt(g?m[i]:0,i,f),i in m||(m[i]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),A.speed=function(e,t,n){var i=e&&"object"==typeof e?A.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return A.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in A.fx.speeds?i.duration=A.fx.speeds[i.duration]:i.duration=A.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g(i.old)&&i.old.call(this),i.queue&&A.dequeue(this,i.queue)},i},A.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=A.isEmptyObject(e),o=A.speed(t,n,i),a=function(){var t=ht(this,A.extend({},e),o);(r||Q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=A.timers,a=Q.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&at.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||A.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Q.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=A.timers,a=i?i.length:0;for(n.finish=!0,A.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),A.each(["toggle","show","hide"],function(e,t){var n=A.fn[t];A.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,i,r)}}),A.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){A.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),A.timers=[],A.fx.tick=function(){var e,t=0,n=A.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||A.fx.stop(),it=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){rt||(rt=!0,st())},A.fx.stop=function(){rt=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(t,n){return t=A.fx&&A.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=i.createElement("input"),t=i.createElement("select").appendChild(i.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=i.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var ft,dt=A.expr.attrHandle;A.fn.extend({attr:function(e,t){return V(this,A.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){A.removeAttr(this,e)})}}),A.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?A.prop(e,t,n):(1===o&&A.isXMLDoc(e)||(r=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void A.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=A.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(R);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?A.removeAttr(e,n):e.setAttribute(n,n),n}},A.each(A.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||A.find.attr;dt[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=dt[a],dt[a]=r,r=null!=n(e,t,i)?a:null,dt[a]=o),r}});var pt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}A.fn.extend({prop:function(e,t){return V(this,A.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[A.propFix[e]||e]})}}),A.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&A.isXMLDoc(e)||(t=A.propFix[t]||t,r=A.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(A.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this}),A.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,u=0;if(g(e))return this.each(function(t){A(this).addClass(e.call(this,t,vt(this)))});if((t=yt(e)).length)for(;n=this[u++];)if(r=vt(n),i=1===n.nodeType&&" "+mt(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=mt(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,u=0;if(g(e))return this.each(function(t){A(this).removeClass(e.call(this,t,vt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[u++];)if(r=vt(n),i=1===n.nodeType&&" "+mt(r)+" "){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=mt(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){A(this).toggleClass(e.call(this,n,vt(this),t),t)}):this.each(function(){var t,r,o,a;if(i)for(r=0,o=A(this),a=yt(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+mt(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;A.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=g(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,A(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=A.map(r,function(e){return null==e?"":e+""})),(t=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=A.valHooks[r.type]||A.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(bt,""):null==n?"":n:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:mt(A.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:r.length;for(i=o<0?u:a?o:0;i<u;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=A(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=A.makeArray(t),a=r.length;a--;)((i=r[a]).selected=A.inArray(A.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=A.inArray(A(e).val(),t)>-1}},p.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e;var At=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};A.extend(A.event,{trigger:function(t,n,r,o){var a,s,u,c,l,f,d,p,v=[r||i],y=h.call(t,"type")?t.type:t,b=h.call(t,"namespace")?t.namespace.split("."):[];if(s=p=u=r=r||i,3!==r.nodeType&&8!==r.nodeType&&!At.test(y+A.event.triggered)&&(y.indexOf(".")>-1&&(y=(b=y.split(".")).shift(),b.sort()),l=y.indexOf(":")<0&&"on"+y,(t=t[A.expando]?t:new A.Event(y,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:A.makeArray(n,[t]),d=A.event.special[y]||{},o||!d.trigger||!1!==d.trigger.apply(r,n))){if(!o&&!d.noBubble&&!m(r)){for(c=d.delegateType||y,At.test(c+y)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(r.ownerDocument||i)&&v.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=v[a++])&&!t.isPropagationStopped();)p=s,t.type=a>1?c:d.bindType||y,(f=(Q.get(s,"events")||{})[t.type]&&Q.get(s,"handle"))&&f.apply(s,n),(f=l&&s[l])&&f.apply&&z(s)&&(t.result=f.apply(s,n),!1===t.result&&t.preventDefault());return t.type=y,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!z(r)||l&&g(r[y])&&!m(r)&&((u=r[l])&&(r[l]=null),A.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,wt),r[y](),t.isPropagationStopped()&&p.removeEventListener(y,wt),A.event.triggered=void 0,u&&(r[l]=u)),t.result}},simulate:function(e,t,n){var i=A.extend(new A.Event,n,{type:e,isSimulated:!0});A.event.trigger(i,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return A.event.trigger(e,t,n,!0)}}),p.focusin||A.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){A.event.simulate(t,e.target,A.event.fix(e))};A.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Q.access(i,t);r||i.addEventListener(e,n,!0),Q.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Q.access(i,t)-1;r?Q.access(i,t,r):(i.removeEventListener(e,n,!0),Q.remove(i,t))}}});var _t=e.location,Ct=Date.now(),St=/\?/;A.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||A.error("Invalid XML: "+t),n};var Et=/\[\]$/,Tt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function xt(e,t,n,i){var r;if(Array.isArray(t))A.each(t,function(t,r){n||Et.test(e)?i(e,r):xt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==b(t))i(e,t);else for(r in t)xt(e+"["+r+"]",t[r],n,i)}A.param=function(e,t){var n,i=[],r=function(e,t){var n=g(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){r(this.name,this.value)});else for(n in e)xt(n,e[n],t,r);return i.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&It.test(this.nodeName)&&!kt.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=A(this).val();return null==n?null:Array.isArray(n)?A.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}});var Dt=/%20/g,Nt=/#.*$/,Pt=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,$t={},Lt={},Ft="*/".concat("*"),Ut=i.createElement("a");function Bt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(R)||[];if(g(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function jt(e,t,n,i){var r={},o=e===Lt;function a(s){var u;return r[s]=!0,A.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||r[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}return a(t.dataTypes[0])||!r["*"]&&a("*")}function Vt(e,t){var n,i,r=A.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&A.extend(!0,e,i),e}Ut.href=_t.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,A.ajaxSettings),t):Vt(A.ajaxSettings,e)},ajaxPrefilter:Bt($t),ajaxTransport:Bt(Lt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,a,s,u,c,l,h,f,d,p=A.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?A(g):A.event,v=A.Deferred(),y=A.Callbacks("once memory"),b=p.statusCode||{},w={},_={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Ot.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),E(0,t),this}};if(v.promise(S),p.url=((t||p.url||_t.href)+"").replace(Rt,_t.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(R)||[""],null==p.crossDomain){c=i.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Ut.protocol+"//"+Ut.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=A.param(p.data,p.traditional)),jt($t,p,n,S),l)return S;for(f in(h=A.event&&p.global)&&0==A.active++&&A.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Mt.test(p.type),o=p.url.replace(Nt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Dt,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(St.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Pt,"$1"),d=(St.test(o)?"&":"?")+"_="+Ct+++d),p.url=o+d),p.ifModified&&(A.lastModified[o]&&S.setRequestHeader("If-Modified-Since",A.lastModified[o]),A.etag[o]&&S.setRequestHeader("If-None-Match",A.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(g,S,p)||l))return S.abort();if(C="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),r=jt(Lt,p,n,S)){if(S.readyState=1,h&&m.trigger("ajaxSend",[S,p]),l)return S;p.async&&p.timeout>0&&(u=e.setTimeout(function(){S.abort("timeout")},p.timeout));try{l=!1,r.send(w,E)}catch(e){if(l)throw e;E(-1,e)}}else E(-1,"No Transport");function E(t,n,i,s){var c,f,d,w,_,C=n;l||(l=!0,u&&e.clearTimeout(u),r=void 0,a=s||"",S.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(w=function(e,t,n){for(var i,r,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||e.converters[r+" "+u[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,S,i)),w=function(e,t,n,i){var r,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,w,S,c),c?(p.ifModified&&((_=S.getResponseHeader("Last-Modified"))&&(A.lastModified[o]=_),(_=S.getResponseHeader("etag"))&&(A.etag[o]=_)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=w.state,f=w.data,c=!(d=w.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),S.status=t,S.statusText=(n||C)+"",c?v.resolveWith(g,[f,C,S]):v.rejectWith(g,[S,C,d]),S.statusCode(b),b=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[S,p,c?f:d]),y.fireWith(g,[S,C]),h&&(m.trigger("ajaxComplete",[S,p]),--A.active||A.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return A.get(e,t,n,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],function(e,t){A[t]=function(e,n,i,r){return g(n)&&(r=r||i,i=n,n=void 0),A.ajax(A.extend({url:e,type:t,dataType:r,data:n,success:i},A.isPlainObject(e)&&e))}}),A._evalUrl=function(e,t){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t)}})},A.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){A(this).wrapInner(e.call(this,t))}):this.each(function(){var t=A(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){A(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Ht=A.ajaxSettings.xhr();p.cors=!!Ht&&"withCredentials"in Ht,p.ajax=Ht=!!Ht,A.ajaxTransport(function(t){var n,i;if(p.cors||Ht&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),A.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),A.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=A("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),i.head.appendChild(t[0])},abort:function(){n&&n()}}});var Wt,Gt=[],zt=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||A.expando+"_"+Ct++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=!1!==t.jsonp&&(zt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(zt,"$1"+r):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||A.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?A(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Gt.push(r)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),p.createHTMLDocument=((Wt=i.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),A.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((r=(t=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,t.head.appendChild(r)):t=i),o=I.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=we([e],t,a),a&&a.length&&A(a).remove(),A.merge([],o.childNodes)));var r,o,a},A.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=mt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&A.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?A("<div>").append(A.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){A.fn[t]=function(e){return this.on(t,e)}}),A.expr.pseudos.animated=function(e){return A.grep(A.timers,function(t){return e===t.elem}).length},A.offset={setOffset:function(e,t,n){var i,r,o,a,s,u,c=A.css(e,"position"),l=A(e),h={};"static"===c&&(e.style.position="relative"),s=l.offset(),o=A.css(e,"top"),u=A.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(i=l.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(u)||0),g(t)&&(t=t.call(e,n,A.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+r),"using"in t?t.using.call(e,h):l.css(h)}},A.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){A.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===A.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),r.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-A.css(i,"marginTop",!0),left:t.left-r.left-A.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||ie})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;A.fn[e]=function(i){return V(this,function(e,i,r){var o;if(m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r},e,i,arguments.length)}}),A.each(["top","left"],function(e,t){A.cssHooks[t]=He(p.pixelPosition,function(e,n){if(n)return n=qe(e,t),Be.test(n)?A(e).position()[t]+"px":n})}),A.each({Height:"height",Width:"width"},function(e,t){A.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){A.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return V(this,function(t,n,r){var o;return m(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?A.css(t,n,s):A.style(t,n,r,s)},t,a?r:void 0,a)}})}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){A.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),A.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),A.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),A.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return i=o.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||A.guid++,r},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=k,A.isFunction=g,A.isWindow=m,A.camelCase=G,A.type=b,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return A});var Kt=e.jQuery,Qt=e.$;return A.noConflict=function(t){return e.$===A&&(e.$=Qt),t&&e.jQuery===A&&(e.jQuery=Kt),A},t||(e.jQuery=e.$=A),A}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.ui=e.ui||{};e.ui.version="1.12.1";var t,n=0,i=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{(i=e._data(r,"events"))&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var r,o,a,s={},u=t.split(".")[0],c=u+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[u]=e[u]||{},r=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(i,function(t,i){e.isFunction(i)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}():s[t]=i}),o.prototype=e.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},s,{constructor:o,namespace:u,widgetName:t,widgetFullName:c}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,o=i.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])r=o[a][n],o[a].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=i.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each(function(){var n,i=e.data(this,r);return"instance"===o?(u=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s))!==i&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):u=void 0:(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new n(o,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},t=(i=t.split(".")).shift(),i.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,r;for(n in t)r=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&r&&r.length&&(i=e(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function r(r,o){var a,s;for(s=0;s<r.length;s++)a=i.classesElementLookup[r[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),i.classesElementLookup[r[s]]=a,n.push(r[s]),o&&t.classes[r[s]]&&n.push(t.classes[r[s]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,r){-1!==e.inArray(t.target,r)&&(n.classesElementLookup[i]=e(r.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=i.match(/^([\w:-]*)\s*(.*)$/),c=u[1]+o.eventNamespace,l=u[2];l?r.on(c,l,s):n.on(c,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){var a;"string"==typeof r&&(r={effect:r});var s=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}});e.widget;!function(){var t,n=Math.max,i=Math.abs,r=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,u=/%$/,c=e.fn.position;function l(e,t,n){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?n/100:1)]}function h(t,n){return parseInt(e.css(t,n),10)||0}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),n===(i=o.offsetWidth)&&(i=r[0].clientWidth),r.remove(),t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:!i&&!r?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var u,f,d,p,g,m,v,y,b=e(t.of),A=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(A),_=(t.collision||"flip").split(" "),C={};return m=9===(y=(v=b)[0]).nodeType?{width:v.width(),height:v.height(),offset:{top:0,left:0}}:e.isWindow(y)?{width:v.width(),height:v.height(),offset:{top:v.scrollTop(),left:v.scrollLeft()}}:y.preventDefault?{width:0,height:0,offset:{top:y.pageY,left:y.pageX}}:{width:v.outerWidth(),height:v.outerHeight(),offset:v.offset()},b[0].preventDefault&&(t.at="left top"),f=m.width,d=m.height,p=m.offset,g=e.extend({},p),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",e=a.exec(i[0]),n=a.exec(i[1]),C[this]=[e?e[0]:0,n?n[0]:0],t[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===t.at[0]?g.left+=f:"center"===t.at[0]&&(g.left+=f/2),"bottom"===t.at[1]?g.top+=d:"center"===t.at[1]&&(g.top+=d/2),u=l(C.at,f,d),g.left+=u[0],g.top+=u[1],this.each(function(){var r,o,a=e(this),s=a.outerWidth(),c=a.outerHeight(),m=h(this,"marginLeft"),v=h(this,"marginTop"),y=s+m+h(this,"marginRight")+w.width,S=c+v+h(this,"marginBottom")+w.height,E=e.extend({},g),T=l(C.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?E.left-=s:"center"===t.my[0]&&(E.left-=s/2),"bottom"===t.my[1]?E.top-=c:"center"===t.my[1]&&(E.top-=c/2),E.left+=T[0],E.top+=T[1],r={marginLeft:m,marginTop:v},e.each(["left","top"],function(n,i){e.ui.position[_[n]]&&e.ui.position[_[n]][i](E,{targetWidth:f,targetHeight:d,elemWidth:s,elemHeight:c,collisionPosition:r,collisionWidth:y,collisionHeight:S,offset:[u[0]+T[0],u[1]+T[1]],my:t.my,at:t.at,within:A,elem:a})}),t.using&&(o=function(e){var r=p.left-E.left,o=r+f-s,u=p.top-E.top,l=u+d-c,h={target:{element:b,left:p.left,top:p.top,width:f,height:d},element:{element:a,left:E.left,top:E.top,width:s,height:c},horizontal:o<0?"left":r>0?"right":"center",vertical:l<0?"top":u>0?"bottom":"middle"};f<s&&i(r+o)<f&&(h.horizontal="center"),d<c&&i(u+l)<d&&(h.vertical="middle"),n(i(r),i(o))>n(i(u),i(l))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(E,{using:o}))})},e.ui.position={fit:{left:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,s=e.left-t.collisionPosition.marginLeft,u=o-s,c=s+t.collisionWidth-a-o;t.collisionWidth>a?u>0&&c<=0?(i=e.left+u+t.collisionWidth-a-o,e.left+=u-i):e.left=c>0&&u<=0?o:u>c?o+a-t.collisionWidth:o:u>0?e.left+=u:c>0?e.left-=c:e.left=n(e.left-s,e.left)},top:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollTop:r.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,u=o-s,c=s+t.collisionHeight-a-o;t.collisionHeight>a?u>0&&c<=0?(i=e.top+u+t.collisionHeight-a-o,e.top+=u-i):e.top=c>0&&u<=0?o:u>c?o+a-t.collisionHeight:o:u>0?e.top+=u:c>0?e.top-=c:e.top=n(e.top-s,e.top)}},flip:{left:function(e,t){var n,r,o=t.within,a=o.offset.left+o.scrollLeft,s=o.width,u=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,l=c-u,h=c+t.collisionWidth-s-u,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];l<0?((n=e.left+f+d+p+t.collisionWidth-s-a)<0||n<i(l))&&(e.left+=f+d+p):h>0&&((r=e.left-t.collisionPosition.marginLeft+f+d+p-u)>0||i(r)<h)&&(e.left+=f+d+p)},top:function(e,t){var n,r,o=t.within,a=o.offset.top+o.scrollTop,s=o.height,u=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,l=c-u,h=c+t.collisionHeight-s-u,f="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];l<0?((r=e.top+f+d+p+t.collisionHeight-s-a)<0||r<i(l))&&(e.top+=f+d+p):h>0&&((n=e.top-t.collisionPosition.marginTop+f+d+p-u)>0||i(n)<h)&&(e.top+=f+d+p)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();e.ui.position,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}}),e.fn.extend({disableSelection:(r="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(r+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var r,o,a="ui-effects-animated",s=e;e.effects={effect:{}},function(e,t){var n,i=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=o.support={},c=e("<p>")[0],l=e.each;function h(e,t,n){var i=s[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function f(t){var i=o(),s=i._rgba=[];return t=t.toLowerCase(),l(r,function(e,n){var r,o=n.re.exec(t),u=o&&n.parse(o),c=n.space||"rgba";if(u)return r=i[c](u),i[a[c].cache]=r[a[c].cache],s=i._rgba=r._rgba,!1}),s.length?("0,0,0,0"===s.join()&&e.extend(s,n.transparent),i):n[t]}function d(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}c.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=c.style.backgroundColor.indexOf("rgba")>-1,l(a,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=e.extend(o.prototype,{parse:function(t,i,r,s){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(i),i=void 0);var u=this,c=e.type(t),d=this._rgba=[];return void 0!==i&&(t=[t,i,r,s],c="array"),"string"===c?this.parse(f(t)||n._default):"array"===c?(l(a.rgba.props,function(e,n){d[n.idx]=h(t[n.idx],n)}),this):"object"===c?(l(a,t instanceof o?function(e,n){t[n.cache]&&(u[n.cache]=t[n.cache].slice())}:function(n,i){var r=i.cache;l(i.props,function(e,n){if(!u[r]&&i.to){if("alpha"===e||null==t[e])return;u[r]=i.to(u._rgba)}u[r][n.idx]=h(t[e],n,!0)}),u[r]&&e.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,i.from&&(u._rgba=i.from(u[r])))}),this):void 0},is:function(e){var t=o(e),n=!0,i=this;return l(a,function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],l(r.props,function(e,t){if(null!=a[t.idx])return n=a[t.idx]===o[t.idx]})),n}),n},_space:function(){var e=[],t=this;return l(a,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),i=n._space(),r=a[i],u=0===this.alpha()?o("transparent"):this,c=u[r.cache]||r.to(u._rgba),f=c.slice();return n=n[r.cache],l(r.props,function(e,i){var r=i.idx,o=c[r],a=n[r],u=s[i.type]||{};null!==a&&(null===o?f[r]=a:(u.mod&&(a-o>u.mod/2?o+=u.mod:o-a>u.mod/2&&(o-=u.mod)),f[r]=h((a-o)*t+o,i)))}),this[i](f)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=o(t)._rgba;return o(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,a.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),u=Math.min(i,r,o),c=s-u,l=s+u,h=.5*l;return t=u===s?0:i===s?60*(r-o)/c+360:r===s?60*(o-i)/c+120:60*(i-r)/c+240,n=0===c?0:h<=.5?c/l:c/(2-l),[Math.round(t)%360,n,h,null==a?1:a]},a.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],r=e[3],o=i<=.5?i*(1+n):i+n-i*n,a=2*i-o;return[Math.round(255*d(a,o,t+1/3)),Math.round(255*d(a,o,t)),Math.round(255*d(a,o,t-1/3)),r]},l(a,function(t,n){var r=n.props,a=n.cache,s=n.to,u=n.from;o.fn[t]=function(t){if(s&&!this[a]&&(this[a]=s(this._rgba)),void 0===t)return this[a].slice();var n,i=e.type(t),c="array"===i||"object"===i?t:arguments,f=this[a].slice();return l(r,function(e,t){var n=c["object"===i?e:t.idx];null==n&&(n=f[t.idx]),f[t.idx]=h(n,t)}),u?((n=o(u(f)))[a]=f,n):o(f)},l(r,function(n,r){o.fn[n]||(o.fn[n]=function(o){var a,s=e.type(o),u="alpha"===n?this._hsla?"hsla":"rgba":t,c=this[u](),l=c[r.idx];return"undefined"===s?l:("function"===s&&(o=o.call(this,l),s=e.type(o)),null==o&&r.empty?this:("string"===s&&(a=i.exec(o))&&(o=l+parseFloat(a[2])*("+"===a[1]?1:-1)),c[r.idx]=o,this[u](c)))})})}),o.hook=function(t){var n=t.split(" ");l(n,function(t,n){e.cssHooks[n]={set:function(t,i){var r,a,s="";if("transparent"!==i&&("string"!==e.type(i)||(r=f(i)))){if(i=o(r||i),!u.rgba&&1!==i._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(e){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(e){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=o(t.elem,n),t.end=o(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},o.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return l(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},n=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(s),function(){var t,n=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function r(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)"string"==typeof r[n=r[i]]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(s.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,s){var u=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",c=u.children?a.find("*").addBack():a;c=c.map(function(){return{el:e(this),start:r(this)}}),(o=function(){e.each(n,function(e,n){t[n]&&a[n+"Class"](t[n])})})(),c=c.map(function(){return this.end=r(this.el[0]),this.diff=function(t,n){var r,o,a={};for(r in n)o=n[r],t[r]!==o&&(i[r]||!e.fx.step[r]&&isNaN(parseFloat(o))||(a[r]=o));return a}(this.start,this.end),this}),a.attr("class",s),c=c.map(function(){var t=this,n=e.Deferred(),i=e.extend({},u,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,c.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),u.complete.call(a[0])})})},e.fn.extend({addClass:(t=e.fn.addClass,function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,r,o,a){return"boolean"==typeof i||void 0===i?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,r,o)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){var t;function n(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}function r(e,t){var n=t.outerWidth(),i=t.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=(t=e.expr.filters.animated,function(n){return!!e(n).data(a)||t(n)})),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var n=0,i=t.length;n<i;n++)null!==t[n]&&e.data("ui-effects-"+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n,i=0,r=t.length;i<r;i++)null!==t[i]&&(n=e.data("ui-effects-"+t[i]),e.css(t[i],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus"),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,n,i){return i||(i=n,n="effect"),e.effects.effect[t]=i,e.effects.effect[t].mode=n,i},scaledDimensions:function(e,t,n){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(t||100)/100:1,r="vertical"!==n?(t||100)/100:1;return{height:e.height()*r,width:e.width()*i,outerHeight:e.outerHeight()*r,outerWidth:e.outerWidth()*i}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var i=e.queue();t>1&&i.splice.apply(i,[1,0].concat(i.splice(t,n))),e.dequeue()},saveStyle:function(e){e.data("ui-effects-style",e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data("ui-effects-style")||"",e.removeData("ui-effects-style")},mode:function(e,t){var n=e.is(":hidden");return"toggle"===t&&(t=n?"show":"hide"),(n?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createPlaceholder:function(t){var n,i=t.css("position"),r=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data("ui-effects-placeholder",n)),t.css({position:i,left:r.left,top:r.top}),n},removePlaceholder:function(e){var t="ui-effects-placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){var t=n.apply(this,arguments),i=e.effects.effect[t.effect],r=i.mode,o=t.queue,s=o||"fx",u=t.complete,c=t.mode,l=[],h=function(t){var n=e(this),i=e.effects.mode(n,c)||r;n.data(a,!0),l.push(i),r&&("show"===i||i===r&&"hide"===i)&&n.show(),r&&"none"===i||e.effects.saveStyle(n),e.isFunction(t)&&t()};if(e.fx.off||!i)return c?this[c](t.duration,u):this.each(function(){u&&u.call(this)});function f(n){var o=e(this);function s(){e.isFunction(u)&&u.call(o[0]),e.isFunction(n)&&n()}t.mode=l.shift(),!1===e.uiBackCompat||r?"none"===t.mode?(o[c](),s()):i.call(o[0],t,function(){o.removeData(a),e.effects.cleanUp(o),"hide"===t.mode&&o.hide(),s()}):(o.is(":hidden")?"hide"===c:"show"===c)?(o[c](),s()):i.call(o[0],t,s)}return!1===o?this.each(h).each(f):this.queue(s,h).queue(s,f)},show:function(e){return function(t){if(i(t))return e.apply(this,arguments);var r=n.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(e.fn.show),hide:function(e){return function(t){if(i(t))return e.apply(this,arguments);var r=n.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(e.fn.hide),toggle:function(e){return function(t){if(i(t)||"boolean"==typeof t)return e.apply(this,arguments);var r=n.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):r(this.css("clip"),this)},transfer:function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),a=e("body"),s=o?a.scrollTop():0,u=o?a.scrollLeft():0,c=r.offset(),l={top:c.top-s,left:c.left-u,height:r.innerHeight(),width:r.innerWidth()},h=i.offset(),f=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:h.top-s,left:h.left-u,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){f.remove(),e.isFunction(n)&&n()})}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=r(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),o={},e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){o[t]=function(t){return Math.pow(t,e+2)}}),e.extend(o,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(o,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(-2*e+2)/2}});e.effects,e.effects.define("blind","hide",function(t,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=e(this),o=t.direction||"up",a=r.cssClip(),s={clip:e.extend({},a)},u=e.effects.createPlaceholder(r);s.clip[i[o][0]]=s.clip[i[o][1]],"show"===t.mode&&(r.cssClip(s.clip),u&&u.css(e.effects.clipToBox(s)),s.clip=a),u&&u.animate(e.effects.clipToBox(s),t.duration,t.easing),r.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("bounce",function(t,n){var i,r,o,a=e(this),s=t.mode,u="hide"===s,c="show"===s,l=t.direction||"up",h=t.distance,f=t.times||5,d=2*f+(c||u?1:0),p=t.duration/d,g=t.easing,m="up"===l||"down"===l?"top":"left",v="up"===l||"left"===l,y=0,b=a.queue().length;for(e.effects.createPlaceholder(a),o=a.css(m),h||(h=a["top"===m?"outerHeight":"outerWidth"]()/3),c&&((r={opacity:1})[m]=o,a.css("opacity",0).css(m,v?2*-h:2*h).animate(r,p,g)),u&&(h/=Math.pow(2,f-1)),(r={})[m]=o;y<f;y++)(i={})[m]=(v?"-=":"+=")+h,a.animate(i,p,g).animate(r,p,g),h=u?2*h:h/2;u&&((i={opacity:0})[m]=(v?"-=":"+=")+h,a.animate(i,p,g)),a.queue(n),e.effects.unshift(a,b,d+1)}),e.effects.define("clip","hide",function(t,n){var i,r={},o=e(this),a=t.direction||"vertical",s="both"===a,u=s||"horizontal"===a,c=s||"vertical"===a;i=o.cssClip(),r.clip={top:c?(i.bottom-i.top)/2:i.top,right:u?(i.right-i.left)/2:i.right,bottom:c?(i.bottom-i.top)/2:i.bottom,left:u?(i.right-i.left)/2:i.left},e.effects.createPlaceholder(o),"show"===t.mode&&(o.cssClip(r.clip),r.clip=i),o.animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("drop","hide",function(t,n){var i,r=e(this),o="show"===t.mode,a=t.direction||"left",s="up"===a||"down"===a?"top":"left",u="up"===a||"left"===a?"-=":"+=",c="+="===u?"-=":"+=",l={opacity:0};e.effects.createPlaceholder(r),i=t.distance||r["top"===s?"outerHeight":"outerWidth"](!0)/2,l[s]=u+i,o&&(r.css(l),l[s]=c+i,l.opacity=1),r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("explode","hide",function(t,n){var i,r,o,a,s,u,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,l=c,h=e(this),f="show"===t.mode,d=h.show().css("visibility","hidden").offset(),p=Math.ceil(h.outerWidth()/l),g=Math.ceil(h.outerHeight()/c),m=[];function v(){m.push(this),m.length===c*l&&(h.css({visibility:"visible"}),e(m).remove(),n())}for(i=0;i<c;i++)for(a=d.top+i*g,u=i-(c-1)/2,r=0;r<l;r++)o=d.left+r*p,s=r-(l-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*p,top:-i*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:g,left:o+(f?s*p:0),top:a+(f?u*g:0),opacity:f?0:1}).animate({left:o+(f?0:s*p),top:a+(f?0:u*g),opacity:f?1:0},t.duration||500,t.easing,v)}),e.effects.define("fade","toggle",function(t,n){var i="show"===t.mode;e(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("fold","hide",function(t,n){var i=e(this),r=t.mode,o="show"===r,a="hide"===r,s=t.size||15,u=/([0-9]+)%/.exec(s),c=!!t.horizFirst?["right","bottom"]:["bottom","right"],l=t.duration/2,h=e.effects.createPlaceholder(i),f=i.cssClip(),d={clip:e.extend({},f)},p={clip:e.extend({},f)},g=[f[c[0]],f[c[1]]],m=i.queue().length;u&&(s=parseInt(u[1],10)/100*g[a?0:1]),d.clip[c[0]]=s,p.clip[c[0]]=s,p.clip[c[1]]=0,o&&(i.cssClip(p.clip),h&&h.css(e.effects.clipToBox(p)),p.clip=f),i.queue(function(n){h&&h.animate(e.effects.clipToBox(d),l,t.easing).animate(e.effects.clipToBox(p),l,t.easing),n()}).animate(d,l,t.easing).animate(p,l,t.easing).queue(n),e.effects.unshift(i,m,4)}),e.effects.define("highlight","show",function(t,n){var i=e(this),r={backgroundColor:i.css("backgroundColor")};"hide"===t.mode&&(r.opacity=0),e.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("size",function(t,n){var i,r,o,a=e(this),s=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=t.mode,h="effect"!==l,f=t.scale||"both",d=t.origin||["middle","center"],p=a.css("position"),g=a.position(),m=e.effects.scaledDimensions(a),v=t.from||m,y=t.to||e.effects.scaledDimensions(a,0);e.effects.createPlaceholder(a),"show"===l&&(o=v,v=y,y=o),r={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},"box"!==f&&"both"!==f||(r.from.y!==r.to.y&&(v=e.effects.setTransition(a,u,r.from.y,v),y=e.effects.setTransition(a,u,r.to.y,y)),r.from.x!==r.to.x&&(v=e.effects.setTransition(a,c,r.from.x,v),y=e.effects.setTransition(a,c,r.to.x,y))),"content"!==f&&"both"!==f||r.from.y!==r.to.y&&(v=e.effects.setTransition(a,s,r.from.y,v),y=e.effects.setTransition(a,s,r.to.y,y)),d&&(i=e.effects.getBaseline(d,m),v.top=(m.outerHeight-v.outerHeight)*i.y+g.top,v.left=(m.outerWidth-v.outerWidth)*i.x+g.left,y.top=(m.outerHeight-y.outerHeight)*i.y+g.top,y.left=(m.outerWidth-y.outerWidth)*i.x+g.left),a.css(v),"content"!==f&&"both"!==f||(u=u.concat(["marginTop","marginBottom"]).concat(s),c=c.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var n=e(this),i=e.effects.scaledDimensions(n),o={height:i.height*r.from.y,width:i.width*r.from.x,outerHeight:i.outerHeight*r.from.y,outerWidth:i.outerWidth*r.from.x},a={height:i.height*r.to.y,width:i.width*r.to.x,outerHeight:i.height*r.to.y,outerWidth:i.width*r.to.x};r.from.y!==r.to.y&&(o=e.effects.setTransition(n,u,r.from.y,o),a=e.effects.setTransition(n,u,r.to.y,a)),r.from.x!==r.to.x&&(o=e.effects.setTransition(n,c,r.from.x,o),a=e.effects.setTransition(n,c,r.to.x,a)),h&&e.effects.saveStyle(n),n.css(o),n.animate(a,t.duration,t.easing,function(){h&&e.effects.restoreStyle(n)})})),a.animate(y,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=a.offset();0===y.opacity&&a.css("opacity",v.opacity),h||(a.css("position","static"===p?"relative":p).offset(t),e.effects.saveStyle(a)),n()}})}),e.effects.define("scale",function(t,n){var i=e(this),r=t.mode,o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==r?0:100),a=e.extend(!0,{from:e.effects.scaledDimensions(i),to:e.effects.scaledDimensions(i,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(a.from.opacity=1,a.to.opacity=0),e.effects.effect.size.call(this,a,n)}),e.effects.define("puff","hide",function(t,n){var i=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,i,n)}),e.effects.define("pulsate","show",function(t,n){var i=e(this),r=t.mode,o="show"===r,a=o||"hide"===r,s=2*(t.times||5)+(a?1:0),u=t.duration/s,c=0,l=1,h=i.queue().length;for(!o&&i.is(":visible")||(i.css("opacity",0).show(),c=1);l<s;l++)i.animate({opacity:c},u,t.easing),c=1-c;i.animate({opacity:c},u,t.easing),i.queue(n),e.effects.unshift(i,h,s+1)}),e.effects.define("shake",function(t,n){var i=1,r=e(this),o=t.direction||"left",a=t.distance||20,s=t.times||3,u=2*s+1,c=Math.round(t.duration/u),l="up"===o||"down"===o?"top":"left",h="up"===o||"left"===o,f={},d={},p={},g=r.queue().length;for(e.effects.createPlaceholder(r),f[l]=(h?"-=":"+=")+a,d[l]=(h?"+=":"-=")+2*a,p[l]=(h?"-=":"+=")+2*a,r.animate(f,c,t.easing);i<s;i++)r.animate(d,c,t.easing).animate(p,c,t.easing);r.animate(d,c,t.easing).animate(f,c/2,t.easing).queue(n),e.effects.unshift(r,g,u+1)}),e.effects.define("slide","show",function(t,n){var i,r,o=e(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,u=t.direction||"left",c="up"===u||"down"===u?"top":"left",l="up"===u||"left"===u,h=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),f={};e.effects.createPlaceholder(o),i=o.cssClip(),r=o.position()[c],f[c]=(l?-1:1)*h+r,f.clip=o.cssClip(),f.clip[a[u][1]]=f.clip[a[u][0]],"show"===s&&(o.cssClip(f.clip),o.css(c,f[c]),f.clip=i,f[c]=r),o.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:n})});!1!==e.uiBackCompat&&e.effects.define("transfer",function(t,n){e(this).transfer(t,n)});e.ui.focusable=function(t,n){var i,r,o,a,s,u=t.nodeName.toLowerCase();return"area"===u?(r=(i=t.parentNode).name,!(!t.href||!r||"map"!==i.nodeName.toLowerCase())&&((o=e("img[usemap='#"+r+"']")).length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(u)?(a=!t.disabled)&&(s=e(t).closest("fieldset")[0])&&(a=!s.disabled):a="a"===u&&t.href||n,a&&e(t).is(":visible")&&function(e){var t=e.css("visibility");for(;"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}(e(t)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}});e.ui.focusable,e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===e.fn.jquery.substring(0,3)&&(e.each(["Width","Height"],function(t,n){var i="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function a(t,n,r,o){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(r,a(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))});var u,c;e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.ui.escapeSelector=(u=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(u,"\\$1")}),e.fn.labels=function(){var t,n,i,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",r=r.add(o.find(n).addBack(n))),this.pushStack(r))},e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}}),e.fn.extend({uniqueId:(c=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,n,i=this.options.icons;i&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+i.header),t.prependTo(this.headers),n=this.active.children(".ui-accordion-header-icon"),this._removeClass(n,i.header)._addClass(n,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons())):this._activate(t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),o=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),e(o).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,i=n.heightStyle,r=this.element.parent();this.active=this._findActive(n.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),i=t.next(),r=i.uniqueId().attr("id");t.attr("aria-controls",r),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(t=r.height(),this.element.siblings(":visible").each(function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each(function(){var n=e(this).is(":visible");n||e(this).show(),t=Math.max(t,e(this).css("height","").height()),n||e(this).hide()}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n,i,r=this.options,o=this.active,a=e(t.currentTarget),s=a[0]===o[0],u=s&&r.collapsible,c=u?e():a.next(),l={oldHeader:o,oldPanel:o.next(),newHeader:u?e():a,newPanel:c};t.preventDefault(),s&&!r.collapsible||!1===this._trigger("beforeActivate",t,l)||(r.active=!u&&this.headers.index(a),this.active=s?e():a,this._toggle(l),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),r.icons&&(n=o.children(".ui-accordion-header-icon"),this._removeClass(n,null,r.icons.activeHeader)._addClass(n,null,r.icons.header)),s||(this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active"),r.icons&&(i=a.children(".ui-accordion-header-icon"),this._removeClass(i,null,r.icons.header)._addClass(i,null,r.icons.activeHeader)),this._addClass(a.next(),"ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var i,r,o,a=this,s=0,u=e.css("box-sizing"),c=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},h=c&&l.down||l,f=function(){a._toggleComplete(n)};return"number"==typeof h&&(o=h),"string"==typeof h&&(r=h),r=r||h.easing||l.easing,o=o||h.duration||l.duration,t.length?e.length?(i=e.show().outerHeight(),t.animate(this.hideProps,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:o,easing:r,complete:f,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?"content-box"===u&&(s+=n.now):"content"!==a.options.heightStyle&&(n.now=Math.round(i-t.outerHeight()-s),s=0)}})):t.animate(this.hideProps,o,r,f):e.animate(this.showProps,o,r,f)},_toggleComplete:function(e){var t=e.oldPanel,n=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n,i,r,o,a=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,i=this.previousFilter||"",o=!1,r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),r===i?o=!0:r=i+r,n=this._filterMenuItems(r),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(r=String.fromCharCode(t.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(t,n),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,r,o=this,a=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(i,"ui-menu-icon","ui-icon "+a),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),r=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,o,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.outerHeight(),r<0?this.activeMenu.scrollTop(o+r):r+s>a&&this.activeMenu.scrollTop(o+r-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(n=e(this)).offset().top-i-r<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,r;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(n=e(this)).offset().top-i+r>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}});e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,a="input"===r;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case o.UP:t=!0,this._keyEvent("previous",r);break;case o.DOWN:t=!0,this._keyEvent("next",r);break;case o.ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,n){var i,r;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});r=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:r})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value),(i=n.item.attr("aria-label")||r.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}});e.ui.autocomplete;var l=/ui-corner-([a-z]){2,6}/g;e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,function(i,r){var o,a={};if(r)return"controlgroupLabel"===i?((o=t.element.find(r)).each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(o.get()))):void(e.fn[i]&&(a=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}},t.element.find(r).each(function(){var r=e(this),o=r[i]("instance"),s=e.widget.extend({},a);if("button"!==i||!r.parent(".ui-spinner").length){o||(o=r[i]()[i]("instance")),o&&(s.classes=t._resolveClassesValues(s.classes,o)),r[i](s);var u=r[i]("widget");e.data(u[0],"ui-controlgroup-data",o||r[i]("instance")),n.push(u[0])}})))}),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var n=e(this).data("ui-controlgroup-data");n&&n[t]&&n[t]()})},_updateCornerClass:function(e,t){var n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,n){var i={};return e.each(t,function(r){var o=n.options.classes[r]||"";o=e.trim(o.replace(l,"")),i[r]=(o+" "+t[r]).replace(/\s+/g," ")}),i},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,i){var r=t[i]().data("ui-controlgroup-data");if(r&&n["_"+r.widgetName+"Options"]){var o=n["_"+r.widgetName+"Options"](1===t.length?"only":i);o.classes=n._resolveClassesValues(o.classes,r),r.element[r.widgetName](o)}else n._updateCornerClass(t[i](),i)}),this._callChildMethod("refresh"))}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,i=this,r=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(r.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(r.disabled=t),r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,n="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(n):e(n).filter(function(){return 0===e(this).form().length})).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]);e.ui.checkboxradio;e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,r=i?this.options.iconPosition:n,o="top"===r||"bottom"===r;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(r),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var h;e.ui.button;function f(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=d(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",n,function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,p)}function p(){e.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function g(t,n){for(var i in e.extend(t,n),n)null==n[i]&&(t[i]=n[i]);return t}e.extend(e.ui,{datepicker:{version:"1.12.1"}}),e.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return g(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,o;r="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(e(t),r)).settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,n){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?d(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,o,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[s?"before":"after"](n.append)),t.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),"focus"!==(i=this._get(n,"showOn"))&&"both"!==i||t.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(r=this._get(n,"buttonText"),o=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r)),t[s?"before":"after"](n.trigger),n.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;r<e.length;r++)e[r].length>n&&(n=e[r].length,i=r);return i},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,r,o){var a,s,u,c,l,h=this._dialogInst;return h||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",h)),g(h.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(s=document.documentElement.clientWidth,u=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+c,u/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||i.removeClass(this.markerClassName).empty(),h===r&&(h=null))},_enableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var r,o,a,s,u=this._getInst(t);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?e.extend({},e.datepicker._defaults):u?"all"===n?e.extend({},u.settings):this._get(u,n):null;r=n||{},"string"==typeof n&&((r={})[n]=i),u&&(this._curInst===u&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),a=this._getMinMaxDate(u,"min"),s=this._getMinMaxDate(u,"max"),g(u.settings,r),null!==a&&void 0!==r.dateFormat&&void 0===r.minDate&&(u.settings.minDate=this._formatDate(u,a)),null!==s&&void 0!==r.dateFormat&&void 0===r.maxDate&&(u.settings.maxDate=this._formatDate(u,s)),"disabled"in r&&(r.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),u),this._autoSize(u),this._setDate(u,o),this._updateAlternate(u),this._updateDatepicker(u))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,o=e.datepicker._getInst(t.target),a=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return(r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv))[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]),(n=e.datepicker._get(o,"onSelect"))?(i=e.datepicker._formatDate(o),n.apply(o.input?o.input[0]:null,[i,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(t){var n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n))&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){var n,i,r,o,a,s,u;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(r=(i=e.datepicker._get(n,"beforeShow"))?i.apply(t,[t,n]):{})&&(g(n.settings,r),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),a=e.datepicker._checkOffset(n,a,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(s=e.datepicker._get(n,"showAnim"),u=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[s]?n.dpDiv.show(s,e.datepicker._get(n,"showOptions"),u):n.dpDiv[s||"show"](s?u:null),e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),e.datepicker._curInst=n)))},_updateDatepicker:function(t){this.maxRows=4,h=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,i=this._getNumberOfMonths(t),r=i[1],o=t.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&p.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,u=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-a:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>u&&u>r?Math.abs(n.left+r-u):0),n.top-=Math.min(n.top,n.top+o>c&&c>o?Math.abs(o+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return[(n=e(t).offset()).left,n.top]},_hideDatepicker:function(t){var n,i,r,o,a=this._curInst;!a||t&&a!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),r=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,r):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,(o=this._get(a,"onClose"))&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id===e.datepicker._mainDivId||0!==n.parents("#"+e.datepicker._mainDivId).length||n.hasClass(e.datepicker.markerClassName)||n.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!n.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===i)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(t,n,i,r){var o,a=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((o=this._getInst(a[0])).selectedDay=o.currentDay=e("a",r).html(),o.selectedMonth=o.currentMonth=n,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),o=this._getInst(r[0]);n=null!=n?n:this._formatDate(o),o.input&&o.input.val(n),this._updateAlternate(o),(i=this._get(o,"onSelect"))?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,o=this._get(t,"altField");o&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(o).val(r))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;var r,o,a,s,u=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,f=(i?i.dayNames:null)||this._defaults.dayNames,d=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,p=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,A=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;return n&&r++,n},w=function(e){var t=A(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),o=n.substring(u).match(r);if(!o)throw"Missing number at position "+u;return u+=o[0].length,parseInt(o[0],10)},_=function(t,i,r){var o=-1,a=e.map(A(t)?r:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var i=t[1];if(n.substr(u,i.length).toLowerCase()===i.toLowerCase())return o=t[0],u+=i.length,!1}),-1!==o)return o+1;throw"Unknown name at position "+u},C=function(){if(n.charAt(u)!==t.charAt(r))throw"Unexpected literal at position "+u;u++};for(r=0;r<t.length;r++)if(b)"'"!==t.charAt(r)||A("'")?C():b=!1;else switch(t.charAt(r)){case"d":v=w("d");break;case"D":_("D",h,f);break;case"o":y=w("o");break;case"m":m=w("m");break;case"M":m=_("M",d,p);break;case"y":g=w("y");break;case"@":g=(s=new Date(w("@"))).getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"!":g=(s=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"'":A("'")?C():b=!0;break;default:C()}if(u<n.length&&(a=n.substr(u),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=l?0:-100)),y>-1)for(m=1,v=y;;){if(v<=(o=this._getDaysInMonth(g,m-1)))break;m++,v-=o}if((s=this._daylightSavingAdjust(new Date(g,m-1,v))).getFullYear()!==g||s.getMonth()+1!==m||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(u(e))for(;i.length<n;)i="0"+i;return i},l=function(e,t,n,i){return u(e)?i[t]:n[t]},h="",f=!1;if(t)for(i=0;i<e.length;i++)if(f)"'"!==e.charAt(i)||u("'")?h+=e.charAt(i):f=!1;else switch(e.charAt(i)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=l("D",t.getDay(),r,o);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=l("M",t.getMonth(),a,s);break;case"y":h+=u("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":u("'")?h+="'":f=!0;break;default:h+=e.charAt(i)}return h},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,a=this._getFormatConfig(e);try{o=this.parseDate(n,i,a)||r}catch(e){i=t?"":i}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=i?o.getDate():0,e.currentMonth=i?o.getMonth():0,e.currentYear=i?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=null==n||""===n?i:"string"==typeof n?function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=i.getFullYear(),o=i.getMonth(),a=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(n);u;){switch(u[2]||"d"){case"d":case"D":a+=parseInt(u[1],10);break;case"w":case"W":a+=7*parseInt(u[1],10);break;case"m":case"M":o+=parseInt(u[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(u[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(r,o))}u=s.exec(n)}return new Date(r,o,a)}(n):"number"==typeof n?isNaN(n)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(n):new Date(n.getTime());return(r=r&&"Invalid Date"===r.toString()?i:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),r===e.selectedMonth&&o===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,o,a,s,u,c,l,h,f,d,p,g,m,v,y,b,A,w,_,C,S,E,T,k,I,x,D,N,P,O,M,R,$,L,F,U,B=new Date,j=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),V=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),H=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),G=this._getNumberOfMonths(e),z=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),Q=1!==G[0]||1!==G[1],Y=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-z,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-G[0]*G[1]+1,J.getDate())),t=X&&t<X?X:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,n=this._get(e,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>":H?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+r+"</span></a>":H?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+r+"</span></a>",a=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?Y:j,a=W?this.formatDate(a,s,this._getFormatConfig(e)):a,u=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?u:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(V?"":u)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,h=this._get(e,"showWeek"),f=this._get(e,"dayNames"),d=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),A="",_=0;_<G[0];_++){for(C="",this.maxRows=4,S=0;S<G[1];S++){if(E=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),T=" ui-corner-all",k="",Q){if(k+="<div class='ui-datepicker-group",G[1]>1)switch(S){case 0:k+=" ui-datepicker-group-first",T=" ui-corner-"+(V?"right":"left");break;case G[1]-1:k+=" ui-datepicker-group-last",T=" ui-corner-"+(V?"left":"right");break;default:k+=" ui-datepicker-group-middle",T=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===_?V?o:i:"")+(/all|right/.test(T)&&0===_?V?i:o:"")+this._generateMonthYearHeader(e,Z,ee,X,J,_>0||S>0,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",I=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)x=(w+l)%7,I+="<th scope='col'"+((w+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+f[x]+"'>"+d[x]+"</span></th>";for(k+=I+"</tr></thead><tbody>",D=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),N=(this._getFirstDayOfMonth(ee,Z)-l+7)%7,P=Math.ceil((N+D)/7),O=Q&&this.maxRows>P?this.maxRows:P,this.maxRows=O,M=this._daylightSavingAdjust(new Date(ee,Z,1-N)),R=0;R<O;R++){for(k+="<tr>",$=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(M)+"</td>":"",w=0;w<7;w++)L=m?m.apply(e.input?e.input[0]:null,[M]):[!0,""],U=(F=M.getMonth()!==Z)&&!y||!L[0]||X&&M<X||J&&M>J,$+="<td class='"+((w+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(M.getTime()===E.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===M.getTime()&&b.getTime()===E.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+L[1]+(M.getTime()===Y.getTime()?" "+this._currentClass:"")+(M.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(U?"":" data-handler='selectDay' data-event='click' data-month='"+M.getMonth()+"' data-year='"+M.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":U?"<span class='ui-state-default'>"+M.getDate()+"</span>":"<a class='ui-state-default"+(M.getTime()===j.getTime()?" ui-state-highlight":"")+(M.getTime()===Y.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+M.getDate()+"</a>")+"</td>",M.setDate(M.getDate()+1),M=this._daylightSavingAdjust(M);k+=$+"</tr>"}++Z>11&&(Z=0,ee++),C+=k+="</tbody></table>"+(Q?"</div>"+(G[0]>0&&S===G[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}A+=C}return A+=c,e._keyEvent=!1,A},_generateMonthYearHeader:function(e,t,n,i,r,o,a,s){var u,c,l,h,f,d,p,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",A="";if(o||!m)A+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(u=i&&i.getFullYear()===n,c=r&&r.getFullYear()===n,A+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;l<12;l++)(!u||l>=i.getMonth())&&(!c||l<=r.getMonth())&&(A+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+s[l]+"</option>");A+="</select>"}if(y||(b+=A+(!o&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(e,"yearRange").split(":"),f=(new Date).getFullYear(),p=(d=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(t)?f:t})(h[0]),g=Math.max(p,d(h[1]||"")),p=i?Math.max(p,i.getFullYear()):p,g=r?Math.min(g,r.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!o&&m&&v?"":"&#xa0;")+A),b+="</div>"},_adjustInstDate:function(e,t,n){var i=e.selectedYear+("Y"===n?t:0),r=e.selectedMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&t<n?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(t<0?t:r[0]*r[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,u=this._get(e,"yearRange");return u&&(n=u.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new f,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1";e.datepicker,e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var m=!1;e(document).on("mouseup",function(){m=!1});e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!m){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),m=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,m=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",t)&&n._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,o=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(i=(n=e(r.containment))[0])&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=r.containment:this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),u=e.pageX,c=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(u=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(u=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,u=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(u=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){this.isOver?(this.isOver=0,i.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(t),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",t,r))})},drag:function(t,n,i){e.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",t),i.dropped=o.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-t.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-t.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(s).scrollTop()<r.scrollSensitivity?o=e(s).scrollTop(e(s).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<r.scrollSensitivity&&(o=e(s).scrollTop(e(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(s).scrollLeft()<r.scrollSensitivity?o=e(s).scrollLeft(e(s).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<r.scrollSensitivity&&(o=e(s).scrollLeft(e(s).scrollLeft()+r.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var r,o,a,s,u,c,l,h,f,d,p=i.options,g=p.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--)c=(u=i.snapElements[f].left-i.margins.left)+i.snapElements[f].width,h=(l=i.snapElements[f].top-i.margins.top)+i.snapElements[f].height,v<u-g||m>c+g||b<l-g||y>h+g||!e.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(l-b)<=g,o=Math.abs(h-y)<=g,a=Math.abs(u-v)<=g,s=Math.abs(c-m)<=g,r&&(n.position.top=i._convertPositionTo("relative",{top:l-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),d=r||o||a||s,"outer"!==p.snapMode&&(r=Math.abs(l-y)<=g,o=Math.abs(h-b)<=g,a=Math.abs(u-m)<=g,s=Math.abs(c-v)<=g,r&&(n.position.top=i._convertPositionTo("relative",{top:l,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(r||o||a||s||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=r||o||a||s||d)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,o=i.options,a=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}});e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i,r=n&&"left"===n?"scrollLeft":"scrollTop";return t[r]>0||(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,r,o,a=this.options,s=this;if(this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)r="ui-resizable-"+(t=e.trim(i[n])),o=e("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:a.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var n,i,r,o;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,i,r,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,r=this.originalMousePosition,o=this.axis,a=t.pageX-r.left||0,s=t.pageY-r.top||0,u=this._change[o];return this._updatePrevProperties(),!!u&&(n=u.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,r,o,a,s,u,c=this.options;return this._helper&&(r=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:this.sizeDiff.height,o=i?0:this.sizeDiff.width,a={width:this.helper.width()-o,height:this.helper.height()-r},s=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,u=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:u,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,r,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,u=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),o&&c&&(e.left=s-t.minWidth),i&&c&&(e.left=s-t.maxWidth),a&&l&&(e.top=u-t.minHeight),r&&l&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(r[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,u={width:n.size.width-s,height:n.size.height-a},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,l=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(u,l&&c?{top:l,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,r,o,a,s,u=e(this).resizable("instance"),c=u.options,l=u.element,h=c.containment,f=h instanceof e?h.get(0):/parent/.test(h)?l.parent().get(0):h;f&&(u.containerElement=e(f),/document/.test(h)||h===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(f),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=u._num(t.css("padding"+i))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=u.containerOffset,r=u.containerSize.height,o=u.containerSize.width,a=u._hasScroll(f,"left")?f.scrollWidth:o,s=u._hasScroll(f)?f.scrollHeight:r,u.parentData={element:f,left:i.left,top:i.top,width:a,height:s}))},resize:function(t){var n,i,r,o,a=e(this).resizable("instance"),s=a.options,u=a.containerOffset,c=a.position,l=a._aspectRatio||t.shiftKey,h={top:0,left:0},f=a.containerElement,d=!0;f[0]!==document&&/static/.test(f.css("position"))&&(h=u),c.left<(a._helper?u.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-u.left:a.position.left-h.left),l&&(a.size.height=a.size.width/a.aspectRatio,d=!1),a.position.left=s.helper?u.left:0),c.top<(a._helper?u.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-u.top:a.position.top),l&&(a.size.width=a.size.height*a.aspectRatio,d=!1),a.position.top=a._helper?u.top:0),r=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),r&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-h.left:a.offset.left-u.left)),i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-h.top:a.offset.top-u.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,l&&(a.size.height=a.size.width/a.aspectRatio,d=!1)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,l&&(a.size.width=a.size.height*a.aspectRatio,d=!1)),d||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),u=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:u,height:c}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:u,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),r=i.options,o=i.originalSize,a=i.originalPosition,s={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0};e(r.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),r={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(s[t]||0);n&&n>=0&&(r[t]=n||null)}),t.css(r)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,r=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,u="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=u[0]||1,l=u[1]||1,h=Math.round((r.width-o.width)/c)*c,f=Math.round((r.height-o.height)/l)*l,d=o.width+h,p=o.height+f,g=i.maxWidth&&i.maxWidth<d,m=i.maxHeight&&i.maxHeight<p,v=i.minWidth&&i.minWidth>d,y=i.minHeight&&i.minHeight>p;i.grid=u,v&&(d+=c),y&&(p+=l),g&&(d-=c),m&&(p-=l),/^(se|s|e)$/.test(s)?(n.size.width=d,n.size.height=p):/^(ne)$/.test(s)?(n.size.width=d,n.size.height=p,n.position.top=a.top-f):/^(sw)$/.test(s)?(n.size.width=d,n.size.height=p,n.position.left=a.left-h):((p-l<=0||d-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),p-l>0?(n.size.height=p,n.position.top=a.top-f):(p=l-t.height,n.size.height=p,n.position.top=a.top+o.height-p),d-c>0?(n.size.width=d,n.position.left=a.left-h):(d=c-t.width,n.size.width=d,n.position.left=a.left+o.width-d))}});e.ui.resizable;e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),o=Math.max.apply(null,r);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){r.trigger("focus")}),t.preventDefault()):(this._delay(function(){i.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,function(n,i){var r,o;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,o={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,e("<button></button>",i).button(o).appendTo(t.uiButtonSet).on("click",function(){r.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,i(r))},drag:function(e,n){t._trigger("drag",e,i(n))},stop:function(r,o){var a=o.offset.left-t.document.scrollLeft(),s=o.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(s>=0?"+":"")+s,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",r,i(o))}})},_makeResizable:function(){var t=this,n=this.options,i=n.resizable,r=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,i){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,a(i))},resize:function(e,n){t._trigger("resize",e,a(n))},stop:function(i,r){var o=t.uiDialog.offset(),s=o.left-t.document.scrollLeft(),u=o.top-t.document.scrollTop();n.height=t.uiDialog.height(),n.width=t.uiDialog.width(),n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(u>=0?"+":"")+u,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",i,a(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(r[e]=t)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var i,r,o=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=o.is(":data(ui-draggable)"))&&!n&&o.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((r=o.is(":data(ui-resizable)"))&&!n&&o.resizable("destroy"),r&&"string"==typeof n&&o.resizable("option","handles",n),r||!1===n||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}});e.ui.dialog;e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&v(i,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(i)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var v=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,i,r){if(!n.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,u=a+t.helperProportions.height,c=n.offset.left,l=n.offset.top,h=c+n.proportions().width,f=l+n.proportions().height;switch(i){case"fit":return c<=o&&s<=h&&l<=a&&u<=f;case"intersect":return c<o+t.helperProportions.width/2&&s-t.helperProportions.width/2<h&&l<a+t.helperProportions.height/2&&u-t.helperProportions.height/2<f;case"pointer":return e(r.pageY,l,n.proportions().height)&&e(r.pageX,c,n.proportions().width);case"touch":return(a>=l&&a<=f||u>=l&&u<=f||a<l&&u>f)&&(o>=c&&o<=h||s>=c&&s<=h||o<c&&s>h);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,n){var i,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(r=0;r<s.length;r++)if(s[r]===o[i].element[0]){o[i].proportions().height=0;continue e}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===a&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&v(t,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,a=v(t,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===r})).length&&((i=e(o[0]).droppable("instance")).greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});e.ui.droppable,e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(n.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var n=e(this),i=n.offset(),r={left:i.left-t.elementPos.left,top:i.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:n,left:r.left,top:r.top,right:r.left+n.outerWidth(),bottom:r.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,r=e.data(this,"selectable-item");if(r)return i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),n._removeClass(r.$element,i?"ui-unselecting":"ui-selected")._addClass(r.$element,i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=t.pageX,u=t.pageY;return o>s&&(n=s,s=o,o=n),a>u&&(n=u,u=a,a=n),this.helper.css({left:o,top:a,width:s-o,height:u-a}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),c=!1,l={};n&&n.element!==i.element[0]&&(l.left=n.left+i.elementPos.left,l.right=n.right+i.elementPos.left,l.top=n.top+i.elementPos.top,l.bottom=n.bottom+i.elementPos.top,"touch"===r.tolerance?c=!(l.left>s||l.right<o||l.top>u||l.bottom<a):"fit"===r.tolerance&&(c=l.left>o&&l.right<s&&l.top>a&&l.bottom<u),c?(n.selected&&(i._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(i._addClass(n.$element,"ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,i._addClass(n.$element,"ui-selected"),n.selected=!0):(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");n._removeClass(i.$element,"ui-selecting")._addClass(i.$element,"ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var i=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&i.index!==t.focusIndex&&(t._trigger("focus",e,{item:i}),t.isOpen||t._select(i,e)),t.focusIndex=i.index,t.button.attr("aria-activedescendant",t.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var n=e("<span>");return this._setText(n,t.label),this._addClass(n,"ui-selectmenu-text"),n},_renderMenu:function(t,n){var i=this,r="";e.each(n,function(n,o){var a;o.optgroup!==r&&(a=e("<li>",{text:o.optgroup}),i._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(t),r=o.optgroup),i._renderItemData(t,o)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var i=e("<li>"),r=e("<div>",{title:n.element.attr("title")});return n.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(r,n.label),i.append(r).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),(i="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](r).eq(-1):n[e+"All"](r).eq(0)).length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1!==e?(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var n=this,i=[];t.each(function(t,r){i.push(n._parseOption(e(r),t))}),this.items=i},_parseOption:function(e,t){var n=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle"),o=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),t=r.length;t<n;t++)o.push("<span tabindex='0'></span>");this.handles=r.add(e(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,o,a,s,u,c=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-c.values(t));(r>n||r===n&&(t===c._lastChangedValue||c.values(t)===l.min))&&(r=n,o=e(this),a=t)}),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),s=o.offset(),u=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-s.left-o.width()/2,top:t.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_uiHash:function(e,t,n){var i={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==t?t:this.values(e),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var i,r=this.value(),o=this.values();this._hasMultipleValues()&&(i=this.values(t?0:1),r=this.values(t),2===this.options.values.length&&!0===this.options.range&&(n=0===t?Math.min(i,n):Math.max(i,n)),o[t]=n),n!==r&&!1!==this._trigger("slide",e,this._uiHash(t,n,o))&&(this._hasMultipleValues()?this.values(t,n):this.value(n))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch("range"===t&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),this._super(t,n),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=r-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step;(e=Math.round((e-t)/n)*n+t)>this.options.max&&(e-=n),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,i,r,o,a=this.options.range,s=this.options,u=this,c=!this._animateOff&&s.animate,l={};this._hasMultipleValues()?this.handles.each(function(i){n=(u.values(i)-u._valueMin())/(u._valueMax()-u._valueMin())*100,l["horizontal"===u.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](l,s.animate),!0===u.options.range&&("horizontal"===u.orientation?(0===i&&u.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&u.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&u.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&u.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?(i-r)/(o-r)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](l,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},s.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(t){var n,i,r,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(r=this.options.step,n=i=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-r)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),this._removeClass(e(t.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,o.widgetName+"-item")===o)return i=e(this),!1}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=(i=this.items[n]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,u=s+e.height,c=this.offset.click.top,l=this.offset.click.left,h="x"===this.options.axis||i+c>s&&i+c<u,f="y"===this.options.axis||t+l>o&&t+l<a,d=h&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<u},_intersectsWithPointer:function(e){var t,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!i||!r)&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,o,a=[],s=[],u=this._connectWith();if(u&&t)for(n=u.length-1;n>=0;n--)for(i=(r=e(u[n],this.document[0])).length-1;i>=0;i--)(o=e.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function c(){a.push(this)}for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(c);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,u,c,l=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(i=(r=e(f[n],this.document[0])).length-1;i>=0;i--)(o=e.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(h.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=h.length-1;n>=0;n--)for(a=h[n][1],i=0,c=(s=h[n][0]).length;i<c;i++)(u=e(s[i])).data(this.widgetName+"-item",a),l.push({item:u,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,i,r,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(i=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]);return t._addClass(r,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(r,"ui-sortable-helper"),"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r)):"tr"===i?t._createTrPlaceholder(t.currentItem,r):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){n&&!i.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,i,r,o,a,s,u,c,l,h,f=null,d=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&e.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],d=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(r=1e4,o=null,a=(l=f.floating||this._isFloating(this.currentItem))?"left":"top",s=l?"width":"height",h=l?"pageX":"pageY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(u=this.items[i].item.offset()[a],c=!1,t[h]-u>this.items[i][s]/2&&(c=!0),Math.abs(t[h]-u)<r&&(r=Math.abs(t[h]-u),o=this.items[i],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,u=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():u?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():u?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function r(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(r("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(r("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}});function y(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),n=this.element;return e.each(["min","max","step"],function(e,i){var r=n.attr(i);null!=r&&r.length&&(t[i]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){var n;function i(){this.element[0]===e.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n}))}n=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return n=e-(t=null!==i.min?i.min:0),e=t+(n=Math.round(n/i.step)*i.step),e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var n,i,r;if("culture"===e||"numberFormat"===e)return n=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(n));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,t.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:y(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&null!==(n=this._parse(e))&&(t||(n=this._adjustValue(n)),e=this._format(n)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:y(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:y(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:y(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:y(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());y(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!1!==e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var b;e.ui.spinner;e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(b=/#.*$/,function(e){var t,n;t=e.href.replace(b,""),n=location.href.replace(b,"");try{t=decodeURIComponent(t)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return e.hash.length>1&&t===n}),_create:function(){var t=this,n=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(n,r){if(e(r).attr("aria-controls")===i)return t=n,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!n&&0),!n&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(e.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){var i=this.tabs.length-1;for(;-1!==e.inArray((t>i&&(t=0),t<0&&(t=i),t),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each(function(n,i){var r,o,a,s=e(i).uniqueId().attr("id"),u=e(i).closest("li"),c=u.attr("aria-controls");t._isLocal(i)?(a=(r=i.hash).substring(1),o=t.element.find(t._sanitizeSelector(r))):(r="#"+(a=u.attr("aria-controls")||e({}).uniqueId()[0].id),(o=t.element.find(r)).length||(o=t._createPanel(a)).insertAfter(t.panels[n-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&u.data("ui-tabs-aria-controls",c),u.attr({"aria-controls":a,"aria-labelledby":s}),o.attr("aria-labelledby",s)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var n,i,r;for(e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),r=0;i=this.tabs[r];r++)n=e(i),!0===t||-1!==e.inArray(r,t)?(n.attr("aria-disabled","true"),this._addClass(n,null,"ui-state-disabled")):(n.removeAttr("aria-disabled"),this._removeClass(n,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget).closest("li"),o=r[0]===i[0],a=o&&n.collapsible,s=a?e():this._getPanelForTab(r),u=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:u,newTab:a?e():r,newPanel:s};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||!1===this._trigger("beforeActivate",t,c)||(n.active=!a&&this.tabs.index(r),this.active=o?e():r,this.xhr&&this.xhr.abort(),u.length||s.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(r),t),this._toggle(t,c))},_toggle:function(t,n){var i=this,r=n.newPanel,o=n.oldPanel;function a(){i.running=!1,i._trigger("activate",t,n)}function s(){i._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active"),r.length&&i.options.show?i._show(r,i.options.show,a):(r.show(),a())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),s()),o.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&o.length?n.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;!1!==n&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setOptionDisabled(n))},disable:function(t){var n=this.options.disabled;if(!0!==n){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setOptionDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),s={tab:r,panel:a},u=function(e,t){"abort"===t&&i.panels.stop(!1,!0),i._removeClass(r,"ui-tabs-loading"),a.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr};this._isLocal(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(r,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(e,t,r){setTimeout(function(){a.html(e),i._trigger("load",n,s),u(r,t)},1)}).fail(function(e,t){setTimeout(function(){u(e,t)},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,o){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:o},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});e.ui.tabs;e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);-1!==r&&i.splice(r,1),t.removeData("ui-tooltip-id"),(i=e.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var i=this;this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i.element[0],t.close(r,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,r=this,o=t?t.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(t,e,i);(n=i.call(e[0],function(n){r._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=o),this._open(t,e,n))})}))&&this._open(t,e,n)},_open:function(t,n,i){var r,o,a,s,u=e.extend({},this.options.position);function c(e){u.of=e,o.is(":hidden")||o.position(u)}i&&((r=this._find(n))?r.tooltip.find(".ui-tooltip-content").html(i):(n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),o=r.tooltip,this._addDescribedBy(n,o.attr("id")),o.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(s=e("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:c}),c(t)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(c(u.of),clearInterval(a))},e.fx.interval)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,n){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,n,i)},close:function(t){var n,i=this,r=e(t?t.currentTarget:this.element),o=this._find(r);o?(n=o.tooltip,o.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),o.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),o.closing=!0,this._trigger("close",t,{tooltip:n}),o.hiding||(o.closing=!1))):r.removeData("ui-tooltip-open")},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),i=e("<div>").appendTo(n),r=n.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[r]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur"),o=i.element;r.target=r.currentTarget=o[0],t.close(r,!0),e("#"+n).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}});e.ui.tooltip}),function(e,t,n,i){"use strict";var r=t.module("ngDragDrop",[]).service("ngDragDropService",["$timeout","$parse","$q",function(i,o,a){this.draggableScope=null,this.droppableScope=null,n("head").prepend('<style type="text/css">@charset "UTF-8";.angular-dragdrop-hide{display: none !important;}</style>'),this.callEventCallback=function(e,t,i,r){if(t){var a=function(t){var i=-1!==t.indexOf("(")?t.indexOf("("):t.length,r=-1!==t.lastIndexOf(")")?t.lastIndexOf(")"):t.length,a=t.substring(i+1,r),s=-1!==t.indexOf(".")?t.substr(0,t.indexOf(".")):null;return s=e[s]&&"function"==typeof e[s].constructor?s:null,{callback:t.substring(s&&s.length+1||0,i),args:n.map(a&&a.split(",")||[],function(t){return[o(t)(e)]}),constructor:s}}(t),s=a.callback,u=a.constructor,c=[i,r].concat(a.args);return(e[s]||e[u][s]).apply(e[s]?e:e[u],c)}},this.invokeDrop=function(e,o,s,u){var c,l,h,f,d,p,g={},m={},v={},y={},b=null,A=this.droppableScope,w=this.draggableScope,_=null,C=[];c=e.ngattr("ng-model"),l=o.ngattr("ng-model"),f=w.$eval(c),d=A.$eval(l),b=o.find("[jqyoui-draggable]:last,[data-jqyoui-draggable]:last"),m=A.$eval(o.attr("jqyoui-droppable")||o.attr("data-jqyoui-droppable"))||[],(g=w.$eval(e.attr("jqyoui-draggable")||e.attr("data-jqyoui-draggable"))||[]).index=this.fixIndex(w,g,f),m.index=this.fixIndex(A,m,d),h=t.isArray(f)?g.index:null,v=t.isArray(f)?f[h]:f,g.deepCopy&&(v=t.copy(v)),y=t.isArray(d)&&m&&void 0!==m.index?d[m.index]:t.isArray(d)?{}:d,m.deepCopy&&(y=t.copy(y)),g.beforeDrop&&C.push(this.callEventCallback(w,g.beforeDrop,s,u)),a.all(C).then(t.bind(this,function(){if(g.insertInline&&c===l){if(g.index>m.index){p=f[g.index];for(var a=g.index;a>m.index;a--)d[a]=t.copy(d[a-1]),d[a-1]={},d[a][g.direction]="left";d[m.index]=p}else{p=f[g.index];for(a=g.index;a<m.index;a++)d[a]=t.copy(d[a+1]),d[a+1]={},d[a][g.direction]="right";d[m.index]=p}this.callEventCallback(A,m.onDrop,s,u)}else!0===g.animate?((_=e.clone()).css({position:"absolute"}).css(e.offset()),n("body").append(_),e.addClass("angular-dragdrop-hide"),this.move(_,b.length>0?b:o,null,"fast",m,function(){_.remove()}),this.move(b.length>0&&!m.multiple?b:[],e.parent("[jqyoui-droppable],[data-jqyoui-droppable]"),r.startXY,"fast",m,t.bind(this,function(){i(t.bind(this,function(){e.css({position:"relative",left:"",top:""}).removeClass("angular-dragdrop-hide"),b.css({position:"relative",left:"",top:"",display:"none"===b.css("display")?"":b.css("display")}),this.mutateDraggable(w,m,g,c,l,y,e),this.mutateDroppable(A,m,g,l,v,h),this.callEventCallback(A,m.onDrop,s,u)}))}))):i(t.bind(this,function(){this.mutateDraggable(w,m,g,c,l,y,e),this.mutateDroppable(A,m,g,l,v,h),this.callEventCallback(A,m.onDrop,s,u)}))})).finally(t.bind(this,function(){this.restore(e)}))},this.move=function(t,n,i,r,o,a){if(0===t.length)return a&&e.setTimeout(function(){a()},300),!1;var s=t.css("z-index"),u=t[o.containment||"offset"](),c=n.css("display"),l=n.hasClass("ng-hide"),h=n.hasClass("angular-dragdrop-hide");null===i&&n.length>0&&(void 0!==(n.attr("jqyoui-draggable")||n.attr("data-jqyoui-draggable"))&&void 0!==n.ngattr("ng-model")&&n.is(":visible")&&o&&o.multiple?(i=n[o.containment||"offset"](),!1===o.stack?i.left+=n.outerWidth(!0):i.top+=n.outerHeight(!0)):(l&&n.removeClass("ng-hide"),h&&n.removeClass("angular-dragdrop-hide"),i=n.css({visibility:"hidden",display:"block"})[o.containment||"offset"](),n.css({visibility:"",display:c}))),t.css({position:"absolute","z-index":9999}).css(u).animate(i,r,function(){l&&n.addClass("ng-hide"),h&&n.addClass("angular-dragdrop-hide"),t.css("z-index",s),a&&a()})},this.mutateDroppable=function(e,n,i,r,a,s){var u=e.$eval(r);e.dndDragItem=a,t.isArray(u)?(n&&n.index>=0?u[n.index]=a:u.push(a),i&&!0===i.placeholder&&(u[u.length-1].jqyoui_pos=s)):(o(r+" = dndDragItem")(e),i&&!0===i.placeholder&&(u.jqyoui_pos=s))},this.mutateDraggable=function(e,n,i,r,a,s,u){var c=t.equals(s,{})||!s,l=e.$eval(r);e.dndDropItem=s,i&&i.placeholder?"keep"!=i.placeholder&&(t.isArray(l)&&void 0!==i.index?l[i.index]=s:o(r+" = dndDropItem")(e)):t.isArray(l)?c?i&&!0!==i.placeholder&&"keep"!==i.placeholder&&l.splice(i.index,1):l[i.index]=s:(o(r+" = dndDropItem")(e),e.$parent&&o(r+" = dndDropItem")(e.$parent)),this.restore(u)},this.restore=function(e){e.css({"z-index":"",left:"",top:""})},this.fixIndex=function(e,n,i){if(n.applyFilter&&t.isArray(i)&&i.length>0){var r=e[n.applyFilter]()[n.index],o=void 0;return i.forEach(function(e,n){t.equals(e,r)&&(o=n)}),o}return n.index}}]).directive("jqyouiDraggable",["ngDragDropService",function(e){return{require:"?jqyouiDroppable",restrict:"A",link:function(i,o,a){var s,u,c,l,h=n(o),f=function(o,f){o?(s=i.$eval(h.attr("jqyoui-draggable")||h.attr("data-jqyoui-draggable"))||{},u=i.$eval(a.jqyouiOptions)||{},h.draggable({disabled:!1}).draggable(u).draggable({start:function(t,o){e.draggableScope=i,c=n(u.helper?o.helper:this).css("z-index"),n(u.helper?o.helper:this).css("z-index",9999),r.startXY=n(this)[s.containment||"offset"](),e.callEventCallback(i,s.onStart,t,o)},stop:function(t,r){n(u.helper?r.helper:this).css("z-index",c),e.callEventCallback(i,s.onStop,t,r)},drag:function(t,n){e.callEventCallback(i,s.onDrag,t,n)}})):h.draggable({disabled:!0}),l&&t.isDefined(o)&&(t.equals(a.drag,"true")||t.equals(a.drag,"false"))&&(l(),l=null)};l=i.$watch(function(){return i.$eval(a.drag)},f),f(),h.on("$destroy",function(){h.draggable({disabled:!0}).draggable("destroy")})}}}]).directive("jqyouiDroppable",["ngDragDropService","$q",function(e,i){return{restrict:"A",priority:1,link:function(r,o,a){var s,u,c,l=n(o),h=function(o,h){o?(s=r.$eval(n(l).attr("jqyoui-droppable")||n(l).attr("data-jqyoui-droppable"))||{},u=r.$eval(a.jqyouiOptions)||{},l.droppable({disabled:!1}).droppable(u).droppable({over:function(t,n){e.callEventCallback(r,s.onOver,t,n)},out:function(t,n){e.callEventCallback(r,s.onOut,t,n)},drop:function(o,c){var l,h=null;s.beforeDrop?h=e.callEventCallback(r,s.beforeDrop,o,c):((l=i.defer()).resolve(),h=l.promise),h.then(t.bind(this,function(){n(c.draggable).ngattr("ng-model")&&a.ngModel?(e.droppableScope=r,e.invokeDrop(n(c.draggable),n(this),o,c)):e.callEventCallback(r,s.onDrop,o,c)}),function(){c.draggable.animate({left:"",top:""},u.revertDuration||0)})}})):l.droppable({disabled:!0}),c&&t.isDefined(o)&&(t.equals(a.drop,"true")||t.equals(a.drop,"false"))&&(c(),c=null)};c=r.$watch(function(){return r.$eval(a.drop)},h),h(),l.on("$destroy",function(){l.droppable({disabled:!0}).droppable("destroy")})}}}]);n.fn.ngattr=function(e,t){var n=this[0];return n.getAttribute(e)||n.getAttribute("data-"+e)}}(window,window.angular,window.jQuery),function(e,t){"use strict";function n(e,t){var n=[],i=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,i,r){var o="?"===r||"*?"===r,a="*"===r||"*?"===r;return n.push({name:i,optional:o}),t=t||"",(o?"(?:"+t:t+"(?:")+(a?"(.+?)":"([^/]+)")+(o?"?)?":")")}).replace(/([/$*])/g,"\\$1");return t.ignoreTrailingSlashes&&(i=i.replace(/\/+$/,"")+"/*"),{keys:n,regexp:new RegExp("^"+i+"(?:[?#]|$)",t.caseInsensitiveMatch?"i":"")}}var i,r,o,a,s,u=t.module("ngRoute",[]).info({angularVersion:"1.7.8"}).provider("$route",function(){function e(e,n){return t.extend(Object.create(e),n)}i=t.isArray,r=t.isObject,o=t.isDefined,a=t.noop;var u={};this.when=function(e,o){var a=function(e,t){if(i(e)){t=t||[];for(var n=0,o=e.length;n<o;n++)t[n]=e[n]}else if(r(e))for(var a in t=t||{},e)"$"===a.charAt(0)&&"$"===a.charAt(1)||(t[a]=e[a]);return t||e}(o);if(t.isUndefined(a.reloadOnUrl)&&(a.reloadOnUrl=!0),t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),u[e]=t.extend(a,{originalPath:e},e&&n(e,a)),e){var s="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/";u[s]=t.extend({originalPath:e,redirectTo:e},n(s,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},s=!0,this.eagerInstantiationEnabled=function(e){return o(e)?(s=e,this):s},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(n,i,r,o,s,l,h,f){var d,p,g=!1,m={routes:u,reload:function(){g=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,g=!1}};n.$evalAsync(function(){v(e),e.defaultPrevented||y()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw c("norout","Tried updating route with no current route");e=t.extend({},this.current.params,e),i.path(_(this.current.$$route.originalPath,e)),i.search(e)}};return n.$on("$locationChangeStart",v),n.$on("$locationChangeSuccess",y),m;function v(r){var o,a,s,c,l=m.current;t.forEach(u,function(n,r){!a&&(o=function(e,t){var n=t.keys,i={};if(!t.regexp)return null;var r=t.regexp.exec(e);if(!r)return null;for(var o=1,a=r.length;o<a;++o){var s=n[o-1],u=r[o];s&&u&&(i[s.name]=u)}return i}(i.path(),n))&&((a=e(n,{params:t.extend({},i.search(),o),pathParams:o})).$$route=n)}),d=a||u.null&&e(u.null,{params:{},pathParams:{}}),s=d,c=l,(p=!g&&s&&c&&s.$$route===c.$$route&&(!s.reloadOnUrl||!s.reloadOnSearch&&t.equals(s.pathParams,c.pathParams)))||!l&&!d||n.$broadcast("$routeChangeStart",d,l).defaultPrevented&&r&&r.preventDefault()}function y(){var e=m.current,i=d;if(p)e.params=i.params,t.copy(e.params,r),n.$broadcast("$routeUpdate",e);else if(i||e){g=!1,m.current=i;var s=o.resolve(i);f.$$incOutstandingRequestCount("$route"),s.then(b).then(A).then(function(o){return o&&s.then(w).then(function(o){i===m.current&&(i&&(i.locals=o,t.copy(i.params,r)),n.$broadcast("$routeChangeSuccess",i,e))})}).catch(function(t){i===m.current&&n.$broadcast("$routeChangeError",i,e,t)}).finally(function(){f.$$completeOutstandingRequest(a,"$route")})}}function b(e){var n={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(t.isString(e.redirectTo))n.path=_(e.redirectTo,e.params),n.search=e.params,n.hasRedirection=!0;else{var r=i.path(),a=i.search(),u=e.redirectTo(e.pathParams,r,a);t.isDefined(u)&&(n.url=u,n.hasRedirection=!0)}else if(e.resolveRedirectTo)return o.resolve(s.invoke(e.resolveRedirectTo)).then(function(e){return t.isDefined(e)&&(n.url=e,n.hasRedirection=!0),n});return n}function A(e){var t=!0;if(e.route!==m.current)t=!1;else if(e.hasRedirection){var n=i.url(),r=e.url;r?i.url(r).replace():r=i.path(e.path).search(e.search).replace().url(),r!==n&&(t=!1)}return t}function w(e){if(e){var n=t.extend({},e.resolve);t.forEach(n,function(e,i){n[i]=t.isString(e)?s.get(e):s.invoke(e,null,null,i)});var i=function(e){var n,i;t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(i=e.templateUrl)&&(t.isFunction(i)&&(i=i(e.params)),t.isDefined(i)&&(e.loadedTemplateUrl=h.valueOf(i),n=l(i)));return n}(e);return t.isDefined(i)&&(n.$template=i),o.all(n)}}function _(e,n){var i=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)i.push(e);else{var r=e.match(/(\w+)(?:[?*])?(.*)/),o=r[1];i.push(n[o]),i.push(r[2]||""),delete n[o]}}),i.join("")}}]}).run(l),c=t.$$minErr("ngRoute");function l(e){s&&e.get("$route")}function h(e,n,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(r,o,a,s,u){var c,l,h,f=a.autoscroll,d=a.onload||"";function p(){h&&(i.cancel(h),h=null),c&&(c.$destroy(),c=null),l&&((h=i.leave(l)).done(function(e){!1!==e&&(h=null)}),l=null)}function g(){var a=e.current&&e.current.locals,s=a&&a.$template;if(t.isDefined(s)){var h=r.$new(),g=e.current,m=u(h,function(e){i.enter(e,null,l||o).done(function(e){!1===e||!t.isDefined(f)||f&&!r.$eval(f)||n()}),p()});l=m,(c=g.scope=h).$emit("$viewContentLoaded"),c.$eval(d)}else p()}r.$on("$routeChangeSuccess",g),g()}}}function f(e,t,n){return{restrict:"ECA",priority:-400,link:function(i,r){var o=n.current,a=o.locals;r.html(a.$template);var s=e(r.contents());if(o.controller){a.$scope=i;var u=t(o.controller,a);o.controllerAs&&(i[o.controllerAs]=u),r.data("$ngControllerController",u),r.children().data("$ngControllerController",u)}i[o.resolveAs||"$resolve"]=a,s(i)}}}l.$inject=["$injector"],u.provider("$routeParams",function(){this.$get=function(){return{}}}),u.directive("ngView",h),u.directive("ngView",f),h.$inject=["$route","$anchorScroll","$animate"],f.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t){"use strict";var n,i,r,o,a,s,u,c,l,h,f=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",function(){var d=!1,p=!1;this.$get=["$$sanitizeUri",function(e){return d=!0,p&&i(E,C),function(t){var n=[];return l(t,h(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return a(e)?(p=e,this):p},this.addValidElements=function(e){return d||(o(e)&&(e={htmlElements:e}),P(C,e.svgElements),P(v,e.htmlVoidElements),P(E,e.htmlVoidElements),P(E,e.htmlElements)),this},this.addValidAttrs=function(e){return d||i(x,N(e,!0)),this},n=t.bind,i=t.extend,r=t.forEach,o=t.isArray,a=t.isDefined,s=t.$$lowercase,u=t.noop,l=function(e,t){null===e||void 0===e?e="":"string"!=typeof e&&(e=""+e);var n=O(e);if(!n)return"";var i=5;do{if(0===i)throw f("uinput","Failed to sanitize html because the input is unstable");i--,e=n.innerHTML,n=O(e)}while(e!==n.innerHTML);for(var r=n.firstChild;r;){switch(r.nodeType){case 1:t.start(r.nodeName.toLowerCase(),M(r.attributes));break;case 3:t.chars(r.textContent)}var o;if(!((o=r.firstChild)||(1===r.nodeType&&t.end(r.nodeName.toLowerCase()),o=L("nextSibling",r))))for(;null==o&&(r=L("parentNode",r))!==n;)o=L("nextSibling",r),1===r.nodeType&&t.end(r.nodeName.toLowerCase());r=o}for(;r=n.firstChild;)n.removeChild(r)},h=function(e,t){var i=!1,o=n(e,e.push);return{start:function(e,n){e=s(e),!i&&S[e]&&(i=e),i||!0!==E[e]||(o("<"),o(e),r(n,function(n,i){var r=s(i),a="img"===e&&"src"===r||"background"===r;!0!==x[r]||!0===T[r]&&!t(n,a)||(o(" "),o(i),o('="'),o(R(n)),o('"'))}),o(">"))},end:function(e){e=s(e),i||!0!==E[e]||!0===v[e]||(o("</"),o(e),o(">")),e==i&&(i=!1)},chars:function(e){i||o(R(e))}}},c=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=/([^#-~ |!])/g,v=D("area,br,col,hr,img,wbr"),y=D("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),b=D("rp,rt"),A=i({},b,y),w=i({},y,D("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),_=i({},b,D("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=D("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),S=D("script,style"),E=i({},v,w,_,A),T=D("background,cite,href,longdesc,src,xlink:href,xml:base"),k=D("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),I=D("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),x=i({},T,I,k);function D(e,t){return N(e.split(","),t)}function N(e,t){var n,i={};for(n=0;n<e.length;n++)i[t?s(e[n]):e[n]]=!0;return i}function P(e,t){t&&t.length&&i(e,N(t))}var O=function(e,t){var n;if(!t||!t.implementation)throw f("noinert","Can't create an inert html document");var i=((n=t.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return i.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',i.querySelector("svg")?(i.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',i.querySelector("svg img")?function(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}:function(e){return i.innerHTML=e,t.documentMode&&$(i),i}):function(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var i=n.response.body;return i.firstChild.remove(),i}}(e,e.document);function M(e){for(var t={},n=0,i=e.length;n<i;n++){var r=e[n];t[r.name]=r.value}return t}function R(e){return e.replace(/&/g,"&amp;").replace(g,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(m,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,i=0,r=n.length;i<r;i++){var o=n[i],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),i--,r--)}var s=t.firstChild;s&&$(s),t=L("nextSibling",t)}}function L(e,t){var n=t[e];if(n&&c.call(t,n))throw f("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}}).info({angularVersion:"1.7.8"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,r=t.$$minErr("linky"),o=t.isDefined,a=t.isFunction,s=t.isObject,c=t.isString;return function(t,l,f){if(null==t||""===t)return t;if(!c(t))throw r("notstring","Expected string but received: {0}",t);for(var d,p,g,m=a(f)?f:s(f)?function(){return f}:function(){return{}},v=t,y=[];d=v.match(n);)p=d[0],d[2]||d[4]||(p=(d[3]?"http://":"mailto:")+p),g=d.index,b(v.substr(0,g)),A(p,d[0].replace(i,"")),v=v.substring(g+d[0].length);return b(v),e(y.join(""));function b(e){var t,n;e&&y.push((t=e,h(n=[],u).chars(t),n.join("")))}function A(e,t){var n,i=m(e);for(n in y.push("<a "),i)y.push(n+'="'+i[n]+'" ');!o(l)||"target"in i||y.push('target="',l,'" '),y.push('href="',e.replace(/"/g,"&quot;"),'">'),b(t),y.push("</a>")}}}])}(window,window.angular),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof module&&module.exports?module.exports=t():t()}(0,function(){function e(e){"use strict";var t=e.storageKey(),n=e.storage(),i=function(){var i=e.preferredLanguage();angular.isString(i)?e.use(i):n.put(t,e.use())};i.displayName="fallbackFromIncorrectStorageValue",n?n.get(t)?e.use(n.get(t)).catch(i):i():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(e,t,n,i){"use strict";var r,o,a,s,u,c,l,h,f,d,p,g,m,v,y,b,A={},w=[],_=e,C=[],S="translate-cloak",E=!1,T=!1,k=".",I=!1,x=!1,D=0,N=!0,P="default",O={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return t}return n.join("-")},"iso639-1":function(e){return(e||"").split("_").join("-").split("-")[0].toLowerCase()}},M=function(){if(angular.isFunction(i.getLocale))return i.getLocale();var e,n,r=t.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(r.languages))for(e=0;e<r.languages.length;e++)if((n=r.languages[e])&&n.length)return n;for(e=0;e<o.length;e++)if((n=r[o[e]])&&n.length)return n;return null};M.displayName="angular-translate/service: getFirstBrowserLanguage";var R=function(){var e=M()||"";return O[P]&&(e=O[P](e)),e};R.displayName="angular-translate/service: getLocale";var $=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},L=function(){return this.toString().replace(/^\s+|\s+$/g,"")},F=function(e){return angular.isString(e)?e.toLowerCase():e},U=function(e){if(e){for(var t,n=[],i=F(e),r=0,a=w.length;r<a;r++)n.push(F(w[r]));if((r=$(n,i))>-1)return w[r];if(o)for(var s in o)if(o.hasOwnProperty(s)){var u=!1,c=Object.prototype.hasOwnProperty.call(o,s)&&F(s)===F(e);if("*"===s.slice(-1)&&(u=F(s.slice(0,-1))===F(e.slice(0,s.length-1))),(c||u)&&(t=o[s],$(n,F(t))>-1))return t}var l=e.split("_");return l.length>1&&$(n,F(l[0]))>-1?l[0]:void 0}},B=function(e,t){if(!e&&!t)return A;if(e&&!t){if(angular.isString(e))return A[e]}else angular.isObject(A[e])||(A[e]={}),angular.extend(A[e],j(t));return this};this.translations=B,this.cloakClassName=function(e){return e?(S=e,this):S},this.nestedObjectDelimeter=function(e){return e?(k=e,this):k};var j=function(e,t,n,i){var r,o,a;for(r in t||(t=[]),n||(n={}),e)Object.prototype.hasOwnProperty.call(e,r)&&(a=e[r],angular.isObject(a)?j(a,t.concat(r),n,r):(o=t.length?""+t.join(k)+k+r:r,t.length&&r===i&&(n[""+t.join(k)]="@:"+o),n[o]=a));return n};j.displayName="flatObject",this.addInterpolation=function(e){return C.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return d=e,this},this.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},this.preferredLanguage=function(e){return e?(V(e),this):r};var V=function(e){return e&&(r=e),r};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(m=e,this):m},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return q(e),this};var q=function(e){return e?(angular.isString(e)?(s=!0,a=[e]):angular.isArray(e)&&(s=!1,a=e),angular.isString(r)&&$(a,r)<0&&a.push(r),this):s?a[0]:a};this.use=function(e){if(e){if(!A[e]&&!p)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return u=e,this}return u},this.resolveClientLocale=function(){return R()};var H=function(e){return e?(_=e,this):h?h+_:_};this.storageKey=H,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return p=e,g=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return l=e,this},this.storagePrefix=function(e){return e?(h=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return f=e,this},this.usePostCompiling=function(e){return E=!!e,this},this.forceAsyncReload=function(e){return T=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},P=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():R();return r=w.length&&U(t)||t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(w=e,t&&(o=t),this):w},this.useLoaderCache=function(e){return!1===e?y=void 0:!0===e?y=!0:void 0===e?y="$translationCache":e&&(y=e),this},this.directivePriority=function(e){return void 0===e?D:(D=e,this)},this.statefulFilter=function(e){return void 0===e?N:(N=e,this)},this.postProcess=function(e){return b=e||void 0,this},this.keepContent=function(e){return x=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,n,i){var o,h,P,O=t.get(d||"$translateDefaultInterpolation"),M=!1,F={},W={},G=function(e,t,n,s,c,f){!u&&r&&(u=r);var d=c&&c!==u?U(c)||c:u;if(c&&oe(c),angular.isArray(e)){return function(e){for(var r={},o=[],a=function(e){var o=i.defer(),a=function(t){r[e]=t,o.resolve([e,t])};return G(e,t,n,s,c,f).then(a,a),o.promise},u=0,l=e.length;u<l;u++)o.push(a(e[u]));return i.all(o).then(function(){return r})}(e)}var p=i.defer();e&&(e=L.apply(e));var g=function(){var e=W[d]||W[r];if(h=0,l&&!e){var t=o.get(_);if(e=W[t],a&&a.length){var n=$(a,t);h=0===n?1:0,$(a,r)<0&&a.push(r)}}return e}();if(g){var m=function(){c||(d=u),ne(e,t,n,s,d,f).then(p.resolve,p.reject)};m.displayName="promiseResolved",g.finally(m).catch(angular.noop)}else ne(e,t,n,s,d,f).then(p.resolve,p.reject);return p.promise},z=function(e){return m&&(e=[m,e].join(" ")),v&&(e=[e,v].join(" ")),e},K=function(e){u=e,l&&o.put(G.storageKey(),u),n.$emit("$translateChangeSuccess",{language:e}),O.setLocale(u);var t=function(e,t){F[t].setLocale(u)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(F,t),n.$emit("$translateChangeEnd",{language:e})},Q=function(e){if(!e)throw"No language key specified for loading.";var r=i.defer();n.$emit("$translateLoadingStart",{language:e}),M=!0;var o=y;"string"==typeof o&&(o=t.get(o));var a=angular.extend({},g,{key:e,$http:angular.extend({},{cache:o},g.$http)}),s=function(t){var i={};n.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,function(e){angular.extend(i,j(e))}):angular.extend(i,j(t)),M=!1,r.resolve({key:e,table:i}),n.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var u=function(e){n.$emit("$translateLoadingError",{language:e}),r.reject(e),n.$emit("$translateLoadingEnd",{language:e})};return u.displayName="onLoaderError",t.get(p)(a).then(s,u),r.promise};if(l&&(!(o=t.get(l)).get||!o.put))throw new Error("Couldn't use storage '"+l+"', missing get() or put() method!");if(C.length){var Y=function(e){var n=t.get(e);n.setLocale(r||u),F[n.getInterpolationIdentifier()]=n};Y.displayName="interpolationFactoryAdder",angular.forEach(C,Y)}var X=function(e,t,n,r,o){var a=i.defer(),s=function(i){if(Object.prototype.hasOwnProperty.call(i,t)&&null!==i[t]){r.setLocale(e);var s=i[t];if("@:"===s.substr(0,2))X(e,s.substr(2),n,r,o).then(a.resolve,a.reject);else{var c=r.interpolate(i[t],n,"service",o,t);c=re(t,i[t],c,n,e),a.resolve(c)}r.setLocale(u)}else a.reject()};return s.displayName="fallbackTranslationResolver",function(e){var t=i.defer();if(Object.prototype.hasOwnProperty.call(A,e))t.resolve(A[e]);else if(W[e]){var n=function(e){B(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",W[e].then(n,t.reject)}else t.reject();return t.promise}(e).then(s,a.reject),a.promise},J=function(e,t,n,i,r){var o,a=A[e];if(a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){if(i.setLocale(e),o=i.interpolate(a[t],n,"filter",r,t),o=re(t,a[t],o,n,e,r),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var s=o.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return J(e,s.substr(2),n,i,r)}else if("@:"===o.substr(0,2))return J(e,o.substr(2),n,i,r);i.setLocale(u)}return o},Z=function(e,n,i,r){return f?t.get(f)(e,u,n,i,r):e},ee=function(e,t,n,r,o,s){var u=i.defer();if(e<a.length){var c=a[e];X(c,t,n,r,s).then(function(e){u.resolve(e)},function(){return ee(e+1,t,n,r,o,s).then(u.resolve,u.reject)})}else if(o)u.resolve(o);else{var l=Z(t,n,o);f&&l?u.resolve(l):u.reject(z(t))}return u.promise},te=function(e,t,n,i,r){var o;if(e<a.length){var s=a[e];(o=J(s,t,n,i,r))||""===o||(o=te(e+1,t,n,i))}return o},ne=function(e,t,n,r,o,s){var u=i.defer(),c=o?A[o]:A,l=n?F[n]:O;if(c&&Object.prototype.hasOwnProperty.call(c,e)&&null!==c[e]){var d=c[e];if("@:"===d.substr(0,2))G(d.substr(2),t,n,r,o,s).then(u.resolve,u.reject);else{var p=l.interpolate(d,t,"service",s,e);p=re(e,d,p,t,o),u.resolve(p)}}else{var g;f&&!M&&(g=Z(e,t,r)),o&&a&&a.length?function(e,t,n,i,r){return ee(P>0?P:h,e,t,n,i,r)}(e,t,l,r,s).then(function(e){u.resolve(e)},function(e){u.reject(z(e))}):f&&!M&&g?r?u.resolve(r):u.resolve(g):r?u.resolve(r):u.reject(z(e))}return u.promise},ie=function(e,t,n,i,r){var o,s=i?A[i]:A,u=O;if(F&&Object.prototype.hasOwnProperty.call(F,n)&&(u=F[n]),s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){var c=s[e];"@:"===c.substr(0,2)?o=ie(c.substr(2),t,n,i,r):(o=u.interpolate(c,t,"filter",r,e),o=re(e,c,o,t,i,r))}else{var l;f&&!M&&(l=Z(e,t,r)),i&&a&&a.length?(h=0,o=function(e,t,n,i){return te(P>0?P:h,e,t,n,i)}(e,t,u,r)):o=f&&!M&&l?l:z(e)}return o},re=function(e,n,i,r,o,a){var s=b;return s&&("string"==typeof s&&(s=t.get(s)),s)?s(e,n,i,r,o,a):i},oe=function(e){A[e]||!p||W[e]||(W[e]=Q(e).then(function(e){return B(e.key,e.table),e}))};G.preferredLanguage=function(e){return e&&V(e),r},G.cloakClassName=function(){return S},G.nestedObjectDelimeter=function(){return k},G.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(q(e),p&&a&&a.length)for(var t=0,n=a.length;t<n;t++)W[a[t]]||(W[a[t]]=Q(a[t]));G.use(G.use())}return s?a[0]:a},G.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var t=$(a,e);t>-1&&(P=t)}else P=0},G.proposedLanguage=function(){return c},G.storage=function(){return o},G.negotiateLocale=U,G.use=function(e){if(!e)return u;var t=i.defer();t.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:e});var r=U(e);return w.length>0&&!r?i.reject(e):(r&&(e=r),c=e,!T&&A[e]||!p||W[e]?W[e]?W[e].then(function(e){return c===e.key&&K(e.key),t.resolve(e.key),e},function(e){return!u&&a&&a.length>0&&a[0]!==e?G.use(a[0]).then(t.resolve,t.reject):t.reject(e)}):(t.resolve(e),K(e)):(W[e]=Q(e).then(function(n){return B(n.key,n.table),t.resolve(n.key),c===e&&K(n.key),n},function(e){return n.$emit("$translateChangeError",{language:e}),t.reject(e),n.$emit("$translateChangeEnd",{language:e}),i.reject(e)}),W[e].finally(function(){!function(e){c===e&&(c=void 0),W[e]=void 0}(e)}).catch(angular.noop)),t.promise)},G.resolveClientLocale=function(){return R()},G.storageKey=function(){return H()},G.isPostCompilingEnabled=function(){return E},G.isForceAsyncReloadEnabled=function(){return T},G.isKeepContent=function(){return x},G.refresh=function(e){if(!p)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:e});var t=i.defer(),r={};function o(e){var t=Q(e);return W[e]=t,t.then(function(t){A[e]={},B(e,t.table),r[e]=!0},angular.noop),t}if(t.promise.then(function(){for(var e in A)A.hasOwnProperty(e)&&(e in r||delete A[e]);u&&K(u)},angular.noop).finally(function(){n.$emit("$translateRefreshEnd",{language:e})}),e)A[e]?o(e).then(t.resolve,t.reject):t.reject();else{var s=a&&a.slice()||[];u&&-1===s.indexOf(u)&&s.push(u),i.all(s.map(o)).then(t.resolve,t.reject)}return t.promise},G.instant=function(e,t,n,i,o){var s=i&&i!==u?U(i)||i:u;if(null===e||angular.isUndefined(e))return e;if(i&&oe(i),angular.isArray(e)){for(var c={},l=0,h=e.length;l<h;l++)c[e[l]]=G.instant(e[l],t,n,i,o);return c}if(angular.isString(e)&&e.length<1)return e;e&&(e=L.apply(e));var d,p,g=[];r&&g.push(r),s&&g.push(s),a&&a.length&&(g=g.concat(a));for(var y=0,b=g.length;y<b;y++){var w=g[y];if(A[w]&&void 0!==A[w][e]&&(d=ie(e,t,n,s,o)),void 0!==d)break}d||""===d||(m||v?d=z(e):(d=O.interpolate(e,t,"filter",o),f&&!M&&(p=Z(e,t,o)),f&&!M&&p&&(d=p)));return d},G.versionInfo=function(){return"2.18.1"},G.loaderCache=function(){return y},G.directivePriority=function(){return D},G.statefulFilter=function(){return N},G.isReady=function(){return I};var ae=i.defer();ae.promise.then(function(){I=!0}),G.onReady=function(e){var t=i.defer();return angular.isFunction(e)&&t.promise.then(e),I?t.resolve():ae.promise.then(t.resolve),t.promise},G.getAvailableLanguageKeys=function(){return w.length>0?w:null},G.getTranslationTable=function(e){return(e=e||G.use())&&A[e]?angular.copy(A[e]):null};var se=n.$on("$translateReady",function(){ae.resolve(),se(),se=null}),ue=n.$on("$translateChangeEnd",function(){ae.resolve(),ue(),ue=null});if(p){if(angular.equals(A,{})&&G.use()&&G.use(G.use()),a&&a.length)for(var ce=function(e){return B(e.key,e.table),n.$emit("$translateChangeEnd",{language:e.key}),e},le=0,he=a.length;le<he;le++){var fe=a[le];!T&&A[fe]||(W[fe]=Q(fe).then(ce))}}else n.$emit("$translateReady",{language:G.use()});return G}]}function n(e,t){"use strict";var n={};return n.setLocale=function(e){e},n.getInterpolationIdentifier=function(){return"default"},n.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},n.interpolate=function(n,i,r,o,a){var s;return i=i||{},i=t.sanitize(i,"params",o,r),angular.isNumber(n)?s=""+n:angular.isString(n)?(s=e(n)(i),s=t.sanitize(s,"text",o,r)):s="",s},n}function i(e,t,n,i,r){"use strict";var o=function(e){return angular.isString(e)?e.toLowerCase():e};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(a,s){var u=s.translateValues?s.translateValues:void 0,c=s.translateInterpolation?s.translateInterpolation:void 0,l=s.translateSanitizeStrategy?s.translateSanitizeStrategy:void 0,h=a[0].outerHTML.match(/translate-value-+/i),f="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",d="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(a,p,g){a.interpolateParams={},a.preText="",a.postText="",a.translateNamespace=function e(t){if(t.translateNamespace)return t.translateNamespace;if(t.$parent)return e(t.$parent)}(a);var m={},v=function(e){if(angular.isFunction(v._unwatchOld)&&(v._unwatchOld(),v._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var n=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(p.text()),i=n.match(f);if(angular.isArray(i)){a.preText=i[1],a.postText=i[3],m.translate=t(i[2])(a.$parent);var r=n.match(d);angular.isArray(r)&&r[2]&&r[2].length&&(v._unwatchOld=a.$watch(r[2],function(e){m.translate=e,C()}))}else m.translate=n||void 0}else m.translate=e;C()},y=function(e){g.$observe(e,function(t){m[e]=t,C()})};!function(e,t,n){if(t.translateValues&&angular.extend(e,i(t.translateValues)(a.$parent)),h)for(var r in n)Object.prototype.hasOwnProperty.call(t,r)&&"translateValue"===r.substr(0,14)&&"translateValues"!==r&&(e[o(r.substr(14,1))+r.substr(15)]=n[r])}(a.interpolateParams,g,s);var b=!0;for(var A in g.$observe("translate",function(e){void 0===e?v(""):""===e&&b||(m.translate=e,C()),b=!1}),g)g.hasOwnProperty(A)&&"translateAttr"===A.substr(0,13)&&A.length>13&&y(A);if(g.$observe("translateDefault",function(e){a.defaultText=e,C()}),l&&g.$observe("translateSanitizeStrategy",function(e){a.sanitizeStrategy=i(e)(a.$parent),C()}),u&&g.$observe("translateValues",function(e){e&&a.$parent.$watch(function(){angular.extend(a.interpolateParams,i(e)(a.$parent))})}),h){var w=function(e){g.$observe(e,function(t){var n=o(e.substr(14,1))+e.substr(15);a.interpolateParams[n]=t})};for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&"translateValue"===_.substr(0,14)&&"translateValues"!==_&&w(_)}var C=function(){for(var e in m)m.hasOwnProperty(e)&&void 0!==m[e]&&S(e,m[e],a,a.interpolateParams,a.defaultText,a.translateNamespace)},S=function(t,n,i,r,o,a){n?(a&&"."===n.charAt(0)&&(n=a+n),e(n,r,c,o,i.translateLanguage,i.sanitizeStrategy).then(function(e){E(e,i,!0,t)},function(e){E(e,i,!1,t)})):E(n,i,!1,t)},E=function(t,i,r,o){if(r||void 0!==i.defaultText&&(t=i.defaultText),"translate"===o){(r||!r&&!e.isKeepContent()&&void 0===g.translateKeepContent)&&p.empty().append(i.preText+t+i.postText);var a=e.isPostCompilingEnabled(),u=void 0!==s.translateCompile,c=u&&"false"!==s.translateCompile;(a&&!u||c)&&n(p.contents())(i)}else{var l=g.$attr[o];"data-"===l.substr(0,5)&&(l=l.substr(5)),l=l.substr(15),p.attr(l,t)}};(u||h||g.translateDefault)&&a.$watch("interpolateParams",C,!0),a.$on("translateLanguageChanged",C);var T=r.$on("$translateChangeSuccess",C);p.text().length?g.translate?v(g.translate):v(""):g.translate&&v(g.translate),C(),a.$on("$destroy",T)}}}}function r(e,t){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(n,i,r){var a,s,u,c={},l=function(){angular.forEach(a,function(t,o){t&&(c[o]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),e(t,s,r.translateInterpolation,void 0,n.translateLanguage,u).then(function(e){i.attr(o,e)},function(e){i.attr(o,e)}))}),angular.forEach(c,function(e,t){a[t]||(i.removeAttr(t),delete c[t])})};o(n,r.translateAttr,function(e){a=e},l),o(n,r.translateValues,function(e){s=e},l),o(n,r.translateSanitizeStrategy,function(e){u=e},l),r.translateValues&&n.$watch(r.translateValues,l,!0),n.$on("translateLanguageChanged",l);var h=t.$on("$translateChangeSuccess",l);l(),n.$on("$destroy",h)}}}function o(e,t,n,i){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,function(e){n(e),i()},!0),n(e.$eval(t)))}function a(e,t){"use strict";return{compile:function(n){var i=function(t){t.addClass(e.cloakClassName())};return i(n),function(n,r,o){var a=function(t){t.removeClass(e.cloakClassName())}.bind(this,r),s=i.bind(this,r);o.translateCloak&&o.translateCloak.length?(o.$observe("translateCloak",function(t){e(t).then(a,s)}),t.$on("$translateChangeSuccess",function(){e(o.translateCloak).then(a,s)})):e.onReady(a)}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=function e(t){if(t.translateNamespace)return t.translateNamespace;if(t.$parent)return e(t.$parent)}(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function c(e,t){"use strict";var n=function(n,i,r,o){if(!angular.isObject(i)){var a=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};i=e(i)(a)}return t.instant(n,i,r,o)};return t.statefulFilter()&&(n.$stateful=!0),n}function l(e){"use strict";return e("translations")}return e.$inject=["$translate"],t.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],i.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],r.$inject=["$translate","$rootScope"],a.$inject=["$translate","$rootScope"],c.$inject=["$parse","$translate"],l.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){"use strict";var e,t,n,i=null,r=!1,o=!1;(n={sanitize:function(e,t){return"text"===t&&(e=s(e)),e},escape:function(e,t){return"text"===t&&(e=a(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=c(e,s)),e},escapeParameters:function(e,t){return"params"===t&&(e=c(e,a)),e},sce:function(e,t,n){return"text"===t?e=u(e):"params"===t&&"filter"!==n&&(e=c(e,a)),e},sceParameters:function(e,t){return"params"===t&&(e=c(e,u)),e}}).escaped=n.escapeParameters,this.addStrategy=function(e,t){return n[e]=t,this},this.removeStrategy=function(e){return delete n[e],this},this.useStrategy=function(e){return r=!0,i=e,this},this.$get=["$injector","$log",function(a,s){var u,c={};return a.has("$sanitize")&&(e=a.get("$sanitize")),a.has("$sce")&&(t=a.get("$sce")),{useStrategy:(u=this,function(e){u.useStrategy(e)}),sanitize:function(e,t,u,l){if(i||r||o||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0),u||null===u||(u=i),!u)return e;l||(l="service");var h=angular.isArray(u)?u:[u];return function(e,t,i,r){return angular.forEach(r,function(r){if(angular.isFunction(r))e=r(e,t,i);else if(angular.isFunction(n[r]))e=n[r](e,t,i);else{if(!angular.isString(n[r]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'");if(!c[n[r]])try{c[n[r]]=a.get(n[r])}catch(e){throw c[n[r]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'")}e=c[n[r]](e,t,i)}}),e}(e,t,l,h)}}}];var a=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},s=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},u=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return t.trustAsHtml(e)},c=function(e,t,n){if(angular.isDate(e))return e;if(angular.isObject(e)){var i=angular.isArray(e)?[]:{};if(n){if(n.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(e),angular.forEach(e,function(e,r){angular.isFunction(e)||(i[r]=c(e,t,n))}),n.splice(-1,1),i}return angular.isNumber(e)?e:!0===e||!1===e?e:angular.isUndefined(e)||null===e?e:t(e)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",t),t.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",i),i.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",r),r.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",a),a.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",u),u.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",c),c.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",l),l.displayName="$translationCache","pascalprecht.translate"}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof module&&module.exports?module.exports=t():t()}(0,function(){function e(e,t){"use strict";return function(n){if(!(n&&(angular.isArray(n.files)||angular.isString(n.prefix)&&angular.isString(n.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");n.files||(n.files=[{prefix:n.prefix,suffix:n.suffix}]);for(var i=function(i){if(!i||!angular.isString(i.prefix)||!angular.isString(i.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var r=[i.prefix,n.key,i.suffix].join("");return angular.isObject(n.fileMap)&&n.fileMap[r]&&(r=n.fileMap[r]),t(angular.extend({url:r,method:"GET"},n.$http)).then(function(e){return e.data},function(){return e.reject(n.key)})},r=[],o=n.files.length,a=0;a<o;a++)r.push(i({prefix:n.files[a].prefix,key:n.key,suffix:n.files[a].suffix}));return e.all(r).then(function(e){for(var t=e.length,n={},i=0;i<t;i++)for(var r in e[i])n[r]=e[i][r];return n})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),function(e,t){"use strict";function n(e,n,i){var r=i.baseHref(),o=e[0];return function(e,i,a){o.cookie=function(e,i,o){var a,s;s=(o=o||{}).expires,a=t.isDefined(o.path)?o.path:r,t.isUndefined(i)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",i=""),t.isString(s)&&(s=new Date(s));var u=encodeURIComponent(e)+"="+encodeURIComponent(i);u+=a?";path="+a:"",u+=o.domain?";domain="+o.domain:"",u+=s?";expires="+s.toUTCString():"",u+=o.secure?";secure":"";var c=(u+=o.samesite?";samesite="+o.samesite:"").length+1;return c>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),u}(e,i,a)}}t.module("ngCookies",["ng"]).info({angularVersion:"1.7.8"}).provider("$cookies",[function(){var e=this.defaults={};function n(n){return n?t.extend({},e,n):e}this.$get=["$$cookieReader","$$cookieWriter",function(e,i){return{get:function(t){return e()[t]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return e()},put:function(e,t,r){i(e,t,n(r))},putObject:function(e,n,i){this.put(e,t.toJson(n),i)},remove:function(e,t){i(e,void 0,n(t))}}}]}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof module&&module.exports?module.exports=t():t()}(0,function(){function e(e){"use strict";var t;if(1===angular.version.major&&angular.version.minor>=4){var n=e.get("$cookies");t={get:function(e){return n.get(e)},put:function(e,t){n.put(e,t)}}}else{var i=e.get("$cookieStore");t={get:function(e){return i.get(e)},put:function(e,t){i.put(e,t)}}}return{get:function(e){return t.get(e)},set:function(e,n){t.put(e,n)},put:function(e,n){t.put(e,n)}}}return e.$inject=["$injector"],angular.module("pascalprecht.translate").factory("$translateCookieStorage",e),e.displayName="$translateCookieStorage","pascalprecht.translate"}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).firebase=t()}(this,function(){"use strict";!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))};p.prototype.append=function(e,t){e=h(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=f(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),d(e)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},p.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),d(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},b.call(A.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];_.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=A,e.Response=_,e.fetch=function(e,t){return new Promise(function(n,r){var o=new A(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new _(r,i))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function v(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(i&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&i&&s(e))this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,n,i=g(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function A(e,t){var n,i,r=(t=t||{}).body;if(e instanceof A){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(n=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(i)?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var i=setTimeout;function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(n){return void u(t.promise,n)}s(t.promise,i)}else(1===e._state?s:u)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void l((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}var i,r}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},o.prototype.finally=n,o.all=function(e){return new o(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){o(e,t)},n)}i[e]=a,0==--r&&t(i)}catch(a){n(a)}}for(var a=0;a<i.length;a++)o(a,i[a])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){i(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"Promise"in h?h.Promise.prototype.finally||(h.Promise.prototype.finally=n):h.Promise=o;var f,d,p,g=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},m=function(e,t,n){if(g(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},v=function(e){try{return!!e()}catch(e){return!0}},y={}.toString,b=function(e){return y.call(e).slice(8,-1)},A="".split,w=v(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==b(e)?A.call(e,""):Object(e)}:Object,_=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},C=function(e){return Object(_(e))},S=Math.ceil,E=Math.floor,T=function(e){return isNaN(e=+e)?0:(0<e?E:S)(e)},k=Math.min,I=function(e){return 0<e?k(T(e),9007199254740991):0},x=function(e){return"object"==typeof e?null!==e:"function"==typeof e},D=Array.isArray||function(e){return"Array"==b(e)},N="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")(),P=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),O=N.document,M=x(O)&&x(O.createElement),R=function(e){return M?O.createElement(e):{}},$=!P&&!v(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a}),L=function(e){if(!x(e))throw TypeError(String(e)+" is not an object");return e},F=function(e,t){if(!x(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!x(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!x(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!x(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},U=Object.defineProperty,B={f:P?U:function(e,t,n){if(L(e),t=F(t,!0),L(n),$)try{return U(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},j=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},V=P?function(e,t,n){return B.f(e,t,j(1,n))}:function(e,t,n){return e[t]=n,e},q=function(e,t){try{V(N,e,t)}catch(n){N[e]=t}return t},H=!1,W=t(function(e){var t="__core-js_shared__",n=N[t]||q(t,{});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.0.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),G=0,z=Math.random(),K=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++G+z).toString(36))},Q=!v(function(){return!String(Symbol())}),Y=W("wks"),X=N.Symbol,J=function(e){return Y[e]||(Y[e]=Q&&X[e]||(Q?X:K)("Symbol."+e))},Z=J("species"),ee=function(e,t){var n;return D(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!D(n.prototype)?x(n)&&null===(n=n[Z])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},te=function(e,t){var n=1==e,i=2==e,r=3==e,o=4==e,a=6==e,s=5==e||a,u=t||ee;return function(t,c,l){for(var h,f,d=C(t),p=w(d),g=m(c,l,3),v=I(p.length),y=0,b=n?u(t,v):i?u(t,0):void 0;y<v;y++)if((s||y in p)&&(f=g(h=p[y],y,d),e))if(n)b[y]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:b.push(h)}else if(o)return!1;return a?-1:r||o?o:b}},ne={}.propertyIsEnumerable,ie=Object.getOwnPropertyDescriptor,re={f:ie&&!ne.call({1:2},1)?function(e){var t=ie(this,e);return!!t&&t.enumerable}:ne},oe=function(e){return w(_(e))},ae={}.hasOwnProperty,se=function(e,t){return ae.call(e,t)},ue=Object.getOwnPropertyDescriptor,ce={f:P?ue:function(e,t){if(e=oe(e),t=F(t,!0),$)try{return ue(e,t)}catch(e){}if(se(e,t))return j(!re.f.call(e,t),e[t])}},le=W("native-function-to-string",Function.toString),he=N.WeakMap,fe="function"==typeof he&&/native code/.test(le.call(he)),de=W("keys"),pe=function(e){return de[e]||(de[e]=K(e))},ge={},me=N.WeakMap;if(fe){var ve=new me,ye=ve.get,be=ve.has,Ae=ve.set;f=function(e,t){return Ae.call(ve,e,t),t},d=function(e){return ye.call(ve,e)||{}},p=function(e){return be.call(ve,e)}}else{var we=pe("state");ge[we]=!0,f=function(e,t){return V(e,we,t),t},d=function(e){return se(e,we)?e[we]:{}},p=function(e){return se(e,we)}}var _e={set:f,get:d,has:p,enforce:function(e){return p(e)?d(e):f(e,{})},getterFor:function(e){return function(t){var n;if(!x(t)||(n=d(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ce=t(function(e){var t=_e.get,n=_e.enforce,i=String(le).split("toString");W("inspectSource",function(e){return le.call(e)}),(e.exports=function(e,t,r,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof t||se(r,"name")||V(r,"name",t),n(r).source=i.join("string"==typeof t?t:"")),e!==N?(a?!u&&e[t]&&(s=!0):delete e[t],s?e[t]=r:V(e,t,r)):s?e[t]=r:q(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||le.call(this)})}),Se=Math.max,Ee=Math.min,Te=(!1,function(e,t,n){var i,r,o=oe(e),a=I(o.length),s=(i=a,(r=T(n))<0?Se(r+i,0):Ee(r,i));for(0;s<a;s++)if(s in o&&o[s]===t)return s||0;return-1}),ke=function(e,t){var n,i=oe(e),r=0,o=[];for(n in i)!se(ge,n)&&se(i,n)&&o.push(n);for(;t.length>r;)se(i,n=t[r++])&&(~Te(o,n)||o.push(n));return o},Ie=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xe=Ie.concat("length","prototype"),De={f:Object.getOwnPropertyNames||function(e){return ke(e,xe)}},Ne={f:Object.getOwnPropertySymbols},Pe=N.Reflect,Oe=Pe&&Pe.ownKeys||function(e){var t=De.f(L(e)),n=Ne.f;return n?t.concat(n(e)):t},Me=function(e,t){for(var n=Oe(t),i=B.f,r=ce.f,o=0;o<n.length;o++){var a=n[o];se(e,a)||i(e,a,r(t,a))}},Re=/#|\.prototype\./,$e=function(e,t){var n=Fe[Le(e)];return n==Be||n!=Ue&&("function"==typeof t?v(t):!!t)},Le=$e.normalize=function(e){return String(e).replace(Re,".").toLowerCase()},Fe=$e.data={},Ue=$e.NATIVE="N",Be=$e.POLYFILL="P",je=$e,Ve=ce.f,qe=function(e,t){var n,i,r,o,a,s=e.target,u=e.global,c=e.stat;if(n=u?N:c?N[s]||q(s,{}):(N[s]||{}).prototype)for(i in t){if(o=t[i],r=e.noTargetGet?(a=Ve(n,i))&&a.value:n[i],!je(u?i:s+(c?".":"#")+i,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;Me(o,r)}(e.sham||r&&r.sham)&&V(o,"sham",!0),Ce(n,i,o,e)}},He=Object.keys||function(e){return ke(e,Ie)},We=P?Object.defineProperties:function(e,t){L(e);for(var n,i=He(t),r=i.length,o=0;o<r;)B.f(e,n=i[o++],t[n]);return e},Ge=N.document,ze=Ge&&Ge.documentElement,Ke=pe("IE_PROTO"),Qe="prototype",Ye=function(){},Xe=function(){var e,t=R("iframe"),n=Ie.length;for(t.style.display="none",ze.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Xe=e.F;n--;)delete Xe[Qe][Ie[n]];return Xe()},Je=Object.create||function(e,t){var n;return null!==e?(Ye[Qe]=L(e),n=new Ye,Ye[Qe]=null,n[Ke]=e):n=Xe(),void 0===t?n:We(n,t)};ge[Ke]=!0;var Ze=J("unscopables"),et=Array.prototype;null==et[Ze]&&V(et,Ze,Je(null));var tt=function(e){et[Ze][e]=!0},nt=te(5),it="find",rt=!0;it in[]&&Array(1)[it](function(){rt=!1}),qe({target:"Array",proto:!0,forced:rt},{find:function(e){return nt(this,e,1<arguments.length?arguments[1]:void 0)}}),tt(it);var ot=Function.call,at=function(e,t,n){return m(ot,N[e].prototype[t],n)},st=(at("Array","find"),te(6)),ut="findIndex",ct=!0;ut in[]&&Array(1)[ut](function(){ct=!1}),qe({target:"Array",proto:!0,forced:ct},{findIndex:function(e){return st(this,e,1<arguments.length?arguments[1]:void 0)}}),tt(ut),at("Array","findIndex");var lt,ht,ft,dt=!v(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),pt=pe("IE_PROTO"),gt=Object.prototype,mt=dt?Object.getPrototypeOf:function(e){return e=C(e),se(e,pt)?e[pt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?gt:null},vt=J("iterator"),yt=!1;[].keys&&("next"in(ft=[].keys())?(ht=mt(mt(ft)))!==Object.prototype&&(lt=ht):yt=!0),null==lt&&(lt={}),se(lt,vt)||V(lt,vt,function(){return this});var bt={IteratorPrototype:lt,BUGGY_SAFARI_ITERATORS:yt},At=B.f,wt=J("toStringTag"),_t=function(e,t,n){e&&!se(e=n?e:e.prototype,wt)&&At(e,wt,{configurable:!0,value:t})},Ct={},St=bt.IteratorPrototype,Et=function(){return this},Tt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,i){return function(e,t){if(L(e),!x(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n,i),t?e.call(n,i):n.__proto__=i,n}}():void 0),kt=J("iterator"),It=bt.IteratorPrototype,xt=bt.BUGGY_SAFARI_ITERATORS,Dt="values",Nt="entries",Pt=function(){return this},Ot=function(e,t,n,i,r,o,a){var s,u,c;u=i,c=t+" Iterator",(s=n).prototype=Je(St,{next:j(1,u)}),_t(s,c,!1),Ct[c]=Et;var l,h,f,d=function(e){if(e===r&&y)return y;if(!xt&&e in m)return m[e];switch(e){case"keys":case Dt:case Nt:return function(){return new n(this,e)}}return function(){return new n(this)}},p=t+" Iterator",g=!1,m=e.prototype,v=m[kt]||m["@@iterator"]||r&&m[r],y=!xt&&v||d(r),b="Array"==t&&m.entries||v;if(b&&(l=mt(b.call(new e)),It!==Object.prototype&&l.next&&(mt(l)!==It&&(Tt?Tt(l,It):"function"!=typeof l[kt]&&V(l,kt,Pt)),_t(l,p,!0))),r==Dt&&v&&v.name!==Dt&&(g=!0,y=function(){return v.call(this)}),m[kt]!==y&&V(m,kt,y),Ct[t]=y,r)if(h={values:d(Dt),keys:o?y:d("keys"),entries:d(Nt)},a)for(f in h)!xt&&!g&&f in m||Ce(m,f,h[f]);else qe({target:t,proto:!0,forced:xt||g},h);return h},Mt="String Iterator",Rt=_e.set,$t=_e.getterFor(Mt);Ot(String,"String",function(e){Rt(this,{type:Mt,string:String(e),index:0})},function(){var e,t,n,i,r,o,a,s,u=$t(this),c=u.string,l=u.index;return l>=c.length?{value:void 0,done:!0}:(t=l,n=!0,o=String(_(c)),a=T(t),s=o.length,e=a<0||s<=a?n?"":void 0:(i=o.charCodeAt(a))<55296||56319<i||a+1===s||(r=o.charCodeAt(a+1))<56320||57343<r?n?o.charAt(a):i:n?o.slice(a,a+2):r-56320+(i-55296<<10)+65536,u.index+=e.length,{value:e,done:!1})});var Lt=J("iterator"),Ft=!1;try{var Ut=0;({next:function(){return{done:!!Ut++}},return:function(){Ft=!0}})[Lt]=function(){return this}}catch(fo){}var Bt=function(e,t){if(!t&&!Ft)return!1;var n=!1;try{var i={};i[Lt]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},jt=function(e,t,n,i){try{return i?t(L(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&L(r.call(e)),t}},Vt=J("iterator"),qt=Array.prototype,Ht=function(e){return void 0!==e&&(Ct.Array===e||qt[Vt]===e)},Wt=function(e,t,n){var i=F(t);i in e?B.f(e,i,j(0,n)):e[i]=n},Gt=J("toStringTag"),zt="Arguments"==b(function(){return arguments}()),Kt=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Gt))?n:zt?b(t):"Object"==(i=b(t))&&"function"==typeof t.callee?"Arguments":i},Qt=J("iterator"),Yt=function(e){if(null!=e)return e[Qt]||e["@@iterator"]||Ct[Kt(e)]},Xt=!Bt(function(e){});qe({target:"Array",stat:!0,forced:Xt},{from:function(e){var t,n,i,r,o=C(e),a="function"==typeof this?this:Array,s=arguments.length,u=1<s?arguments[1]:void 0,c=void 0!==u,l=0,h=Yt(o);if(c&&(u=m(u,2<s?arguments[2]:void 0,2)),null==h||a==Array&&Ht(h))for(n=new a(t=I(o.length));l<t;l++)Wt(n,l,c?u(o[l],l):o[l]);else for(r=h.call(o),n=new a;!(i=r.next()).done;l++)Wt(n,l,c?jt(r,u,[i.value,l],!0):i.value);return n.length=l,n}});var Jt=N,Zt=(Jt.Array.from,Object.assign),en=!Zt||v(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=Zt({},e)[n]||He(Zt({},t)).join("")!=i})?function(e,t){for(var n=C(e),i=arguments.length,r=1,o=Ne.f,a=re.f;r<i;)for(var s,u=w(arguments[r++]),c=o?He(u).concat(o(u)):He(u),l=c.length,h=0;h<l;)a.call(u,s=c[h++])&&(n[s]=u[s]);return n}:Zt;qe({target:"Object",stat:!0,forced:Object.assign!==en},{assign:en}),Jt.Object.assign;var tn=re.f,nn=function(e,t){for(var n,i=oe(e),r=He(i),o=r.length,a=0,s=[];a<o;)tn.call(i,n=r[a++])&&s.push(t?[n,i[n]]:i[n]);return s};qe({target:"Object",stat:!0},{entries:function(e){return nn(e,!0)}}),Jt.Object.entries,qe({target:"Object",stat:!0},{values:function(e){return nn(e)}}),Jt.Object.values;var rn=J("match"),on=J("match"),an="startsWith",sn=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[on]=!1,"/./"[e](t)}catch(e){}}return!1}(an),un=""[an];qe({target:"String",proto:!0,forced:!sn},{startsWith:function(e){var t=function(e,t,n){if(x(i=t)&&(void 0!==(r=i[rn])?r:"RegExp"==b(i)))throw TypeError("String.prototype."+n+" doesn't accept regex");var i,r;return String(_(e))}(this,e,an),n=I(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),i=String(e);return un?un.call(t,i,n):t.slice(n,n+i.length)===i}}),at("String","startsWith"),qe({target:"String",proto:!0},{repeat:"".repeat||function(e){var t=String(_(this)),n="",i=T(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}}),at("String","repeat");var cn=J("species"),ln=J("isConcatSpreadable"),hn=9007199254740991,fn="Maximum allowed index exceeded",dn=!v(function(){var e=[];return e[ln]=!1,e.concat()[0]!==e}),pn=("concat",!v(function(){var e=[];return(e.constructor={})[cn]=function(){return{foo:1}},1!==e.concat(Boolean).foo})),gn=function(e){if(!x(e))return!1;var t=e[ln];return void 0!==t?!!t:D(e)};qe({target:"Array",proto:!0,forced:!dn||!pn},{concat:function(e){var t,n,i,r,o,a=C(this),s=ee(a,0),u=0;for(t=-1,i=arguments.length;t<i;t++)if(o=-1===t?a:arguments[t],gn(o)){if(r=I(o.length),hn<u+r)throw TypeError(fn);for(n=0;n<r;n++,u++)n in o&&Wt(s,u,o[n])}else{if(hn<=u)throw TypeError(fn);Wt(s,u++,o)}return s.length=u,s}});var mn={};mn[J("toStringTag")]="z";var vn="[object z]"!==String(mn)?function(){return"[object "+Kt(this)+"]"}:mn.toString,yn=Object.prototype;vn!==yn.toString&&Ce(yn,"toString",vn,{unsafe:!0});var bn={f:J},An=B.f,wn=function(e){var t=Jt.Symbol||(Jt.Symbol={});se(t,e)||An(t,e,{value:bn.f(e)})},_n=De.f,Cn={}.toString,Sn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],En={f:function(e){return Sn&&"[object Window]"==Cn.call(e)?function(e){try{return _n(e)}catch(e){return Sn.slice()}}(e):_n(oe(e))}},Tn=pe("hidden"),kn="Symbol",In=_e.set,xn=_e.getterFor(kn),Dn=ce.f,Nn=B.f,Pn=En.f,On=N.Symbol,Mn=N.JSON,Rn=Mn&&Mn.stringify,$n="prototype",Ln=J("toPrimitive"),Fn=re.f,Un=W("symbol-registry"),Bn=W("symbols"),jn=W("op-symbols"),Vn=W("wks"),qn=Object[$n],Hn=N.QObject,Wn=!Hn||!Hn[$n]||!Hn[$n].findChild,Gn=P&&v(function(){return 7!=Je(Nn({},"a",{get:function(){return Nn(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=Dn(qn,t);i&&delete qn[t],Nn(e,t,n),i&&e!==qn&&Nn(qn,t,i)}:Nn,zn=function(e,t){var n=Bn[e]=Je(On[$n]);return In(n,{type:kn,tag:e,description:t}),P||(n.description=t),n},Kn=Q&&"symbol"==typeof On.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof On},Qn=function(e,t,n){return e===qn&&Qn(jn,t,n),L(e),t=F(t,!0),L(n),se(Bn,t)?(n.enumerable?(se(e,Tn)&&e[Tn][t]&&(e[Tn][t]=!1),n=Je(n,{enumerable:j(0,!1)})):(se(e,Tn)||Nn(e,Tn,j(1,{})),e[Tn][t]=!0),Gn(e,t,n)):Nn(e,t,n)},Yn=function(e,t){L(e);for(var n,i=function(e){var t=He(e),n=Ne.f;if(n)for(var i,r=n(e),o=re.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}(t=oe(t)),r=0,o=i.length;r<o;)Qn(e,n=i[r++],t[n]);return e},Xn=function(e){var t=Fn.call(this,e=F(e,!0));return!(this===qn&&se(Bn,e)&&!se(jn,e))&&(!(t||!se(this,e)||!se(Bn,e)||se(this,Tn)&&this[Tn][e])||t)},Jn=function(e,t){if(e=oe(e),t=F(t,!0),e!==qn||!se(Bn,t)||se(jn,t)){var n=Dn(e,t);return!n||!se(Bn,t)||se(e,Tn)&&e[Tn][t]||(n.enumerable=!0),n}},Zn=function(e){for(var t,n=Pn(oe(e)),i=[],r=0;n.length>r;)se(Bn,t=n[r++])||se(ge,t)||i.push(t);return i},ei=function(e){for(var t,n=e===qn,i=Pn(n?jn:oe(e)),r=[],o=0;i.length>o;)!se(Bn,t=i[o++])||n&&!se(qn,t)||r.push(Bn[t]);return r};Q||(Ce((On=function(){if(this instanceof On)throw TypeError("Symbol is not a constructor");var e=void 0===arguments[0]?void 0:String(arguments[0]),t=K(e),n=function(e){this===qn&&n.call(jn,e),se(this,Tn)&&se(this[Tn],t)&&(this[Tn][t]=!1),Gn(this,t,j(1,e))};return P&&Wn&&Gn(qn,t,{configurable:!0,set:n}),zn(t,e)})[$n],"toString",function(){return xn(this).tag}),re.f=Xn,B.f=Qn,ce.f=Jn,De.f=En.f=Zn,Ne.f=ei,P&&(Nn(On[$n],"description",{configurable:!0,get:function(){return xn(this).description}}),Ce(qn,"propertyIsEnumerable",Xn,{unsafe:!0})),bn.f=function(e){return zn(J(e),e)}),qe({global:!0,wrap:!0,forced:!Q,sham:!Q},{Symbol:On});for(var ti=He(Vn),ni=0;ti.length>ni;)wn(ti[ni++]);qe({target:kn,stat:!0,forced:!Q},{for:function(e){return se(Un,e+="")?Un[e]:Un[e]=On(e)},keyFor:function(e){if(!Kn(e))throw TypeError(e+" is not a symbol");for(var t in Un)if(Un[t]===e)return t},useSetter:function(){Wn=!0},useSimple:function(){Wn=!1}}),qe({target:"Object",stat:!0,forced:!Q,sham:!P},{create:function(e,t){return void 0===t?Je(e):Yn(Je(e),t)},defineProperty:Qn,defineProperties:Yn,getOwnPropertyDescriptor:Jn}),qe({target:"Object",stat:!0,forced:!Q},{getOwnPropertyNames:Zn,getOwnPropertySymbols:ei}),Mn&&qe({target:"JSON",stat:!0,forced:!Q||v(function(){var e=On();return"[null]"!=Rn([e])||"{}"!=Rn({a:e})||"{}"!=Rn(Object(e))})},{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(x(t)||void 0!==e)&&!Kn(e))return D(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Kn(t))return t}),i[1]=t,Rn.apply(Mn,i)}}),On[$n][Ln]||V(On[$n],Ln,On[$n].valueOf),_t(On,kn),ge[Tn]=!0,wn("asyncIterator");var ii=B.f,ri=N.Symbol;if(P&&"function"==typeof ri&&(!("description"in ri.prototype)||void 0!==ri().description)){var oi={},ai=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof ai?new ri(e):void 0===e?ri():ri(e);return""===e&&(oi[t]=!0),t};Me(ai,ri);var si=ai.prototype=ri.prototype;si.constructor=ai;var ui=si.toString,ci="Symbol(test)"==String(ri("test")),li=/^Symbol\((.*)\)[^)]+$/;ii(si,"description",{configurable:!0,get:function(){var e=x(this)?this.valueOf():this,t=ui.call(e);if(se(oi,e))return"";var n=ci?t.slice(7,-1):t.replace(li,"$1");return""===n?void 0:n}}),qe({global:!0,forced:!0},{Symbol:ai})}wn("hasInstance"),wn("isConcatSpreadable"),wn("iterator"),wn("match"),wn("replace"),wn("search"),wn("species"),wn("split"),wn("toPrimitive"),wn("toStringTag"),wn("unscopables"),_t(Math,"Math",!0),_t(N.JSON,"JSON",!0),Jt.Symbol,wn("dispose"),wn("observable"),wn("patternMatch");var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},fi="Array Iterator",di=_e.set,pi=_e.getterFor(fi),gi=Ot(Array,"Array",function(e,t){di(this,{type:fi,target:oe(e),index:0,kind:t})},function(){var e=pi(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values");Ct.Arguments=Ct.Array,tt("keys"),tt("values"),tt("entries");var mi=J("iterator"),vi=J("toStringTag"),yi=gi.values;for(var bi in hi){var Ai=N[bi],wi=Ai&&Ai.prototype;if(wi){if(wi[mi]!==yi)try{V(wi,mi,yi)}catch(fo){wi[mi]=yi}if(wi[vi]||V(wi,vi,bi),hi[bi])for(var _i in gi)if(wi[_i]!==gi[_i])try{V(wi,_i,gi[_i])}catch(fo){wi[_i]=gi[_i]}}}bn.f("iterator");var Ci=!v(function(){return Object.isExtensible(Object.preventExtensions({}))}),Si=t(function(e){var t=K("meta"),n=B.f,i=0,r=Object.isExtensible||function(){return!0},o=function(e){n(e,t,{value:{objectID:"O"+ ++i,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!x(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!se(e,t)){if(!r(e))return"F";if(!n)return"E";o(e)}return e[t].objectID},getWeakData:function(e,n){if(!se(e,t)){if(!r(e))return!0;if(!n)return!1;o(e)}return e[t].weakData},onFreeze:function(e){return Ci&&a.REQUIRED&&r(e)&&!se(e,t)&&o(e),e}};ge[t]=!0}),Ei=(Si.REQUIRED,Si.fastKey,Si.getWeakData,Si.onFreeze,t(function(e){var t={};(e.exports=function(e,n,i,r,o){var a,s,u,c,l,h=m(n,i,r?2:1);if(o)a=e;else{if("function"!=typeof(s=Yt(e)))throw TypeError("Target is not iterable");if(Ht(s)){for(u=0,c=I(e.length);u<c;u++)if((r?h(L(l=e[u])[0],l[1]):h(e[u]))===t)return t;return}a=s.call(e)}for(;!(l=a.next()).done;)if(jt(a,h,l.value,r)===t)return t}).BREAK=t})),Ti=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},ki=function(e,t,n,i,r){var o=N[e],a=o&&o.prototype,s=o,u=i?"set":"add",c={},l=function(e){var t=a[e];Ce(a,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(r&&!x(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return r&&!x(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(r&&!x(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(je(e,"function"!=typeof o||!(r||a.forEach&&!v(function(){(new o).entries().next()}))))s=n.getConstructor(t,e,i,u),Si.REQUIRED=!0;else if(je(e,!0)){var h=new s,f=h[u](r?{}:-0,1)!=h,d=v(function(){h.has(1)}),p=Bt(function(e){new o(e)}),g=!r&&v(function(){for(var e=new o,t=5;t--;)e[u](t,t);return!e.has(-0)});p||(((s=t(function(t,n){Ti(t,s,e);var r,a,c,l,h=(r=new o,a=s,(l=t.constructor)!==a&&"function"==typeof l&&(c=l.prototype)!==a.prototype&&x(c)&&Tt&&Tt(r,c),r);return null!=n&&Ei(n,h[u],h,i),h})).prototype=a).constructor=s),(d||g)&&(l("delete"),l("has"),i&&l("get")),(g||f)&&l(u),r&&a.clear&&delete a.clear}return c[e]=s,qe({global:!0,forced:s!=o},c),_t(s,e),r||n.setStrong(s,e,i),s},Ii=function(e,t,n){for(var i in t)Ce(e,i,t[i],n);return e},xi=function(e){return"function"==typeof e?e:void 0},Di=function(e,t){return arguments.length<2?xi(Jt[e])||xi(N[e]):Jt[e]&&Jt[e][t]||N[e]&&N[e][t]},Ni=J("species"),Pi=B.f,Oi=Si.fastKey,Mi=_e.set,Ri=_e.getterFor,$i={getConstructor:function(e,t,n,i){var r=e(function(e,o){Ti(e,r,t),Mi(e,{type:t,index:Je(null),first:void 0,last:void 0,size:0}),P||(e.size=0),null!=o&&Ei(o,e[i],e,n)}),o=Ri(t),a=function(e,t,n){var i,r,a=o(e),u=s(e,t);return u?u.value=n:(a.last=u={index:r=Oi(t,!0),key:t,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=u),i&&(i.next=u),P?a.size++:e.size++,"F"!==r&&(a.index[r]=u)),e},s=function(e,t){var n,i=o(e),r=Oi(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return Ii(r.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,P?e.size=0:this.size=0},delete:function(e){var t=o(this),n=s(this,e);if(n){var i=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),t.first==n&&(t.first=i),t.last==n&&(t.last=r),P?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=o(this),i=m(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Ii(r.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),P&&Pi(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(e,t,n){var i,r,o=t+" Iterator",a=Ri(t),s=Ri(o);Ot(e,t,function(e,t){Mi(this,{type:o,target:e,state:a(e),kind:t,last:void 0})},function(){for(var e=s(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}},n?"entries":"values",!n,!0),i=Di(t),r=B.f,P&&i&&!i[Ni]&&r(i,Ni,{configurable:!0,get:function(){return this}})}},Li=(ki("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},$i,!0),Jt.Map,function(e){var t,n,i,r,o=arguments[1];return g(this),(t=void 0!==o)&&g(o),null==e?new this:(n=[],t?(i=0,r=m(o,arguments[2],2),Ei(e,function(e){n.push(r(e,i++))})):Ei(e,n.push,n),new this(n))});qe({target:"Map",stat:!0},{from:Li});var Fi=function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)};qe({target:"Map",stat:!0},{of:Fi});var Ui=function(){for(var e=L(this),t=g(e.delete),n=!0,i=0,r=arguments.length;i<r;i++)n=n&&t.call(e,arguments[i]);return!!n};qe({target:"Map",proto:!0,real:!0,forced:H},{deleteAll:function(){return Ui.apply(this,arguments)}});var Bi=function(e){return Map.prototype.entries.call(e)};qe({target:"Map",proto:!0,real:!0,forced:H},{every:function(e){for(var t,n,i=L(this),r=Bi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=r.next()).done;)if(!o((n=t.value)[1],n[0],i))return!1;return!0}});var ji=J("species"),Vi=function(e,t){var n,i=L(e).constructor;return void 0===i||null==(n=L(i)[ji])?t:g(n)};qe({target:"Map",proto:!0,real:!0,forced:H},{filter:function(e){for(var t,n,i,r,o=L(this),a=Bi(o),s=m(e,1<arguments.length?arguments[1]:void 0,3),u=new(Vi(o,Di("Map"))),c=g(u.set);!(t=a.next()).done;)s(r=(n=t.value)[1],i=n[0],o)&&c.call(u,i,r);return u}}),qe({target:"Map",proto:!0,real:!0,forced:H},{find:function(e){for(var t,n,i,r=L(this),o=Bi(r),a=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=o.next()).done;)if(a(i=(n=t.value)[1],n[0],r))return i}}),qe({target:"Map",proto:!0,real:!0,forced:H},{findKey:function(e){for(var t,n,i,r=L(this),o=Bi(r),a=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=o.next()).done;)if(a((n=t.value)[1],i=n[0],r))return i}}),qe({target:"Map",stat:!0,forced:H},{groupBy:function(e,t){var n=new this;g(t);var i=g(n.has),r=g(n.get),o=g(n.set);return Ei(e,function(e){var a=t(e);i.call(n,a)?r.call(n,a).push(e):o.call(n,a,[e])}),n}}),qe({target:"Map",proto:!0,real:!0,forced:H},{includes:function(e){for(var t,n,i,r=L(this),o=Bi(r);!(t=o.next()).done;)if((n=t.value[1])===(i=e)||n!=n&&i!=i)return!0;return!1}}),qe({target:"Map",stat:!0,forced:H},{keyBy:function(e,t){var n=new this;g(t);var i=g(n.set);return Ei(e,function(e){i.call(n,t(e),e)}),n}}),qe({target:"Map",proto:!0,real:!0,forced:H},{keyOf:function(e){for(var t,n,i=L(this),r=Bi(i);!(t=r.next()).done;)if((n=t.value)[1]===e)return n[0]}}),qe({target:"Map",proto:!0,real:!0,forced:H},{mapKeys:function(e){for(var t,n,i,r=L(this),o=Bi(r),a=m(e,1<arguments.length?arguments[1]:void 0,3),s=new(Vi(r,Di("Map"))),u=g(s.set);!(t=o.next()).done;)n=t.value,u.call(s,a(i=n[1],n[0],r),i);return s}}),qe({target:"Map",proto:!0,real:!0,forced:H},{mapValues:function(e){for(var t,n,i,r=L(this),o=Bi(r),a=m(e,1<arguments.length?arguments[1]:void 0,3),s=new(Vi(r,Di("Map"))),u=g(s.set);!(t=o.next()).done;)n=t.value,u.call(s,i=n[0],a(n[1],i,r));return s}}),qe({target:"Map",proto:!0,real:!0,forced:H},{merge:function(e){for(var t=L(this),n=g(t.set),i=0;i<arguments.length;)Ei(arguments[i++],n,t,!0);return t}}),qe({target:"Map",proto:!0,real:!0,forced:H},{reduce:function(e){var t,n,i,r=L(this),o=Bi(r);if(g(e),1<arguments.length)t=arguments[1];else{if((n=o.next()).done)throw TypeError("Reduce of empty map with no initial value");t=n.value[1]}for(;!(n=o.next()).done;)t=e(t,(i=n.value)[1],i[0],r);return t}}),qe({target:"Map",proto:!0,real:!0,forced:H},{some:function(e){for(var t,n,i=L(this),r=Bi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=r.next()).done;)if(o((n=t.value)[1],n[0],i))return!0;return!1}}),qe({target:"Map",proto:!0,real:!0,forced:H},{update:function(e,t){var n=L(this);g(t);var i=n.has(e);if(!i&&arguments.length<3)throw TypeError("Updating absent value");var r=i?n.get(e):g(arguments[2])(e,n);return n.set(e,t(r,e,n)),n}}),ki("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},$i),Jt.Set,qe({target:"Set",stat:!0},{from:Li}),qe({target:"Set",stat:!0},{of:Fi}),qe({target:"Set",proto:!0,real:!0,forced:H},{addAll:function(){return function(){for(var e=L(this),t=g(e.add),n=0,i=arguments.length;n<i;n++)t.call(e,arguments[n]);return e}.apply(this,arguments)}}),qe({target:"Set",proto:!0,real:!0,forced:H},{deleteAll:function(){return Ui.apply(this,arguments)}});var qi=function(e){return Set.prototype.values.call(e)};qe({target:"Set",proto:!0,real:!0,forced:H},{every:function(e){for(var t,n,i=L(this),r=qi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=r.next()).done;)if(!o(n=t.value,n,i))return!1;return!0}}),qe({target:"Set",proto:!0,real:!0,forced:H},{difference:function(e){var t=L(this),n=new(Vi(t,Di("Set")))(t),i=g(n.delete);return Ei(e,function(e){i.call(n,e)}),n}}),qe({target:"Set",proto:!0,real:!0,forced:H},{filter:function(e){for(var t,n,i=L(this),r=qi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3),a=new(Vi(i,Di("Set"))),s=g(a.add);!(t=r.next()).done;)o(n=t.value,n,i)&&s.call(a,n);return a}}),qe({target:"Set",proto:!0,real:!0,forced:H},{find:function(e){for(var t,n,i=L(this),r=qi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=r.next()).done;)if(o(n=t.value,n,i))return n}}),qe({target:"Set",proto:!0,real:!0,forced:H},{intersection:function(e){var t=L(this),n=new(Vi(t,Di("Set"))),i=g(t.has),r=g(n.add);return Ei(e,function(e){i.call(t,e)&&r.call(n,e)}),n}});var Hi=Ei.BREAK;qe({target:"Set",proto:!0,real:!0,forced:H},{isDisjointFrom:function(e){var t=L(this),n=g(t.has);return Ei(e,function(e){if(!0===n.call(t,e))return Hi})!==Hi}});var Wi=Ei.BREAK;qe({target:"Set",proto:!0,real:!0,forced:H},{isSubsetOf:function(e){var t=function(e){var t=Yt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return L(t.call(e))}(this),n=L(e),i=n.has;return"function"!=typeof i&&(n=new(Di("Set"))(e),i=g(n.has)),Ei(t,function(e){if(!1===i.call(n,e))return Wi},void 0,!1,!0)!==Wi}});var Gi=Ei.BREAK;qe({target:"Set",proto:!0,real:!0,forced:H},{isSupersetOf:function(e){var t=L(this),n=g(t.has);return Ei(e,function(e){if(!1===n.call(t,e))return Gi})!==Gi}}),qe({target:"Set",proto:!0,real:!0,forced:H},{join:function(e){for(var t,n=L(this),i=qi(n),r=void 0===e?",":String(e),o=[];!(t=i.next()).done;)o.push(t.value);return o.join(r)}}),qe({target:"Set",proto:!0,real:!0,forced:H},{map:function(e){for(var t,n,i=L(this),r=qi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3),a=new(Vi(i,Di("Set"))),s=g(a.add);!(t=r.next()).done;)s.call(a,o(n=t.value,n,i));return a}}),qe({target:"Set",proto:!0,real:!0,forced:H},{reduce:function(e){var t,n,i,r=L(this),o=qi(r);if(g(e),1<arguments.length)t=arguments[1];else{if((n=o.next()).done)throw TypeError("Reduce of empty set with no initial value");t=n.value}for(;!(n=o.next()).done;)t=e(t,i=n.value,i,r);return t}}),qe({target:"Set",proto:!0,real:!0,forced:H},{some:function(e){for(var t,n,i=L(this),r=qi(i),o=m(e,1<arguments.length?arguments[1]:void 0,3);!(t=r.next()).done;)if(o(n=t.value,n,i))return!0;return!1}}),qe({target:"Set",proto:!0,real:!0,forced:H},{symmetricDifference:function(e){var t=L(this),n=new(Vi(t,Di("Set")))(t),i=g(n.delete),r=g(n.add);return Ei(e,function(e){i.call(n,e)||r.call(n,e)}),n}}),qe({target:"Set",proto:!0,real:!0,forced:H},{union:function(e){var t=L(this),n=new(Vi(t,Di("Set")))(t);return Ei(e,g(n.add),n),n}});var zi=function(e,t){return(zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ki(e,t){function n(){this.constructor=e}zi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Qi=function(){return(Qi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Yi(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}u((i=i.apply(e,t||[])).next())})}function Xi(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=0<(r=a.trys).length&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Ji(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function Zi(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function er(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zi(arguments[t]));return e}var tr={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},nr=function(e,t){if(!e)throw ir(t)},ir=function(e){return new Error("Firebase Database ("+tr.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},rr=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);t[n++]=r<128?r:(t[n++]=r<2048?r>>6|192:(55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,r>>6&63|128),63&r|128)}return t},or=function(e){try{return ar.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},ar=new(function(){function e(){this.byteToCharMap_=null,this.charToByteMap_=null,this.byteToCharMapWebSafe_=null,this.charToByteMapWebSafe_=null,this.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",this.HAS_NATIVE_SUPPORT="function"==typeof atob}return Object.defineProperty(e.prototype,"ENCODED_VALS",{get:function(){return this.ENCODED_VALS_BASE+"+/="},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ENCODED_VALS_WEBSAFE",{get:function(){return this.ENCODED_VALS_BASE+"-_."},enumerable:!0,configurable:!0}),e.prototype.encodeByteArray=function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<e.length;r+=3){var o=e[r],a=r+1<e.length,s=a?e[r+1]:0,u=r+2<e.length,c=u?e[r+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),i.push(n[l],n[h],n[f],n[d])}return i.join("")},e.prototype.encodeString=function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(rr(e),t)},e.prototype.decodeString=function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,i=0;n<e.length;){var r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(191<r&&r<224){var o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(239<r&&r<365){var a=((7&r)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(a>>10)),t[i++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},e.prototype.decodeStringToByteArray=function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<e.length;){var o=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0,s=++r<e.length?n[e.charAt(r)]:64,u=++r<e.length?n[e.charAt(r)]:64;if(++r,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(i.push(c),64!==s){var l=a<<4&240|s>>2;if(i.push(l),64!==u){var h=s<<6&192|u;i.push(h)}}}return i},e.prototype.init_=function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}},e}());function sr(e){return ur(void 0,e)}function ur(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=ur(e[n],t[n]));return e}var cr=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,i))}},e}();function lr(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function hr(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lr())}function fr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dr(){return!0===tr.NODE_ADMIN}var pr=function(e){function t(n,i){var r=e.call(this,i)||this;return r.code=n,r.name="FirebaseError",Object.setPrototypeOf(r,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,gr.prototype.create),r}return Ki(t,e),t}(Error),gr=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t,n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var o,a=i[0]||{},s=this.service+"/"+e,u=this.errors[e],c=u?(o=a,u.replace(mr,function(e,t){var n=o[t];return null!=n?n.toString():"<"+t+"?>"})):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new pr(s,l);try{for(var f=Ji(Object.keys(a)),d=f.next();!d.done;d=f.next()){var p=d.value;"_"!==p.slice(-1)&&(p in h&&console.warn('Overwriting FirebaseError base field "'+p+'" can cause unexpected behavior.'),h[p]=a[p])}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}return h},e}(),mr=/\{\$([^}]+)}/g;function vr(e){return JSON.parse(e)}function yr(e){return JSON.stringify(e)}var br=function(e){var t={},n={},i={},r="";try{var o=e.split(".");t=vr(or(o[0])||""),n=vr(or(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}};function Ar(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function _r(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Cr(e,t,n){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}var Sr=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++)a=i<40?i<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):i<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),r=(s<<5|s>>>27)+o+h+a+n[i]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=r;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<t;){if(0===o)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[o]=e.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<t;)if(r[o]=e[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;0<=r;r-=8)e[i]=this.chain_[n]>>r&255,++i;return e},e}();function Er(e,t){var n=new Tr(e,t);return n.subscribe.bind(n)}var Tr=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var i,r=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){var n,i;if("object"!=typeof e||null===e)return!1;try{for(var r=Ji(["next","error","complete"]),o=r.next();!o.done;o=r.next()){var a=o.value;if(a in e&&"function"==typeof e[a])return!0}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(i.next=kr),void 0===i.error&&(i.error=kr),void 0===i.complete&&(i.complete=kr);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}}),this.observers.push(i),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function kr(){}var Ir=function(e,t,n,i){var r;if(i<t?r="at least "+t:n<i&&(r=0===n?"none":"no more than "+n),r)throw new Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function xr(e,t,n){var i="";switch(t){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+(i+" argument ")}function Dr(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(xr(e,t,i)+"must be a valid function.")}function Nr(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(xr(e,t,i)+"must be a valid context object.")}var Pr,Or,Mr=function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:55296<=i&&i<=56319?(t+=4,n++):t+=3}return t};function Rr(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function $r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Rr(arguments[t]));return e}(Or=Pr||(Pr={}))[Or.DEBUG=0]="DEBUG",Or[Or.VERBOSE=1]="VERBOSE",Or[Or.INFO=2]="INFO",Or[Or.WARN=3]="WARN",Or[Or.ERROR=4]="ERROR",Or[Or.SILENT=5]="SILENT";var Lr,Fr=Pr.INFO,Ur=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var r=(new Date).toISOString();switch(t){case Pr.DEBUG:case Pr.VERBOSE:console.log.apply(console,$r(["["+r+"]  "+e.name+":"],n));break;case Pr.INFO:console.info.apply(console,$r(["["+r+"]  "+e.name+":"],n));break;case Pr.WARN:console.warn.apply(console,$r(["["+r+"]  "+e.name+":"],n));break;case Pr.ERROR:console.error.apply(console,$r(["["+r+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},Br=function(){function e(e){this.name=e,this._logLevel=Fr,this._logHandler=Ur}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Pr))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,$r([this,Pr.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,$r([this,Pr.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,$r([this,Pr.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,$r([this,Pr.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,$r([this,Pr.ERROR],e))},e}(),jr=((Lr={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Lr["bad-app-name"]="Illegal App name: '{$appName}",Lr["duplicate-app"]="Firebase App named '{$appName}' already exists",Lr["app-deleted"]="Firebase App named '{$appName}' already deleted",Lr["duplicate-service"]="Firebase service named '{$appName}' already registered",Lr["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Lr),Vr=new gr("app","Firebase",jr),qr="[DEFAULT]",Hr=[],Wr=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=sr(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){Hr.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){Hr=Hr.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){var t,n,i,r;e.firebase_.INTERNAL.removeApp(e.name_);var o=[];try{for(var a=Ji(Object.keys(e.services_)),s=a.next();!s.done;s=a.next()){var u=s.value;try{for(var c=Ji(Object.keys(e.services_[u])),l=c.next();!l.done;l=c.next()){var h=l.value;o.push(e.services_[u][h])}}catch(n){i={error:n}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}}}catch(n){t={error:n}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return Promise.all(o.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=qr),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==qr?t:void 0,i=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=i}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;ur(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(Hr.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),Hr=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Vr.create("app-deleted",{appName:this.name_})},e}();Wr.prototype.name&&Wr.prototype.options||Wr.prototype.delete||console.log("dc");var Gr=new Br("@firebase/app");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Gr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var zr=self.firebase.SDK_VERSION;zr&&0<=zr.indexOf("LITE")&&Gr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Kr=function e(){var t=function(e){var t={},n={},i={},r={__esModule:!0,initializeApp:function(n,i){(void 0===i&&(i={}),"object"!=typeof i||null===i)&&(i={name:i});var o=i;void 0===o.name&&(o.name=qr);var a=o.name;if("string"!=typeof a||!a)throw Vr.create("bad-app-name",{appName:String(a)});if(Ar(t,a))throw Vr.create("duplicate-app",{appName:a});var u=new e(n,o,r);return s(t[a]=u,"create"),u},app:o,apps:null,SDK_VERSION:"6.3.0",INTERNAL:{registerService:function(t,s,u,c,l){if(void 0===l&&(l=!1),n[t])throw Vr.create("duplicate-service",{appName:t});function h(e){if(void 0===e&&(e=o()),"function"!=typeof e[t])throw Vr.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=s,c&&(i[t]=c,a().forEach(function(e){c("create",e)})),void 0!==u&&ur(h,u),r[t]=h,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,l?e:[])},h},removeApp:function(e){s(t[e],"delete"),delete t[e]},factories:n,useAsService:u}};function o(e){if(!Ar(t,e=e||qr))throw Vr.create("no-app",{appName:e});return t[e]}function a(){return Object.keys(t).map(function(e){return t[e]})}function s(e,t){var r,o;try{for(var a=Ji(Object.keys(n)),s=a.next();!s.done;s=a.next()){var c=u(0,s.value);if(null===c)return;i[c]&&i[c](t,e)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}}function u(e,t){return"serverAuth"===t?null:t}return r.default=r,Object.defineProperty(r,"apps",{get:a}),o.App=e,r}(Wr);return t.INTERNAL=Qi({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){ur(t,e)},createSubscribe:Er,ErrorFactory:gr,deepExtend:ur}),t}(),Qr=Kr.initializeApp;Kr.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}()&&Gr.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\n      to false and "main" to true:\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Qr.apply(void 0,e)};var Yr=Kr;(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function i(e){var t,n,i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return i?i.call(e):{next:(t=e,n=0,function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}})}}!function(e,i){if(i){var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in r||(r[a]={}),r=r[a]}(i=i(o=r[e=e[e.length-1]]))!=o&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var a=n.setTimeout;r.prototype.c=function(e){a(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},r.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.o),reject:e(this.g)}},t.prototype.o=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.u(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.l(e):this.h(e)}},t.prototype.l=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.m()},t.prototype.m=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new r;return t.prototype.u=function(e){var t=this.f();e.Ja(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){o(t)}}:t}var r,o,a=new t(function(e,t){r=e,o=t});return this.Ja(i(e,r),i(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ja=function(e,t){function n(){switch(i.b){case 1:e(i.c);break;case 2:t(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Ja(t,n)})},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t(function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}for(var a=[],s=0;a.push(void 0),s++,o(r.value).Ja(i(a.length-1),t),!(r=n.next()).done;);})},t});var r=r||{},o=this;function a(e){return"string"==typeof e}function s(e){return"boolean"==typeof e}var u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return null===e}function d(e){return"array"==h(e)}function p(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function g(e){return"function"==h(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function A(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:A).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var C=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,(e.prototype.constructor=e).cd=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}function E(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function T(e){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function k(e,t){for(var n="",i=(e=e.split("%s")).length-1,r=0;r<i;r++)n+=e[r]+(r<t.length?t[r]:"%s");T.call(this,n+e[i])}function I(e,t){throw new k("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function x(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function D(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function N(){this.b=this.a=null}S(T,Error),T.prototype.name="CustomError",S(k,T),k.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var P=new x(function(){return new O},function(e){e.reset()});function O(){this.next=this.b=this.a=null}N.prototype.add=function(e,t){var n=P.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var M=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},R=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,r=a(e)?e.split(""):e,o=0;o<i;o++)o in r&&t.call(n,r[o],o,e)},$=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),r=a(e)?e.split(""):e,o=0;o<n;o++)o in r&&(i[o]=t.call(void 0,r[o],o,e));return i},L=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=a(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e))return!0;return!1};function F(e,t){return 0<=M(e,t)}function U(e,t){var n;return(n=0<=(t=M(e,t)))&&Array.prototype.splice.call(e,t,1),n}function B(e,t){!function(e,t){for(var n=a(e)?e.split(""):e,i=e.length-1;0<=i;--i)i in n&&t.call(void 0,n[i],i,e)}(e,function(n,i){t.call(void 0,n,i,e)&&Array.prototype.splice.call(e,i,1).length})}function j(e){return Array.prototype.concat.apply([],arguments)}function V(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}var q,H=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},W=/&/g,G=/</g,z=/>/g,K=/"/g,Q=/'/g,Y=/\x00/g,X=/[\x00&<>"']/;function J(e,t){return-1!=e.indexOf(t)}function Z(e,t){return e<t?-1:t<e?1:0}e:{var ee=o.navigator;if(ee){var te=ee.userAgent;if(te){q=te;break e}}q=""}function ne(e){return J(q,e)}function ie(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function re(e){for(var t in e)return!1;return!0}function oe(e){var t,n={};for(t in e)n[t]=e[t];return n}var ae,se,ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(e,t){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])e[n]=i[n];for(var o=0;o<ue.length;o++)n=ue[o],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function le(e,t){for(var n=e.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function he(e){return X.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(W,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(G,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(z,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(K,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(Q,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(Y,"&#0;"))),e}function fe(e){o.setTimeout(function(){throw e},0)}function de(e,t){se||function(){if(o.Promise&&o.Promise.resolve){var e=o.Promise.resolve(void 0);se=function(){e.then(me)}}else se=function(){var e=me;!g(o.setImmediate)||o.Window&&o.Window.prototype&&!ne("Edge")&&o.Window.prototype.setImmediate==o.setImmediate?(ae||(ae=function(){var e=o.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ne("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=w(function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),void 0===e||ne("Trident")||ne("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){o.setTimeout(e,0)};var t=new e,n={},i=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){i.next={yb:e},i=i.next,t.port2.postMessage(0)}}()),ae(e)):o.setImmediate(e)}}(),pe||(se(),pe=!0),ge.add(e,t)}var pe=!1,ge=new N;function me(){for(var e;n=t=void 0,n=null,(t=ge).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){fe(e)}D(P,e)}var t,n;pe=!1}function ve(e,t){if(this.a=ye,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=l)try{var n=this;e.call(t,function(e){De(n,be,e)},function(e){if(!(e instanceof Le))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}De(n,Ae,e)})}catch(e){De(this,Ae,e)}}var ye=0,be=2,Ae=3;function we(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}we.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _e=new x(function(){return new we},function(e){e.reset()});function Ce(e,t,n){var i=_e.get();return i.g=e,i.b=t,i.f=n,i}function Se(e){if(e instanceof ve)return e;var t=new ve(l);return De(t,be,e),t}function Ee(e){return new ve(function(t,n){n(e)})}function Te(e,t,n){Ne(e,t,n,null)||de(_(t,e))}function ke(e){return new ve(function(t){var n=e.length,i=[];if(n)for(var r=function(e,r,o){n--,i[e]=r?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&t(i)},o=0;o<e.length;o++)Te(e[o],_(r,o,!0),_(r,o,!1));else t(i)})}function Ie(e,t){e.b||e.a!=be&&e.a!=Ae||Pe(e),e.f?e.f.next=t:e.b=t,e.f=t}function xe(e,t,n,i){var r=Ce(null,null,null);return r.a=new ve(function(e,o){r.g=t?function(n){try{var r=t.call(i,n);e(r)}catch(n){o(n)}}:e,r.b=n?function(t){try{var r=n.call(i,t);void 0===r&&t instanceof Le?o(t):e(r)}catch(t){o(t)}}:o}),Ie(r.a.c=e,r),r.a}function De(e,t,n){var i,r;e.a==ye&&(e===n&&(t=Ae,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ne(n,e.Lc,e.Mc,e)||(e.i=n,e.a=t,e.c=null,Pe(e),t!=Ae||n instanceof Le||(r=n,(i=e).g=!0,de(function(){i.g&&$e.call(null,r)}))))}function Ne(e,t,n,i){if(e instanceof ve)return Ie(e,Ce(t||l,n||null,i)),!0;if(E(e))return e.then(t,n,i),!0;if(m(e))try{var r=e.then;if(g(r))return function(e,t,n,i,r){function o(e){a||(a=!0,i.call(r,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(r,e))},o)}catch(e){o(e)}}(e,r,t,n,i),!0}catch(e){return n.call(i,e),!0}return!1}function Pe(e){e.h||(e.h=!0,de(e.Wb,e))}function Oe(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Me(e,t,n,i){if(n==Ae&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Re(t,n,i);else try{t.c?t.g.call(t.f):Re(t,n,i)}catch(e){$e.call(null,e)}D(_e,t)}function Re(e,t,n){t==be?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ve.prototype.then=function(e,t,n){return xe(this,g(e)?e:null,g(t)?t:null,n)},ve.prototype.$goog_Thenable=!0,(e=ve.prototype).ia=function(e,t){return(e=Ce(e,e,t)).c=!0,Ie(this,e),this},e.s=function(e,t){return xe(this,null,e,t)},e.cancel=function(e){this.a==ye&&de(function(){!function e(t,n){if(t.a==ye)if(t.c){var i=t.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==t&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==ye&&1==r?e(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):Oe(i),Me(i,o,Ae,n)))}t.c=null}else De(t,Ae,n)}(this,new Le(e))},this)},e.Lc=function(e){this.a=ye,De(this,be,e)},e.Mc=function(e){this.a=ye,De(this,Ae,e)},e.Wb=function(){for(var e;e=Oe(this);)Me(this,e,this.a,this.i);this.h=!1};var $e=fe;function Le(e){T.call(this,e)}function Fe(){this.qa=this.qa,this.ja=this.ja}S(Le,T);var Ue=0;function Be(e){e.qa||(e.qa=!0,e.va(),0==Ue)||e[v]||(e[v]=++y)}function je(e){return je[" "](e),e}Fe.prototype.qa=!(Le.prototype.name="cancel"),Fe.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},je[" "]=l;var Ve,qe,He=ne("Opera"),We=ne("Trident")||ne("MSIE"),Ge=ne("Edge"),ze=Ge||We,Ke=ne("Gecko")&&!(J(q.toLowerCase(),"webkit")&&!ne("Edge"))&&!(ne("Trident")||ne("MSIE"))&&!ne("Edge"),Qe=J(q.toLowerCase(),"webkit")&&!ne("Edge");function Ye(){var e=o.document;return e?e.documentMode:void 0}e:{var Xe="",Je=(qe=q,Ke?/rv:([^\);]+)(\)|;)/.exec(qe):Ge?/Edge\/([\d\.]+)/.exec(qe):We?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qe):Qe?/WebKit\/(\S+)/.exec(qe):He?/(?:Version)[ \/]?(\S+)/.exec(qe):void 0);if(Je&&(Xe=Je?Je[1]:""),We){var Ze=Ye();if(null!=Ze&&Ze>parseFloat(Xe)){Ve=String(Ze);break e}}Ve=Xe}var et,tt={};function nt(e){return t=e,n=function(){for(var t=0,n=H(String(Ve)).split("."),i=H(String(e)).split("."),r=Math.max(n.length,i.length),o=0;0==t&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=Z(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Z(0==a[2].length,0==s[2].length)||Z(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t},i=tt,Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=n();var t,n,i}var it=o.document;et=it&&We?Ye()||("CSS1Compat"==it.compatMode?parseInt(Ve,10):5):void 0;var rt=Object.freeze||function(e){return e},ot=!We||9<=Number(et),at=We&&!nt("9"),st=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{o.addEventListener("test",l,t),o.removeEventListener("test",l,t)}catch(e){}return e}();function ut(e,t){this.type=e,this.b=this.target=t,this.Kb=!0}function ct(e,t){if(ut.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Ke){e:{try{je(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,this.screenY=i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:lt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}ut.prototype.preventDefault=function(){this.Kb=!1},S(ct,ut);var lt=rt({2:"touch",3:"pen",4:"mouse"});ct.prototype.preventDefault=function(){ct.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,at)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},ct.prototype.f=function(){return this.a};var ht="closure_listenable_"+(1e6*Math.random()|0),ft=0;function dt(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.Na=null}function pt(e){this.src=e,this.a={},this.b=0}function gt(e,t){var n=t.type;n in e.a&&U(e.a[n],t)&&(dt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function mt(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.oa&&o.listener==t&&o.capture==!!n&&o.Na==i)return r}return-1}pt.prototype.add=function(e,t,n,i,r){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=mt(e,t,i,r);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new function(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.Na=r,this.key=++ft,this.oa=this.Ia=!1}(t,this.src,o,!!i,r)).Ia=n,e.push(t)),t};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function bt(e,t,n,i,r){if(i&&i.once)wt(e,t,n,i,r);else if(d(t))for(var o=0;o<t.length;o++)bt(e,t[o],n,i,r);else n=Dt(n),e&&e[ht]?Pt(e,t,n,m(i)?!!i.capture:!!i,r):At(e,t,n,!1,i,r)}function At(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var a,s,u=m(r)?!!r.capture:!!r,c=It(e);if(c||(e[vt]=c=new pt(e)),!(n=c.add(t,n,i,u,o)).proxy)if(a=kt,i=s=ot?function(e){return a.call(s.src,s.listener,e)}:function(e){if(!(e=a.call(s.src,s.listener,e)))return e},(n.proxy=i).src=e,i.listener=n,e.addEventListener)st||(r=u),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(St(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}}function wt(e,t,n,i,r){if(d(t))for(var o=0;o<t.length;o++)wt(e,t[o],n,i,r);else n=Dt(n),e&&e[ht]?Ot(e,t,n,m(i)?!!i.capture:!!i,r):At(e,t,n,!0,i,r)}function _t(e,t,n,i,r){if(d(t))for(var o=0;o<t.length;o++)_t(e,t[o],n,i,r);else i=m(i)?!!i.capture:!!i,n=Dt(n),e&&e[ht]?(e=e.m,(t=String(t).toString())in e.a&&-1<(n=mt(o=e.a[t],n,i,r))&&(dt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=It(e))&&(t=e.a[t.toString()],e=-1,t&&(e=mt(t,n,i,r)),(n=-1<e?t[e]:null)&&Ct(n))}function Ct(e){if("number"!=typeof e&&e&&!e.oa){var t=e.src;if(t&&t[ht])gt(t.m,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(St(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=It(t))?(gt(n,e),0==n.b&&(n.src=null,t[vt]=null)):dt(e)}}}function St(e){return e in yt?yt[e]:yt[e]="on"+e}function Et(e,t,n,i){var r=!0;if((e=It(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.oa&&(o=Tt(o,i),r=r&&!1!==o)}return r}function Tt(e,t){var n=e.listener,i=e.Na||e.src;return e.Ia&&Ct(e),n.call(i,t)}function kt(e,t){if(e.oa)return!0;if(ot)return Tt(e,new ct(t,this));if(!t)e:{t=["window","event"];for(var n=o,i=0;i<t.length;i++)if(null==(n=n[t[i]])){t=null;break e}t=n}if(t=new ct(i=t,this),n=!0,!(i.keyCode<0||null!=i.returnValue)){e:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(e){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=t.b;r;r=r.parentNode)i.push(r);for(e=e.type,r=i.length-1;0<=r;r--){t.b=i[r];var a=Et(i[r],e,!0,t);n=n&&a}for(r=0;r<i.length;r++)t.b=i[r],a=Et(i[r],e,!1,t),n=n&&a}return n}function It(e){return(e=e[vt])instanceof pt?e:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(e){return g(e)?e:(e[xt]||(e[xt]=function(t){return e.handleEvent(t)}),e[xt])}function Nt(){Fe.call(this),this.m=new pt(this),(this.Pb=this).Wa=null}function Pt(e,t,n,i,r){e.m.add(String(t),n,!1,i,r)}function Ot(e,t,n,i,r){e.m.add(String(t),n,!0,i,r)}function Mt(e,t,n,i){if(!(t=e.m.a[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Na||a.src;a.Ia&&gt(e.m,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.Kb}function Rt(e,t,n){if(g(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:o.setTimeout(e,t||0)}function $t(e){var t=null;return new ve(function(n,i){-1==(t=Rt(function(){n(void 0)},e))&&i(Error("Failed to schedule timer."))}).s(function(e){throw o.clearTimeout(t),e})}function Lt(e){if(e.S&&"function"==typeof e.S)return e.S();if(a(e))return e.split("");if(p(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}function Ft(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(p(e)||a(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var i in t=[],n=0,e)t[n++]=i;return t}}function Ut(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof Ut)for(n=e.U(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function Bt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];jt(e.b,i)&&(e.a[n++]=i),t++}e.a.length=n}if(e.c!=e.a.length){var r={};for(n=t=0;t<e.a.length;)jt(r,i=e.a[t])||(r[e.a[n++]=i]=1),t++;e.a.length=n}}function jt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(Nt,Fe),Nt.prototype[ht]=!0,Nt.prototype.addEventListener=function(e,t,n,i){bt(this,e,t,n,i)},Nt.prototype.removeEventListener=function(e,t,n,i){_t(this,e,t,n,i)},Nt.prototype.dispatchEvent=function(e){var t,n=this.Wa;if(n)for(t=[];n;n=n.Wa)t.push(n);n=this.Pb;var i=e.type||e;if(a(e))e=new ut(e,n);else if(e instanceof ut)e.target=e.target||n;else{var r=e;ce(e=new ut(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.b=t[o];r=Mt(s,i,!0,e)&&r}if(r=Mt(s=e.b=n,i,!0,e)&&r,r=Mt(s,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=Mt(s=e.b=t[o],i,!1,e)&&r;return r},Nt.prototype.va=function(){if(Nt.qb.va.call(this),this.m){var e,t=this.m;for(e in t.a){for(var n=t.a[e],i=0;i<n.length;i++)dt(n[i]);delete t.a[e],t.b--}}this.Wa=null},(e=Ut.prototype).S=function(){Bt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.U=function(){return Bt(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return jt(this.b,e)?this.b[e]:t},e.set=function(e,t){jt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.U(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);e.call(t,o,r,this)}};var Vt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qt(e,t){var n;this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1,e instanceof qt?(this.h=void 0!==t?t:e.h,Ht(this,e.f),this.i=e.i,this.b=e.b,Wt(this,e.m),this.c=e.c,Gt(this,fn(e.a)),this.g=e.g):e&&(n=String(e).match(Vt))?(this.h=!!t,Ht(this,n[1]||"",!0),this.i=Xt(n[2]||""),this.b=Xt(n[3]||"",!0),Wt(this,n[4]),this.c=Xt(n[5]||"",!0),Gt(this,n[6]||"",!0),this.g=Xt(n[7]||"")):(this.h=!!t,this.a=new an(null,this.h))}function Ht(e,t,n){e.f=n?Xt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Wt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Gt(e,t,n){var i,r;t instanceof an?(e.a=t,i=e.a,(r=e.h)&&!i.f&&(sn(i),i.c=null,i.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(cn(this,t),hn(this,n,e))},i)),i.f=r):(n||(t=Jt(t,rn)),e.a=new an(t,e.h))}function zt(e,t,n){e.a.set(t,n)}function Kt(e,t){return e.a.get(t)}function Qt(e){return e instanceof qt?new qt(e):new qt(e,void 0)}function Yt(e,t){var n=new qt(null,void 0);return Ht(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Jt(e,t,n){return a(e)?(e=encodeURI(e).replace(t,Zt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Zt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}qt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Jt(t,en,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(Jt(t,en,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Jt(n,"/"==n.charAt(0)?nn:tn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Jt(n,on)),e.join("")},qt.prototype.resolve=function(e){var t=new qt(this),n=!!e.f;n?Ht(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.m;var i=e.c;if(n)Wt(t,e.m);else if(n=!!e.c){if("/"!=i.charAt(0))if(this.b&&!this.c)i="/"+i;else{var r=t.c.lastIndexOf("/");-1!=r&&(i=t.c.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(J(r,"./")||J(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?t.c=i:n=""!==e.a.toString(),n?Gt(t,fn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var en=/[#\/\?@]/g,tn=/[#\?:]/g,nn=/[#\?]/g,rn=/[#\?@]/g,on=/#/g;function an(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function sn(e){e.a||(e.a=new Ut,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function un(e){var t=Ft(e);if(void 0===t)throw Error("Keys are undefined");var n=new an(null,void 0);e=Lt(e);for(var i=0;i<t.length;i++){var r=t[i],o=e[i];d(o)?hn(n,r,o):n.add(r,o)}return n}function cn(e,t){sn(e),t=dn(e,t),jt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,jt((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Bt(e)))}function ln(e,t){return sn(e),t=dn(e,t),jt(e.a.b,t)}function hn(e,t,n){cn(e,t),0<n.length&&(e.c=null,e.a.set(dn(e,t),V(n)),e.b+=n.length)}function fn(e){var t=new an;return t.c=e.c,e.a&&(t.a=new Ut(e.a),t.b=e.b),t}function dn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=an.prototype).add=function(e,t){sn(this),this.c=null,e=dn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){sn(this),this.a.forEach(function(n,i){R(n,function(n){e.call(t,n,i,this)},this)},this)},e.U=function(){sn(this);for(var e=this.a.S(),t=this.a.U(),n=[],i=0;i<t.length;i++)for(var r=e[i],o=0;o<r.length;o++)n.push(t[i]);return n},e.S=function(e){sn(this);var t=[];if(a(e))ln(this,e)&&(t=j(t,this.a.get(dn(this,e))));else{e=this.a.S();for(var n=0;n<e.length;n++)t=j(t,e[n])}return t},e.set=function(e,t){return sn(this),this.c=null,ln(this,e=dn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.S(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.S(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),e.push(a)}}return this.c=e.join("&")};var pn=!We||9<=Number(et);function gn(e,t){this.a=e===yn&&t||"",this.b=vn}function mn(e){return e instanceof gn&&e.constructor===gn&&e.b===vn?e.a:(I("expected object of type Const, got '"+e+"'"),"type_error:Const")}gn.prototype.na=!0,gn.prototype.ma=function(){return this.a},gn.prototype.toString=function(){return"Const{"+this.a+"}"};var vn={},yn={};function bn(){this.a="",this.b=Sn}function An(e){return e instanceof bn&&e.constructor===bn&&e.b===Sn?e.a:(I("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}function wn(e,t){var n,i,r=mn(e);if(!Cn.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return n=e=r.replace(_n,function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof gn?mn(e):encodeURIComponent(String(e))}),(i=new bn).a=n,i}bn.prototype.na=!0,bn.prototype.ma=function(){return this.a.toString()},bn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _n=/%{(\w+)}/g,Cn=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Sn={};function En(){this.a="",this.b=xn}function Tn(e){return e instanceof En&&e.constructor===En&&e.b===xn?e.a:(I("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}En.prototype.na=!0,En.prototype.ma=function(){return this.a.toString()},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function In(e){return e instanceof En?e:(e="object"==typeof e&&e.na?e.ma():String(e),kn.test(e)||(e="about:invalid#zClosurez"),Dn(e))}var xn={};function Dn(e){var t=new En;return t.a=e,t}function Nn(){this.a="",this.b=Pn}Dn("about:blank"),Nn.prototype.na=!0,Nn.prototype.ma=function(){return this.a.toString()},Nn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pn={};function On(e){var t=new Nn;return t.a=e,t}function Mn(e){var t=document;return a(e)?t.getElementById(e):e}function Rn(e,t){ie(t,function(t,n){t&&"object"==typeof t&&t.na&&(t=t.ma()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:$n.hasOwnProperty(n)?e.setAttribute($n[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}On("<!DOCTYPE html>"),On(""),On("<br>");var $n={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ln(e){if(e&&"number"==typeof e.length){if(m(e))return"function"==typeof e.item||"string"==typeof e.item;if(g(e))return"function"==typeof e.item}return!1}function Fn(e){var t=[];return function e(t,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(d(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),e(t,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&"function"!=typeof(a=n[r])&&(i.push(o),jn(r,i),i.push(":"),e(t,a,i),o=",");return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":jn(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},e,t),t.join("")}var Un={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Bn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function jn(e,t){t.push('"',e.replace(Bn,function(e){var t=Un[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Un[e]=t),t}),'"')}function Vn(){var e=si();return We&&!!et&&11==et||/Edge\/\d+/.test(e)}function qn(){return o.window&&o.window.location.href||self&&self.location&&self.location.href||""}function Hn(e,t){t=t||o.window;var n="about:blank";e&&(n=Tn(In(e)).toString()),t.location.href=n}function Wn(e){return!!((e=(e||si()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Gn(e){e=e||o.window;try{e.close()}catch(e){}}function zn(e,t,n){var i=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=si().toLowerCase(),i&&(t.target=i,J(n,"crios/")&&(t.target="_blank")),ri(si())==ni&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),i=window,t=n instanceof En?n:In(void 0!==n.href?n.href:String(n)),n=e.target||n.target,r=[],e)switch(s){case"width":case"height":case"top":case"left":r.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(s+"="+(e[s]?1:0))}var a,s=r.join(",");if((ne("iPhone")&&!ne("iPod")&&!ne("iPad")||ne("iPad")||ne("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(s=i.document.createElement("A"),t instanceof En||t instanceof En||(t="object"==typeof t&&t.na?t.ma():String(t),kn.test(t)||(t="about:invalid#zClosurez"),t=Dn(t)),s.href=Tn(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=i.open("",n,s),e=Tn(t).toString(),s&&(ze&&J(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e=On('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+he(e)+'">'),s.document.write((a=e)instanceof Nn&&a.constructor===Nn&&a.b===Pn?a.a:(I("expected object of type SafeHtml, got '"+a+"' of type "+h(a)),"type_error:SafeHtml")),s.document.close())):(s=i.open(Tn(t).toString(),n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(e){}return s}var Kn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qn=/^[^@]+@[^@]+$/;function Yn(){var e=null;return new ve(function(t){"complete"==o.document.readyState?t():(e=function(){t()},wt(window,"load",e))}).s(function(t){throw _t(window,"load",e),t})}function Xn(e){return e=e||si(),!("file:"!==fi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jn(){var e=o.window;try{return!(!e||e==e.top)}catch(e){return!1}}function Zn(){return void 0!==o.WorkerGlobalScope&&"function"==typeof o.importScripts}function ei(){return Yr.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Yr.INTERNAL.hasOwnProperty("node")?"Node":Zn()?"Worker":"Browser"}function ti(){var e=ei();return"ReactNative"===e||"Node"===e}var ni="Firefox",ii="Chrome";function ri(e){var t=e.toLowerCase();return J(t,"opera/")||J(t,"opr/")||J(t,"opios/")?"Opera":J(t,"iemobile")?"IEMobile":J(t,"msie")||J(t,"trident/")?"IE":J(t,"edge/")?"Edge":J(t,"firefox/")?ni:J(t,"silk/")?"Silk":J(t,"blackberry")?"Blackberry":J(t,"webos")?"Webos":!J(t,"safari/")||J(t,"chrome/")||J(t,"crios/")||J(t,"android")?!J(t,"chrome/")&&!J(t,"crios/")||J(t,"edge/")?J(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":ii:"Safari"}var oi={Sc:"FirebaseCore-web",Uc:"FirebaseUI-web"};function ai(e,t){t=t||[];var n,i=[],r={};for(n in oi)r[oi[n]]=!0;for(n=0;n<t.length;n++)void 0!==r[t[n]]&&(delete r[t[n]],i.push(t[n]));return i.sort(),(t=i).length||(t=["FirebaseCore-web"]),"Browser"===(i=ei())?i=ri(r=si()):"Worker"===i&&(i=ri(r=si())+"-"+i),i+"/JsCore/"+e+"/"+t.join(",")}function si(){return o.navigator&&o.navigator.userAgent||""}function ui(e,t){e=e.split("."),t=t||o;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function ci(){try{var e=o.localStorage,t=vi();if(e)return e.setItem(t,"1"),e.removeItem(t),!Vn()||!!o.indexedDB}catch(e){return Zn()&&!!o.indexedDB}return!1}function li(){return(hi()||"chrome-extension:"===fi()||Xn())&&!ti()&&ci()&&!Zn()}function hi(){return"http:"===fi()||"https:"===fi()}function fi(){return o.location&&o.location.protocol||null}function di(e){return!Wn(e=e||si())&&ri(e)!=ni}function pi(e){return void 0===e?null:Fn(e)}function gi(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function mi(e){if(null!==e)return JSON.parse(e)}function vi(e){return e||Math.floor(1e9*Math.random()).toString()}function yi(e){return"Safari"!=ri(e=e||si())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function bi(){var e=o.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Ai(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=si(),t=ei(),this.b=Wn(e)||"ReactNative"===t}function wi(){var e=o.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function _i(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Ci(){return!(!ui("fireauth.oauthhelper",o)&&!ui("fireauth.iframe",o))}Ai.prototype.get=function(){var e=o.navigator;return!e||"boolean"!=typeof e.onLine||!hi()&&"chrome-extension:"!==fi()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Si,Ei={};function Ti(e){Ei[e]||(Ei[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var ki={};Object.defineProperty(ki,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ki,"abcd",{configurable:!0,enumerable:!0,value:2}),Si=2==ki.abcd}catch(e){Si=!1}function Ii(e,t,n){Si?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function xi(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Ii(e,n,t[n])}function Di(e){var t={};return xi(t,e),t}function Ni(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Ii(t,n,Ni(e[n]));return t}var Pi="EMAIL_SIGNIN",Oi="email",Mi="newEmail",Ri="requestType",$i="email",Li="fromEmail",Fi="data",Ui="operation";function Bi(e,t){this.code=Vi+e,this.message=t||qi[e]||""}function ji(e){var t=e&&e.code;return t?new Bi(t.substring(Vi.length),e.message):null}S(Bi,Error),Bi.prototype.w=function(){return{code:this.code,message:this.message}},Bi.prototype.toJSON=function(){return this.w()};var Vi="auth/",qi={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Hi(e){var t=e[Qi];if(void 0===t)throw new Bi("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Bi("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Wi];if(n&&"object"==typeof n){t=n[Ji];var i=n[Yi];if(n=n[Xi],"string"==typeof t&&t.length){if(this.a=t,void 0!==i&&"boolean"!=typeof i)throw new Bi("argument-error",Yi+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Bi("argument-error",Xi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Bi("argument-error",Ji+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new Bi("missing-android-pkg-name")}}else if(void 0!==n)throw new Bi("argument-error",Wi+" property must be a non null object when specified.");if(this.f=null,(t=e[Ki])&&"object"==typeof t){if("string"==typeof(t=t[Zi])&&t.length)this.f=t;else if(void 0!==t)throw new Bi("argument-error",Zi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Bi("argument-error",Ki+" property must be a non null object when specified.");if(void 0!==(t=e[zi])&&"boolean"!=typeof t)throw new Bi("argument-error",zi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Gi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Bi("argument-error",Gi+" property must be a non empty string when specified.");this.i=e||null}var Wi="android",Gi="dynamicLinkDomain",zi="handleCodeInApp",Ki="iOS",Qi="url",Yi="installApp",Xi="minimumVersion",Ji="packageName",Zi="bundleId";function er(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var tr=null,nr=null;function ir(e){this.c=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function rr(e){return(e=or(e))&&e.sub&&e.iss&&e.aud&&e.exp?new ir(e):null}function or(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),r=nr[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!tr){tr={},nr={};for(var e=0;e<65;e++)tr[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(nr[tr[e]]=e)&&(nr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;t(r<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,function(e){t+=String.fromCharCode(e)}),t}(e))}catch(e){}return null}ir.prototype.f=function(){return this.b};var ar,sr={Yc:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://securetoken.googleapis.com/v1/token",id:"p"},$c:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ad:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",jb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function ur(e){for(var t in sr)if(sr[t].id===e)return{firebaseEndpoint:(e=sr[t]).bb,secureTokenEndpoint:e.jb};return null}ar=ur("__EID__")?"__EID__":void 0;var cr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),lr=["client_id","response_type","scope","redirect_uri","state"],hr={Tc:{Oa:"locale",Ba:500,Aa:600,Pa:"facebook.com",ib:lr},Vc:{Oa:null,Ba:500,Aa:620,Pa:"github.com",ib:lr},Wc:{Oa:"hl",Ba:515,Aa:680,Pa:"google.com",ib:lr},bd:{Oa:"lang",Ba:485,Aa:705,Pa:"twitter.com",ib:cr}};function fr(e){for(var t in hr)if(hr[t].Pa==e)return hr[t];return null}function dr(e){var t={};t["facebook.com"]=yr,t["google.com"]=Ar,t["github.com"]=br,t["twitter.com"]=wr;var n=e&&e[gr];try{if(n)return t[n]?new t[n](e):new vr(e);if(void 0!==e[pr])return new mr(e)}catch(e){}return null}var pr="idToken",gr="providerId";function mr(e){var t=e[gr];if(!t&&e[pr]){var n=rr(e[pr]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Ii(this,"providerId",t),Ii(this,"isNewUser",n)}function vr(e){mr.call(this,e),Ii(this,"profile",Ni((e=mi(e.rawUserInfo||"{}"))||{}))}function yr(e){if(vr.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function br(e){if(vr.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ii(this,"username",this.profile&&this.profile.login||null)}function Ar(e){if(vr.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function wr(e){if(vr.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ii(this,"username",e.screenName||null)}function _r(e){var t=Qt(e),n=Kt(t,"link"),i=Kt(Qt(n),"link");return Kt(Qt(t=Kt(t,"deep_link_id")),"link")||t||i||n||e}function Cr(){}function Sr(e,t){return e.then(function(e){if(e[da]){var n=rr(e[da]);if(!n||t!=n.c)throw new Bi("user-mismatch");return e}throw new Bi("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==Vi+"user-not-found"?new Bi("user-mismatch"):e})}function Er(e,t){if(!t)throw new Bi("internal-error","failed to construct a credential");this.a=t,Ii(this,"providerId",e),Ii(this,"signInMethod",e)}function Tr(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function kr(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Er(e.providerId,e.pendingToken)}catch(e){}return null}function Ir(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Ii(this,"idToken",t.idToken),t.accessToken&&Ii(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Ii(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Bi("internal-error","failed to construct a credential");Ii(this,"accessToken",t.oauthToken),Ii(this,"secret",t.oauthTokenSecret)}Ii(this,"providerId",e),Ii(this,"signInMethod",n)}function xr(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:un(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Dr(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Ir(e.providerId,t,e.signInMethod)}catch(e){}}return null}function Nr(e,t){this.Cc=t||[],xi(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(fr(e)||{}).Oa||null,this.ab=null}function Pr(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Bi("argument-error",'SAML provider IDs must be prefixed with "saml."');Nr.call(this,e,[])}function Or(e){Nr.call(this,e,lr),this.a=[]}function Mr(){Or.call(this,"facebook.com")}function Rr(e){if(!e)throw new Bi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Mr).credential({accessToken:t})}function $r(){Or.call(this,"github.com")}function Lr(e){if(!e)throw new Bi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new $r).credential({accessToken:t})}function Fr(){Or.call(this,"google.com"),this.ua("profile")}function Ur(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new Fr).credential({idToken:n,accessToken:t})}function Br(){Nr.call(this,"twitter.com",cr)}function jr(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Bi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ir("twitter.com",n,"twitter.com")}function Vr(e,t,n){this.a=e,this.c=t,Ii(this,"providerId","password"),Ii(this,"signInMethod",n===Hr.EMAIL_LINK_SIGN_IN_METHOD?Hr.EMAIL_LINK_SIGN_IN_METHOD:Hr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function qr(e){return e&&e.email&&e.password?new Vr(e.email,e.password,e.signInMethod):null}function Hr(){xi(this,{providerId:"password",isOAuthProvider:!1})}function Wr(e,t){if(!(t=Gr(t)))throw new Bi("argument-error","Invalid email link!");return new Vr(e,t,Hr.EMAIL_LINK_SIGN_IN_METHOD)}function Gr(e){var t=Kt((e=new function(e){this.a=Qt(e)}(e=_r(e))).a,"oobCode")||null;return"signIn"===(Kt(e.a,"mode")||null)&&t?t:null}function zr(e){if(!(e.Ua&&e.Ta||e.Fa&&e.$))throw new Bi("internal-error");this.a=e,Ii(this,"providerId","phone"),Ii(this,"signInMethod","phone")}function Kr(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return R(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new zr(t)}return null}function Qr(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function Xr(e){try{this.a=e||Yr.auth()}catch(e){throw new Bi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}xi(this,{providerId:"phone",isOAuthProvider:!1})}function Jr(e,t){if(!e)throw new Bi("missing-verification-id");if(!t)throw new Bi("missing-verification-code");return new zr({Ua:e,Ta:t})}function Zr(e){if(e.temporaryProof&&e.phoneNumber)return new zr({Fa:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,i=e&&e.oauthTokenSecret,r=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Ur(o,n);case"facebook.com":return Rr(n);case"github.com":return Lr(n);case"twitter.com":return jr(n,i);default:return n||i||o||a?a?0==t.indexOf("saml.")?new Er(t,a):new Ir(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Or(t).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(e){return null}}function eo(e){if(!e.isOAuthProvider)throw new Bi("invalid-oauth-provider")}function to(e,t,n,i,r,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=i||null,this.h=o||null,this.a=r||null,!this.g&&!this.a)throw new Bi("invalid-auth-event");if(this.g&&this.a)throw new Bi("invalid-auth-event");if(this.g&&!this.f)throw new Bi("invalid-auth-event")}function no(e){return(e=e||{}).type?new to(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&ji(e.error),e.postBody):null}function io(){this.b=null,this.a=[]}S(vr,mr),S(yr,vr),S(br,vr),S(Ar,vr),S(wr,vr),Er.prototype.la=function(e){return Na(e,Tr(this))},Er.prototype.b=function(e,t){var n=Tr(this);return n.idToken=t,Pa(e,n)},Er.prototype.f=function(e,t){return Sr(Oa(e,Tr(this)),t)},Er.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ir.prototype.la=function(e){return Na(e,xr(this))},Ir.prototype.b=function(e,t){var n=xr(this);return n.idToken=t,Pa(e,n)},Ir.prototype.f=function(e,t){return Sr(Oa(e,xr(this)),t)},Ir.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Nr.prototype.Da=function(e){return this.zb=oe(e),this},S(Pr,Nr),S(Or,Nr),Or.prototype.ua=function(e){return F(this.a,e)||this.a.push(e),this},Or.prototype.Fb=function(){return V(this.a)},Or.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Bi("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ir(this.providerId,n,this.providerId)},S(Mr,Or),Ii(Mr,"PROVIDER_ID","facebook.com"),Ii(Mr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S($r,Or),Ii($r,"PROVIDER_ID","github.com"),Ii($r,"GITHUB_SIGN_IN_METHOD","github.com"),S(Fr,Or),Ii(Fr,"PROVIDER_ID","google.com"),Ii(Fr,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Br,Nr),Ii(Br,"PROVIDER_ID","twitter.com"),Ii(Br,"TWITTER_SIGN_IN_METHOD","twitter.com"),Vr.prototype.la=function(e){return this.signInMethod==Hr.EMAIL_LINK_SIGN_IN_METHOD?us(e,ja,{email:this.a,oobCode:this.c}):us(e,rs,{email:this.a,password:this.c})},Vr.prototype.b=function(e,t){return this.signInMethod==Hr.EMAIL_LINK_SIGN_IN_METHOD?us(e,Va,{idToken:t,email:this.a,oobCode:this.c}):us(e,Ja,{idToken:t,email:this.a,password:this.c})},Vr.prototype.f=function(e,t){return Sr(this.la(e),t)},Vr.prototype.w=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},xi(Hr,{PROVIDER_ID:"password"}),xi(Hr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),xi(Hr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),zr.prototype.la=function(e){return e.Va(Qr(this))},zr.prototype.b=function(e,t){var n=Qr(this);return n.idToken=t,us(e,as,n)},zr.prototype.f=function(e,t){var n=Qr(this);return n.operation="REAUTH",Sr(e=us(e,ss,n),t)},zr.prototype.w=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},Xr.prototype.Va=function(e,t){var n=this.a.c;return Se(t.verify()).then(function(i){if(!a(i))throw new Bi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return(r=n,o={phoneNumber:e,recaptchaToken:i},us(r,Ya,o)).then(function(e){return"function"==typeof t.reset&&t.reset(),e},function(e){throw"function"==typeof t.reset&&t.reset(),e});default:throw new Bi("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}var r,o})},xi(Xr,{PROVIDER_ID:"phone"}),xi(Xr,{PHONE_SIGN_IN_METHOD:"phone"}),to.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.i&&e.push(this.i),e.join("-")},to.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.w()}};var ro,oo=null;function ao(e){var t="unauthorized-domain",n=void 0,i=Qt(e);e=i.b,"chrome-extension"==(i=i.f)?n=le("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==i||"https"==i?n=le("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Bi.call(this,t,n)}function so(e,t,n){Bi.call(this,e,n),(e=t||{}).Ab&&Ii(this,"email",e.Ab),e.$&&Ii(this,"phoneNumber",e.$),e.credential&&Ii(this,"credential",e.credential)}function uo(e){if(e.code){var t=e.code||"";0==t.indexOf(Vi)&&(t=t.substring(Vi.length));var n={credential:Zr(e)};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.$=e.phoneNumber;else if(!n.credential)return new Bi(t,e.message||void 0);return new so(t,n,e.message)}return null}function co(){}function lo(e){return e.c||(e.c=e.b())}function ho(){}function fo(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var i=t[n];try{return new ActiveXObject(i),e.f=i}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function po(){}function go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.cc,this),this.a.onerror=w(this.Gb,this),this.a.onprogress=w(this.dc,this),this.a.ontimeout=w(this.hc,this)}function mo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function vo(e,t,n){this.reset(e,t,n,void 0,void 0)}function yo(e){this.f=e,this.b=this.c=this.a=null}function bo(e,t){this.name=e,this.value=t}io.prototype.subscribe=function(e){var t=this;this.a.push(e),this.b||(this.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=ui("universalLinks.subscribe",o))&&e(null,this.b))},io.prototype.unsubscribe=function(e){B(this.a,function(t){return t==e})},S(ao,Bi),S(so,Bi),so.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.w();return t&&ce(e,t),e},so.prototype.toJSON=function(){return this.w()},co.prototype.c=null,S(ho,co),ho.prototype.a=function(){var e=fo(this);return e?new ActiveXObject(e):new XMLHttpRequest},ho.prototype.b=function(){var e={};return fo(this)&&(e[0]=!0,e[1]=!0),e},ro=new ho,S(po,co),po.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new go;throw Error("Unsupported browser")},po.prototype.b=function(){return{}},(e=go.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.cc=function(){this.status=200,this.response=this.responseText=this.a.responseText,mo(this,4)},e.Gb=function(){this.status=500,this.response=this.responseText="",mo(this,4)},e.hc=function(){this.Gb()},e.dc=function(){this.status=200,mo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},vo.prototype.a=null,vo.prototype.reset=function(e,t,n,i,r){delete this.a},bo.prototype.toString=function(){return this.name};var Ao=new bo("SEVERE",1e3),wo=new bo("WARNING",900),_o=new bo("CONFIG",700),Co=new bo("FINE",500);yo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(I("Root logger has no level set."),null)}(this).value)for(g(t)&&(t=t()),e=new vo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var So,Eo={},To=null;function ko(e){var t;if(To||(To=new yo(""),(Eo[""]=To).c=_o),!(t=Eo[e])){t=new yo(e);var n=e.lastIndexOf("."),i=e.substr(n+1);(n=ko(e.substr(0,n))).b||(n.b={}),(n.b[i]=t).a=n,Eo[e]=t}return t}function Io(e,t){e&&e.log(Co,t,void 0)}function xo(e){this.f=e}function Do(e){Nt.call(this),this.u=e,this.readyState=No,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=ko("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}S(xo,co),xo.prototype.a=function(){return new Do(this.f)},xo.prototype.b=(So={},function(){return So}),S(Do,Nt);var No=0;function Po(e){e.c.read().then(e.bc.bind(e)).catch(e.Ma.bind(e))}function Oo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Mo(e)}function Mo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ro(e){Nt.call(this),this.headers=new Ut,this.D=e||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=$o,this.v=this.O=!1}(e=Do.prototype).open=function(e,t){if(this.readyState!=No)throw this.abort(),Error("Error reopening a connection");this.o=e,this.g=t,this.readyState=1,Mo(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.o,credentials:void 0,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.g,t)).then(this.gc.bind(this),this.Ma.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Oo(this,!1)),this.readyState=No},e.gc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Mo(this)),this.a&&(this.readyState=3,Mo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.ec.bind(this),this.Ma.bind(this)):void 0!==o.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Po(this)):e.text().then(this.fc.bind(this),this.Ma.bind(this)))))},e.bc=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Oo(this,!0):Mo(this),3==this.readyState&&Po(this)}},e.fc=function(e){this.a&&(this.response=this.responseText=e,Oo(this,!0))},e.ec=function(e){this.a&&(this.response=e,Oo(this,!0))},e.Ma=function(e){var t=this.h;t&&t.log(wo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Oo(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(wo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(wo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},S(Ro,Nt);var $o="";Ro.prototype.b=ko("goog.net.XhrIo");var Lo=/^https?$/i,Fo=["POST","PUT"];function Uo(e){return"content-type"==e.toLowerCase()}function Bo(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,jo(e),qo(e)}function jo(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Vo(e){if(e.c&&void 0!==r)if(e.A[1]&&4==Wo(e)&&2==Go(e))Io(e.b,zo(e,"Local request error detected and ignored"));else if(e.i&&4==Wo(e))Rt(e.Jb,0,e);else if(e.dispatchEvent("readystatechange"),4==Wo(e)){Io(e.b,zo(e,"Request complete")),e.c=!1;try{var t,n=Go(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(t=i)){var a;if(a=0===n){var s=String(e.l).match(Vt)[1]||null;if(!s&&o.self&&o.self.location){var u=o.self.location.protocol;s=u.substr(0,u.length-1)}a=!Lo.test(s?s.toLowerCase():"")}t=a}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Wo(e)?e.a.statusText:""}catch(t){Io(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+Go(e)+"]",jo(e)}}finally{qo(e)}}}function qo(e,t){if(e.a){Ho(e);var n=e.a,i=e.A[0]?l:null;e.a=null,e.A=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(t){(e=e.b)&&e.log(Ao,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Ho(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(o.clearTimeout(e.u),e.u=null)}function Wo(e){return e.a?e.a.readyState:0}function Go(e){try{return 2<Wo(e)?e.a.status:-1}catch(e){return-1}}function zo(e,t){return t+" ["+e.N+" "+e.l+" "+Go(e)+"]"}function Ko(e){var t=oa;this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.m=0}function Qo(e,t,n){e.a=!0,e.c=n,e.f=!t,Zo(e)}function Yo(e){if(e.a){if(!e.l)throw new ea(e);e.l=!1}}function Xo(e,t,n,i){e.g.push([t,n,i]),e.a&&Zo(e)}function Jo(e){return L(e.g,function(e){return g(e[1])})}function Zo(e){if(e.h&&e.a&&Jo(e)){var t=e.h,n=ia[t];n&&(o.clearTimeout(n.a),delete ia[t]),e.h=0}e.b&&(e.b.m--,delete e.b),t=e.c;for(var i=n=!1;e.g.length&&!e.i;){var r=e.g.shift(),a=r[0],s=r[1];if(r=r[2],a=e.f?s:a)try{var u=a.call(r||e.u,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(E(t)||"function"==typeof o.Promise&&t instanceof o.Promise)&&(i=!0,e.i=!0)}catch(i){t=i,e.f=!0,Jo(e)||(n=!0)}}e.c=t,i&&(u=w(e.o,e,!0),i=w(e.o,e,!1),t instanceof Ko?(Xo(t,u,i),t.A=!0):t.then(u,i)),n&&(t=new na(t),ia[t.a]=t,e.h=t.a)}function ea(){T.call(this)}function ta(){T.call(this)}function na(e){this.a=o.setTimeout(w(this.c,this),0),this.b=e}(e=Ro.prototype).Ga=function(){void 0!==r&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Io(this.b,zo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Io(this.b,zo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),qo(this))},e.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),qo(this,!0)),Ro.qb.va.call(this)},e.Jb=function(){this.qa||(this.I||this.i||this.f?Vo(this):this.vc())},e.vc=function(){Vo(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case $o:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Ao,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return Io(this.b,"Can not get response: "+e.message),null}},Ko.prototype.cancel=function(e){if(this.a)this.c instanceof Ko&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.m--,t.m<=0&&t.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(e=new ta(this),Yo(this),Qo(this,!1,e))}},Ko.prototype.o=function(e,t){this.i=!1,Qo(this,e,t)},Ko.prototype.then=function(e,t,n){var i,r,o=new ve(function(e,t){i=e,r=t});return Xo(this,i,function(e){e instanceof ta?o.cancel():r(e)}),o.then(e,t,n)},Ko.prototype.$goog_Thenable=!0,S(ea,T),ea.prototype.message="Deferred has already fired",ea.prototype.name="AlreadyCalledError",S(ta,T),ta.prototype.message="Deferred was canceled",ta.prototype.name="CanceledError",na.prototype.c=function(){throw delete ia[this.a],this.b};var ia={};function ra(e){var t,n,i,r,a,s=document,l=An(e).toString(),h=document.createElement("SCRIPT"),f={Lb:h,Ga:void 0},d=new Ko(f);return t=window.setTimeout(function(){aa(h,!0);var e=new ca(ua,"Timeout reached for loading script "+l);Yo(d),Qo(d,!1,e)},5e3),f.Ga=t,h.onload=h.onreadystatechange=function(){h.readyState&&"loaded"!=h.readyState&&"complete"!=h.readyState||(aa(h,!1,t),Yo(d),Qo(d,!0,null))},h.onerror=function(){aa(h,!0,t);var e=new ca(sa,"Error while loading script "+l);Yo(d),Qo(d,!1,e)},ce(f={},{type:"text/javascript",charset:"UTF-8"}),Rn(h,f),i=e,(n=h).src=An(i),null===c&&(c=(i=(i=o.document).querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&u.test(i)?i:""),(i=c)&&n.setAttribute("nonce",i),(r=s,(a=(r||document).getElementsByTagName("HEAD"))&&0!=a.length?a[0]:r.documentElement).appendChild(h),d}function oa(){if(this&&this.Lb){var e=this.Lb;e&&"SCRIPT"==e.tagName&&aa(e,!0,this.Ga)}}function aa(e,t,n){null!=n&&o.clearTimeout(n),e.onload=l,e.onerror=l,e.onreadystatechange=l,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var sa=0,ua=1;function ca(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),T.call(this,n),this.code=e}function la(e){this.f=e}function ha(e,t,n){if(this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||pa,this.f=oe(e.secureTokenHeaders||ga),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||ma,this.a=oe(e.firebaseHeaders||va),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==ei(),!(n=o.XMLHttpRequest||n&&Yr.INTERNAL.node&&Yr.INTERNAL.node.XMLHttpRequest)&&!Zn())throw new Bi("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Zn()?this.c=new xo(self):ti()?this.c=new la(n):this.c=new po}S(ca,T),S(la,co),la.prototype.a=function(){return new this.f},la.prototype.b=function(){return{}};var fa,da="idToken",pa=new Ai(3e4,6e4),ga={"Content-Type":"application/x-www-form-urlencoded"},ma=new Ai(3e4,6e4),va={"Content-Type":"application/json"};function ya(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ba(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function Aa(e,t,n,i,r,a,s){var u;(e=!((u=ri(u=si())!=ii?null:(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||We&&et&&!(9<et))||Zn()?w(e.o,e):(fa||(fa=new ve(function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(o[_a]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},Xo(ra(wn(wa,{onload:_a})),null,function(){t(Error("CORS_UNSUPPORTED"))},void 0))}(e,t)})),w(e.l,e)))(t,n,i,r,a,s)}ha.prototype.o=function(e,t,n,i,r,s){if(Zn()&&(void 0===o.fetch||void 0===o.Headers||void 0===o.Request))throw new Bi("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Ro(this.c);if(s){u.g=Math.max(0,s);var c=setTimeout(function(){u.dispatchEvent("timeout")},s)}Pt(u,"complete",function(){c&&clearTimeout(c);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Io(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)}),Ot(u,"ready",function(){c&&clearTimeout(c),Be(this)}),Ot(u,"timeout",function(){c&&clearTimeout(c),Be(this),t&&t(null)}),function(e,t,n,i,r){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():ro.a(),e.A=e.D?lo(e.D):lo(ro),e.a.onreadystatechange=w(e.Jb,e);try{Io(e.b,zo(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return Io(e.b,zo(e,"Error opening Xhr: "+t.message)),void Bo(e,t)}t=i||"";var s,u=new Ut(e.headers);r&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||a(e))R(e,t,void 0);else for(var n=Ft(e),i=Lt(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}(r,function(e,t){u.set(t,e)}),r=function(e){e:{for(var t=Uo,n=e.length,i=a(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return t<0?null:a(e)?e.charAt(t):e[t]}(u.U()),i=o.FormData&&t instanceof o.FormData,!F(Fo,n)||r||i||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{Ho(e),0<e.g&&(e.v=(s=e.a,We&&nt(9)&&"number"==typeof s.timeout&&void 0!==s.ontimeout),Io(e.b,zo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=w(e.Ga,e)):e.u=Rt(e.Ga,e.g,e)),Io(e.b,zo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Io(e.b,zo(e,"Send error: "+t.message)),Bo(e,t)}}(u,e,n,i,r)};var wa=new gn(yn,"https://apis.google.com/js/client.js?onload=%{onload}"),_a="__fcb"+Math.floor(1e6*Math.random()).toString();function Ca(e){if(!a(e=e.email)||!Qn.test(e))throw new Bi("invalid-email")}function Sa(e){"email"in e&&Ca(e)}function Ea(e){if(!e[da])throw new Bi("internal-error")}function Ta(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Bi("internal-error")}else{if(!e.sessionInfo)throw new Bi("missing-verification-id");if(!e.code)throw new Bi("missing-verification-code")}}ha.prototype.l=function(e,t,n,i,r){var o=this;fa.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:i,headers:r,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},ha.prototype.ob=function(){return us(this,Za,{})},ha.prototype.rb=function(e,t){return us(this,Xa,{idToken:e,email:t})},ha.prototype.sb=function(e,t){return us(this,Ja,{idToken:e,password:t})};var ka={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ia(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Bi("internal-error")}function xa(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&ln(e=new an(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Da(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=uo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=uo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=uo(e)):e.errorMessage&&(t=cs(e.errorMessage)),t)throw t;if(!e[da])throw new Bi("internal-error")}function Na(e,t){return t.returnIdpCredential=!0,us(e,es,t)}function Pa(e,t){return t.returnIdpCredential=!0,us(e,ns,t)}function Oa(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,us(e,ts,t)}function Ma(e){if(!e.oobCode)throw new Bi("invalid-action-code")}(e=ha.prototype).tb=function(e,t){var n={idToken:e},i=[];return ie(ka,function(e,r){var o=t[r];null===o?i.push(e):r in t&&(n[r]=o)}),i.length&&(n.deleteAttribute=i),us(this,Xa,n)},e.lb=function(e,t){return ce(e={requestType:"PASSWORD_RESET",email:e},t),us(this,Ga,e)},e.mb=function(e,t){return ce(e={requestType:"EMAIL_SIGNIN",email:e},t),us(this,Ha,e)},e.kb=function(e,t){return ce(e={requestType:"VERIFY_EMAIL",idToken:e},t),us(this,Wa,e)},e.Va=function(e){return us(this,os,e)},e.$a=function(e,t){return us(this,Qa,{oobCode:e,newPassword:t})},e.Ka=function(e){return us(this,$a,{oobCode:e})},e.Xa=function(e){return us(this,Ra,{oobCode:e})};var Ra={endpoint:"setAccountInfo",C:Ma,da:"email"},$a={endpoint:"resetPassword",C:Ma,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Bi("internal-error")}},La={endpoint:"signupNewUser",C:function(e){if(Ca(e),!e.password)throw new Bi("weak-password")},J:Ea,R:!0},Fa={endpoint:"createAuthUri"},Ua={endpoint:"deleteAccount",T:["idToken"]},Ba={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],C:function(e){if(!d(e.deleteProvider))throw new Bi("internal-error")}},ja={endpoint:"emailLinkSignin",T:["email","oobCode"],C:Ca,J:Ea,R:!0},Va={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],C:Ca,J:Ea,R:!0},qa={endpoint:"getAccountInfo"},Ha={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Bi("internal-error");Ca(e)},da:"email"},Wa={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],C:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Bi("internal-error")},da:"email"},Ga={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Bi("internal-error");Ca(e)},da:"email"},za={wb:!0,endpoint:"getProjectConfig",Ib:"GET"},Ka={wb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new Bi("internal-error")}},Qa={endpoint:"resetPassword",C:Ma,da:"email"},Ya={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Xa={endpoint:"setAccountInfo",T:["idToken"],C:Sa,R:!0},Ja={endpoint:"setAccountInfo",T:["idToken"],C:function(e){if(Sa(e),!e.password)throw new Bi("weak-password")},J:Ea,R:!0},Za={endpoint:"signupNewUser",J:Ea,R:!0},es={endpoint:"verifyAssertion",C:Ia,Qa:xa,J:Da,R:!0},ts={endpoint:"verifyAssertion",C:Ia,Qa:xa,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Bi("user-not-found");if(e.errorMessage)throw cs(e.errorMessage);if(!e[da])throw new Bi("internal-error")},R:!0},ns={endpoint:"verifyAssertion",C:function(e){if(Ia(e),!e.idToken)throw new Bi("internal-error")},Qa:xa,J:Da,R:!0},is={endpoint:"verifyCustomToken",C:function(e){if(!e.token)throw new Bi("invalid-custom-token")},J:Ea,R:!0},rs={endpoint:"verifyPassword",C:function(e){if(Ca(e),!e.password)throw new Bi("wrong-password")},J:Ea,R:!0},os={endpoint:"verifyPhoneNumber",C:Ta,J:Ea},as={endpoint:"verifyPhoneNumber",C:function(e){if(!e.idToken)throw new Bi("internal-error");Ta(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",uo(e);Ea(e)}},ss={Vb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",C:Ta,J:Ea};function us(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var i=e[t[n]];if(null==i||""===i)return!1}return!0}(n,t.T))return Ee(new Bi("internal-error"));var i,r=t.Ib||"POST";return Se(n).then(t.C).then(function(){return t.R&&(n.returnSecureToken=!0),function(e,t,n,i,r,o){var a=Qt(e.g+t);zt(a,"key",e.b),o&&zt(a,"cb",C().toString());var s="GET"==n;if(s)for(var u in i)i.hasOwnProperty(u)&&zt(a,u,i[u]);return new ve(function(t,o){Aa(e,a.toString(),function(e){e?e.error?o(ls(e,r||{})):t(e):o(new Bi("network-request-failed"))},n,s?void 0:Fn(gi(i)),e.a,e.h.get())})}(e,t.endpoint,r,n,t.Vb,t.wb||!1)}).then(function(e){return i=e,t.Qa?t.Qa(n,i):i}).then(t.J).then(function(){if(!t.da)return i;if(!(t.da in i))throw new Bi("internal-error");return i[t.da]})}function cs(e){return ls({error:{errors:[{message:e}],code:400,message:e}})}function ls(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new Bi(i[n]):null)return n;for(var r in n=e.error&&e.error.message||"",ce(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,i)if(0===n.indexOf(r))return new Bi(i[r],t);return!t&&e&&(t=pi(e)),new Bi("internal-error",t)}var hs=new gn(yn,"https://apis.google.com/js/api.js?onload=%{onload}"),fs=new Ai(3e4,6e4),ds=new Ai(5e3,15e3),ps=null;function gs(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Yt(this.i,"/__/auth/iframe"),zt(this.a,"apiKey",this.g),zt(this.a,"appName",this.h),this.b=null,this.c=[]}function ms(e,t,n,i,r){this.o=e,this.l=t,this.c=n,this.m=i,this.h=this.g=this.i=null,this.a=r,this.f=null}function vs(e){try{return Yr.app(e).auth().ya()}catch(e){return[]}}function ys(e,t,n,i,r){this.l=e,this.f=t,this.b=n,this.c=i||null,this.h=r||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function bs(e){var t,n=qn();return(t=e,us(t,za,{}).then(function(e){return e.authorizedDomains||[]})).then(function(e){e:{var t=Qt(n),i=t.f;t=t.b;for(var r=0;r<e.length;r++){var o=e[r],a=t,s=i;if(a=0==o.indexOf("chrome-extension://")?Qt(o).b==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(Kn.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){e=!0;break e}}e=!1}if(!e)throw new ao(qn())})}function As(e){return e.m||(e.m=Yn().then(function(){if(!e.u){var t=e.c,n=e.h,i=vs(e.b),r=new gs(e.l,e.f,e.b);r.f=t,r.b=n,r.c=V(i||[]),e.u=r.toString()}e.i=new function(e){var t;this.b=e,this.a=null,this.gb=(t=this,(ps||(ps=new ve(function(e,t){function n(){bi(),ui("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){bi(),t(Error("Network Error"))},timeout:fs.get()})}if(ui("gapi.iframes.Iframe"))e();else if(ui("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();o[i]=function(){ui("gapi.load")?n():t(Error("Network Error"))},Se(ra(i=wn(hs,{onload:i}))).s(function(){t(Error("Network Error"))})}}).s(function(e){throw ps=null,e}))).then(function(){return new ve(function(e,n){ui("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ui("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){function r(){clearTimeout(o),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ds.get());i.ping(r).then(r,function(){n(Error("Network Error"))})})})}))}(e.u),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");var t,n;t=e.i,n=function(t){var n={};if(t&&t.authEvent){var i=!1;for(t=no(t.authEvent),n=0;n<e.g.length;n++)i=e.g[n](t)||i;return(n={}).status=i?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)},t.gb.then(function(){t.a.register("authEvent",n,ui("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(e)})),e.m}function ws(e){return e.o||(e.v=e.c?ai(e.c,vs(e.b)):null,e.o=new ha(e.f,ur(e.h),e.v)),e.o}function _s(e,t,n,i,r,o,a,s,u,c){return(e=new ms(e,t,n,i,r)).i=o,e.g=a,e.h=s,e.b=oe(u||null),e.f=c,e.toString()}function Cs(e){if(this.a=e||Yr.INTERNAL.reactNative&&Yr.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Bi("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ss(e){this.b=e,this.a={},this.c=w(this.f,this)}gs.prototype.toString=function(){return this.f?zt(this.a,"v",this.f):cn(this.a.a,"v"),this.b?zt(this.a,"eid",this.b):cn(this.a.a,"eid"),this.c.length?zt(this.a,"fw",this.c.join(",")):cn(this.a.a,"fw"),this.a.toString()},ms.prototype.toString=function(){var e=Yt(this.o,"/__/auth/handler");if(zt(e,"apiKey",this.l),zt(e,"appName",this.c),zt(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=Yr.app(this.c).auth().ea()}catch(e){n=null}for(var i in t.ab=n,zt(e,"providerId",this.a.providerId),n=gi((t=this.a).zb))n[i]=n[i].toString();i=t.Cc,n=oe(n);for(var r=0;r<i.length;r++){var o=i[r];o in n&&delete n[o]}t.eb&&t.ab&&!n[t.eb]&&(n[t.eb]=t.ab),re(n)||zt(e,"customParameters",pi(n))}if("function"==typeof this.a.Fb&&(t=this.a.Fb()).length&&zt(e,"scopes",t.join(",")),this.i?zt(e,"redirectUrl",this.i):cn(e.a,"redirectUrl"),this.g?zt(e,"eventId",this.g):cn(e.a,"eventId"),this.h?zt(e,"v",this.h):cn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Kt(e,a)&&zt(e,a,this.b[a]);return this.f?zt(e,"eid",this.f):cn(e.a,"eid"),(a=vs(this.c)).length&&zt(e,"fw",a.join(",")),e.toString()},(e=ys.prototype).Ea=function(e,t,n){var i=new Bi("popup-closed-by-user"),r=new Bi("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){var n,i;(n=o,i={type:"webStorageSupport"},As(n).then(function(){return e=n.i,t=i,e.gb.then(function(){return new ve(function(n){e.a.send(t.type,t,n,ui("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,t}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then(function(n){n||(e&&Gn(e),t(r),a=!0)})}).s(function(){}).then(function(){if(!a)return t=e,new ve(function(e){return function n(){$t(2e3).then(function(){if(t&&!t.closed)return n();e()})}()});var t}).then(function(){if(!a)return $t(n).then(function(){t(i)})})},e.Mb=function(){var e=si();return!di(e)&&!yi(e)},e.Hb=function(){return!1},e.Db=function(e,t,n,i,r,o,a){if(!e)return Ee(new Bi("popup-blocked"));if(a&&!di())return this.ga().s(function(t){Gn(e),r(t)}),i(),Se();this.a||(this.a=bs(ws(this)));var s=this;return this.a.then(function(){var t=s.ga().s(function(t){throw Gn(e),r(t),t});return i(),t}).then(function(){eo(n),a||Hn(_s(s.l,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)}).s(function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e})},e.Ca=function(e,t,n){this.a||(this.a=bs(ws(this)));var i=this;return this.a.then(function(){eo(t),Hn(_s(i.l,i.f,i.b,e,t,qn(),n,i.c,void 0,i.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e})},e.ga=function(){var e=this;return As(this).then(function(){return e.i.gb}).s(function(){throw e.a=null,new Bi("network-request-failed")})},e.Ob=function(){return!0},e.wa=function(e){this.g.push(e)},e.La=function(e){B(this.g,function(t){return t==e})},(e=Cs.prototype).get=function(e){return Se(this.a.getItem(e)).then(function(e){return e&&mi(e)})},e.set=function(e,t){return Se(this.a.setItem(e,pi(t)))},e.P=function(e){return Se(this.a.removeItem(e))},e.Y=function(){},e.ca=function(){};var Es,Ts=[];function ks(e){this.a=e}function Is(e){this.c=e,this.b=!1,this.a=[]}function xs(e,t,n,i){var r,o,a,s,u=n||{},c=null;if(e.b)return Ee(Error("connection_unavailable"));var l=i?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ve(function(n,i){h?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){i(Error("unsupported_event"))},l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===r&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){i(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):i(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),i(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:r,data:u},[h.port2])):i(Error("connection_unavailable"))}).then(function(t){return Ds(e,c),t}).s(function(t){throw Ds(e,c),t})}function Ds(e,t){if(t){var n=t.messageChannel,i=t.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close()),B(e.a,function(e){return e==t})}}function Ns(){if(!Os())throw new Bi("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=o.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var e,t=this;Zn()&&self?(this.m=function(){var e=Zn()?self:null;if(R(Ts,function(n){n.b==e&&(t=n)}),!t){var t=new Ss(e);Ts.push(t)}return t}(),this.m.subscribe("keyChanged",function(e,n){return Fs(t).then(function(e){return 0<e.length&&R(t.a,function(t){t(e)}),{keyProcessed:F(e,n.key)}})}),this.m.subscribe("ping",function(){return Se(["keyChanged"])})):(e=o.navigator,e&&e.serviceWorker?Se().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):Se(null)).then(function(e){(t.h=e)&&(t.g=new Is(new ks(e)),xs(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&F(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function Ps(e){return e.o||(e.o=function e(t){return new ve(function(n,i){var r=t.l.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}i(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){i(e)}},r.onsuccess=function(r){var o;(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(r):(o=t,new ve(function(e,t){var n=o.l.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})).then(function(){return e(t)}).then(function(e){n(e)}).s(function(e){i(e)})}})}(e)),e.o}function Os(){try{return!!o.indexedDB}catch(e){return!1}}function Ms(e){return e.objectStore("firebaseLocalStorage")}function Rs(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function $s(e){return new ve(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function Ls(e,t){return e.g&&e.h&&((n=o.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?xs(e.g,"keyChanged",{key:t},e.u).then(function(){}).s(function(){}):Se();var n}function Fs(e){return Ps(e).then(function(e){var t=Ms(Rs(e,!1));return t.getAll?$s(t.getAll()):new ve(function(e,n){var i=[],r=t.openCursor();r.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},r.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},i=[];if(0==e.b){for(i=0;i<t.length;i++)n[t[i].fbase_key]=t[i].value;i=function e(t,n){var i,r=[];for(i in t)i in n?typeof t[i]!=typeof n[i]?r.push(i):"object"==typeof t[i]&&null!=t[i]&&null!=n[i]?0<e(t[i],n[i]).length&&r.push(i):t[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in t||r.push(i);return r}(e.c,n),e.c=n}return i})}function Us(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Bs(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Se().then(function(){if(Os()){var e=vi(),i="__sak"+e;return Es||(Es=new Ns),(n=Es).set(i,e).then(function(){return n.get(i)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.P(i)}).then(function(){return n}).s(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.Y(function(e){R(t.a,function(t){t(e)})}),e})}function js(){this.a={},this.type="inMemory"}function Vs(){if(!function(){var e="Node"==ei();if(!(e=qs()||e&&Yr.INTERNAL.node&&Yr.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==ei())throw new Bi("internal-error","The LocalStorage compatibility library was not found.");throw new Bi("web-storage-unsupported")}this.a=qs()||Yr.INTERNAL.node.localStorage,this.type="localStorage"}function qs(){try{var e=o.localStorage,t=vi();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Hs(){this.type="nullStorage"}function Ws(){if(!function(){var e="Node"==ei();if(!(e=Gs()||e&&Yr.INTERNAL.node&&Yr.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==ei())throw new Bi("internal-error","The SessionStorage compatibility library was not found.");throw new Bi("web-storage-unsupported")}this.a=Gs()||Yr.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Gs(){try{var e=o.sessionStorage,t=vi();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}Ss.prototype.f=function(e){var t=e.data.eventType,n=e.data.eventId,i=this.a[t];if(i&&0<i.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var r=[];R(i,function(t){r.push(Se().then(function(){return t(e.origin,e.data.data)}))}),ke(r).then(function(i){var r=[];R(i,function(e){r.push({fulfilled:e.Eb,value:e.value,reason:e.reason?e.reason.message:void 0})}),R(r,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:r})})}},Ss.prototype.subscribe=function(e,t){re(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[e]&&(this.a[e]=[]),this.a[e].push(t)},Ss.prototype.unsubscribe=function(e,t){void 0!==this.a[e]&&t?(B(this.a[e],function(e){return e==t}),0==this.a[e].length&&delete this.a[e]):t||delete this.a[e],re(this.a)&&this.b.removeEventListener("message",this.c)},ks.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Is.prototype.close=function(){for(;0<this.a.length;)Ds(this,this.a[0]);this.b=!0},(e=Ns.prototype).set=function(e,t){var n,i=!1,r=this;return Ps(this).then(function(t){return $s((t=Ms(Rs(n=t,!0))).get(e))}).then(function(o){var a=Ms(Rs(n,!0));return o?(o.value=t,$s(a.put(o))):(r.b++,i=!0,(o={}).fbase_key=e,o.value=t,$s(a.add(o)))}).then(function(){return r.c[e]=t,Ls(r,e)}).ia(function(){i&&r.b--})},e.get=function(e){return Ps(this).then(function(t){return $s(Ms(Rs(t,!1)).get(e))}).then(function(e){return e&&e.value})},e.P=function(e){var t=!1,n=this;return Ps(this).then(function(i){return t=!0,n.b++,$s(Ms(Rs(i,!0)).delete(e))}).then(function(){return delete n.c[e],Ls(n,e)}).ia(function(){t&&n.b--})},e.Y=function(e){var t;0==this.a.length&&(Us(t=this),function e(){t.f=setTimeout(function(){t.i=Fs(t).then(function(e){0<e.length&&R(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(e)},e.ca=function(e){B(this.a,function(t){return t==e}),0==this.a.length&&Us(this)},(e=Bs.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},e.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},e.P=function(e){return this.b.then(function(t){return t.P(e)})},e.Y=function(e){this.a.push(e)},e.ca=function(e){B(this.a,function(t){return t==e})},(e=js.prototype).get=function(e){return Se(this.a[e])},e.set=function(e,t){return this.a[e]=t,Se()},e.P=function(e){return delete this.a[e],Se()},e.Y=function(){},e.ca=function(){},(e=Vs.prototype).get=function(e){var t=this;return Se().then(function(){return mi(t.a.getItem(e))})},e.set=function(e,t){var n=this;return Se().then(function(){var i=pi(t);null===i?n.P(e):n.a.setItem(e,i)})},e.P=function(e){var t=this;return Se().then(function(){t.a.removeItem(e)})},e.Y=function(e){o.window&&bt(o.window,"storage",e)},e.ca=function(e){o.window&&_t(o.window,"storage",e)},(e=Hs.prototype).get=function(){return Se(null)},e.set=function(){return Se()},e.P=function(){return Se()},e.Y=function(){},e.ca=function(){},(e=Ws.prototype).get=function(e){var t=this;return Se().then(function(){return mi(t.a.getItem(e))})},e.set=function(e,t){var n=this;return Se().then(function(){var i=pi(t);null===i?n.P(e):n.a.setItem(e,i)})},e.P=function(e){var t=this;return Se().then(function(){t.a.removeItem(e)})},e.Y=function(){},e.ca=function(){};var zs,Ks,Qs={B:Vs,Sa:Ws},Ys={B:Vs,Sa:Ws},Xs={B:Cs,Sa:Hs},Js={B:Vs,Sa:Hs},Zs={Xc:"local",NONE:"none",Zc:"session"};function eu(){var e=!(yi(si())||!Jn()),t=di(),n=ci();this.o=e,this.h=t,this.m=n,this.a={},zs||(zs=new function(){var e={};e.Browser=Qs,e.Node=Ys,e.ReactNative=Xs,e.Worker=Js,this.a=e[ei()]}),e=zs;try{this.g=!Vn()&&Ci()||!o.indexedDB?new e.a.B:new Bs(Zn()?new js:new e.a.B)}catch(e){this.g=new js,this.h=!0}try{this.i=new e.a.Sa}catch(e){this.i=new js}this.l=new js,this.f=w(this.Nb,this),this.b={}}function tu(){return Ks||(Ks=new eu),Ks}function nu(e,t){switch(t){case"session":return e.i;case"none":return e.l;default:return e.g}}function iu(e,t){return"firebase:"+e.name+(t?":"+t:"")}function ru(e,t,n){return n=iu(t,n),"local"==t.B&&(e.b[n]=null),nu(e,t.B).P(n)}function ou(e){e.c&&(clearInterval(e.c),e.c=null)}(e=eu.prototype).get=function(e,t){return nu(this,e.B).get(iu(e,t))},e.set=function(e,t,n){var i=iu(e,n),r=this,o=nu(this,e.B);return o.set(i,t).then(function(){return o.get(i)}).then(function(t){"local"==e.B&&(r.b[i]=t)})},e.addListener=function(e,t,n){var i;e=iu(e,t),this.m&&(this.b[e]=o.localStorage.getItem(e)),re(this.a)&&(nu(this,"local").Y(this.f),this.h||(Vn()||!Ci())&&o.indexedDB||!this.m||(ou(i=this),i.c=setInterval(function(){for(var e in i.a){var t=o.localStorage.getItem(e),n=i.b[e];t!=n&&(i.b[e]=t,t=new ct({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),i.Nb(t))}},1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=iu(e,t),this.a[e]&&(B(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),re(this.a)&&(nu(this,"local").ca(this.f),ou(this))},e.Nb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=o.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.Ya(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?nu(this,"local").ca(this.f):ou(this),this.o)if(n=o.localStorage.getItem(t),(i=e.a.newValue)!==n)null!==i?o.localStorage.setItem(t,i):o.localStorage.removeItem(t);else if(this.b[t]===i&&void 0===e.a.a)return;var a=this;n=function(){void 0===e.a.a&&a.b[t]===o.localStorage.getItem(t)||(a.b[t]=o.localStorage.getItem(t),a.Ya(t))},We&&et&&10==et&&o.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else R(e,w(this.Ya,this))},e.Ya=function(e){this.a[e]&&R(this.a[e],function(e){e()})};var au,su={name:"authEvent",B:"local"};function uu(e,t){this.b=cu,this.f=o.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.m=o.Int32Array?new Int32Array(64):Array(64),void 0!==au||(au=o.Int32Array?new Int32Array(mu):mu),this.reset()}S(uu,function(){this.b=-1});for(var cu=64,lu=cu-1,hu=[],fu=0;fu<lu;fu++)hu[fu]=0;var du=j(128,hu);function pu(e){for(var t=e.f,n=e.m,i=0,r=0;r<t.length;)n[i++]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r=4*i;for(t=16;t<64;t++){r=0|n[t-15],i=0|n[t-2];var o=(0|n[t-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[t-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[t]=o+a|0}i=0|e.a[0],r=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|au[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=r,r=i,i=a+f|0}e.a[0]=e.a[0]+i|0,e.a[1]=e.a[1]+r|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function gu(e,t,n){void 0===n&&(n=t.length);var i=0,r=e.c;if(a(t))for(;i<n;)e.f[r++]=t.charCodeAt(i++),r==e.b&&(pu(e),r=0);else{if(!p(t))throw Error("message must be string or array");for(;i<n;){var o=t[i++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[r++]=o,r==e.b&&(pu(e),r=0)}}e.c=r,e.g+=n}uu.prototype.reset=function(){this.g=this.c=0,this.a=o.Int32Array?new Int32Array(this.h):V(this.h)};var mu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vu(){uu.call(this,8,yu)}S(vu,uu);var yu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bu(e,t,n,i,r){this.l=e,this.i=t,this.m=n,this.o=i||null,this.u=r||null,this.h=t+":"+n,this.v=new function(){this.a=tu()},this.g=new function(e){this.a=e,this.b=tu()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function Au(e){return new Bi("invalid-cordova-configuration",e)}function wu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function _u(e){return e.f||(e.f=e.ga().then(function(){return new ve(function(t){e.wa(function n(i){return t(i),e.La(n),!1}),function(e){function t(t){i=!0,r&&r.cancel(),Cu(e).then(function(i){var r=n;if(i&&t&&t.url){var o=null;-1!=(r=_r(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=mi(Kt(o=Qt(r),"firebaseError")||null))?ji(o):null)?new to(i.c,i.b,null,null,o):new to(i.c,i.b,r,i.f)),r=o||n}wu(e,r)})}var n=new to("unknown",null,null,null,new Bi("no-auth-event")),i=!1,r=$t(500).then(function(){return Cu(e).then(function(){i||wu(e,n)})}),a=o.handleOpenURL;o.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ui("BuildInfo.packageName",o).toLowerCase()+"://")&&t({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}},oo||(oo=new io),oo.subscribe(t)}(e)})})),e.f}function Cu(e){var t,n=null;return(t=e.g,t.b.get(su,t.a).then(function(e){return no(e)})).then(function(t){return n=t,ru((t=e.g).b,su,t.a)}).then(function(){return n})}(e=bu.prototype).ga=function(){return this.za?this.za:this.za=(Xn(void 0)?Yn().then(function(){return new ve(function(e,t){var n=o.document,i=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),e()},!1)})}):Ee(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof ui("universalLinks.subscribe",o))throw Au("cordova-universal-links-plugin-fix is not installed");if(void 0===ui("BuildInfo.packageName",o))throw Au("cordova-plugin-buildinfo is not installed");if("function"!=typeof ui("cordova.plugins.browsertab.openUrl",o))throw Au("cordova-plugin-browsertab is not installed");if("function"!=typeof ui("cordova.InAppBrowser.open",o))throw Au("cordova-plugin-inappbrowser is not installed")},function(){throw new Bi("cordova-not-ready")})},e.Ea=function(e,t){return t(new Bi("operation-not-supported-in-this-environment")),Se()},e.Db=function(){return Ee(new Bi("operation-not-supported-in-this-environment"))},e.Ob=function(){return!1},e.Mb=function(){return!0},e.Hb=function(){return!0},e.Ca=function(e,t,n){if(this.c)return Ee(new Bi("redirect-operation-pending"));var i=this,r=o.document,a=null,s=null,u=null,c=null;return this.c=Se().then(function(){return eo(t),_u(i)}).then(function(){return function(e,t,n,i){var r=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new to(t,i,null,r,new Bi("no-auth-event")),s=ui("BuildInfo.packageName",o);if("string"!=typeof s)throw new Bi("invalid-cordova-configuration");var u=ui("BuildInfo.displayName",o),c={};if(si().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!si().toLowerCase().match(/android/))return Ee(new Bi("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),r=function(e){var t=new vu;gu(t,e),e=[];var n=8*t.g;t.c<56?gu(t,du,56-t.c):gu(t,du,t.b-(t.c-56));for(var i=63;56<=i;i--)t.f[i]=255&n,n/=256;for(pu(t),i=n=0;i<t.i;i++)for(var r=24;0<=r;r-=8)e[n++]=t.a[i]>>r&255;return $(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(r),c.sessionId=r;var l=_s(e.l,e.i,e.m,t,n,null,i,e.o,c,e.u);return e.ga().then(function(){var t=e.h;return e.v.a.set(su,a.w(),t)}).then(function(){var t=ui("cordova.plugins.browsertab.isAvailable",o);if("function"!=typeof t)throw new Bi("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!=typeof(n=ui("cordova.plugins.browsertab.openUrl",o)))throw new Bi("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=ui("cordova.InAppBrowser.open",o)))throw new Bi("invalid-cordova-configuration");t=si(),e.a=n(l,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,e,t,n)}).then(function(){return new ve(function(e,t){s=function(){var t=ui("cordova.plugins.browsertab.close",o);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(s),u=function(){a||(a=$t(2e3).then(function(){t(new Bi("redirect-cancelled-by-user"))}))},c=function(){wi()&&u()},r.addEventListener("resume",u,!1),si().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",c,!1)}).s(function(e){return Cu(i).then(function(){throw e})})}).ia(function(){u&&r.removeEventListener("resume",u,!1),c&&r.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.La(s),i.c=null})},e.wa=function(e){this.b.push(e),_u(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new to("unknown",null,null,null,new Bi("no-auth-event")),e(t))})},e.La=function(e){B(this.b,function(t){return t==e})};var Su={name:"pendingRedirect",B:"session"};function Eu(e){return ru(e.b,Su,e.a)}function Tu(e,t,n){this.i={},this.u=0,this.A=e,this.l=t,this.o=n,this.h=[],this.f=!1,this.m=w(this.cb,this),this.b=new $u,this.v=new Bu,this.g=new function(e){this.a=e,this.b=tu()}(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.v,this.c.linkViaPopup=this.v,this.c.reauthViaPopup=this.v,this.a=ku(this.A,this.l,this.o,ar)}function ku(e,t,n,i){var r=Yr.SDK_VERSION||null;return Xn()?new bu(e,t,n,r,i):new ys(e,t,n,r,i)}function Iu(e){e.f||(e.f=!0,e.a.wa(e.m));var t=e.a;return e.a.ga().s(function(n){throw e.a==t&&e.reset(),n})}function xu(e){e.a.Mb()&&Iu(e).s(function(t){var n=new to("unknown",null,null,null,new Bi("operation-not-supported-in-this-environment"));Ou(t)&&e.cb(n)}),e.a.Hb()||Lu(e.b)}(e=Tu.prototype).reset=function(){this.f=!1,this.a.La(this.m),this.a=ku(this.A,this.l,this.o),this.i={}},e.Za=function(){this.b.Za()},e.subscribe=function(e){if(F(this.h,e)||this.h.push(e),!this.f){var t=this;(n=this.g,n.b.get(Su,n.a).then(function(e){return"pending"==e})).then(function(e){e?Eu(t.g).then(function(){Iu(t).s(function(e){var n=new to("unknown",null,null,null,new Bi("operation-not-supported-in-this-environment"));Ou(e)&&t.cb(n)})}):xu(t)}).s(function(){xu(t)})}var n},e.unsubscribe=function(e){B(this.h,function(t){return t==e})},e.cb=function(e){if(!e)throw new Bi("invalid-auth-event");if(6e5<=C()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,i),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=C())),t=!0;break}}return Lu(this.b),t};var Du=new Ai(2e3,1e4),Nu=new Ai(3e4,6e4);function Pu(e,t,n,i,r,o){return e.a.Db(t,n,i,function(){e.f||(e.f=!0,e.a.wa(e.m))},function(){e.reset()},r,o)}function Ou(e){return!(!e||"auth/cordova-not-ready"!=e.code)}Tu.prototype.fa=function(){return this.b.fa()},Tu.prototype.Ca=function(e,t,n){var i,r,o=this;return(r=this.g,r.b.set(Su,"pending",r.a)).then(function(){return o.a.Ca(e,t,n).s(function(e){if(Ou(e))throw new Bi("operation-not-supported-in-this-environment");return i=e,Eu(o.g).then(function(){throw i})}).then(function(){return o.a.Ob()?new ve(function(){}):Eu(o.g).then(function(){return o.fa()}).then(function(){}).s(function(){})})})},Tu.prototype.Ea=function(e,t,n,i){return this.a.Ea(n,function(n){e.ha(t,null,n,i)},Du.get())};var Mu={};function Ru(e,t,n){var i=t+":"+n;return Mu[i]||(Mu[i]=new Tu(e,t,n)),Mu[i]}function $u(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Lu(e){e.g||(e.g=!0,Uu(e,!1,null,null))}function Fu(e,t){if(e.b=function(){return Se(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Uu(e,t,n,i){t?i?function(e,t){if(e.b=function(){return Ee(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,i):Fu(e,n):Fu(e,{user:null}),e.f=[],e.c=[]}function Bu(){}function ju(){this.ub=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ub},set:function(e){this.ub=e},enumerable:!1})}function Vu(e,t){this.a=t,Ii(this,"verificationId",e)}function qu(e,t,n,i){return new Xr(e).Va(t,n).then(function(e){return new Vu(e,i)})}function Hu(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Wu(e){this.f=e,this.b=this.a=null,this.c=0}function Gu(e,t){var n=t[da],i=t.refreshToken;t=zu(t.expiresIn),e.b=n,e.c=t,e.a=i}function zu(e){return C()+1e3*parseInt(e,10)}function Ku(e,t){this.a=e||null,this.b=t||null,xi(this,{lastSignInTime:_i(t||null),creationTime:_i(e||null)})}function Qu(e,t){for(var n in ut.call(this,e),t)this[n]=t[n]}function Yu(e,t,n){var i;this.G=[],this.l=e.apiKey,this.o=e.appName,this.u=e.authDomain||null,e=Yr.SDK_VERSION?ai(Yr.SDK_VERSION):null,this.c=new ha(this.l,ur(ar),e),this.h=new Wu(this.c),ic(this,t[da]),Gu(this.h,t),Ii(this,"refreshToken",this.h.a),ac(this,n||{}),Nt.call(this),this.I=!1,this.u&&li()&&(this.a=Ru(this.u,this.l,this.o)),this.N=[],this.i=null,this.A=(i=this,new Hu(function(){return i.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var e=i.h.c-C()-3e5;return 0<e?e:0})),this.V=w(this.Ha,this);var r=this;this.ka=null,this.ta=function(e){r.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){Ju(r,e.c)},this.W=null}function Xu(e,t){e.X&&_t(e.X,"languageCodeChanged",e.ta),(e.X=t)&&bt(t,"languageCodeChanged",e.ta)}function Ju(e,t){e.O=t,ba(e.c,Yr.SDK_VERSION?ai(Yr.SDK_VERSION,e.O):null)}function Zu(e,t){e.W&&_t(e.W,"frameworkChanged",e.sa),(e.W=t)&&bt(t,"frameworkChanged",e.sa)}function ec(e){try{return Yr.app(e.o).auth()}catch(t){throw new Bi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function tc(e){e.D||e.A.b||(e.A.start(),_t(e,"tokenChanged",e.V),bt(e,"tokenChanged",e.V))}function nc(e){_t(e,"tokenChanged",e.V),e.A.stop()}function ic(e,t){e.ra=t,Ii(e,"_lat",t)}function rc(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return ke(t).then(function(){return e})}function oc(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function ac(e,t){xi(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new Ku(t.createdAt,t.lastLoginAt),providerData:[]})}function sc(){}function uc(e){return Se().then(function(){if(e.D)throw new Bi("app-deleted")})}function cc(e){return $(e.providerData,function(e){return e.providerId})}function lc(e,t){t&&(hc(e,t.providerId),e.providerData.push(t))}function hc(e,t){B(e.providerData,function(e){return e.providerId==t})}function fc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Ii(e,t,n)}function dc(e,t){var n,i,r;e!=t&&(xi(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?Ii(e,"metadata",new Ku((r=t.metadata).a,r.b)):Ii(e,"metadata",new Ku),R(t.providerData,function(t){lc(e,t)}),n=e.h,i=t.h,n.b=i.b,n.a=i.a,n.c=i.c,Ii(e,"refreshToken",e.h.a))}function pc(e){return e.F().then(function(t){var n,i,r=e.isAnonymous;return(n=e,i=t,us(n.c,qa,{idToken:i}).then(w(n.wc,n))).then(function(){return r||fc(e,"isAnonymous",!1),t})})}function gc(e,t){t[da]&&e.ra!=t[da]&&(Gu(e.h,t),e.dispatchEvent(new Qu("tokenChanged")),ic(e,t[da]),fc(e,"refreshToken",e.h.a))}function mc(e,t){return pc(e).then(function(){if(F(cc(e),t))return rc(e).then(function(){throw new Bi("provider-already-linked")})})}function vc(e,t,n){return Di({user:e,credential:Zr(t),additionalUserInfo:t=dr(t),operationType:n})}function yc(e,t){return gc(e,t),e.reload().then(function(){return e})}function bc(e,t,n,i,r){if(!li())return Ee(new Bi("operation-not-supported-in-this-environment"));if(e.i&&!r)return Ee(e.i);var o=fr(n.providerId),a=vi(e.uid+":::"),s=null;(!di()||Jn())&&e.u&&n.isOAuthProvider&&(s=_s(e.u,e.l,e.o,t,n,null,a,Yr.SDK_VERSION||null));var u=zn(s,o&&o.Ba,o&&o.Aa);return i=i().then(function(){if(wc(e),!r)return e.F().then(function(){})}).then(function(){return Pu(e.a,u,t,n,a,!!s)}).then(function(){return new ve(function(n,i){e.ha(t,null,new Bi("cancelled-popup-request"),e.g||null),e.f=n,e.v=i,e.g=a,e.b=e.a.Ea(e,t,u,a)})}).then(function(e){return u&&Gn(u),e?Di(e):null}).s(function(e){throw u&&Gn(u),e}),_c(e,i,r)}function Ac(e,t,n,i,r){if(!li())return Ee(new Bi("operation-not-supported-in-this-environment"));if(e.i&&!r)return Ee(e.i);var o=null,a=vi(e.uid+":::");return i=i().then(function(){if(wc(e),!r)return e.F().then(function(){})}).then(function(){return e.aa=a,rc(e)}).then(function(t){return e.ba&&(t=(t=e.ba).b.set(Sc,e.w(),t.a)),t}).then(function(){return e.a.Ca(t,n,a)}).s(function(t){if(o=t,e.ba)return Ec(e.ba);throw o}).then(function(){if(o)throw o}),_c(e,i,r)}function wc(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new Bi("internal-error");throw new Bi("auth-domain-config-required")}}function _c(e,t,n){var i,r,o,a=(r=t,o=n,(i=e).i&&!o?(r.cancel(),Ee(i.i)):r.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(i.i||i.dispatchEvent(new Qu("userInvalidated")),i.i=e),e}));return e.G.push(a),a.ia(function(){U(e.G,a)}),a}function Cc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[da]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-C())/1e3;var i=new Yu(t,n,e);return e.providerData&&R(e.providerData,function(e){e&&lc(i,Di(e))}),e.redirectEventId&&(i.aa=e.redirectEventId),i}$u.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},$u.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,i=e.b,r=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?e.a?(Uu(this,!0,null,e.a),Se()):t.xa(n,i)?function(e,t,n){n=n.xa(t.c,t.b);var i=t.g,r=t.f,o=t.h,a=!!t.c.match(/Redirect$/);n(i,r,o).then(function(t){Uu(e,a,t,null)}).s(function(t){Uu(e,a,null,t)})}(this,e,t):Ee(new Bi("invalid-auth-event")):(Uu(this,!1,null,null),Se())}else Ee(new Bi("invalid-auth-event"))},$u.prototype.Za=function(){this.g&&!this.i&&Uu(this,!1,null,null)},$u.prototype.fa=function(){var e=this;return new ve(function(t,n){var i,r;e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),i=e,r=new Bi("timeout"),i.a&&i.a.cancel(),i.a=$t(Nu.get()).then(function(){i.b||(i.g=!0,Uu(i,!0,null,r))}))})},Bu.prototype.h=function(e,t){if(e){var n=e.c,i=e.b;e.a?(t.ha(e.c,null,e.a,e.b),Se()):t.xa(n,i)?(o=t,a=(r=e).b,s=r.c,o.xa(s,a)(r.g,r.f,r.h).then(function(e){o.ha(s,e,null,a)}).s(function(e){o.ha(s,null,e,a)})):Ee(new Bi("invalid-auth-event"))}else Ee(new Bi("invalid-auth-event"));var r,o,a,s},Vu.prototype.confirm=function(e){return e=Jr(this.verificationId,e),this.a(e)},Hu.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=$t(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then(function(){return e=o.document,t=null,wi()||!e?Se():new ve(function(n){t=function(){wi()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).s(function(n){throw e.removeEventListener("visibilitychange",t,!1),n});var e,t}).then(function(){return t.h()}).then(function(){e(t,!0)}).s(function(n){t.i(n)&&e(t,!1)})}(this,!0)},Hu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Wu.prototype.w=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Wu.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Ee(new Bi("user-token-expired")):e||!this.b||C()>this.c-3e4?this.a?function(e,t){return(n=e.f,i=t,new ve(function(e,t){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Aa(n,n.i+"?key="+encodeURIComponent(n.b),function(n){n?n.error?t(ls(n)):n.access_token&&n.refresh_token?e(n):t(new Bi("internal-error")):t(new Bi("network-request-failed"))},"POST",un(i).toString(),n.f,n.m.get()):t(new Bi("internal-error"))})).then(function(t){return e.b=t.access_token,e.c=zu(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var n,i}(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ku.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(Qu,ut),S(Yu,Nt),Yu.prototype.pa=function(e){this.ka=e,ya(this.c,e)},Yu.prototype.ea=function(){return this.ka},Yu.prototype.ya=function(){return V(this.O)},Yu.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},Ii(Yu.prototype,"providerId","firebase"),(e=Yu.prototype).reload=function(){var e=this;return _c(this,uc(this).then(function(){return pc(e).then(function(){return rc(e)}).then(sc)}))},e.ac=function(e){return this.F(e).then(function(e){return new function(e){var t=or(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Bi("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");xi(this,{token:e,expirationTime:_i(1e3*t.exp),authTime:_i(1e3*t.auth_time),issuedAtTime:_i(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}(e)})},e.F=function(e){var t=this;return _c(this,uc(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new Bi("internal-error");return e.accessToken!=t.ra&&(ic(t,e.accessToken),t.dispatchEvent(new Qu("tokenChanged"))),fc(t,"refreshToken",e.refreshToken),e.accessToken}))},e.wc=function(e){if(!(e=e.users)||!e.length)throw new Bi("internal-error");ac(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=(i=(i=e).providerUserInfo)&&i.length?$(i,function(e){return new function(e,t,n,i,r,o){xi(this,{uid:e,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:t})}(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[],n=0;n<t.length;n++)lc(this,t[n]);var i;fc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.xc=function(e){return Ti("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},e.hb=function(e){var t=this,n=null;return _c(this,e.f(this.c,this.uid).then(function(e){return gc(t,e),n=vc(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},e.oc=function(e){return Ti("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},e.fb=function(e){var t=this,n=null;return _c(this,mc(this,e.providerId).then(function(){return t.F()}).then(function(n){return e.b(t.c,n)}).then(function(e){return n=vc(t,e,"link"),yc(t,e)}).then(function(){return n}))},e.pc=function(e,t){var n=this;return _c(this,mc(this,"phone").then(function(){return qu(ec(n),e,t,w(n.fb,n))}))},e.yc=function(e,t){var n=this;return _c(this,Se().then(function(){return qu(ec(n),e,t,w(n.hb,n))}),!0)},e.rb=function(e){var t=this;return _c(this,this.F().then(function(n){return t.c.rb(n,e)}).then(function(e){return gc(t,e),t.reload()}))},e.Pc=function(e){var t=this;return _c(this,this.F().then(function(n){return e.b(t.c,n)}).then(function(e){return gc(t,e),t.reload()}))},e.sb=function(e){var t=this;return _c(this,this.F().then(function(n){return t.c.sb(n,e)}).then(function(e){return gc(t,e),t.reload()}))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return uc(this);var t=this;return _c(this,this.F().then(function(n){return t.c.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return gc(t,e),fc(t,"displayName",e.displayName||null),fc(t,"photoURL",e.photoUrl||null),R(t.providerData,function(e){"password"===e.providerId&&(Ii(e,"displayName",t.displayName),Ii(e,"photoURL",t.photoURL))}),rc(t)}).then(sc))},e.Nc=function(e){var t=this;return _c(this,pc(this).then(function(n){return F(cc(t),e)?(i=t.c,r=n,o=[e],us(i,Ba,{idToken:r,deleteProvider:o})).then(function(e){var n={};return R(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),R(cc(t),function(e){n[e]||hc(t,e)}),n[Xr.PROVIDER_ID]||Ii(t,"phoneNumber",null),rc(t)}):rc(t).then(function(){throw new Bi("no-such-provider")});var i,r,o}))},e.delete=function(){var e=this;return _c(this,this.F().then(function(t){return us(e.c,Ua,{idToken:t})}).then(function(){e.dispatchEvent(new Qu("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");Xu(e,null),Zu(e,null),e.G=[],e.D=!0,nc(e),Ii(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},e.ha=function(e,t,n,i){"linkViaPopup"!=e&&"reauthViaPopup"!=e||i!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},e.xa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?w(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?w(this.Cb,this):"linkViaRedirect"==e&&(this.aa||null)==t?w(this.Bb,this):"reauthViaRedirect"==e&&(this.aa||null)==t?w(this.Cb,this):null},e.qc=function(e){var t=this;return bc(this,"linkViaPopup",e,function(){return mc(t,e.providerId).then(function(){return rc(t)})},!1)},e.zc=function(e){return bc(this,"reauthViaPopup",e,function(){return Se()},!0)},e.rc=function(e){var t=this;return Ac(this,"linkViaRedirect",e,function(){return mc(t,e.providerId)},!1)},e.Ac=function(e){return Ac(this,"reauthViaRedirect",e,function(){return Se()},!0)},e.Bb=function(e,t,n){var i=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return _c(this,this.F().then(function(r){return Pa(i.c,{requestUri:e,postBody:n,sessionId:t,idToken:r})}).then(function(e){return r=vc(i,e,"link"),yc(i,e)}).then(function(){return r}))},e.Cb=function(e,t,n){var i=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return _c(this,Se().then(function(){return Sr(Oa(i.c,{requestUri:e,sessionId:t,postBody:n}),i.uid)}).then(function(e){return r=vc(i,e,"reauthenticate"),gc(i,e),i.i=null,i.reload()}).then(function(){return r}),!0)},e.kb=function(e){var t=this,n=null;return _c(this,this.F().then(function(t){return n=t,void 0===e||re(e)?{}:er(new Hi(e))}).then(function(e){return t.c.kb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.w(),redirectEventId:this.aa||null};return this.metadata&&ce(e,this.metadata.w()),R(this.providerData,function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))}),e};var Sc={name:"redirectUser",B:"session"};function Ec(e){return ru(e.b,Sc,e.a)}function Tc(e){var t,n,i,r,a,s,u,c,l;this.a=e,this.b=tu(),this.c=null,this.f=(t=this,n=xc("local"),i=xc("session"),r=xc("none"),(a=t.b,s=n,u=t.a,c=iu(s,u),l=nu(a,s.B),a.get(s,u).then(function(e){var t=null;try{t=mi(o.localStorage.getItem(c))}catch(e){}if(t&&!e)return o.localStorage.removeItem(c),a.set(s,t,u);t&&e&&"localStorage"!=l.type&&o.localStorage.removeItem(c)})).then(function(){return t.b.get(i,t.a)}).then(function(e){return e?i:t.b.get(r,t.a).then(function(e){return e?r:t.b.get(n,t.a).then(function(e){return e?n:t.b.get(Ic,t.a).then(function(e){return e?xc(e):n})})})}).then(function(e){return t.c=e,kc(t,e.B)}).s(function(){t.c||(t.c=n)})),this.b.addListener(xc("local"),this.a,w(this.g,this))}function kc(e,t){var n,i,r=[];for(n in Zs)Zs[n]!==t&&r.push(ru(e.b,xc(Zs[n]),e.a));return r.push(ru(e.b,Ic,e.a)),i=r,new ve(function(e,t){var n=i.length,r=[];if(n)for(var o=function(t,i){n--,r[t]=i,0==n&&e(r)},a=function(e){t(e)},s=0;s<i.length;s++)Te(i[s],_(o,s),a);else e(r)})}Tc.prototype.g=function(){var e=this,t=xc("local");Oc(this,function(){return Se().then(function(){return e.c&&"local"!=e.c.B?e.b.get(t,e.a):null}).then(function(n){if(n)return kc(e,"local").then(function(){e.c=t})})})};var Ic={name:"persistence",B:"session"};function xc(e){return{name:"authUser",B:e}}function Dc(e,t){return Oc(e,function(){return e.b.set(e.c,t.w(),e.a)})}function Nc(e){return Oc(e,function(){return ru(e.b,e.c,e.a)})}function Pc(e,t){return Oc(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),Cc(e||{})})})}function Oc(e,t){return e.f=e.f.then(t,t),e.f}function Mc(e){if(this.l=!1,Ii(this,"settings",new ju),Ii(this,"app",e),!jc(this).options||!jc(this).options.apiKey)throw new Bi("invalid-api-key");var t,n,i,r,o,a,s,u,c,l,h,f;e=Yr.SDK_VERSION?ai(Yr.SDK_VERSION):null,this.c=new ha(jc(this).options&&jc(this).options.apiKey,ur(ar),e),this.N=[],this.o=[],this.I=[],this.Rb=Yr.INTERNAL.createSubscribe(w(this.kc,this)),this.O=void 0,this.Sb=Yr.INTERNAL.createSubscribe(w(this.mc,this)),Uc(this,null),this.h=new Tc(jc(this).options.apiKey+":"+jc(this).name),this.A=new function(e){this.a=e,this.b=tu()}(jc(this).options.apiKey+":"+jc(this).name),this.V=Wc(this,(n=jc(t=this).options.authDomain,i=(r=t,o=(a=r.A,s=jc(r).options.authDomain,a.b.get(Sc,a.a).then(function(e){return e&&s&&(e.authDomain=s),Cc(e||{})})).then(function(e){return(r.D=e)&&(e.ba=r.A),Ec(r.A)}),Wc(r,o)).then(function(){return Pc(t.h,n)}).then(function(e){return e?(e.ba=t.A,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Dc(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Nc(t.h)})):null}).then(function(e){Uc(t,e||null)}),Wc(t,i))),this.i=Wc(this,(u=this).V.then(function(){return u.fa()}).s(function(){}).then(function(){if(!u.l)return u.ka()}).s(function(){}).then(function(){if(!u.l){u.X=!0;var e=u.h;e.b.addListener(xc("local"),e.a,u.ka)}})),this.X=!1,this.ka=w(this.Kc,this),this.Ha=w(this.Z,this),this.ra=w(this.Zb,this),this.sa=w(this.ic,this),this.ta=w(this.jc,this),l=jc(c=this).options.authDomain,h=jc(c).options.apiKey,l&&li()&&(c.Qb=c.V.then(function(){if(!c.l){if(c.a=Ru(l,h,jc(c).name),c.a.subscribe(c),Vc(c)&&oc(Vc(c)),c.D){oc(c.D);var e=c.D;e.pa(c.ea()),Xu(e,c),Ju(e=c.D,c.G),Zu(e,c),c.D=null}return c.a}})),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.sc,this),this.u=0,Nt.call(this),f=this,Object.defineProperty(f,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),f.W=null,this.G=[]}function Rc(e){ut.call(this,"languageCodeChanged"),this.g=e}function $c(e){ut.call(this,"frameworkChanged"),this.c=e}function Lc(e){return e.Qb||Ee(new Bi("auth-domain-config-required"))}function Fc(e,t){var n={};return n.apiKey=jc(e).options.apiKey,n.authDomain=jc(e).options.authDomain,n.appName=jc(e).name,e.V.then(function(){return i=n,r=t,o=e.A,a=e.ya(),s=new Yu(i,r),o&&(s.ba=o),a&&Ju(s,a),s.reload().then(function(){return s});var i,r,o,a,s}).then(function(t){return Vc(e)&&t.uid==Vc(e).uid?dc(Vc(e),t):(Uc(e,t),oc(t)),e.Z(t)}).then(function(){Hc(e)})}function Uc(e,t){var n,i;Vc(e)&&(n=Vc(e),i=e.Ha,B(n.N,function(e){return e==i}),_t(Vc(e),"tokenChanged",e.ra),_t(Vc(e),"userDeleted",e.sa),_t(Vc(e),"userInvalidated",e.ta),nc(Vc(e))),t&&(t.N.push(e.Ha),bt(t,"tokenChanged",e.ra),bt(t,"userDeleted",e.sa),bt(t,"userInvalidated",e.ta),0<e.u&&tc(t)),Ii(e,"currentUser",t),t&&(t.pa(e.ea()),Xu(t,e),Ju(t,e.G),Zu(t,e))}function Bc(e,t){var n=null,i=null;return Wc(e,t.then(function(t){return n=Zr(t),i=dr(t),Fc(e,t)}).then(function(){return Di({user:Vc(e),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function jc(e){return e.app}function Vc(e){return e.currentUser}function qc(e){return Vc(e)&&Vc(e)._lat||null}function Hc(e){if(e.X){for(var t=0;t<e.o.length;t++)e.o[t]&&e.o[t](qc(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](qc(e))}}function Wc(e,t){return e.N.push(t),t.ia(function(){U(e.N,t)}),t}function Gc(){}function zc(){this.a={},this.b=1e12}Tc.prototype.nb=function(e){var t=null,n=this;return function(e){var t=new Bi("invalid-persistence-type"),n=new Bi("unsupported-persistence-type");e:{for(i in Zs)if(Zs[i]==e){var i=!0;break e}i=!1}if(!i||"string"!=typeof e)throw t;switch(ei()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!ci()&&"none"!==e)throw n}}(e),Oc(this,function(){return e!=n.c.B?n.b.get(n.c,n.a).then(function(i){return t=i,kc(n,e)}).then(function(){if(n.c=xc(e),t)return n.b.set(n.c,t,n.a)}):Se()})},S(Mc,Nt),S(Rc,ut),S($c,ut),(e=Mc.prototype).nb=function(e){return Wc(this,e=this.h.nb(e))},e.pa=function(e){this.W===e||this.l||(this.W=e,ya(this.c,this.W),this.dispatchEvent(new Rc(this.ea())))},e.ea=function(){return this.W},e.Qc=function(){var e=o.navigator;this.pa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.sc=function(e){this.G.push(e),ba(this.c,Yr.SDK_VERSION?ai(Yr.SDK_VERSION,this.G):null),this.dispatchEvent(new $c(this.G))},e.ya=function(){return V(this.G)},e.toJSON=function(){return{apiKey:jc(this).options.apiKey,authDomain:jc(this).options.authDomain,appName:jc(this).name,currentUser:Vc(this)&&Vc(this).w()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ha=function(e,t,n,i){"signInViaPopup"==e&&this.g==i&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},e.xa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?w(this.Yb,this):null},e.Yb=function(e,t,n){var i=this;e={requestUri:e,postBody:n,sessionId:t},this.b&&(this.b.cancel(),this.b=null);var r=null,o=null,a=Na(i.c,e).then(function(e){return r=Zr(e),o=dr(e),e});return Wc(this,e=i.V.then(function(){return a}).then(function(e){return Fc(i,e)}).then(function(){return Di({user:Vc(i),credential:r,additionalUserInfo:o,operationType:"signIn"})}))},e.Ic=function(e){if(!li())return Ee(new Bi("operation-not-supported-in-this-environment"));var t=this,n=fr(e.providerId),i=vi(),r=null;(!di()||Jn())&&jc(this).options.authDomain&&e.isOAuthProvider&&(r=_s(jc(this).options.authDomain,jc(this).options.apiKey,jc(this).name,"signInViaPopup",e,null,i,Yr.SDK_VERSION||null));var o=zn(r,n&&n.Ba,n&&n.Aa);return Wc(this,n=Lc(this).then(function(t){return Pu(t,o,"signInViaPopup",e,i,!!r)}).then(function(){return new ve(function(e,n){t.ha("signInViaPopup",null,new Bi("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.b=t.a.Ea(t,"signInViaPopup",o,i)})}).then(function(e){return o&&Gn(o),e?Di(e):null}).s(function(e){throw o&&Gn(o),e}))},e.Jc=function(e){if(!li())return Ee(new Bi("operation-not-supported-in-this-environment"));var t=this;return Wc(this,Lc(this).then(function(){return Oc(e=t.h,function(){return e.b.set(Ic,e.c.B,e.a)});var e}).then(function(){return t.a.Ca("signInViaRedirect",e)}))},e.fa=function(){if(!li())return Ee(new Bi("operation-not-supported-in-this-environment"));var e=this;return Wc(this,Lc(this).then(function(){return e.a.fa()}).then(function(e){return e?Di(e):null}))},e.Oc=function(e){if(!e)return Ee(new Bi("null-user"));var t=this,n={};n.apiKey=jc(this).options.apiKey,n.authDomain=jc(this).options.authDomain,n.appName=jc(this).name;var i=function(e,t,n,i){t=t||{apiKey:e.l,authDomain:e.u,appName:e.o};var r=e.h,o={};return o[da]=r.b,o.refreshToken=r.a,o.expiresIn=(r.c-C())/1e3,t=new Yu(t,o),n&&(t.ba=n),i&&Ju(t,i),dc(t,e),t}(e,n,t.A,t.ya());return Wc(this,this.i.then(function(){if(jc(t).options.apiKey!=e.l)return i.reload()}).then(function(){return Vc(t)&&e.uid==Vc(t).uid?(dc(Vc(t),e),t.Z(e)):(Uc(t,i),oc(i),t.Z(i))}).then(function(){Hc(t)}))},e.pb=function(){var e=this;return Wc(this,this.i.then(function(){return Vc(e)?(Uc(e,null),Nc(e.h).then(function(){Hc(e)})):Se()}))},e.Kc=function(){var e=this;return Pc(this.h,jc(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=Vc(e)&&t){n=Vc(e).uid;var i=t.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return dc(Vc(e),t),Vc(e).F();(Vc(e)||t)&&(Uc(e,t),t&&(oc(t),t.ba=e.A),e.a&&e.a.subscribe(e),Hc(e))}})},e.Z=function(e){return Dc(this.h,e)},e.Zb=function(){Hc(this),this.Z(Vc(this))},e.ic=function(){this.pb()},e.jc=function(){this.pb()},e.kc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(Vc(t))})},e.mc=function(e){var t,n,i=this;n=function(){e.next(Vc(i))},(t=this).I.push(n),Wc(t,t.i.then(function(){!t.l&&F(t.I,n)&&t.O!==t.getUid()&&(t.O=t.getUid(),n(qc(t)))}))},e.uc=function(e,t,n){var i=this;return this.X&&Promise.resolve().then(function(){g(e)?e(Vc(i)):g(e.next)&&e.next(Vc(i))}),this.Rb(e,t,n)},e.tc=function(e,t,n){var i=this;return this.X&&Promise.resolve().then(function(){i.O=i.getUid(),g(e)?e(Vc(i)):g(e.next)&&e.next(Vc(i))}),this.Sb(e,t,n)},e.$b=function(e){var t=this;return Wc(this,this.i.then(function(){return Vc(t)?Vc(t).F(e).then(function(e){return{accessToken:e}}):null}))},e.Ec=function(e){var t=this;return this.i.then(function(){return Bc(t,us(t.c,is,{token:e}))}).then(function(e){var n=e.user;return fc(n,"isAnonymous",!1),t.Z(n),e})},e.Fc=function(e,t){var n=this;return this.i.then(function(){return Bc(n,us(n.c,rs,{email:e,password:t}))})},e.Ub=function(e,t){var n=this;return this.i.then(function(){return Bc(n,us(n.c,La,{email:e,password:t}))})},e.Ra=function(e){var t=this;return this.i.then(function(){return Bc(t,e.la(t.c))})},e.Dc=function(e){return Ti("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(e)},e.ob=function(){var e=this;return this.i.then(function(){var t=Vc(e);return t&&t.isAnonymous?Di({user:t,credential:null,additionalUserInfo:Di({providerId:null,isNewUser:!1}),operationType:"signIn"}):Bc(e,e.c.ob()).then(function(t){var n=t.user;return fc(n,"isAnonymous",!0),e.Z(n),t})})},e.getUid=function(){return Vc(this)&&Vc(this).uid||null},e.Tb=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&Vc(this)&&tc(Vc(this))},e.Bc=function(e){var t=this;R(this.o,function(n){n==e&&t.u--}),this.u<0&&(this.u=0),0==this.u&&Vc(this)&&nc(Vc(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.o.push(e),Wc(this,this.i.then(function(){t.l||F(t.o,e)&&e(qc(t))}))},e.removeAuthTokenListener=function(e){B(this.o,function(t){return t==e})},e.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h).b.removeListener(xc("local"),e.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Za()),Promise.resolve()},e.Xb=function(e){return Wc(this,us(this.c,Fa,{identifier:e,continueUri:hi()?qn():"http://localhost"}).then(function(e){return e.signinMethods||[]}))},e.nc=function(e){return!!Gr(e)},e.mb=function(e,t){var n=this;return Wc(this,Se().then(function(){var e=new Hi(t);if(!e.c)throw new Bi("argument-error",zi+" must be true when sending sign in link to email");return er(e)}).then(function(t){return n.c.mb(e,t)}).then(function(){}))},e.Rc=function(e){return this.Ka(e).then(function(e){return e.data.email})},e.$a=function(e,t){return Wc(this,this.c.$a(e,t).then(function(){}))},e.Ka=function(e){return Wc(this,this.c.Ka(e).then(function(e){return new function(e){var t={},n=e[Oi],i=e[Mi];if(!(e=e[Ri])||e!=Pi&&!n)throw Error("Invalid provider user info!");t[Li]=i||null,t[$i]=n||null,Ii(this,Ui,e),Ii(this,Fi,Ni(t))}(e)}))},e.Xa=function(e){return Wc(this,this.c.Xa(e).then(function(){}))},e.lb=function(e,t){var n=this;return Wc(this,Se().then(function(){return void 0===t||re(t)?{}:er(new Hi(t))}).then(function(t){return n.c.lb(e,t)}).then(function(){}))},e.Hc=function(e,t){return Wc(this,qu(this,e,t,w(this.Ra,this)))},e.Gc=function(e,t){var n=this;return Wc(this,Se().then(function(){var i=Wr(e,t||qn());return n.Ra(i)}))},Gc.prototype.render=function(){},Gc.prototype.reset=function(){},Gc.prototype.getResponse=function(){},Gc.prototype.execute=function(){};var Kc=null;function Qc(e,t){return(t=Yc(t))&&e.a[t]||null}function Yc(e){return(e=void 0===e?1e12:e)?e.toString():null}function Xc(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Mn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():bt(this.f,"click",this.i)}function Jc(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Zc(){}zc.prototype.render=function(e,t){return this.a[this.b.toString()]=new Xc(e,t),this.b++},zc.prototype.reset=function(e){var t=Qc(this,e);e=Yc(e),t&&e&&(t.delete(),delete this.a[e])},zc.prototype.getResponse=function(e){return(e=Qc(this,e))?e.getResponse():null},zc.prototype.execute=function(e){(e=Qc(this,e))&&e.execute()},Xc.prototype.getResponse=function(){return Jc(this),this.b},Xc.prototype.execute=function(){Jc(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(t){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()},6e4)},500))},Xc.prototype.delete=function(){Jc(this),this.g=!0,clearTimeout(this.a),this.a=null,_t(this.f,"click",this.i)},Zc.prototype.g=function(){return Kc||(Kc=new zc),Se(Kc)},Zc.prototype.c=function(){};var el=null;function tl(){this.b=o.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var nl=new gn(yn,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),il=new Ai(3e4,6e4);tl.prototype.g=function(e){var t=this;return new ve(function(n,i){var r=setTimeout(function(){i(new Bi("network-request-failed"))},il.get());!o.grecaptcha||e!==t.f&&!t.b?(o[t.a]=function(){if(o.grecaptcha){t.f=e;var a=o.grecaptcha.render;o.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(r),n(o.grecaptcha)}else clearTimeout(r),i(new Bi("internal-error"));delete o[t.a]},Se(ra(wn(nl,{onload:t.a,hl:e||""}))).s(function(){clearTimeout(r),i(new Bi("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),n(o.grecaptcha))})},tl.prototype.c=function(){this.b--};var rl=null;function ol(e,t,n,i,r,a,s){if(Ii(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=t,this.g=null,s=s?(el||(el=new Zc),el):(rl||(rl=new tl),rl),this.o=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[ul])throw new Bi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[cl],!o.document)throw new Bi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Mn(t)||!this.i&&Mn(t).hasChildNodes())throw new Bi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new ha(e,a||null,r||null),this.v=i||function(){return null};var u=this;this.m=[];var c=this.a[al];this.a[al]=function(e){if(ll(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=ui(c,o);"function"==typeof t&&t(e)}};var l=this.a[sl];this.a[sl]=function(){if(ll(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=ui(l,o);"function"==typeof e&&e()}}}var al="callback",sl="expired-callback",ul="sitekey",cl="size";function ll(e,t){for(var n=0;n<e.m.length;n++)try{e.m[n](t)}catch(e){}}function hl(e,t){return e.h.push(t),t.ia(function(){U(e.h,t)}),t}function fl(e){if(e.D)throw new Bi("internal-error","RecaptchaVerifier instance has been destroyed.")}function dl(e,t,n){var i=!1;try{this.b=n||Yr.app()}catch(e){throw new Bi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Bi("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().ya()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=Yr.SDK_VERSION?ai(Yr.SDK_VERSION,o):null,ol.call(this,n,e,t,function(){try{var e=r.b.auth().ea()}catch(t){e=null}return e},o,ur(ar),i)}function pl(e,t,n,i){e:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Bi("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=t.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=t[r].optional&&void 0===n[r],!t[r].M(n[r])&&!o){if(t=t[r],r<0||r>=gl.length)throw new Bi("internal-error","Argument validator received an unsupported number of arguments.");n=gl[r],i=(i?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}i=null}}if(i)throw new Bi("argument-error",e+" failed: "+i)}(e=ol.prototype).za=function(){var e=this;return this.f?this.f:this.f=hl(this,Se().then(function(){if(hi()&&!Zn())return Yn();throw new Bi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.o.g(e.v())}).then(function(t){return e.g=t,us(e.u,Ka,{})}).then(function(t){e.a[ul]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},e.render=function(){fl(this);var e=this;return hl(this,this.za().then(function(){if(null===e.c){var t=e.l;if(!e.i){var n=Mn(t);t=function(e,t,n){var i=arguments,r=document,o=String(i[0]),s=i[1];if(!pn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',he(s.name),'"'),s.type){o.push(' type="',he(s.type),'"');var u={};ce(u,s),delete u.type,s=u}o.push(">"),o=o.join("")}return o=r.createElement(o),s&&(a(s)?o.className=s:d(s)?o.className=s.join(" "):Rn(o,s)),2<i.length&&function(e,t,n){function i(n){n&&t.appendChild(a(n)?e.createTextNode(n):n)}for(var r=2;r<n.length;r++){var o=n[r];!p(o)||m(o)&&0<o.nodeType?i(o):R(Ln(o)?V(o):o,i)}}(r,o,i),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},e.verify=function(){fl(this);var e=this;return hl(this,this.render().then(function(t){return new ve(function(n){var i=e.g.getResponse(t);if(i)n(i);else{var r=function(t){var i;t&&(i=r,B(e.m,function(e){return e==i}),n(t))};e.m.push(r),e.i&&e.g.execute(e.c)}})}))},e.reset=function(){fl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){fl(this),this.D=!0,this.o.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Mn(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}},S(dl,ol);var gl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function ml(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:a}}function vl(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:s}}function yl(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function bl(e,t){return{name:e||"",K:"a function",optional:!!t,M:g}}function Al(e,t){return{name:e||"",K:"null",optional:!!t,M:f}}function wl(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.la||!n)}}}function _l(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&a(e.type)&&g(e.verify))}}}function Cl(e,t,n,i){return{name:n||"",K:e.K+" or "+t.K,optional:!!i,M:function(n){return e.M(n)||t.M(n)}}}function Sl(e,t){for(var n in t){var i=t[n].name;e[i]=kl(i,e[n],t[n].j)}}function El(e,t){for(var n in t){var i=t[n].name;i!==n&&Object.defineProperty(e,i,{get:_(function(e){return this[e]},n),set:_(function(e,t,n,i){pl(e,[n],[i],!0),this[t]=i},i,n,t[n].vb),enumerable:!0})}}function Tl(e,t,n,i){e[t]=kl(t,n,i)}function kl(e,t,n){function i(){var e=Array.prototype.slice.call(arguments);return pl(a,n,e),t.apply(this,e)}if(!n)return t;var r,o,a=(o=(o=e).split("."))[o.length-1];for(r in t)i[r]=t[r];for(r in t.prototype)i.prototype[r]=t.prototype[r];return i}Sl(Mc.prototype,{Xa:{name:"applyActionCode",j:[ml("code")]},Ka:{name:"checkActionCode",j:[ml("code")]},$a:{name:"confirmPasswordReset",j:[ml("code"),ml("newPassword")]},Ub:{name:"createUserWithEmailAndPassword",j:[ml("email"),ml("password")]},Xb:{name:"fetchSignInMethodsForEmail",j:[ml("email")]},fa:{name:"getRedirectResult",j:[]},nc:{name:"isSignInWithEmailLink",j:[ml("emailLink")]},tc:{name:"onAuthStateChanged",j:[Cl(yl(),bl(),"nextOrObserver"),bl("opt_error",!0),bl("opt_completed",!0)]},uc:{name:"onIdTokenChanged",j:[Cl(yl(),bl(),"nextOrObserver"),bl("opt_error",!0),bl("opt_completed",!0)]},lb:{name:"sendPasswordResetEmail",j:[ml("email"),Cl(yl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},mb:{name:"sendSignInLinkToEmail",j:[ml("email"),yl("actionCodeSettings")]},nb:{name:"setPersistence",j:[ml("persistence")]},Dc:{name:"signInAndRetrieveDataWithCredential",j:[wl()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[wl()]},Ec:{name:"signInWithCustomToken",j:[ml("token")]},Fc:{name:"signInWithEmailAndPassword",j:[ml("email"),ml("password")]},Gc:{name:"signInWithEmailLink",j:[ml("email"),ml("emailLink",!0)]},Hc:{name:"signInWithPhoneNumber",j:[ml("phoneNumber"),_l()]},Ic:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"updateCurrentUser",j:[Cl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Yu)}},Al(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ml(null,!0)]},Qc:{name:"useDeviceLanguage",j:[]},Rc:{name:"verifyPasswordResetCode",j:[ml("code")]}}),El(Mc.prototype,{lc:{name:"languageCode",vb:Cl(ml(),Al(),"languageCode")}}),(Mc.Persistence=Zs).LOCAL="local",Mc.Persistence.SESSION="session",Mc.Persistence.NONE="none",Sl(Yu.prototype,{delete:{name:"delete",j:[]},ac:{name:"getIdTokenResult",j:[vl("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[vl("opt_forceRefresh",!0)]},oc:{name:"linkAndRetrieveDataWithCredential",j:[wl()]},fb:{name:"linkWithCredential",j:[wl()]},pc:{name:"linkWithPhoneNumber",j:[ml("phoneNumber"),_l()]},qc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},rc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[wl()]},hb:{name:"reauthenticateWithCredential",j:[wl()]},yc:{name:"reauthenticateWithPhoneNumber",j:[ml("phoneNumber"),_l()]},zc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},kb:{name:"sendEmailVerification",j:[Cl(yl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ml(null,!0)]},Nc:{name:"unlink",j:[ml("provider")]},rb:{name:"updateEmail",j:[ml("email")]},sb:{name:"updatePassword",j:[ml("password")]},Pc:{name:"updatePhoneNumber",j:[wl("phone")]},tb:{name:"updateProfile",j:[yl("profile")]}}),Sl(zc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Sl(Gc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Sl(ve.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),El(ju.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",vb:vl("appVerificationDisabledForTesting")}}),Sl(Vu.prototype,{confirm:{name:"confirm",j:[ml("verificationCode")]}}),Tl(Cr,"fromJSON",function(e){e=a(e)?JSON.parse(e):e;for(var t,n=[Dr,qr,Kr,kr],i=0;i<n.length;i++)if(t=n[i](e))return t;return null},[Cl(ml(),yl(),"json")]),Tl(Hr,"credential",function(e,t){return new Vr(e,t)},[ml("email"),ml("password")]),Sl(Vr.prototype,{w:{name:"toJSON",j:[ml(null,!0)]}}),Sl(Mr.prototype,{ua:{name:"addScope",j:[ml("scope")]},Da:{name:"setCustomParameters",j:[yl("customOAuthParameters")]}}),Tl(Mr,"credential",Rr,[Cl(ml(),yl(),"token")]),Tl(Hr,"credentialWithLink",Wr,[ml("email"),ml("emailLink")]),Sl($r.prototype,{ua:{name:"addScope",j:[ml("scope")]},Da:{name:"setCustomParameters",j:[yl("customOAuthParameters")]}}),Tl($r,"credential",Lr,[Cl(ml(),yl(),"token")]),Sl(Fr.prototype,{ua:{name:"addScope",j:[ml("scope")]},Da:{name:"setCustomParameters",j:[yl("customOAuthParameters")]}}),Tl(Fr,"credential",Ur,[Cl(ml(),Cl(yl(),Al()),"idToken"),Cl(ml(),Al(),"accessToken",!0)]),Sl(Br.prototype,{Da:{name:"setCustomParameters",j:[yl("customOAuthParameters")]}}),Tl(Br,"credential",jr,[Cl(ml(),yl(),"token"),ml("secret",!0)]),Sl(Or.prototype,{ua:{name:"addScope",j:[ml("scope")]},credential:{name:"credential",j:[Cl(ml(),Cl(yl(),Al()),"optionsOrIdToken"),Cl(ml(),Al(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[yl("customOAuthParameters")]}}),Sl(Ir.prototype,{w:{name:"toJSON",j:[ml(null,!0)]}}),Sl(Er.prototype,{w:{name:"toJSON",j:[ml(null,!0)]}}),Tl(Xr,"credential",Jr,[ml("verificationId"),ml("verificationCode")]),Sl(Xr.prototype,{Va:{name:"verifyPhoneNumber",j:[ml("phoneNumber"),_l()]}}),Sl(zr.prototype,{w:{name:"toJSON",j:[ml(null,!0)]}}),Sl(Bi.prototype,{toJSON:{name:"toJSON",j:[ml(null,!0)]}}),Sl(so.prototype,{toJSON:{name:"toJSON",j:[ml(null,!0)]}}),Sl(ao.prototype,{toJSON:{name:"toJSON",j:[ml(null,!0)]}}),Sl(dl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===Yr||!Yr.INTERNAL||!Yr.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:Mc,AuthCredential:Cr,Error:Bi};Tl(e,"EmailAuthProvider",Hr,[]),Tl(e,"FacebookAuthProvider",Mr,[]),Tl(e,"GithubAuthProvider",$r,[]),Tl(e,"GoogleAuthProvider",Fr,[]),Tl(e,"TwitterAuthProvider",Br,[]),Tl(e,"OAuthProvider",Or,[ml("providerId")]),Tl(e,"SAMLAuthProvider",Pr,[ml("providerId")]),Tl(e,"PhoneAuthProvider",Xr,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof Mc)}}]),Tl(e,"RecaptchaVerifier",dl,[Cl(ml(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),yl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof Yr.app.App)}}]),Yr.INTERNAL.registerService("auth",function(e,t){return t({INTERNAL:{getUid:w((e=new Mc(e)).getUid,e),getToken:w(e.$b,e),addAuthTokenListener:w(e.Tb,e),removeAuthTokenListener:w(e.Bc,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),Yr.INTERNAL.extendNamespace({User:Yu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Xr,Jr=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yr(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:vr(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),Zr=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return Ar(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),eo=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Jr(t)}}catch(e){}return new Zr},to=eo("localStorage"),no=eo("sessionStorage"),io=new Br("@firebase/database"),ro=(Xr=1,function(){return Xr++}),oo=function(e){var t=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(55296<=r&&r<=56319){var o=r-55296;nr(++i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(o<<10)+(e.charCodeAt(i)-56320)}t[n++]=r<128?r:(t[n++]=r<2048?r>>6|192:(t[n++]=r<65536?r>>12|224:(t[n++]=r>>18|240,r>>12&63|128),r>>6&63|128),63&r|128)}return t}(e),n=new Sr;n.update(t);var i=n.digest();return ar.encodeByteArray(i)},ao=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",i=0;i<e.length;i++)Array.isArray(e[i])||e[i]&&"object"==typeof e[i]&&"number"==typeof e[i].length?n+=ao.apply(null,e[i]):"object"==typeof e[i]?n+=yr(e[i]):n+=e[i],n+=" ";return n},so=null,uo=!0,co=function(e,t){nr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(io.logLevel=Pr.VERBOSE,so=io.log.bind(io),t&&no.set("logging_enabled",!0)):"function"==typeof e?so=e:(so=null,no.remove("logging_enabled"))},lo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===uo&&(uo=!1,null===so&&!0===no.get("logging_enabled")&&co(!0)),so){var n=ao.apply(null,e);so(n)}},ho=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];lo.apply(void 0,er([e],t))}},fo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+ao.apply(void 0,er(e));io.error(n)},po=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+ao.apply(void 0,er(e));throw io.error(n),new Error(n)},go=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+ao.apply(void 0,er(e));io.warn(n)},mo=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},vo="[MIN_NAME]",yo="[MAX_NAME]",bo=function(e,t){if(e===t)return 0;if(e===vo||t===yo)return-1;if(t===vo||e===yo)return 1;var n=Lo(e),i=Lo(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1},Ao=function(e,t){return e===t?0:e<t?-1:1},wo=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+yr(t))},_o=function(e){if("object"!=typeof e||null===e)return yr(e);var t=[];for(var n in e)t.push(n);t.sort();for(var i="{",r=0;r<t.length;r++)0!==r&&(i+=","),i+=yr(t[r]),i+=":",i+=_o(e[t[r]]);return i+"}"},Co=function(e,t){var n=e.length;if(n<=t)return[e];for(var i=[],r=0;r<n;r+=t)n<r+t?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function So(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Eo,To,ko,Io,xo,Do,No,Po,Oo,Mo,Ro=function(e){var t,n,i,r,o,a,s;for(nr(!mo(e),"Invalid JSON number"),0===e?t=1/e==-1/(i=n=0)?1:0:(t=e<0,i=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},$o=new RegExp("^-?\\d{1,10}$"),Lo=function(e){if($o.test(e)){var t=Number(e);if(-2147483648<=t&&t<=2147483647)return t}return null},Fo=function(e){try{e()}catch(e){setTimeout(function(){var t=e.stack||"";throw go("Exception was thrown by user callback.",t),e},Math.floor(0))}},Uo=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},Bo=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)0<this.pieces_[i].length&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(t instanceof e)for(i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{var r=t.split("/");for(i=0;i<r.length;i++)0<r[i].length&&n.push(r[i])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var i=t.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),i=t.slice(),r=0;r<n.length&&r<i.length;r++){var o=bo(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),jo=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Mr(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=Mr(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=Mr(e),0<this.parts_.length&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),Vo="firebaseio.com",qo="websocket",Ho="long_polling",Wo=function(){function e(e,t,n,i,r){void 0===r&&(r=""),this.secure=t,this.namespace=n,this.webSocketOnly=i,this.persistenceKey=r,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=to.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&to.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(nr("string"==typeof e,"typeof type must == string"),nr("object"==typeof t,"typeof params must == object"),e===qo)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==Ho)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var i=[];return So(t,function(e,t){i.push(e+"="+t)}),n+i.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),Go=function(e){var t=zo(e),n=t.subdomain;"firebase"===t.domain&&po(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||po("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&go("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new Wo(t.host,t.secure,n,i),path:new Bo(t.pathString)}},zo=function(e){var t="",n="",i="",r="",o=!0,a="https",s=443;if("string"==typeof e){var u=e.indexOf("//");0<=u&&(a=e.substring(0,u-1),e=e.substring(u+2));var c=e.indexOf("/");-1===c&&(c=e.length);var l=e.indexOf("?");-1===l&&(l=e.length),t=e.substring(0,Math.min(c,l)),c<l&&(r=function(e){for(var t="",n=e.split("/"),i=0;i<n.length;i++)if(0<n[i].length){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(c,l)));var h=function(e){var t,n,i={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var r=Ji(e.split("&")),o=r.next();!o.done;o=r.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?i[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):go("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return i}(e.substring(Math.min(e.length,l)));0<=(u=t.indexOf(":"))?(o="https"===a||"wss"===a,s=parseInt(t.substring(u+1),10)):u=e.length;var f=t.split(".");3===f.length?(n=f[1],i=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,u).toLowerCase()&&(n="localhost"),""===i&&"ns"in h&&(i=h.ns)}return{host:t,port:s,domain:n,subdomain:i,secure:o,scheme:a,pathString:r}},Ko=/[\[\].#$\/\u0000-\u001F\u007F]/,Qo=/[\[\].#$\u0000-\u001F\u007F]/,Yo=10485760,Xo=function(e){return"string"==typeof e&&0!==e.length&&!Ko.test(e)},Jo=function(e){return"string"==typeof e&&0!==e.length&&!Qo.test(e)},Zo=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!mo(e)||e&&"object"==typeof e&&Ar(e,".sv")},ea=function(e,t,n,i,r){r&&void 0===n||ta(xr(e,t,r),n,i)},ta=function(e,t,n){var i=n instanceof Bo?new jo(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+t.toString());if(mo(t))throw new Error(e+"contains "+t.toString()+" "+i.toErrorString());if("string"==typeof t&&t.length>Yo/3&&Mr(t)>Yo)throw new Error(e+"contains a string greater than "+Yo+" utf8 bytes "+i.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var r=!1,o=!1;if(So(t,function(t,n){if(".value"===t)r=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Xo(t)))throw new Error(e+" contains an invalid key ("+t+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(t),ta(e,n,i),i.pop()}),r&&o)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},na=function(e,t,n,i,r){if(!r||void 0!==n){var o=xr(e,t,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];So(n,function(e,t){var n=new Bo(e);if(ta(o,t,i.child(n)),".priority"===n.getBack()&&!Zo(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(e,t){var n,i;for(n=0;n<t.length;n++)for(var r=(i=t[n]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!Xo(r[o]))throw new Error(e+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Bo.comparePaths);var a=null;for(n=0;n<t.length;n++){if(i=t[n],null!==a&&a.contains(i))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}}(o,a)}},ia=function(e,t,n,i){if(!i||void 0!==n){if(mo(n))throw new Error(xr(e,t,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zo(n))throw new Error(xr(e,t,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ra=function(e,t,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(xr(e,t,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},oa=function(e,t,n,i){if(!(i&&void 0===n||Xo(n)))throw new Error(xr(e,t,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},aa=function(e,t,n,i){if(!(i&&void 0===n||Jo(n)))throw new Error(xr(e,t,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sa=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},ua=function(e,t,n){var i,r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Xo(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&((i=r)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),!Jo(i)))throw new Error(xr(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ca=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){Ir("OnDisconnect.cancel",0,1,arguments.length),Dr("OnDisconnect.cancel",1,e,!0);var t=new cr;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){Ir("OnDisconnect.remove",0,1,arguments.length),sa("OnDisconnect.remove",this.path_),Dr("OnDisconnect.remove",1,e,!0);var t=new cr;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){Ir("OnDisconnect.set",1,2,arguments.length),sa("OnDisconnect.set",this.path_),ea("OnDisconnect.set",1,e,this.path_,!1),Dr("OnDisconnect.set",2,t,!0);var n=new cr;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){Ir("OnDisconnect.setWithPriority",2,3,arguments.length),sa("OnDisconnect.setWithPriority",this.path_),ea("OnDisconnect.setWithPriority",1,e,this.path_,!1),ia("OnDisconnect.setWithPriority",2,t,!1),Dr("OnDisconnect.setWithPriority",3,n,!0);var i=new cr;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,i.wrapCallback(n)),i.promise},e.prototype.update=function(e,t){if(Ir("OnDisconnect.update",1,2,arguments.length),sa("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,go("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}na("OnDisconnect.update",1,e,this.path_,!1),Dr("OnDisconnect.update",2,t,!0);var r=new cr;return this.repo_.onDisconnectUpdate(this.path_,e,r.wrapCallback(t)),r.promise},e}(),la=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return Ir("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),ha=(Eo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",To=0,ko=[],function(e){var t,n=e===To;To=e;var i=new Array(8);for(t=7;0<=t;t--)i[t]=Eo.charAt(e%64),e=Math.floor(e/64);nr(0===e,"Cannot push at time == 0");var r=i.join("");if(n){for(t=11;0<=t&&63===ko[t];t--)ko[t]=0;ko[t]++}else for(t=0;t<12;t++)ko[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)r+=Eo.charAt(ko[t]);return nr(20===r.length,"nextPushId: Length should be 20."),r}),fa=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),da=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new fa(vo,e),i=new fa(vo,t);return 0!==this.compare(n,i)},e.prototype.minPost=function(){return fa.MIN},e}(),pa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Io},set:function(e){Io=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return bo(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw ir("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return fa.MIN},t.prototype.maxPost=function(){return new fa(yo,Io)},t.prototype.makePost=function(e,t){return nr("string"==typeof e,"KeyIndex indexValue must always be a string."),new fa(e,Io)},t.prototype.toString=function(){return".key"},t}(da),ga=new pa,ma=function(e){return"number"==typeof e?"number:"+Ro(e):"string:"+e},va=function(e){if(e.isLeafNode()){var t=e.val();nr("string"==typeof t||"number"==typeof t||"object"==typeof t&&Ar(t,".sv"),"Priority must be a string or number.")}else nr(e===xo||e.isEmpty(),"priority of unexpected type.");nr(e===xo||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ya=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,nr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),va(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Do},set:function(e){Do=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var i=t.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(nr(".priority"!==i||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ma(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ro(this.value_):this.value_,this.lazyHash_=oo(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(nr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,i=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(i);return nr(0<=r,"Unknown leaf type: "+n),nr(0<=o,"Unknown leaf type: "+i),r===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-r},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),ba=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?bo(e.name,t.name):r},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return fa.MIN},t.prototype.maxPost=function(){return new fa(yo,new ya("[PRIORITY-POST]",Po))},t.prototype.makePost=function(e,t){var n=No(e);return new fa(t,new ya("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(da)),Aa=function(){function e(e,t,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return 0<this.nodeStack_.length},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),wa=function(){function e(t,n,i,r,o){this.key=t,this.value=n,this.color=null!=i?i:e.RED,this.left=null!=r?r:Ca.EMPTY_NODE,this.right=null!=o?o:Ca.EMPTY_NODE}return e.prototype.copy=function(t,n,i,r,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var i,r;return(r=(i=n(e,(r=this).key))<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Ca.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,i;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ca.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),_a=function(){function e(){}return e.prototype.copy=function(e,t,n,i,r){return this},e.prototype.insert=function(e,t,n){return new wa(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Ca=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,wa.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,wa.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,i=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(i=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Aa(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Aa(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Aa(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Aa(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new _a,e}(),Sa=Math.log(2),Ea=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Sa,10)),this.current_=this.count-1;var n,i=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&i}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Ta=function(e,t,n,i){e.sort(t);var r=function(t,i){var o,a,s=i-t;if(0==s)return null;if(1==s)return o=e[t],a=n?n(o):o,new wa(a,o.node,wa.BLACK,null,null);var u=parseInt(s/2,10)+t,c=r(t,u),l=r(u+1,i);return o=e[u],a=n?n(o):o,new wa(a,o.node,wa.BLACK,c,l)},o=function(t){for(var i=null,o=null,a=e.length,s=function(t,i){var o=a-t,s=a;a-=t;var c=r(o+1,s),l=e[o],h=n?n(l):l;u(new wa(h,l.node,i,null,c))},u=function(e){i=i?i.left=e:o=e},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,wa.BLACK):(s(h,wa.BLACK),s(h,wa.RED))}return o}(new Ea(e.length));return new Ca(i||t,o)},ka={},Ia=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return nr(ba,"ChildrenNode.ts has not been loaded"),Oo=Oo||new e({".priority":ka},{".priority":ba})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=wr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ca?t:null},e.prototype.hasIndex=function(e){return Ar(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){nr(t!==ga,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,r=[],o=!1,a=n.getIterator(fa.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),r.push(s),s=a.getNext();i=o?Ta(r,t.getCompare()):ka;var u=t.toString(),c=Qi({},this.indexSet_);c[u]=t;var l=Qi({},this.indexes_);return l[u]=i,new e(l,c)},e.prototype.addToIndexes=function(t,n){var i=this;return new e(Cr(this.indexes_,function(e,r){var o=wr(i.indexSet_,r);if(nr(o,"Missing index implementation for "+r),e===ka){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(fa.Wrap),u=s.getNext();u;)u.name!=t.name&&a.push(u),u=s.getNext();return a.push(t),Ta(a,o.getCompare())}return ka}var c=n.get(t.name),l=e;return c&&(l=l.remove(new fa(t.name,c))),l.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(Cr(this.indexes_,function(e){if(e===ka)return e;var i=n.get(t.name);return i?e.remove(new fa(t.name,i)):e}),this.indexSet_)},e}();function xa(e,t){return bo(e.name,t.name)}function Da(e,t){return bo(e,t)}var Na=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&va(this.priorityNode_),this.children_.isEmpty()&&nr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Mo||(Mo=new e(new Ca(Da),null,Ia.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Mo},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Mo:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(nr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var i,r=new fa(t,n),o=void 0;return i=n.isEmpty()?(o=this.children_.remove(t),this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,n),this.indexMap_.addToIndexes(r,this.children_)),new e(o,o.isEmpty()?Mo:this.priorityNode_,i)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;nr(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(ba,function(a,s){n[a]=s.val(t),i++,o&&e.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!t&&o&&r<2*i){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ma(this.getPriority().val())+":"),this.forEachChild(ba,function(t,n){var i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":oo(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new fa(e,t));return r?r.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new fa(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new fa(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var i=this.children_.getIteratorFrom(e.name,fa.Wrap),r=i.peek();null!=r&&t.compare(r,e)<0;)i.getNext(),r=i.peek();return i},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var i=this.children_.getReverseIteratorFrom(e.name,fa.Wrap),r=i.peek();null!=r&&0<t.compare(r,e);)i.getNext(),r=i.peek();return i},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pa?-1:0},e.prototype.withIndex=function(t){if(t===ga||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===ga||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var n=this.getIterator(ba),i=t.getIterator(ba),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1},e.prototype.resolveIndex_=function(e){return e===ga?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Pa=new(function(e){function t(){return e.call(this,new Ca(Da),Na.EMPTY_NODE,Ia.Default)||this}return Ki(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Na.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Na));Object.defineProperties(fa,{MIN:{value:new fa(vo,Na.EMPTY_NODE)},MAX:{value:new fa(yo,Pa)}}),pa.__EMPTY_NODE=Na.EMPTY_NODE,ya.__childrenNodeConstructor=Na,xo=Pa,Po=Pa;var Oa=!0;function Ma(e,t){if(void 0===t&&(t=null),null===e)return Na.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),nr(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new ya(e,Ma(t));if(e instanceof Array||!Oa){var n=Na.EMPTY_NODE;return So(e,function(t,i){if(Ar(e,t)&&"."!==t.substring(0,1)){var r=Ma(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(t,r))}}),n.updatePriority(Ma(t))}var i=[],r=!1;if(So(e,function(e,t){if("."!==e.substring(0,1)){var n=Ma(t);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new fa(e,n)))}}),0==i.length)return Na.EMPTY_NODE;var o=Ta(i,xa,function(e){return e.name},Da);if(r){var a=Ta(i,ba.getCompare());return new Na(o,Ma(t),new Ia({".priority":a},{".priority":ba}))}return new Na(o,Ma(t),Ia.Default)}No=Ma;var Ra,$a,La,Fa=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?bo(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return fa.MIN},t.prototype.maxPost=function(){return fa.MAX},t.prototype.makePost=function(e,t){var n=Ma(e);return new fa(t,n)},t.prototype.toString=function(){return".value"},t}(da)),Ua=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,nr(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Ki(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?bo(e.name,t.name):r},t.prototype.makePost=function(e,t){var n=Ma(e),i=Na.EMPTY_NODE.updateChild(this.indexPath_,n);return new fa(t,i)},t.prototype.maxPost=function(){var e=Na.EMPTY_NODE.updateChild(this.indexPath_,Pa);return new fa(yo,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(da),Ba=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return Ir("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return Ir("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return Ir("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return Ir("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){Ir("DataSnapshot.child",0,1,arguments.length),t=String(t),aa("DataSnapshot.child",1,t,!1);var n=new Bo(t),i=this.ref_.child(n);return new e(this.node_.getChild(n),i,ba)},e.prototype.hasChild=function(e){Ir("DataSnapshot.hasChild",1,1,arguments.length),aa("DataSnapshot.hasChild",1,e,!1);var t=new Bo(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return Ir("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;return Ir("DataSnapshot.forEach",1,1,arguments.length),Dr("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(i,r){return t(new e(r,n.ref_.child(i),ba))})},e.prototype.hasChildren=function(){return Ir("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return Ir("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return Ir("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),ja=function(){function e(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+yr(this.snapshot.exportVal())},e}(),Va=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),qa=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new ja("value",this,new Ba(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){nr(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var i=this.callback_;return function(){i.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Va(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Ha=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,Ar(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Va(this,e,t):null},e.prototype.createEvent=function(e,t){nr(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),i=t.getQueryParams().getIndex();return new ja(e.type,this,new Ba(e.snapshotNode,n,i),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){nr(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var i=this.callbacks_[e.eventType];return function(){i.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var i=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),o=i.length;if(o===r.length){if(1!==o)return r.every(function(e){return t.callbacks_[e]===n.callbacks_[e]});var a=i[0],s=r[0];return!(s!==a||t.callbacks_[a]&&this.callbacks_[s]&&t.callbacks_[a]!==this.callbacks_[s])}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Wa=function(){function e(e,t,n,i){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return nr(Ra,"Reference.ts has not been loaded"),Ra},set:function(e){Ra=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ga){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=vo)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!=yo)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(e.getIndex()===ba){if(null!=t&&!Zo(t)||null!=n&&!Zo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(nr(e.getIndex()instanceof Ua||e.getIndex()===Fa,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return Ir("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,i,r){Ir("Query.on",2,4,arguments.length),ra("Query.on",1,t,!1),Dr("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",i,r);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[t]=n,this.onChildEvent(a,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var i=new qa(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,i)},e.prototype.onChildEvent=function(e,t,n){var i=new Ha(e,t,n);this.repo.addEventCallbackForQuery(this,i)},e.prototype.off=function(e,t,n){Ir("Query.off",0,3,arguments.length),ra("Query.off",1,e,!0),Dr("Query.off",2,t,!0),Nr("Query.off",3,n,!0);var i=null,r=null;"value"===e?i=new qa(t||null,null,n||null):e&&(t&&((r={})[e]=t),i=new Ha(r,null,n||null)),this.repo.removeEventCallbackForQuery(this,i)},e.prototype.once=function(t,n,i,r){var o=this;Ir("Query.once",1,4,arguments.length),ra("Query.once",1,t,!1),Dr("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",i,r),s=!0,u=new cr;u.promise.catch(function(){});var c=function(e){s&&(s=!1,o.off(t,c),n&&n.bind(a.context)(e),u.resolve(e))};return this.on(t,c,function(e){o.off(t,c),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)}),u.promise},e.prototype.limitToFirst=function(t){if(Ir("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(Ir("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(Ir("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');aa("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Bo(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new Ua(n),r=this.queryParams_.orderBy(i);return e.validateQueryEndpoints_(r),new e(this.repo,this.path,r,!0)},e.prototype.orderByKey=function(){Ir("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(ga);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){Ir("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(ba);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){Ir("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Fa);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),Ir("Query.startAt",0,2,arguments.length),ea("Query.startAt",1,t,this.path,!0),oa("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(t,n);if(e.validateLimit_(i),e.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(n=t=null),new e(this.repo,this.path,i,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),Ir("Query.endAt",0,2,arguments.length),ea("Query.endAt",1,t,this.path,!0),oa("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(t,n);if(e.validateLimit_(i),e.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,i,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(Ir("Query.equalTo",1,2,arguments.length),ea("Query.equalTo",1,e,this.path,!1),oa("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return Ir("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return Ir("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=_o(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(Ir("Query.isEqual",1,1,arguments.length),!(t instanceof e))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===t.repo,i=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return n&&i&&r},e.getCancelAndContextArgs_=function(e,t,n){var i={cancel:null,context:null};if(t&&n)i.cancel=t,Dr(e,3,i.cancel,!0),i.context=n,Nr(e,4,i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error(xr(e,3,!0)+" must either be a cancel callback or a context object.");i.cancel=t}return i},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),Ga=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&0<this.children.size){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var i=t.getFront();this.children.has(i)||this.children.set(i,new e);var r=this.children.get(i);t=t.popFront(),r.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(ba,function(e,t){n.remember(new Bo(e),t)}),this.forget(e)}if(0<this.children.size){var i=e.getFront();return e=e.popFront(),this.children.has(i)&&this.children.get(i).forget(e)&&this.children.delete(i),0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild(function(n,i){var r=new Bo(e.toString()+"/"+n);i.forEachTree(r,t)})},e.prototype.forEachChild=function(e){this.children.forEach(function(t,n){e(n,t)})},e}(),za=function(e,t){return e&&"object"==typeof e?(nr(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},Ka=function(e,t){var n,i=e.getPriority().val(),r=za(i,t);if(e.isLeafNode()){var o=e,a=za(o.getValue(),t);return a!==o.getValue()||r!==o.getPriority().val()?new ya(a,Ma(r)):e}var s=e;return r!==(n=s).getPriority().val()&&(n=n.updatePriority(new ya(r))),s.forEachChild(ba,function(e,i){var r=Ka(i,t);r!==i&&(n=n.updateImmediateChild(e,r))}),n};(La=$a||($a={}))[La.OVERWRITE=0]="OVERWRITE",La[La.MERGE=1]="MERGE",La[La.ACK_USER_WRITE=2]="ACK_USER_WRITE",La[La.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Qa,Ya,Xa=function(){function e(e,t,n,i){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=i,nr(!i||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),Ja=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=$a.ACK_USER_WRITE,this.source=Xa.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return nr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Bo(t));return new e(Bo.Empty,n,this.revert)}return nr(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),Za=function(){function e(e,t){void 0===t&&(Qa||(Qa=new Ca(Ao)),t=Qa),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return So(t,function(e,t){n=n.set(new Bo(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:Bo.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),i=this.children.get(n);if(null===i)return null;var r=i.findRootMostMatchingPathAndValue(e.popFront(),t);return null==r?null:{path:new Bo(n).child(r.path),value:r.value}},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),i=this.children.get(n);return null!==i?i.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var i=t.getFront(),r=(this.children.get(i)||e.Empty).set(t.popFront(),n),o=this.children.insert(i,r);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),i=this.children.get(n);if(i){var r=i.remove(t.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var i,r=t.getFront(),o=(this.children.get(r)||e.Empty).setTree(t.popFront(),n);return i=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new e(this.value,i)},e.prototype.fold=function(e){return this.fold_(Bo.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(i,r){n[i]=r.fold_(e.child(i),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,Bo.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var i=!!this.value&&n(t,this.value);if(i)return i;if(e.isEmpty())return null;var r=e.getFront(),o=this.children.get(r);return o?o.findOnPath_(e.popFront(),t.child(r),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,Bo.Empty,t)},e.prototype.foreachOnPath_=function(t,n,i){if(t.isEmpty())return this;this.value&&i(n,this.value);var r=t.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(t.popFront(),n.child(r),i):e.Empty},e.prototype.foreach=function(e){this.foreach_(Bo.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,i){i.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}(),es=function(){function e(e,t){this.source=e,this.path=t,this.type=$a.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,Bo.Empty):new e(this.source,this.path.popFront())},e}(),ts=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=$a.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,Bo.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),ns=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=$a.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new Bo(t));return n.isEmpty()?null:n.value?new ts(this.source,Bo.Empty,n.value):new e(this.source,Bo.Empty,n)}return nr(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),is=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),rs=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,i){return new e(new is(t,n,i),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,i){return new e(this.eventCache_,new is(t,n,i))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new is(Na.EMPTY_NODE,!1,!1),new is(Na.EMPTY_NODE,!1,!1)),e}(),os=function(){function e(e,t,n,i,r){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=i,this.prevName=r}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,i){return new e(e.CHILD_CHANGED,n,t,i)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),as=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,i,r,o){nr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(os.childRemovedChange(t,a)):nr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(os.childAddedChange(t,n)):o.trackChildChange(os.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ba,function(e,i){t.hasChild(e)||n.trackChildChange(os.childRemovedChange(e,i))}),t.isLeafNode()||t.forEachChild(ba,function(t,i){if(e.hasChild(t)){var r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(os.childChangedChange(t,i,r))}else n.trackChildChange(os.childAddedChange(t,i))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Na.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),ss=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;nr(t==os.CHILD_ADDED||t==os.CHILD_CHANGED||t==os.CHILD_REMOVED,"Only child changes supported for tracking"),nr(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if(t==os.CHILD_ADDED&&r==os.CHILD_REMOVED)this.changeMap.set(n,os.childChangedChange(n,e.snapshotNode,i.snapshotNode));else if(t==os.CHILD_REMOVED&&r==os.CHILD_ADDED)this.changeMap.delete(n);else if(t==os.CHILD_REMOVED&&r==os.CHILD_CHANGED)this.changeMap.set(n,os.childRemovedChange(n,i.oldSnap));else if(t==os.CHILD_CHANGED&&r==os.CHILD_ADDED)this.changeMap.set(n,os.childAddedChange(n,e.snapshotNode));else{if(t!=os.CHILD_CHANGED||r!=os.CHILD_CHANGED)throw ir("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,os.childChangedChange(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),us=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),cs=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new is(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,t,1,n,e);return 0===r.length?null:r[0]},e}(),ls=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){nr(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),nr(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,i,r){var o,a,s=new ss;if(n.type===$a.OVERWRITE){var u=n;o=u.source.fromUser?this.applyUserOverwrite_(t,u.path,u.snap,i,r,s):(nr(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),this.applyServerOverwrite_(t,u.path,u.snap,i,r,a,s))}else if(n.type===$a.MERGE){var c=n;o=c.source.fromUser?this.applyUserMerge_(t,c.path,c.children,i,r,s):(nr(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,c.path,c.children,i,r,a,s))}else if(n.type===$a.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(t,l.path,i,r,s):this.ackUserWrite_(t,l.path,l.affectedTree,i,r,s)}else{if(n.type!==$a.LISTEN_COMPLETE)throw ir("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,i,s)}var h=s.getChanges();return e.maybeAddValueEvent_(t,o,h),new function(e,t){this.viewCache=e,this.changes=t}(o,h)},e.maybeAddValueEvent_=function(e,t,n){var i=t.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=e.getCompleteEventSnap();(0<n.length||!e.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(os.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,i,r){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(nr(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof Na?u:Na.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(e.getEventCache().getNode(),l,r)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,r)}else{var f=t.getFront();if(".priority"==f){nr(1==t.getLength(),"Can't have a priority with additional path components");var d=o.getNode();s=e.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(t,d,s);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var g=t.popFront(),m=void 0;if(o.isCompleteForChild(f)){s=e.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);m=null!=v?o.getNode().getImmediateChild(f).updateChild(g,v):o.getNode().getImmediateChild(f)}else m=n.calcCompleteChild(f,e.getServerCache());a=null!=m?this.filter_.updateChild(o.getNode(),f,m,g,i,r):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,i,r,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&1<t.getLength())return e;var f=t.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,us,null)}var p=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),g=new cs(i,p,r);return this.generateEventCacheAfterServerEvent_(p,t,i,g,a)},e.prototype.applyUserOverwrite_=function(e,t,n,i,r,o){var a,s,u=e.getEventCache(),c=new cs(i,e,r);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Na.EMPTY_NODE}if(f.equals(d))a=e;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);a=e.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,i,r,o,a){var s=this,u=t;return i.foreach(function(i,c){var l=n.child(i);e.cacheHasChild_(t,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,r,o,a))}),i.foreach(function(i,c){var l=n.child(i);e.cacheHasChild_(t,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,r,o,a))}),u},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,i,r,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:Za.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal(function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Bo(t),h,i,r,o,a)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new Bo(t),f,i,r,o,a)}}),c},e.prototype.ackUserWrite_=function(e,t,n,i,r,o){if(null!=i.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),i,r,a,o);if(t.isEmpty()){var u=Za.Empty;return s.getNode().forEachChild(ga,function(e,t){u=u.set(new Bo(e),t)}),this.applyServerMerge_(e,t,u,i,r,a,o)}return e}var c=Za.Empty;return n.foreach(function(e,n){var i=t.child(e);s.isCompleteForPath(i)&&(c=c.set(e,s.getNode().getChild(i)))}),this.applyServerMerge_(e,t,c,i,r,a,o)},e.prototype.listenComplete_=function(e,t,n,i){var r=e.getServerCache(),o=e.updateServerSnap(r.getNode(),r.isFullyInitialized()||t.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,us,i)},e.prototype.revertUserWrite_=function(e,t,n,i,r){var o;if(null!=n.shadowingWrite(t))return e;var a=new cs(n,e,i),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var l=e.getServerCache().getNode();nr(l instanceof Na,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,r)}else{var h=t.getFront(),f=n.calcCompleteChild(h,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,t.popFront(),a,r):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,Na.EMPTY_NODE,t.popFront(),a,r):s).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,r))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Bo.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},e}(),hs=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var i=this,r=[],o=[];return e.forEach(function(e){e.type===os.CHILD_CHANGED&&i.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(os.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(r,os.CHILD_REMOVED,e,n,t),this.generateEventsForType_(r,os.CHILD_ADDED,e,n,t),this.generateEventsForType_(r,os.CHILD_MOVED,o,n,t),this.generateEventsForType_(r,os.CHILD_CHANGED,e,n,t),this.generateEventsForType_(r,os.VALUE,e,n,t),r},e.prototype.generateEventsForType_=function(e,t,n,i,r){var o=this,a=n.filter(function(e){return e.type===t});a.sort(this.compareChanges_.bind(this)),a.forEach(function(t){var n=o.materializeSingleChange_(t,r);i.forEach(function(i){i.respondsTo(t.type)&&e.push(i.createEvent(n,o.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw ir("Should only compare child_ events.");var n=new fa(e.childName,e.snapshotNode),i=new fa(t.childName,t.snapshotNode);return this.index_.compare(n,i)},e}(),fs=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new as(n.getIndex()),r=n.getNodeFilter();this.processor_=new ls(r);var o=t.getServerCache(),a=t.getEventCache(),s=i.updateFullNode(Na.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(Na.EMPTY_NODE,a.getNode(),null),c=new is(s,o.isFullyInitialized(),i.filtersNodes()),l=new is(u,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=new rs(l,c),this.eventGenerator_=new hs(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){nr(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var r=e.createCancelEvent(t,i);r&&n.push(r)})}if(e){for(var r=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(o+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===$a.MERGE&&null!==e.source.queryId&&(nr(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),nr(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,r=this.processor_.applyOperation(i,e,t,n);return this.processor_.assertIndexed(r.viewCache),nr(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ba,function(e,t){n.push(os.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(os.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var i=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,i)},e}(),ds=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return nr(Ya,"Reference.ts has not been loaded"),Ya},set:function(e){nr(!Ya,"__referenceConstructor has already been defined"),Ya=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var i,r,o=e.source.queryId;if(null!==o){var a=this.views.get(o);return nr(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,t,n)}var s=[];try{for(var u=Ji(this.views.values()),c=u.next();!c.done;c=u.next())a=c.value,s=s.concat(a.applyOperation(e,t,n))}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return s},e.prototype.addEventRegistration=function(e,t,n,i,r){var o=e.queryIdentifier(),a=this.views.get(o);if(!a){var s,u=n.calcCompleteEventCache(r?i:null);s=!!u||(u=i instanceof Na?n.calcCompleteEventChildren(i):Na.EMPTY_NODE,!1);var c=new rs(new is(u,s,!1),new is(i,r,!1));a=new fs(e,c),this.views.set(o,a)}return a.addEventRegistration(t),a.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,i){var r,o,a=t.queryIdentifier(),s=[],u=[],c=this.hasCompleteView();if("default"===a)try{for(var l=Ji(this.views.entries()),h=l.next();!h.done;h=l.next()){var f=Zi(h.value,2),d=f[0],p=f[1];u=u.concat(p.removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(d),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}else(p=this.views.get(a))&&(u=u.concat(p.removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return c&&!this.hasCompleteView()&&s.push(new e.__referenceConstructor(t.repo,t.path)),{removed:s,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var i=Ji(this.views.values()),r=i.next();!r.done;r=i.next()){var o=r.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,i=null;try{for(var r=Ji(this.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;i=i||a.getCompleteServerCache(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return i},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=Ji(this.views.values()),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.getQuery().getQueryParams().loadsAllData())return r}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),ps=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new Za(n));var i=this.writeTree_.findRootMostValueAndPath(t);if(null!=i){var r=i.path,o=i.value,a=Bo.relativePath(r,t);return o=o.updateChild(a,n),new e(this.writeTree_.set(r,o))}var s=new Za(n);return new e(this.writeTree_.setTree(t,s))},e.prototype.addWrites=function(e,t){var n=this;return So(t,function(t,i){n=n.addWrite(e.child(t),i)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,Za.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(Bo.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ba,function(t,n){e.push(new fa(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new fa(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new Za(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return function e(t,n,i){if(null!=n.value)return i.updateChild(t,n.value);var r=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(nr(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):i=e(t.child(n),o,i)}),i.getChild(t).isEmpty()||null===r||(i=i.updateChild(t.child(".priority"),r)),i}(Bo.Empty,this.writeTree_,e)},e.Empty=new e(new Za(null)),e}(),gs=function(){function e(){this.visibleWrites_=ps.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new ms(e,this)},e.prototype.addOverwrite=function(e,t,n,i){nr(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){nr(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});nr(0<=n,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,o=!1,a=this.allWrites_.length-1;r&&0<=a;){var s=this.allWrites_[a];s.visible&&(n<=a&&this.recordContainsPath_(s,i.path)?r=!1:i.path.contains(s.path)&&(o=!0)),a--}return!!r&&(o?(this.resetTree_(),!0):(i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):So(i.children,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(i.path.child(e))}),!0))},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(t);if(!r&&o.isEmpty())return n;if(r||null!=n||o.hasCompleteWrite(Bo.Empty)){var a=e.layerTree_(this.allWrites_,function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t);return c=n||Na.EMPTY_NODE,a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(t);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Bo.Empty)){var c=n||Na.EMPTY_NODE;return u.apply(c)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=Na.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(e);if(i)return i.isLeafNode()||i.forEachChild(ba,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var r=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(ba,function(e,t){var i=r.childCompoundWrite(new Bo(e)).apply(t);n=n.updateImmediateChild(e,i)}),r.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,i){nr(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=e.child(t);if(this.visibleWrites_.hasCompleteWrite(r))return null;var o=this.visibleWrites_.childCompoundWrite(r);return o.isEmpty()?i.getChild(t):o.apply(i.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var i=e.child(t),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,i,r,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(Bo.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<i;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,Bo.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var i=ps.Empty,r=0;r<e.length;++r){var o=e[r];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=Bo.relativePath(n,a),i=i.addWrite(s,o.snap)):a.contains(n)&&(s=Bo.relativePath(a,n),i=i.addWrite(Bo.Empty,o.snap.getChild(s)));else{if(!o.children)throw ir("WriteRecord should have .snap or .children");if(n.contains(a))s=Bo.relativePath(n,a),i=i.addWrites(s,o.children);else if(a.contains(n))if((s=Bo.relativePath(a,n)).isEmpty())i=i.addWrites(Bo.Empty,o.children);else{var u=wr(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());i=i.addWrite(Bo.Empty,c)}}}}}return i},e}(),ms=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,i,r)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),vs=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=Za.Empty,this.pendingWriteTree_=new gs,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,i){return this.pendingWriteTree_.addOverwrite(e,t,n,i),i?this.applyOperationToSyncPoints_(new ts(Xa.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var i=Za.fromObject(t);return this.applyOperationToSyncPoints_(new ns(Xa.User,e,i))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var i=Za.Empty;return null!=n.snap?i=i.set(Bo.Empty,!0):So(n.children,function(e,t){i=i.set(new Bo(e),t)}),this.applyOperationToSyncPoints_(new Ja(n.path,i,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new ts(Xa.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=Za.fromObject(t);return this.applyOperationToSyncPoints_(new ns(Xa.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new es(Xa.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,i){var r=this.queryKeyForTag_(i);if(null==r)return[];var o=e.parseQueryKey_(r),a=o.path,s=o.queryId,u=Bo.relativePath(a,t),c=new ts(Xa.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)},e.prototype.applyTaggedQueryMerge=function(t,n,i){var r=this.queryKeyForTag_(i);if(r){var o=e.parseQueryKey_(r),a=o.path,s=o.queryId,u=Bo.relativePath(a,t),c=Za.fromObject(n),l=new ns(Xa.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var i=this.queryKeyForTag_(n);if(i){var r=e.parseQueryKey_(i),o=r.path,a=r.queryId,s=Bo.relativePath(o,t),u=new es(Xa.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var i=t.path,r=null,o=!1;this.syncPointTree_.foreachOnPath(i,function(e,t){var n=Bo.relativePath(e,i);r=r||t.getCompleteServerCache(n),o=o||t.hasCompleteView()});var a,s=this.syncPointTree_.get(i);s?(o=o||s.hasCompleteView(),r=r||s.getCompleteServerCache(Bo.Empty)):(s=new ds,this.syncPointTree_=this.syncPointTree_.set(i,s)),null!=r?a=!0:(a=!1,r=Na.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild(function(e,t){var n=t.getCompleteServerCache(Bo.Empty);n&&(r=r.updateImmediateChild(e,n))}));var u=s.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var c=e.makeQueryKey_(t);nr(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=e.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(i),f=s.addEventRegistration(t,n,h,r,a);if(!u&&!o){var d=s.viewForQuery(t);f=f.concat(this.setupListener_(t,d))}return f},e.prototype.removeEventRegistration=function(t,n,i){var r=this,o=t.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,i);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(e,t){return t.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],m=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(e.queryForListening_(m),this.tagForQuery_(m),v.hashFn,v.onComplete)}}!h&&0<c.length&&!i&&(l?this.listenProvider_.stopListening(e.queryForListening_(t),null):c.forEach(function(t){var n=r.queryToTagMap.get(e.makeQueryKey_(t));r.listenProvider_.stopListening(e.queryForListening_(t),n)})),this.removeTags_(c)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(e,function(t,n){var i=Bo.relativePath(t,e),r=n.getCompleteServerCache(i);if(r)return r});return n.calcCompleteEventCache(e,i,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var i=[];return t&&(i=t.getQueryViews()),So(n,function(e,t){i=i.concat(t)}),i})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var i=t[n];if(!i.getQueryParams().loadsAllData()){var r=e.makeQueryKey_(i),o=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var i=t.path,r=this.tagForQuery_(t),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),r,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(i);if(r)nr(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var i=[];return t&&(i=i.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),So(n,function(e,t){i=i.concat(t)}),i}),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(e.queryForListening_(l),this.tagForQuery_(l))}return a},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||Na.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return i?t.applyTaggedListenComplete(n.path,i):t.applyListenComplete(n.path);var r=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var i=new Error(e+" at "+t.path.toString()+": "+n);return i.code=e.toUpperCase(),i}(e,n);return t.removeEventRegistration(n,null,r)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return nr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Bo(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);nr(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,i,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Bo.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,i);var r=t.get(Bo.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(Bo.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=i.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return r&&(o=o.concat(r.applyOperation(e,i,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,i){var r=this,o=t.get(Bo.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Bo.Empty));var a=[];return t.children.inorderTraversal(function(t,o){var s=n?n.getImmediateChild(t):null,u=i.child(t),c=e.operationForChild(t);c&&(a=a.concat(r.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(e,i,n))),a},e.nextQueryTag_=1,e}(),ys=function(){function e(){this.rootNode_=Na.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),bs=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(lo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',go(e)},e}(),As=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Ar(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return sr(this.counters_)},e}(),ws=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new As),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),_s=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=Qi({},e);return this.last_&&So(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),Cs=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _s(e);var n=1e4+2e4*Math.random();Uo(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t={},n=!1;So(this.statsListener_.get(),function(i,r){0<r&&Ar(e.statsToReport_,i)&&(t[i]=r,n=!0)}),n&&this.server_.reportStats(t),Uo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Ss=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n],r=i.getPath();null===t||r.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Es(r)),t.add(i)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];i&&(e(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Es=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();so&&lo("event: "+t.toString()),Fo(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Ts=function(){function e(e){this.allowedEvents_=e,this.listeners_={},nr(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var i=er(this.listeners_[e]),r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var i=this.getInitialEvent(e);i&&t.apply(n,i)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var i=this.listeners_[e]||[],r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)},e.prototype.validateEventType_=function(e){nr(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),ks=function(e){function t(){var t,n,i=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==i.visible_&&(i.visible_=e,i.trigger("visible",e))},!1),i}return Ki(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return nr("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Ts),Is=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||hr()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return Ki(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return nr("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Ts),xs=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var i=function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=function(t){e[t]&&Fo(function(){n.onMessage_(e[t])})},i=0;i<e.length;++i)t(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},e}(),Ds=function(){function e(e,t,n,i){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ho(e),this.stats_=ws.getCollection(t),this.urlFn=function(e){return t.connectionURL(Ho,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xs(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Ns(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Zi(e,5),r=i[0],o=i[1],a=i[2];if(i[3],i[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=o,n.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Zi(e,2),r=i[0],o=i[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(r,o)},function(){n.onClosed_()},n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Vo)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!dr()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=yr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n,i=(n=rr(t),ar.encodeByteArray(n,!0)),r=Co(i,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(e){var t=yr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Ns=function(){function e(t,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ro(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){lo("frame writing exception"),t.stack&&lo(t.stack),lo(t)}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||lo("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",i=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var i=function(){n.outstandingRequests.delete(t),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,function(){clearTimeout(r),i()})},e.prototype.addTag=function(e,t){var n=this;setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){lo("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(e){}},Math.floor(1))},e}(),Ps="",Os=null;"undefined"!=typeof MozWebSocket?Os=MozWebSocket:"undefined"!=typeof WebSocket&&(Os=WebSocket);var Ms=function(){function e(t,n,i,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ho(this.connId),this.stats_=ws.getCollection(n),this.connURL=e.connectionURL_(n,i,r)}return e.connectionURL_=function(e,t,n){var i={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Vo)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),e.connectionURL(qo,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,to.set("previous_websocket_failure",!0);try{this.mySock=new Os(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var i=e.message||e.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&1<n.length&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Os&&!e.forceDisallow_},e.previouslyFailed=function(){return to.isInMemoryStorage||!0===to.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){to.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=vr(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(nr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=yr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Co(t,16384);1<n.length&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Rs=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Ds,Ms]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n,i,r=Ms&&Ms.isAvailable(),o=r&&!Ms.previouslyFailed();if(t.webSocketOnly&&(r||go("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Ms];else{var a=this.transports_=[];try{for(var s=Ji(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},e}(),$s=function(){function e(e,t,n,i,r,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=r,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ho("c:"+this.id+":"),this.transportManager_=new Rs(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,i)},Math.floor(0));var r=t.healthyTimeout||0;0<r&&(this.healthyTimeout_=Uo(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(r)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=wo("t",e),n=wo("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=wo("t",e),n=wo("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=wo("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?fo("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fo("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&go("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Uo(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uo(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(to.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),Ls=function(){function e(){}return e.prototype.put=function(e,t,n,i){},e.prototype.merge=function(e,t,n,i){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Fs=function(e){function t(n,i,r,o,a,s){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=i,u.onConnectStatus_=r,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=t.nextPersistentConnectionId_++,u.log_=ho("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=1e3,u.maxReconnectDelay_=3e5,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!dr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),ks.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&Is.getInstance().on("online",u.onOnline_,u),u}return Ki(t,e),t.prototype.sendRequest=function(e,t,n){var i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(yr(r)),nr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},t.prototype.listen=function(e,t,n,i){var r=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),nr(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),nr(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,i=e.query,r=i.path.toString(),o=i.queryIdentifier();this.log_("Listen on "+r+" for "+o);var a={p:r};e.tag&&(a.q=i.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,i),(n.listens.get(r)&&n.listens.get(r).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(r,o),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&Ar(e,"w")){var n=wr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',r=t.path.toString();go("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+r+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t;(e&&40===e.length||"object"==typeof(t=br(e).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e,t=this;if(this.connected_&&this.authToken_){var n=this.authToken_,i=(e=br(n).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",r={cred:n};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,function(e){var i=e.s,r=e.d||"error";t.authToken_===n&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,r))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),i=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),nr(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);var r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,i){var r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,function(e){i&&setTimeout(function(){i(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,i){this.putInternal("p",e,t,n,i)},t.prototype.merge=function(e,t,n,i){this.putInternal("m",e,t,n,i)},t.prototype.putInternal=function(e,t,n,i,r){var o={p:t,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,function(i){t.log_(n+" response",i),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),r&&r(i.s,i.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+yr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):fo("Unrecognized action received from server: "+yr(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;nr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+t.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())};this.realtime_={close:c,sendRequest:function(e){nr(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then(function(t){s?lo("getToken() completed but was canceled"):(lo("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new $s(r,o.repoInfo_,e,n,i,function(e){go(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(e){o.log_("Failed to get token: "+e),s||c()})}},t.prototype.interrupt=function(e){lo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){lo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],_r(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return _o(e)}).join("$"):"default";var i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,i=new Bo(e).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(t),r.delete(t),0===r.size&&this.listens.delete(i)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){lo("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,i;this.tryAuth();try{for(var r=Ji(this.listens.values()),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var s=Ji(a.values()),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},t.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+Ps.replace(/\./g,"-")]=1,hr()?e["framework.cordova"]=1:fr()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Is.getInstance().currentlyOnline();return _r(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(Ls),Us=function(e){function t(t,n,i){var r=e.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=ho("p:rest:"),r.listens_={},r}return Ki(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(nr(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,i,r){var o=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=t.getListenId_(e,i),u={};this.listens_[s]=u;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(e,t){var n=t;404===e&&(e=n=null),null===e&&o.onDataUpdate_(a,n,!1,i),wr(o.listens_,s)===u&&r(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,n){var i=t.getListenId_(e,n);delete this.listens_[i]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var i=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(r){var o=r&&r.accessToken;o&&(t.auth=o);var a=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+e+"?ns="+i.repoInfo_.namespace+function(e){var t,n,i=[],r=function(e,t){Array.isArray(t)?t.forEach(function(t){i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))};try{for(var o=Ji(Object.entries(e)),a=o.next();!a.done;a=o.next()){var s=Zi(a.value,2);r(s[0],s[1])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i.length?"&"+i.join("&"):""}(t);i.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){i.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(200<=s.status&&s.status<300){try{e=vr(s.responseText)}catch(e){go("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&go("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},t}(Ls),Bs="repo_interrupt",js=function(){function e(e,t,n){var i=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ss,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ga,this.persistentConnection_=null;var r=new bs(n);if(this.stats_=ws.getCollection(e),t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Us(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yr(o)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new Fs(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(e){i.server_.refreshAuthToken(e)}),this.statsReporter_=ws.getOrCreateReporter(e,function(){return new Cs(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new ys,this.infoSyncTree_=new vs({startListening:function(e,t,n,r){var o=[],a=i.infoData_.getNode(e.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new vs({startListening:function(e,t,n,r){return i.server_.listen(e,n,t,function(t,n){var o=r(t,n);i.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,t){i.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new Bo(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,i){this.dataUpdateCount++;var r=new Bo(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(i)if(n){var a=Cr(t,function(e){return Ma(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var s=Ma(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(r,s,i)}else if(n){var u=Cr(t,function(e){return Ma(e)});o=this.serverSyncTree_.applyServerMerge(r,u)}else{var c=Ma(t);o=this.serverSyncTree_.applyServerOverwrite(r,c)}var l=r;0<o.length&&(l=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(l,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;So(e,function(e,n){t.updateInfo_(n,e)})},e.prototype.updateInfo_=function(e,t){var n=new Bo("/.info/"+e),i=Ma(t);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,i){var r=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),a=Ma(t,n),s=Ka(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),function(t,n){var o="ok"===t;o||go("set at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(u,!o);r.eventQueue_.raiseEventsForChangedPath(e,a),r.callOnCompleteCallback(i,t,n)});var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},e.prototype.update=function(e,t,n){var i=this;this.log_("update",{path:e.toString(),value:t});var r=!0,o=this.generateServerValues(),a={};if(So(t,function(e,t){r=!1;var n=Ma(t);a[e]=Ka(n,o)}),r)lo("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,function(t,r){var o="ok"===t;o||go("update at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(s,!o),u=0<a.length?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(u,a),i.callOnCompleteCallback(n,t,r)}),So(t,function(t){var n=i.abortTransactions_(e.child(t));i.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t,n,i,r=this.generateServerValues(),o=[];(t=this.onDisconnect_,n=r,i=new Ga,t.forEachTree(new Bo(""),function(e,t){i.remember(e,Ka(t,n))}),i).forEachTree(Bo.Empty,function(t,n){o=o.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)}),this.onDisconnect_=new Ga,this.eventQueue_.raiseEventsForChangedPath(Bo.Empty,o)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(i,r){"ok"===i&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,i,r)})},e.prototype.onDisconnectSet=function(e,t,n){var i=this,r=Ma(t);this.server_.onDisconnectPut(e.toString(),r.val(!0),function(t,o){"ok"===t&&i.onDisconnect_.remember(e,r),i.callOnCompleteCallback(n,t,o)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,i){var r=this,o=Ma(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,n){"ok"===t&&r.onDisconnect_.remember(e,o),r.callOnCompleteCallback(i,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var i=this;if(_r(t))return lo("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(r,o){"ok"===r&&So(t,function(t,n){var r=Ma(n);i.onDisconnect_.remember(e.child(t),r)}),i.callOnCompleteCallback(n,r,o)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Bs)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Bs)},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;t=e?(this.statsListener_||(this.statsListener_=new _s(this.stats_)),this.statsListener_.get()):this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);So(t,function(e,t){for(var i=e,r=e.length;r<n+2;r++)i+=" ";console.log(i+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),lo.apply(void 0,er([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&Fo(function(){if("ok"==t)e(null);else{var i=(t||"error").toUpperCase(),r=i;n&&(r+=": "+n);var o=new Error(r);o.code=i,e(o)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new Zs(this))},enumerable:!0,configurable:!0}),e}(),Vs=function(){function e(t){this.indexedFilter_=new as(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,i,r,o){return this.matches(new fa(t,n))||(n=Na.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Na.EMPTY_NODE);var i=t.withIndex(this.index_);i=i.updatePriority(Na.EMPTY_NODE);var r=this;return t.forEachChild(ba,function(e,t){r.matches(new fa(e,t))||(i=i.updateImmediateChild(e,Na.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),qs=function(){function e(e){this.rangedFilter_=new Vs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,i,r,o){return this.rangedFilter_.matches(new fa(t,n))||(n=Na.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,o):this.fullLimitUpdateChild_(e,t,n,r,o)},e.prototype.updateFullNode=function(e,t,n){var i;if(t.isLeafNode()||t.isEmpty())i=Na.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){i=Na.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var a=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(a.name,a.node),o++}}else{i=(i=t.withIndex(this.index_)).updatePriority(Na.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(r=void 0,this.reverse_){r=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else r=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;r.hasNext();)a=r.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:i=i.updateImmediateChild(a.name,Na.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,i,r){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;nr(s.numChildren()==this.limit_,"");var u=new fa(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=i.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==t||s.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(l&&!n.isEmpty()&&0<=d)return null!=r&&r.trackChildChange(os.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=r&&r.trackChildChange(os.childRemovedChange(t,h));var p=s.updateImmediateChild(t,Na.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=r&&r.trackChildChange(os.childAddedChange(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&0<=o(c,u)?(null!=r&&(r.trackChildChange(os.childRemovedChange(c.name,c.node)),r.trackChildChange(os.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Na.EMPTY_NODE)):e},e}(),Hs=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ba}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return nr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return nr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vo},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return nr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return nr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yo},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return nr(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,n.indexStartName_=null!=t?(n.startNameSet_=!0,t):(n.startNameSet_=!1,""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,n.indexEndName_=void 0!==t?(n.endNameSet_=!0,t):(n.endNameSet_=!1,""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=i}return this.index_!==ba&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==ba},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new as(this.getIndex()):this.hasLimit()?new qs(this):new Vs(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(t=this.index_===ba?n.PRIORITY_INDEX:this.index_===Fa?n.VALUE_INDEX:this.index_===ga?n.KEY_INDEX:(nr(this.index_ instanceof Ua,"Unrecognized index type!"),this.index_.toString()),i[n.ORDER_BY]=yr(t),this.startSet_&&(i[n.START_AT]=yr(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+yr(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=yr(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+yr(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),Ws=function(e){function t(t,n){if(!(t instanceof js))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,Hs.DEFAULT,!1)||this}return Ki(t,e),t.prototype.getKey=function(){return Ir("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){var n,i,r,o;return Ir("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof Bo||(null===this.path.getFront()?(n="Reference.child",o=!(i=1),(r=e)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),aa(n,i,r,o)):aa("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){Ir("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){Ir("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){Ir("Reference.set",1,2,arguments.length),sa("Reference.set",this.path),ea("Reference.set",1,e,this.path,!1),Dr("Reference.set",2,t,!0);var n=new cr;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(Ir("Reference.update",1,2,arguments.length),sa("Reference.update",this.path),Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,go("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}na("Reference.update",1,e,this.path,!1),Dr("Reference.update",2,t,!0);var r=new cr;return this.repo.update(this.path,e,r.wrapCallback(t)),r.promise},t.prototype.setWithPriority=function(e,t,n){if(Ir("Reference.setWithPriority",2,3,arguments.length),sa("Reference.setWithPriority",this.path),ea("Reference.setWithPriority",1,e,this.path,!1),ia("Reference.setWithPriority",2,t,!1),Dr("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new cr;return this.repo.setWithPriority(this.path,e,t,i.wrapCallback(n)),i.promise},t.prototype.remove=function(e){return Ir("Reference.remove",0,1,arguments.length),sa("Reference.remove",this.path),Dr("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(Ir("Reference.transaction",1,3,arguments.length),sa("Reference.transaction",this.path),Dr("Reference.transaction",1,e,!1),Dr("Reference.transaction",2,t,!0),function(e,t,n,i){if(void 0!==n&&"boolean"!=typeof n)throw new Error(xr("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new cr;return"function"==typeof t&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,e,function(e,n,r){e?i.reject(e):i.resolve(new la(n,r)),"function"==typeof t&&t(e,n,r)},n),i.promise},t.prototype.setPriority=function(e,t){Ir("Reference.setPriority",1,2,arguments.length),sa("Reference.setPriority",this.path),ia("Reference.setPriority",1,e,!1),Dr("Reference.setPriority",2,t,!0);var n=new cr;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){Ir("Reference.push",0,2,arguments.length),sa("Reference.push",this.path),ea("Reference.push",1,e,this.path,!0),Dr("Reference.push",2,t,!0);var n,i=this.repo.serverTime(),r=ha(i),o=this.child(r),a=this.child(r);return n=null!=e?o.set(e,t).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},t.prototype.onDisconnect=function(){return sa("Reference.onDisconnect",this.path),new ca(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(Wa);Wa.__referenceConstructor=Ws,ds.__referenceConstructor=Ws;var Gs,zs,Ks=function(){this.children={},this.childCount=0,this.value=null},Qs=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Ks),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,i=t instanceof Bo?t:new Bo(t),r=this;null!==(n=i.getFront());)r=new e(n,r,wr(r.node_.children,n)||new Ks),i=i.popFront();return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){nr(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return 0<this.node_.childCount},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;So(this.node_.children,function(i,r){t(new e(i,n,r))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new Bo(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),i=Ar(this.node_.children,e);n&&i?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();(zs=Gs||(Gs={}))[zs.RUN=0]="RUN",zs[zs.SENT=1]="SENT",zs[zs.COMPLETED=2]="COMPLETED",zs[zs.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",zs[zs.NEEDS_ABORT=4]="NEEDS_ABORT",js.MAX_TRANSACTION_RETRIES_=25,js.prototype.transactions_init_=function(){this.transactionQueueTree_=new Qs},js.prototype.startTransaction=function(e,t,n,i){this.log_("transaction on "+e);var r=function(){},o=new Ws(this,e);o.on("value",r);var a={path:e,update:t,onComplete:n,status:null,order:ro(),applyLocally:i,retryCount:0,unwatcher:function(){o.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(e);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Ba(a.currentInputSnapshot,new Ws(this,a.path),ba);a.onComplete(null,!1,c)}}else{ta("transaction failed: Data returned ",u,a.path),a.status=Gs.RUN;var l=this.transactionQueueTree_.subTree(e),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;"object"==typeof u&&null!==u&&Ar(u,".priority")?(f=wr(u,".priority"),nr(Zo(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(e)||Na.EMPTY_NODE).getPriority().val(),f=f;var d=this.generateServerValues(),p=Ma(u,f),g=Ka(p,d);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(e,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,m),this.sendReadyTransactions_()}},js.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Na.EMPTY_NODE},js.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);nr(0<n.length,"Sending zero length transaction queue"),n.every(function(e){return e.status===Gs.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},js.prototype.sendTransactionQueue_=function(e,t){for(var n=this,i=t.map(function(e){return e.currentWriteId}),r=this.getLatestState_(e,i),o=r,a=r.hash(),s=0;s<t.length;s++){var u=t[s];nr(u.status===Gs.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Gs.SENT,u.retryCount++;var c=Bo.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;this.server_.put(h.toString(),l,function(i){n.log_("transaction put response",{path:h.toString(),status:i});var r=[];if("ok"===i){for(var o=[],a=0;a<t.length;a++){if(t[a].status=Gs.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new Ws(n,t[a].path),c=new Ba(s,u,ba);o.push(t[a].onComplete.bind(null,null,!0,c))}t[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,r),a=0;a<o.length;a++)Fo(o[a])}else{if("datastale"===i)for(a=0;a<t.length;a++)t[a].status===Gs.SENT_NEEDS_ABORT?t[a].status=Gs.NEEDS_ABORT:t[a].status=Gs.RUN;else for(go("transaction at "+h.toString()+" failed: "+i),a=0;a<t.length;a++)t[a].status=Gs.NEEDS_ABORT,t[a].abortReason=i;n.rerunTransactions_(e)}},a)},js.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),i=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(i,n),n},js.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,i=[],r=[],o=e.filter(function(e){return e.status===Gs.RUN}).map(function(e){return e.currentWriteId}),a=0;a<e.length;a++){var s=e[a],u=Bo.relativePath(t,s.path),c=!1,l=void 0;if(nr(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Gs.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Gs.RUN)if(s.retryCount>=js.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=e[a].update(h.val());if(void 0!==f){ta("transaction failed: Data returned ",f,s.path);var d=Ma(f);"object"==typeof f&&null!=f&&Ar(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=s.currentWriteId,g=this.generateServerValues(),m=Ka(d,g);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,m,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],c&&(e[a].status=Gs.COMPLETED,n=e[a].unwatcher,setTimeout(n,Math.floor(0)),e[a].onComplete))if("nodata"===l){var v=new Ws(this,e[a].path),y=e[a].currentInputSnapshot,b=new Ba(y,v,ba);i.push(e[a].onComplete.bind(null,null,!1,b))}else i.push(e[a].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<i.length;a++)Fo(i[a]);this.sendReadyTransactions_()}},js.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},js.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},js.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,i=e.getValue();if(null!==i)for(var r=0;r<i.length;r++)t.push(i[r]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},js.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==Gs.COMPLETED&&(n[i]=n[r],i++);n.length=i,e.setValue(0<n.length?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},js.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),i=this.transactionQueueTree_.subTree(e);return i.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(i),i.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},js.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],i=[],r=-1,o=0;o<t.length;o++)t[o].status===Gs.SENT_NEEDS_ABORT||(t[o].status===Gs.SENT?(nr(r===o-1,"All SENT items should be at beginning of queue."),t[r=o].status=Gs.SENT_NEEDS_ABORT,t[o].abortReason="set"):(nr(t[o].status===Gs.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===r?e.setValue(null):t.length=r+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),i),o=0;o<n.length;o++)Fo(n[o])}};var Ys,Xs="databaseURL",Js=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return Ys||(Ys=new e),Ys},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options[Xs];void 0===n&&po("Can't determine Firebase Database URL.  Be sure to include "+Xs+" option when calling firebase.initializeApp().");var i=Go(n),r=i.repoInfo;return ua("Invalid Firebase Database URL",1,i),i.path.isEmpty()||po("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(r,e).database},e.prototype.deleteRepo=function(e){var t=wr(this.repos_,e.app.name);t&&wr(t,e.repoInfo_.toURLString())===e||po("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=wr(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var i=wr(n,e.toURLString());return i&&po("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new js(e,this.useRestClient_,t),n[e.toURLString()]=i},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),Zs=function(){function e(e){(this.repo_=e)instanceof js||po("Don't call new Database() directly - please use firebase.database()."),this.root_=new Ws(e,Bo.Empty),this.INTERNAL=new eu(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),Ir("database.ref",0,1,arguments.length),e instanceof Ws?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Ir(t,1,1,arguments.length);var n=Go(e);ua(t,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&po(t+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&po("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){Ir("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){Ir("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),eu=function(){function e(e){this.database=e}return e.prototype.delete=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return this.database.checkDeleted_("delete"),Js.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},e}(),tu=Object.freeze({forceLongPolling:function(){Ms.forceDisallow(),Ds.forceAllow()},forceWebSockets:function(){Ds.forceDisallow()},isWebSocketsAvailable:function(){return Ms.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),nu=Fs;Fs.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Fs.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var iu,ru,ou=$s,au=Wo,su=Object.freeze({DataConnection:nu,RealTimeConnection:ou,hijackHash:function(e){var t=Fs.prototype.put;return Fs.prototype.put=function(n,i,r,o){void 0!==o&&(o=e()),t.call(this,n,i,r,o)},function(){Fs.prototype.put=t}},ConnectionTarget:au,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){Js.getInstance().forceRestClient(e)}}),uu=Zs.ServerValue;ru=(iu=Yr).SDK_VERSION,Ps=ru,iu.INTERNAL.registerService("database",function(e,t,n){return Js.getInstance().databaseFromApp(e,n)},{Reference:Ws,Query:Wa,Database:Zs,DataSnapshot:Ba,enableLogging:co,INTERNAL:tu,ServerValue:uu,TEST_ACCESS:su},null,!0);var cu,lu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},hu=hu||{},fu=lu;function du(e){return"string"==typeof e}function pu(e){return"number"==typeof e}function gu(e,t){e=e.split("."),t=t||fu;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function mu(){}function vu(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function yu(e){return"array"==vu(e)}function bu(e){var t=vu(e);return"array"==t||"object"==t&&"number"==typeof e.length}function Au(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var wu="closure_uid_"+(1e9*Math.random()>>>0),_u=0;function Cu(e,t,n){return e.call.apply(e.bind,arguments)}function Su(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Eu(e,t,n){return(Eu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cu:Su).apply(null,arguments)}function Tu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var ku=Date.now||function(){return+new Date};function Iu(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).yb=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}function xu(){this.j=this.j,this.i=this.i}xu.prototype.j=!1,xu.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[wu]||(this[wu]=++_u))},xu.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Du=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(du(e))return du(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Nu=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,r=du(e)?e.split(""):e,o=0;o<i;o++)o in r&&t.call(n,r[o],o,e)};function Pu(e){return Array.prototype.concat.apply([],arguments)}function Ou(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}function Mu(e){return/^[\s\xa0]*$/.test(e)}var Ru,$u=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Lu(e,t){return-1!=e.indexOf(t)}function Fu(e,t){return e<t?-1:t<e?1:0}e:{var Uu=fu.navigator;if(Uu){var Bu=Uu.userAgent;if(Bu){Ru=Bu;break e}}Ru=""}function ju(e,t,n){for(var i in e)t.call(n,e[i],i,e)}function Vu(e){var t,n={};for(t in e)n[t]=e[t];return n}var qu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hu(e,t){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])e[n]=i[n];for(var o=0;o<qu.length;o++)n=qu[o],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Wu(e){return Wu[" "](e),e}Wu[" "]=mu;var Gu,zu,Ku=Lu(Ru,"Opera"),Qu=Lu(Ru,"Trident")||Lu(Ru,"MSIE"),Yu=Lu(Ru,"Edge"),Xu=Yu||Qu,Ju=Lu(Ru,"Gecko")&&!(Lu(Ru.toLowerCase(),"webkit")&&!Lu(Ru,"Edge"))&&!(Lu(Ru,"Trident")||Lu(Ru,"MSIE"))&&!Lu(Ru,"Edge"),Zu=Lu(Ru.toLowerCase(),"webkit")&&!Lu(Ru,"Edge");function ec(){var e=fu.document;return e?e.documentMode:void 0}e:{var tc="",nc=(zu=Ru,Ju?/rv:([^\);]+)(\)|;)/.exec(zu):Yu?/Edge\/([\d\.]+)/.exec(zu):Qu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zu):Zu?/WebKit\/(\S+)/.exec(zu):Ku?/(?:Version)[ \/]?(\S+)/.exec(zu):void 0);if(nc&&(tc=nc?nc[1]:""),Qu){var ic=ec();if(null!=ic&&ic>parseFloat(tc)){Gu=String(ic);break e}}Gu=tc}var rc,oc={};function ac(e){return t=e,n=function(){for(var t=0,n=$u(String(Gu)).split("."),i=$u(String(e)).split("."),r=Math.max(n.length,i.length),o=0;0==t&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=Fu(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Fu(0==a[2].length,0==s[2].length)||Fu(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t},i=oc,Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=n();var t,n,i}var sc=fu.document;rc=sc&&Qu?ec()||("CSS1Compat"==sc.compatMode?parseInt(Gu,10):5):void 0;var uc=!Qu||9<=Number(rc),cc=Qu&&!ac("9"),lc=function(){if(!fu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{fu.addEventListener("test",mu,t),fu.removeEventListener("test",mu,t)}catch(e){}return e}();function hc(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function fc(e,t){if(hc.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Ju){e:{try{Wu(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,this.screenY=i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=du(e.pointerType)?e.pointerType:dc[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}hc.prototype.b=function(){this.Ja=!1},Iu(fc,hc);var dc={2:"touch",3:"pen",4:"mouse"};fc.prototype.b=function(){fc.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,cc)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var pc="closure_listenable_"+(1e6*Math.random()|0),gc=0;function mc(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function vc(e){this.src=e,this.a={},this.b=0}function yc(e,t){var n=t.type;if(n in e.a){var i,r=e.a[n],o=Du(r,t);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(mc(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function bc(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==i)return r}return-1}vc.prototype.add=function(e,t,n,i,r){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=bc(e,t,i,r);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new function(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.da=r,this.key=++gc,this.X=this.Z=!1}(t,this.src,o,!!i,r)).Z=n,e.push(t)),t};var Ac="closure_lm_"+(1e6*Math.random()|0),wc={};function _c(e,t,n,i,r){if(i&&i.once)return function e(t,n,i,r,o){if(yu(n)){for(var a=0;a<n.length;a++)e(t,n[a],i,r,o);return null}return i=Dc(i),t&&t[pc]?t.Ba(n,i,Au(r)?!!r.capture:!!r,o):Cc(t,n,i,!0,r,o)}(e,t,n,i,r);if(yu(t)){for(var o=0;o<t.length;o++)_c(e,t[o],n,i,r);return null}return n=Dc(n),e&&e[pc]?e.Aa(t,n,Au(i)?!!i.capture:!!i,r):Cc(e,t,n,!1,i,r)}function Cc(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var a=Au(r)?!!r.capture:!!r;if(a&&!uc)return null;var s,u,c=Ic(e);if(c||(e[Ac]=c=new vc(e)),(n=c.add(t,n,i,a,o)).proxy)return n;if(s=kc,i=u=uc?function(e){return s.call(u.src,u.listener,e)}:function(e){if(!(e=s.call(u.src,u.listener,e)))return e},(n.proxy=i).src=e,i.listener=n,e.addEventListener)lc||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Ec(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Sc(e){if(!pu(e)&&e&&!e.X){var t=e.src;if(t&&t[pc])yc(t.c,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Ec(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Ic(t))?(yc(n,e),0==n.b&&(n.src=null,t[Ac]=null)):mc(e)}}}function Ec(e){return e in wc?wc[e]:wc[e]="on"+e}function Tc(e,t){var n=e.listener,i=e.da||e.src;return e.Z&&Sc(e),n.call(i,t)}function kc(e,t){return!!e.X||Tc(e,uc?new fc(t,this):t=new fc(t||gu("window.event"),this))}function Ic(e){return(e=e[Ac])instanceof vc?e:null}var xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dc(e){return"function"==vu(e)?e:(e[xc]||(e[xc]=function(t){return e.handleEvent(t)}),e[xc])}function Nc(){xu.call(this),this.c=new vc(this),(this.J=this).B=null}function Pc(e,t,n,i){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&yc(e.c,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.Ja}Iu(Nc,xu),Nc.prototype[pc]=!0,(cu=Nc.prototype).addEventListener=function(e,t,n,i){_c(this,e,t,n,i)},cu.removeEventListener=function(e,t,n,i){!function e(t,n,i,r,o){if(yu(n))for(var a=0;a<n.length;a++)e(t,n[a],i,r,o);else r=Au(r)?!!r.capture:!!r,i=Dc(i),t&&t[pc]?(t=t.c,(n=String(n).toString())in t.a&&-1<(i=bc(a=t.a[n],i,r,o))&&(mc(a[i]),Array.prototype.splice.call(a,i,1),0==a.length&&(delete t.a[n],t.b--))):t&&(t=Ic(t))&&(n=t.a[n.toString()],t=-1,n&&(t=bc(n,i,r,o)),(i=-1<t?n[t]:null)&&Sc(i))}(this,e,t,n,i)},cu.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var i=e.type||e;if(du(e))e=new hc(e,n);else if(e instanceof hc)e.target=e.target||n;else{var r=e;Hu(e=new hc(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];r=Pc(a,i,!0,e)&&r}if(r=Pc(a=e.a=n,i,!0,e)&&r,r=Pc(a,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=Pc(a=e.a=t[o],i,!1,e)&&r;return r},cu.G=function(){if(Nc.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],i=0;i<n.length;i++)mc(n[i]);delete t.a[e],t.b--}}this.B=null},cu.Aa=function(e,t,n,i){return this.c.add(String(e),t,!1,n,i)},cu.Ba=function(e,t,n,i){return this.c.add(String(e),t,!0,n,i)};var Oc=fu.JSON.stringify;function Mc(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Rc(){this.b=this.a=null}Mc.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var $c,Lc=new Mc(function(){return new Fc},function(e){e.reset()});function Fc(){this.next=this.b=this.a=null}function Uc(e){fu.setTimeout(function(){throw e},0)}function Bc(e,t){var n;$c||(n=fu.Promise.resolve(void 0),$c=function(){n.then(qc)}),jc||($c(),jc=!0),Vc.add(e,t)}Rc.prototype.add=function(e,t){var n=Lc.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Fc.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var jc=!(Fc.prototype.reset=function(){this.next=this.b=this.a=null}),Vc=new Rc;function qc(){for(var e;i=n=void 0,i=null,(n=Vc).a&&(i=n.a,n.a=n.a.next,n.a||(n.b=null),i.next=null),e=i;){try{e.a.call(e.b)}catch(e){Uc(e)}var t=Lc;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,i;jc=!1}function Hc(e,t){Nc.call(this),this.b=e||1,this.a=t||fu,this.f=Eu(this.gb,this),this.g=ku()}function Wc(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Gc(e,t,n){if("function"==vu(e))n&&(e=Eu(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Eu(e.handleEvent,e)}return 2147483647<Number(t)?-1:fu.setTimeout(e,t||0)}function zc(e,t,n){xu.call(this),this.f=null!=n?Eu(e,n):e,this.c=t,this.b=Eu(this.ab,this),this.a=[]}function Kc(e){e.U=Gc(e.b,e.c),e.f.apply(null,e.a)}function Qc(e){xu.call(this),this.b=e,this.a={}}Iu(Hc,Nc),(cu=Hc.prototype).ba=!1,cu.L=null,cu.gb=function(){if(this.ba){var e=ku()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Wc(this),this.start()))}},cu.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=ku())},cu.G=function(){Hc.N.G.call(this),Wc(this),delete this.a},Iu(zc,xu),(cu=zc.prototype).ea=!1,cu.U=null,cu.Ua=function(e){this.a=arguments,this.U?this.ea=!0:Kc(this)},cu.G=function(){zc.N.G.call(this),this.U&&(fu.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},cu.ab=function(){this.U=null,this.ea&&(this.ea=!1,Kc(this))},Iu(Qc,xu);var Yc=[];function Xc(e,t,n,i){yu(n)||(n&&(Yc[0]=n.toString()),n=Yc);for(var r=0;r<n.length;r++){var o=_c(t,n[r],i||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Jc(e){ju(e.a,function(e,t){this.a.hasOwnProperty(t)&&Sc(e)},e),e.a={}}Qc.prototype.G=function(){Qc.N.G.call(this),Jc(this)},Qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zc=new Nc;function el(e){hc.call(this,"serverreachability",e)}function tl(e){Zc.dispatchEvent(new el(Zc,e))}function nl(e){hc.call(this,"statevent",e)}function il(e){Zc.dispatchEvent(new nl(Zc,e))}function rl(e){hc.call(this,"timingevent",e)}function ol(e,t){if("function"!=vu(e))throw Error("Fn must not be null and must be a function");return fu.setTimeout(function(){e()},t)}Iu(el,hc),Iu(nl,hc),Iu(rl,hc);var al={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},sl={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ul(){}function cl(e){var t;return(t=e.a)||(t=e.a={}),t}function ll(){}ul.prototype.a=null;var hl,fl={OPEN:"a",ib:"b",Na:"c",rb:"d"};function dl(){hc.call(this,"d")}function pl(){hc.call(this,"c")}function gl(){}function ml(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Qc(this),this.O=vl,e=Xu?125:void 0,this.P=new Hc(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}Iu(dl,hc),Iu(pl,hc),Iu(gl,ul),hl=new gl;var vl=45e3,yl={},bl={};function Al(e,t,n){e.F=1,e.f=Wl(Fl(t)),e.l=n,e.H=!0,_l(e,null)}function wl(e,t,n,i){e.F=1,e.f=Wl(Fl(t)),e.l=null,e.H=n,_l(e,i)}function _l(e,t){e.v=ku(),El(e),e.D=Fl(e.f),Hl(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new zc(Eu(e.Ka,e,e.a),e.J)),Xc(e.I,e.a,"readystatechange",e.eb),t=e.h?Vu(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),tl(1)}function Cl(e,t,n){for(var i=!0;!e.m&&e.A<n.length;){var r=Sl(e,n);if(r==bl){4==t&&(e.c=4,il(14),i=!1);break}if(r==yl){e.c=4,il(15),i=!1;break}Dl(e,r)}4==t&&0==n.length&&(e.c=1,il(16),i=!1),e.b=e.b&&i,i||(xl(e),Il(e))}function Sl(e,t){var n=e.A,i=t.indexOf("\n",n);return-1==i?bl:(n=Number(t.substring(n,i)),isNaN(n)?yl:(i+=1)+n>t.length?bl:(t=t.substr(i,n),e.A=i+n,t))}function El(e){e.R=ku()+e.O,Tl(e,e.O)}function Tl(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=ol(Eu(e.bb,e),t)}function kl(e){e.i&&(fu.clearTimeout(e.i),e.i=null)}function Il(e){e.g.Da()||e.m||e.g.na(e)}function xl(e){kl(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Wc(e.P),Jc(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Dl(e,t){try{e.g.Ga(e,t),tl(4)}catch(e){}}function Nl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(bu(e)||du(e))Nu(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(bu(e)||du(e)){n=[];for(var i=e.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,e)n[i++]=r;r=(i=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(du(e))return e.split("");if(bu(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e)).length;for(var o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}}function Pl(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof Pl)for(n=e.K(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function Ol(e,t){Rl(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Ml(e))}function Ml(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];Rl(e.b,i)&&(e.a[n++]=i),t++}e.a.length=n}if(e.c!=e.a.length){var r={};for(n=t=0;t<e.a.length;)Rl(r,i=e.a[t])||(r[e.a[n++]=i]=1),t++;e.a.length=n}}function Rl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(cu=ml.prototype).setTimeout=function(e){this.O=e},cu.eb=function(e){e=e.target;var t=this.B;t&&3==Mh(e)?t.Ua():this.Ka(e)},cu.Ka=function(e){try{if(e==this.a)e:{var t=Mh(this.a),n=this.a.ya(),i=this.a.T();if(!(t<3||3==t&&!Xu&&!this.a.aa())){this.m||4!=t||7==n||tl(8==n||i<=0?3:2),kl(this);var r=this.a.T();this.o=r;var o=this.a.aa();if(this.b=200==r){if(this.S&&!this.s){t:{if(this.a){var a=Rh(this.a,"X-HTTP-Initial-Response");if(a&&!Mu(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,il(12),xl(this),Il(this);break e}this.s=!0,Dl(this,s)}this.H?(Cl(this,t,o),Xu&&this.b&&3==t&&(Xc(this.I,this.P,"tick",this.cb),this.P.start())):Dl(this,o),4==t&&xl(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,El(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.c=3,il(12)):(this.c=0,il(13)),xl(this),Il(this)}}}catch(e){}},cu.cb=function(){if(this.a){var e=Mh(this.a),t=this.a.aa();this.A<t.length&&(kl(this),Cl(this,e,t),this.b&&4!=e&&El(this))}},cu.cancel=function(){this.m=!0,xl(this)},cu.bb=function(){this.i=null;var e=ku();0<=e-this.R?(2!=this.F&&(tl(3),il(17)),xl(this),this.c=2,Il(this)):Tl(this,this.R-e)},(cu=Pl.prototype).C=function(){Ml(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},cu.K=function(){return Ml(this),this.a.concat()},cu.get=function(e,t){return Rl(this.b,e)?this.b[e]:t},cu.set=function(e,t){Rl(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},cu.forEach=function(e,t){for(var n=this.K(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);e.call(t,o,r,this)}};var $l=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ll(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Ll?(this.h=void 0!==t?t:e.h,Ul(this,e.f),this.j=e.j,Bl(this,e.b),jl(this,e.i),this.a=e.a,Vl(this,oh(e.c)),this.g=e.g):e&&(n=String(e).match($l))?(this.h=!!t,Ul(this,n[1]||"",!0),this.j=Gl(n[2]||""),Bl(this,n[3]||"",!0),jl(this,n[4]),this.a=Gl(n[5]||"",!0),Vl(this,n[6]||"",!0),this.g=Gl(n[7]||"")):(this.h=!!t,this.c=new eh(null,this.h))}function Fl(e){return new Ll(e)}function Ul(e,t,n){e.f=n?Gl(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Bl(e,t,n){e.b=n?Gl(t,!0):t}function jl(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Vl(e,t,n){var i,r;t instanceof eh?(e.c=t,i=e.c,(r=e.h)&&!i.f&&(th(i),i.c=null,i.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(nh(this,t),rh(this,n,e))},i)),i.f=r):(n||(t=zl(t,Jl)),e.c=new eh(t,e.h))}function ql(e,t,n){e.c.set(t,n)}function Hl(e,t,n){yu(n)||(n=[String(n)]),rh(e.c,t,n)}function Wl(e){return ql(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ku()).toString(36)),e}function Gl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zl(e,t,n){return du(e)?(e=encodeURI(e).replace(t,Kl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ll.prototype.toString=function(){var e=[],t=this.f;t&&e.push(zl(t,Ql,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(zl(t,Ql,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(zl(n,"/"==n.charAt(0)?Xl:Yl,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",zl(n,Zl)),e.join("")},Ll.prototype.resolve=function(e){var t=Fl(this),n=!!e.f;n?Ul(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Bl(t,e.b):n=null!=e.i;var i=e.a;if(n)jl(t,e.i);else if(n=!!e.a){if("/"!=i.charAt(0))if(this.b&&!this.a)i="/"+i;else{var r=t.a.lastIndexOf("/");-1!=r&&(i=t.a.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(Lu(r,"./")||Lu(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?t.a=i:n=""!==e.c.toString(),n?Vl(t,oh(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ql=/[#\/\?@]/g,Yl=/[#\?:]/g,Xl=/[#\?]/g,Jl=/[#\?@]/g,Zl=/#/g;function eh(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function th(e){e.a||(e.a=new Pl,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function nh(e,t){th(e),t=ah(e,t),Rl(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ol(e.a,t))}function ih(e,t){return th(e),t=ah(e,t),Rl(e.a.b,t)}function rh(e,t,n){nh(e,t),0<n.length&&(e.c=null,e.a.set(ah(e,t),Ou(n)),e.b+=n.length)}function oh(e){var t=new eh;return t.c=e.c,e.a&&(t.a=new Pl(e.a),t.b=e.b),t}function ah(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function sh(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function uh(e){var t=e.a.F.a;if(null!=t)il(4),t?(il(10),zh(e.a,e,!1)):(il(11),zh(e.a,e,!0));else{e.b=new ml(e,void 0,void 0),e.b.h=e.h,t=Jh(t=e.a,t.Y()?e.f:null,e.i),il(4),Hl(t,"TYPE","xmlhttp");var n=e.a.j,i=e.a.I;n&&i&&ql(t,n,i),wl(e.b,t,!1,e.f)}}function ch(){this.a=new Pl}function lh(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[wu]||(e[wu]=++_u)):t.charAt(0)+e}function hh(e){this.g=e||fh,e=fu.PerformanceNavigationTiming?0<(e=fu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(fu.ka&&fu.ka.Ea&&fu.ka.Ea()&&fu.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new ch),this.b=null,this.c=[]}(cu=eh.prototype).add=function(e,t){th(this),this.c=null,e=ah(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},cu.forEach=function(e,t){th(this),this.a.forEach(function(n,i){Nu(n,function(n){e.call(t,n,i,this)},this)},this)},cu.K=function(){th(this);for(var e=this.a.C(),t=this.a.K(),n=[],i=0;i<t.length;i++)for(var r=e[i],o=0;o<r.length;o++)n.push(t[i]);return n},cu.C=function(e){th(this);var t=[];if(du(e))ih(this,e)&&(t=Pu(t,this.a.get(ah(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=Pu(t,e[n])}return t},cu.set=function(e,t){return th(this),this.c=null,ih(this,e=ah(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},cu.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},cu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.C(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),e.push(a)}}return this.c=e.join("&")},Iu(function(){},function(){}),(cu=sh.prototype).M=null,cu.$=function(e){return this.a.$(e)},cu.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},cu.Da=function(){return!1},cu.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Rh(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Rh(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var i=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Yh(t,2)}this.f=i[0]}else(t=this.a).m=this.c,Yh(t,2)}else 1==this.M&&(this.g?il(6):"11111"==t?(il(5),this.g=!0,(!Qu||10<=Number(rc))&&(this.c=200,this.b.cancel(),il(11),zh(this.a,this,!0))):(il(7),this.g=!1))},cu.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,uh(this)):1==this.M&&(this.g?(il(11),zh(this.a,this,!0)):(il(10),zh(this.a,this,!1)));else{0==this.M?il(8):1==this.M&&il(9);var e=this.a;e.m=this.c,Yh(e,2)}},cu.Y=function(){return this.a.Y()},cu.ma=function(){return this.a.ma()},ch.prototype.add=function(e){this.a.set(lh(e),e)},ch.prototype.C=function(){return this.a.C()};var fh=10;function dh(e,t){!e.a&&(Lu(t,"spdy")||Lu(t,"quic")||Lu(t,"h2"))&&(e.f=e.g,e.a=new ch,e.b&&(vh(e,e.b),e.b=null))}function ph(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function gh(e){return e.b?1:e.a?e.a.a.c:0}function mh(e,t){return e.b?e.b==t:!!e.a&&(t=lh(t),Rl(e.a.a.b,t))}function vh(e,t){e.a?e.a.add(t):e.b=t}function yh(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=lh(t),n=Rl(e.a.a.b,n)),n&&Ol(e.a.a,lh(t)))}function bh(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return Ou(e.c);var t=e.c;return Nu(e.a.C(),function(e){t=t.concat(e.j)}),t}function Ah(){}function wh(e,t,n){var i=n||"";try{Nl(e,function(e,n){var r=e;Au(e)&&(r=Oc(e)),t.push(i+n+"="+encodeURIComponent(r))})}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function _h(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}hh.prototype.cancel=function(){var e;this.c=bh(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Nu(this.a.C(),function(e){e.cancel()}),(e=this.a.a).b={},e.a.length=0,e.c=0)},Ah.prototype.stringify=function(e){return fu.JSON.stringify(e,void 0)},Ah.prototype.parse=function(e){return fu.JSON.parse(e,void 0)};var Ch=fu.JSON.parse;function Sh(e){Nc.call(this),this.headers=new Pl,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Eh,this.D=this.F=!1}Iu(Sh,Nc);var Eh="",Th=/^https?$/i,kh=["POST","PUT"];function Ih(e){return"content-type"==e.toLowerCase()}function xh(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Dh(e),Ph(e)}function Dh(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Nh(e){if(e.b&&void 0!==hu&&(!e.s[1]||4!=Mh(e)||2!=e.T()))if(e.l&&4==Mh(e))Gc(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Mh(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(t=i)){var r;if(r=0===n){var o=String(e.A).match($l)[1]||null;if(!o&&fu.self&&fu.self.location){var a=fu.self.location.protocol;o=a.substr(0,a.length-1)}r=!Th.test(o?o.toLowerCase():"")}t=r}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Dh(e))}finally{Ph(e)}}}function Ph(e,t){if(e.a){Oh(e);var n=e.a,i=e.s[0]?mu:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){}}}function Oh(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(fu.clearTimeout(e.m),e.m=null)}function Mh(e){return e.a?e.a.readyState:0}function Rh(e,t){return e.a?e.a.getResponseHeader(t):null}function $h(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}if(i)return e;var r;if(r="",ju(n,function(e,t){r+=t,r+=":",r+=e,r+="\r\n"}),n=r,du(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(i=e.indexOf("?"))<0||n<i){i=n;var o=""}else o=e.substring(i+1,n);n=(e=[e.substr(0,i),o,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return ql(e,t,n),e}function Lh(e){this.f=[],this.F=new function(){this.a=this.b=null},this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!gu("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=gu("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=gu("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=gu("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=gu("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new hh(e&&e.concurrentRequestLimit),this.ja=new function(){this.a=new Ah},this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fh(e){if(Uh(e),3==e.u){var t=e.P++,n=Fl(e.B);ql(n,"SID",e.H),ql(n,"RID",t),ql(n,"TYPE","terminate"),qh(e,n),(t=new ml(e,t,void 0)).F=2,t.f=Wl(Fl(n)),n=!1,fu.navigator&&fu.navigator.sendBeacon&&(n=fu.navigator.sendBeacon(t.f.toString(),"")),!n&&fu.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=ku(),El(t)}Xh(e)}function Uh(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(fu.clearTimeout(e.l),e.l=null),Kh(e),e.b.cancel(),e.h&&(pu(e.h)&&fu.clearTimeout(e.h),e.h=null)}function Bh(e,t){e.f.push(new function(e,t){this.b=e,this.a=t}(e.Ra++,t)),3==e.u&&jh(e)}function jh(e){ph(e.b)||e.h||(e.h=!0,Bc(e.Ia,e),e.A=0)}function Vh(e,t){var n;n=t?t.W:e.P++;var i=Fl(e.B);ql(i,"SID",e.H),ql(i,"RID",n),ql(i,"AID",e.O),qh(e,i),e.g&&e.i&&$h(i,e.g,e.i),n=new ml(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Hh(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),vh(e.b,n),Al(n,i,t)}function qh(e,t){e.c&&Nl({},function(e,n){ql(t,n,e)})}function Hh(e,t,n){n=Math.min(e.f.length,n);var i=e.c?Eu(e.c.Ta,e.c,e):null;e:for(var r=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=r[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=r[u].b,l=r[u].a;if((c-=o)<0)o=Math.max(0,r[u].b-100),s=!1;else try{wh(l,a,"req"+c+"_")}catch(e){i&&i(l)}}if(s){i=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,i}function Wh(e){e.a||e.l||(e.S=1,Bc(e.Ha,e),e.v=0)}function Gh(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=ol(Eu(e.Ha,e),Qh(e,e.v)),e.v++,0))}function zh(e,t,n){var i=t.l;i&&dh(e.b,i),e.ia=e.oa&&n,e.m=t.c,e.B=Jh(e,null,e.ha),jh(e)}function Kh(e){null!=e.s&&(fu.clearTimeout(e.s),e.s=null)}function Qh(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Yh(e,t){if(2==t){var n=null;e.c&&(n=null);var i=Eu(e.fb,e);n||(n=new Ll("//www.google.com/images/cleardot.gif"),fu.location&&"http"==fu.location.protocol||Ul(n,"https"),Wl(n)),function(e,t){var n=new function(){};if(fu.Image){var i=new Image;i.onload=Tu(_h,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Tu(_h,n,i,"TestLoadImage: error",!1,t),i.onabort=Tu(_h,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Tu(_h,n,i,"TestLoadImage: timeout",!1,t),fu.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(n.toString(),i)}else il(2);e.u=0,e.c&&e.c.ta(t),Xh(e),Uh(e)}function Xh(e){e.u=0,e.m=-1,e.c&&(0==bh(e.b).length&&0==e.f.length||(e.b.c.length=0,Ou(e.f),e.f.length=0),e.c.sa())}function Jh(e,t,n){var i,r,o,a,s,u,c=(i=n)instanceof Ll?Fl(i):new Ll(i,void 0);if(""!=c.b)t&&Bl(c,t+"."+c.b),jl(c,c.i);else{var l,h=fu.location;l=t?t+"."+h.hostname:h.hostname,r=h.protocol,o=l,a=+h.port,s=n,u=new Ll(null,void 0),r&&Ul(u,r),o&&Bl(u,o),a&&jl(u,a),s&&(u.a=s),c=u}return e.V&&ju(e.V,function(e,t){ql(c,t,e)}),t=e.j,n=e.I,t&&n&&ql(c,t,n),ql(c,"VER",e.wa),qh(e,c),c}function Zh(){}function ef(){if(Qu&&!(10<=Number(rc)))throw Error("Environmental error: no available transport.")}function tf(e,t){Nc.call(this),this.a=new Lh(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var i,r=arguments[n];0==r.lastIndexOf("/",0)?t=r:((i=""==t)||(i=0<=(i=t.length-1)&&t.indexOf("/",i)==i),t+=i?r:"/"+r)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!Mu(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Mu(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new of(this)}function nf(e){dl.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function rf(){pl.call(this),this.status=1}function of(e){this.a=e}(cu=Sh.prototype).ca=function(e,t,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?cl(this.H):cl(hl),this.a.onreadystatechange=Eu(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void xh(this,e)}e=n||"";var r,o=new Pl(this.headers);i&&Nl(i,function(e,t){o.set(t,e)}),i=function(e){e:{for(var t=Ih,n=e.length,i=du(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return t<0?null:du(e)?e.charAt(t):e[t]}(o.K()),n=fu.FormData&&e instanceof fu.FormData,!(0<=Du(kh,t))||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Oh(this),0<this.o&&((this.D=(r=this.a,Qu&&ac(9)&&pu(r.timeout)&&void 0!==r.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Eu(this.Ca,this)):this.m=Gc(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){xh(this,e)}},cu.Ca=function(){void 0!==hu&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},cu.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ph(this))},cu.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ph(this,!0)),Sh.N.G.call(this)},cu.Fa=function(){this.j||(this.w||this.l||this.g?Nh(this):this.$a())},cu.$a=function(){Nh(this)},cu.T=function(){try{return 2<Mh(this)?this.a.status:-1}catch(e){return-1}},cu.za=function(){try{return 2<Mh(this)?this.a.statusText:""}catch(e){return""}},cu.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},cu.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ch(t)}},cu.ya=function(){return this.h},cu.Ya=function(){return du(this.f)?this.f:String(this.f)},(cu=Lh.prototype).wa=8,cu.u=1,cu.Da=function(){return 0==this.u},cu.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ml(this,e=this.P++,void 0),i=this.i;if(this.J&&(i?Hu(i=Vu(i),this.J):i=this.J),null===this.g&&(n.h=i),this.W)e:{for(var r=t=0;r<this.f.length;r++){var o=this.f[r];if(void 0===(o="__data__"in o.a&&du(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=r;break e}if(4096===t||r===this.f.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=Hh(this,n,t),ql(r=Fl(this.B),"RID",e),ql(r,"CVER",22),this.o&&this.j&&ql(r,"X-HTTP-Session-Id",this.j),qh(this,r),this.g&&i&&$h(r,this.g,i),vh(this.b,n),this.W?(ql(r,"$req",t),ql(r,"SID","null"),n.S=!0,Al(n,r,null)):Al(n,r,t),this.u=2}}else 3==this.u&&(e?Vh(this,e):0==this.f.length||ph(this.b)||Vh(this))},cu.Ha=function(){this.l=null,this.a=new ml(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Fl(this.pa);ql(e,"RID","rpc"),ql(e,"SID",this.H),ql(e,"CI",this.ia?"0":"1"),ql(e,"AID",this.O),qh(this,e),ql(e,"TYPE","xmlhttp"),this.g&&this.i&&$h(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),wl(this.a,e,!0,this.ga)},cu.Ga=function(e,t){if(0!=this.u&&(this.a==e||mh(this.b,e)))if(this.m=e.o,!e.s&&mh(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(yu(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Kh(this),this.a.cancel(),this.a=null}Gh(this),il(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=ol(Eu(this.Za,this),6e3));if(gh(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Yh(this,11)}else if((e.s||this.a==e)&&Kh(this),!Mu(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var i=t[n];if(this.O=i[0],i=i[1],2==this.u)if("c"==i[0]){this.H=i[1],this.ga=i[2];var r=i[3];null!=r&&(this.wa=r),null!=(i=i[5])&&pu(i)&&0<i&&(this.D=1.5*i),this.o&&(i=e.a)&&((r=Rh(i,"X-Client-Wire-Protocol"))&&dh(this.b,r),this.j&&(i=Rh(i,"X-HTTP-Session-Id")))&&(this.I=i,ql(this.B,this.j,i)),this.u=3,this.c&&this.c.va(),i=e,this.pa=Jh(this,this.Y()?this.ga:null,this.ha),i.s?(yh(this.b,i),(r=this.D)&&i.setTimeout(r),i.i&&(kl(i),El(i)),this.a=i):Wh(this),0<this.f.length&&jh(this)}else"stop"!=i[0]&&"close"!=i[0]||Yh(this,7);else 3==this.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Yh(this,7):Fh(this):"noop"!=i[0]&&this.c&&this.c.ua(i),this.v=0)}},cu.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Gh(this),il(19))},cu.na=function(e){var t,n,i=null;if(this.a==e){Kh(this),this.a=null;var r=2}else{if(!mh(this.b,e))return;i=e.j,yh(this.b,e),r=1}if(this.m=e.o,0!=this.u)if(e.b)1==r?(i=ku()-e.v,Zc.dispatchEvent(new rl(Zc,e.l?e.l.length:0,i,this.A)),jh(this)):Wh(this);else{var o=e.c;if(3==o||0==o&&0<this.m||(1!=r||(n=e,gh((t=this).b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=n.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ol(Eu(t.Ia,t,n),Qh(t,t.A)),t.A++,0))))&&(2!=r||!Gh(this)))switch(i&&0<i.length&&(e=this.b,e.c=e.c.concat(i)),o){case 1:Yh(this,5);break;case 4:Yh(this,10);break;case 3:Yh(this,6);break;default:Yh(this,2)}}},cu.fb=function(e){il(e?2:1)},cu.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sh(this.La)).F=this.R,e},cu.ma=function(){return!!this.c&&!0},cu.Y=function(){return this.R},(cu=Zh.prototype).va=function(){},cu.ua=function(){},cu.ta=function(){},cu.sa=function(){},cu.Ta=function(){},ef.prototype.a=function(e,t){return new tf(e,t)},Iu(tf,Nc),(cu=tf.prototype).addEventListener=function(e,t,n,i){tf.N.addEventListener.call(this,e,t,n,i)},cu.removeEventListener=function(e,t,n,i){tf.N.removeEventListener.call(this,e,t,n,i)},cu.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,i=this.b||void 0;il(0),e.ha=n,e.V=i||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new sh(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=$h(t,e.g,e.i)),(e=e.w).i=n,t=Jh(e.a,null,e.i),il(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,uh(e)):(Hl(t,"MODE","init"),!e.a.o&&e.a.j&&Hl(t,"X-HTTP-Session-Id",e.a.j),e.b=new ml(e,void 0,void 0),e.b.h=e.h,wl(e.b,t,!1,null),e.M=0)},cu.close=function(){Fh(this.a)},cu.Xa=function(e){if(du(e)){var t={};t.__data__=e,Bh(this.a,t)}else this.h?((t={}).__data__=Oc(e),Bh(this.a,t)):Bh(this.a,e)},cu.G=function(){this.a.c=null,delete this.f,Fh(this.a),delete this.a,tf.N.G.call(this)},Iu(nf,dl),Iu(rf,pl),Iu(of,Zh),of.prototype.va=function(){this.a.dispatchEvent("a")},of.prototype.ua=function(e){this.a.dispatchEvent(new nf(e))},of.prototype.ta=function(e){this.a.dispatchEvent(new rf(e))},of.prototype.sa=function(){this.a.dispatchEvent("b")};var af=Tu(function(e,t){function n(){}n.prototype=e.prototype;var i=new n;return e.apply(i,Array.prototype.slice.call(arguments,1)),i},ef);ef.prototype.createWebChannel=ef.prototype.a,tf.prototype.send=tf.prototype.Xa,tf.prototype.open=tf.prototype.Wa,tf.prototype.close=tf.prototype.close,al.NO_ERROR=0,al.TIMEOUT=8,al.HTTP_ERROR=6,sl.COMPLETE="complete",(ll.EventType=fl).OPEN="a",fl.CLOSE="b",fl.ERROR="c",fl.MESSAGE="d",Nc.prototype.listen=Nc.prototype.Aa,Sh.prototype.listenOnce=Sh.prototype.Ba,Sh.prototype.getLastError=Sh.prototype.Ya,Sh.prototype.getLastErrorCode=Sh.prototype.ya,Sh.prototype.getStatus=Sh.prototype.T,Sh.prototype.getStatusText=Sh.prototype.za,Sh.prototype.getResponseJson=Sh.prototype.Va,Sh.prototype.getResponseText=Sh.prototype.aa,Sh.prototype.send=Sh.prototype.ca;var sf,uf,cf={createWebChannelTransport:af,ErrorCode:al,EventType:sl,WebChannel:ll,XhrIo:Sh},lf=cf.createWebChannelTransport,hf=cf.ErrorCode,ff=cf.EventType,df=cf.WebChannel,pf=cf.XhrIo,gf=Yr.SDK_VERSION,mf=new Br("@firebase/firestore");function vf(){return mf.logLevel===Pr.DEBUG?sf.DEBUG:mf.logLevel===Pr.SILENT?sf.SILENT:sf.ERROR}function yf(e){switch(e){case sf.DEBUG:mf.logLevel=Pr.DEBUG;break;case sf.ERROR:mf.logLevel=Pr.ERROR;break;case sf.SILENT:mf.logLevel=Pr.SILENT;break;default:mf.error("Firestore ("+gf+"): Invalid value passed to `setLogLevel`")}}function bf(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(mf.logLevel<=Pr.DEBUG){var r=n.map(wf);mf.debug.apply(mf,er(["Firestore ("+gf+") ["+e+"]: "+t],r))}}function Af(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(mf.logLevel<=Pr.ERROR){var i=t.map(wf);mf.error.apply(mf,er(["Firestore ("+gf+"): "+e],i))}}function wf(e){if("string"==typeof e)return e;var t=Sf.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function _f(e){var t="FIRESTORE ("+gf+") INTERNAL ASSERTION FAILED: "+e;throw Af(t),new Error(t)}function Cf(e,t){e||_f(t)}(uf=sf||(sf={}))[uf.DEBUG=0]="DEBUG",uf[uf.ERROR=1]="ERROR",uf[uf.SILENT=2]="SILENT";var Sf=function(){function e(){}return e.setPlatform=function(t){e.platform&&_f("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||_f("Platform not set"),e.platform},e}();function Ef(){return Sf.getPlatform().emptyByteString}var Tf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kf=function(e){function t(t,n){var i=e.call(this,n)||this;return i.code=t,i.message=n,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Ki(t,e),t}(Error);function If(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new kf(Tf.INVALID_ARGUMENT,e)}for(var i in n.prototype=e.prototype,e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function xf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Df(e,t){return void 0!==e?e:t}function Nf(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Number(n);isNaN(i)||t(i,e[n])}}function Pf(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Of(e){for(var t in Cf(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Mf(e,t){if(0!==t.length)throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Yf(t.length,"argument")+".")}function Rf(e,t,n){if(t.length!==n)throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires "+Yf(n,"argument")+", but was called with "+Yf(t.length,"argument")+".")}function $f(e,t,n){if(t.length<n)throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Yf(n,"argument")+", but was called with "+Yf(t.length,"argument")+".")}function Lf(e,t,n,i){if(t.length<n||t.length>i)throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+i+" arguments, but was called with "+Yf(t.length,"argument")+".")}function Ff(e,t,n,i){qf(e,t,Qf(n)+" argument",i)}function Uf(e,t,n,i){void 0!==i&&Ff(e,t,n,i)}function Bf(e,t,n,i){qf(e,t,n+" option",i)}function jf(e,t,n,i){void 0!==i&&Bf(e,t,n,i)}function Vf(e,t,n,i,r){void 0!==i&&function(e,t,n,i,r){var o,a,s=[];try{for(var u=Ji(r),c=u.next();!c.done;c=u.next()){var l=c.value;if(l===i)return;s.push(Wf(l))}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}var h=Wf(i);throw new kf(Tf.INVALID_ARGUMENT,"Invalid value "+h+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+s.join(", "))}(e,0,n,i,r)}function qf(e,t,n,i){if(!("object"===t?Hf(i):"non-empty string"===t?"string"==typeof i&&""!==i:typeof i===t)){var r=Wf(i);throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+r)}}function Hf(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Wf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":_f("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function Gf(e,t,n){if(void 0===n)throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Qf(t)+" argument, but it was undefined.")}function zf(e,t,n){Pf(t,function(t,i){if(n.indexOf(t)<0)throw new kf(Tf.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function Kf(e,t,n,i){var r=Wf(i);return new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires its "+Qf(n)+" argument to be a "+t+", but it was: "+r)}function Qf(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Yf(e,t){return e+" "+t+(1===e?"":"s")}var Xf=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return Cf(20===t.length,"Invalid auto ID: "+t),t},e}();function Jf(e,t){return e<t?-1:t<e?1:0}function Zf(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function ed(e){return e+"\0"}function td(){if("undefined"==typeof Uint8Array)throw new kf(Tf.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nd(){if(!Sf.getPlatform().base64Available)throw new kf(Tf.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var id,rd,od=function(){function e(e){nd(),this._binaryString=e}return e.fromBase64String=function(t){Rf("Blob.fromBase64String",arguments,1),Ff("Blob.fromBase64String","string",1,t),nd();try{return new e(Sf.getPlatform().atob(t))}catch(t){throw new kf(Tf.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(Rf("Blob.fromUint8Array",arguments,1),td(),!(t instanceof Uint8Array))throw Kf("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return Rf("Blob.toBase64",arguments,0),nd(),Sf.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){Rf("Blob.toUint8Array",arguments,0),td();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return Jf(this._binaryString,e._binaryString)},e}(),ad=If(od,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),sd="(default)",ud=function(){function e(e,t){this.projectId=e,this.database=t||sd}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===sd},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Jf(this.projectId,e.projectId)||Jf(this.database,e.database)},e}(),cd=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ld="__name__",hd=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&_f("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&_f("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var i=Object.create(Object.getPrototypeOf(this));return i.init(e,t,n),i},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):"string"==typeof t?n.push(t):_f("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,Cf(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return Cf(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return Cf(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return Cf(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var r=e.get(i),o=t.get(i);if(r<o)return-1;if(o<r)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(0<=e.indexOf("//"))throw new kf(Tf.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return 0<e.length}))},t.EMPTY_PATH=new t([]),t}(hd),dd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.isValidIdentifier=function(e){return dd.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===ld},t.keyField=function(){return new t([ld])},t.fromServerFormat=function(e){for(var n=[],i="",r=0,o=function(){if(0===i.length)throw new kf(Tf.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(i),i=""},a=!1;r<e.length;){var s=e[r];if("\\"===s){if(r+1===e.length)throw new kf(Tf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kf(Tf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else"`"===s?a=!a:"."!==s||a?i+=s:o(),r++}if(o(),a)throw new kf(Tf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(hd),gd=function(){function e(t){this.path=t,Cf(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===fd.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return fd.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new fd(t.slice()))},e.fromPathString=function(t){return new e(fd.fromString(t))},e.EMPTY=new e(new fd([])),e}(),md=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};(rd=id||(id={})).All="all",rd.ListenStreamIdle="listen_stream_idle",rd.ListenStreamConnectionBackoff="listen_stream_connection_backoff",rd.WriteStreamIdle="write_stream_idle",rd.WriteStreamConnectionBackoff="write_stream_connection_backoff",rd.OnlineStateTimeout="online_state_timeout",rd.ClientMetadataRefresh="client_metadata_refresh",rd.LruGarbageCollection="lru_garbage_collection";var vd=function(){function e(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new md,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,i,r,o){var a=new e(t,n,Date.now()+i,r,o);return a.start(i),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kf(Tf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),yd=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(e){var t=this;this.verifyNotFailed();var n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw Af("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n},e.prototype.enqueueAfterDelay=function(e,t,n){var i=this;this.verifyNotFailed(),Cf(0<=t,"Attempted to schedule an operation with a negative delay of "+t),Cf(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var r=vd.createAndSchedule(this,e,t,n,function(e){return i.removeDelayedOperation(e)});return this.delayedOperations.push(r),r},e.prototype.verifyNotFailed=function(){this.failure&&_f("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){Cf(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){var t,n;try{for(var i=Ji(this.delayedOperations),r=i.next();!r.done;r=i.next())if(r.value.timerId===e)return!0}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){var n,i;Cf(e===id.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});try{for(var r=Ji(t.delayedOperations),o=r.next();!o.done;o=r.next()){var a=o.value;if(a.skipDelay(),e!==id.All&&a.timerId===e)break}}catch(i){n={error:i}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return t.drain()})},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);Cf(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),bd="",Ad="",wd="",_d="";function Cd(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=Ed(t)),t=Sd(e.get(n),t);return Ed(t)}function Sd(e,t){for(var n=t,i=e.length,r=0;r<i;r++){var o=e.charAt(r);switch(o){case"\0":n+=bd+wd;break;case bd:n+=bd+_d;break;default:n+=o}}return n}function Ed(e){return e+bd+Ad}function Td(e){var t=e.length;if(Cf(2<=t,"Invalid path "+e),2===t)return Cf(e.charAt(0)===bd&&e.charAt(1)===Ad,"Non-empty path "+e+" had length 2"),fd.EMPTY_PATH;for(var n=t-2,i=[],r="",o=0;o<t;){var a=e.indexOf(bd,o);switch((a<0||n<a)&&_f('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case Ad:var s=e.substring(o,a),u=void 0;0===r.length?u=s:(u=r+=s,r=""),i.push(u);break;case wd:r+=e.substring(o,a),r+="\0";break;case _d:r+=e.substring(o,a+1);break;default:_f('Invalid encoded resource path: "'+e+'"')}o=a+2}return new fd(i)}var kd=function(){function e(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new kf(Tf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new kf(Tf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new kf(Tf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new kf(Tf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Jf(this.nanoseconds,e.nanoseconds):Jf(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Id=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new kd(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new kd(0,0)),e}(),xd=function(){function e(e,t){this.comparator=e,this.root=t||Nd.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nd.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nd.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var i=this.comparator(e,n.key);if(0===i)return t+n.left.size;n=i<0?n.left:(t+=n.left.size+1,n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Dd(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Dd(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Dd(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Dd(this.root,e,this.comparator,!0)},e}(),Dd=function(){function e(e,t,n,i){this.isReverse=i,this.nodeStack=[];for(var r=1;!e.isEmpty();)if(r=t?n(e.key,t):1,i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){Cf(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return 0<this.nodeStack.length},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Nd=function(){function e(t,n,i,r,o){this.key=t,this.value=n,this.color=null!=i?i:e.RED,this.left=null!=r?r:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,i,r,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var i=this,r=n(e,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(t,r.key)){if(r.right.isEmpty())return e.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw _f("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw _f("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw _f("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Pd=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,i,r){return this},e.prototype.insert=function(e,t,n){return new Nd(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Nd.EMPTY=new Pd;var Od=function(){function e(e){this.comparator=e,this.data=new xd(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var i=n.getNext();if(0<=this.comparator(i.key,e[1]))return;t(i.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Md(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Md(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),i=t.data.getIterator();n.hasNext();){var r=n.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Md=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Rd=new xd(gd.comparator);function $d(){return Rd}function Ld(){return $d()}var Fd=new xd(gd.comparator);function Ud(){return Fd}var Bd=new xd(gd.comparator);function jd(){return Bd}var Vd=new Od(gd.comparator);function qd(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=Vd;try{for(var o=Ji(n),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.add(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r}var Hd=new Od(Jf);function Wd(){return Hd}var Gd,zd,Kd=function(){function e(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,Cf(0<(this.mutations=i).length,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&Cf(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var i=n.mutationResults;Cf(i.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+i.length+").");for(var r=0;r<this.mutations.length;r++){var o=this.mutations[r];if(o.key.isEqual(e)){var a=i[r];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){var n,i,r,o;t&&Cf(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);try{for(var a=Ji(this.baseMutations),s=a.next();!s.done;s=a.next())(h=s.value).key.isEqual(e)&&(t=h.applyToLocalView(t,t,this.localWriteTime))}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}var u=t;try{for(var c=Ji(this.mutations),l=c.next();!l.done;l=c.next()){var h;(h=l.value).key.isEqual(e)&&(t=h.applyToLocalView(t,u,this.localWriteTime))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(i){var r=t.applyToLocalView(i.key,e.get(i.key));r&&(n=n.insert(i.key,r))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},qd())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Zf(this.mutations,e.mutations)&&Zf(this.baseMutations,e.baseMutations)},e}(),Qd=function(){function e(e,t,n,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=i,this.docVersions=r}return e.from=function(t,n,i,r){Cf(t.mutations.length===i.length,"Mutations sent "+t.mutations.length+" must equal results received "+i.length);for(var o=jd(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,i[s].version);return new e(t,n,i,r,o)},e}(),Yd=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var i=this;return this.callbackAttached&&_f("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,r){i.nextCallback=function(n){i.wrapSuccess(t,n).next(e,r)},i.catchCallback=function(t){i.wrapFailure(n,t).next(e,r)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var i=0,r=0,o=!1;t.forEach(function(t){++i,t.next(function(){++r,o&&r===i&&e()},function(e){return n(e)})}),o=!0,r===i&&e()})},e.or=function(t){var n,i,r=e.resolve(!1),o=function(t){r=r.next(function(n){return n?e.resolve(n):t()})};try{for(var a=Ji(t),s=a.next();!s.done;s=a.next())o(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r},e.forEach=function(e,t){var n=this,i=[];return e.forEach(function(e,r){i.push(t.call(n,e,r))}),this.waitFor(i)},e}(),Xd=function(){function e(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.documentKeysByBatchId={}}return e.forUser=function(t,n,i,r){return Cf(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,i,r)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tp(e).iterate({index:Fp.userMutationsIndex,range:n},function(e,n,i){t=!1,i.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=ep(n),ip(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=ep(t),ip(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,i){var r=this,o=np(e),a=tp(e);return a.add({}).next(function(s){var u,c;Cf("number"==typeof s,"Auto-generated key is not a number");var l=new Kd(s,t,n,i),h=r.serializer.toDbMutationBatch(r.userId,l);r.documentKeysByBatchId[s]=l.keys();var f=[];try{for(var d=Ji(i),p=d.next();!p.done;p=d.next()){var g=p.value,m=Up.key(r.userId,g.key.path,s);f.push(a.put(h)),f.push(o.put(m,Up.PLACEHOLDER)),f.push(r.indexManager.addToCollectionParentIndex(e,g.key.path.popLast()))}}catch(s){u={error:s}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return Yd.waitFor(f).next(function(){return l})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return tp(e).get(t).next(function(e){return e?(Cf(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Yd.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var i=e.keys();return n.documentKeysByBatchId[t]=i}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return tp(e).iterate({index:Fp.userMutationsIndex,range:r},function(e,t,r){t.userId===n.userId&&(Cf(t.batchId>=i,"Should have found mutation after "+i),o=n.serializer.fromDbMutationBatch(t)),r.done()}).next(function(){return o})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tp(e).loadAll(Fp.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,i=Up.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return np(e).iterate({range:r},function(i,r,a){var s=Zi(i,3),u=s[0],c=s[1],l=s[2],h=Td(c);if(u===n.userId&&t.path.isEqual(h))return tp(e).get(l).next(function(e){if(!e)throw _f("Dangling document-mutation reference found: "+i+" which points to "+l);Cf(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+l),o.push(n.serializer.fromDbMutationBatch(e))});a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,i=new Od(Jf),r=[];return t.forEach(function(t){var o=Up.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=np(e).iterate({range:a},function(e,r,o){var a=Zi(e,3),s=a[0],u=a[1],c=a[2],l=Td(u);s===n.userId&&t.path.isEqual(l)?i=i.add(c):o.done()});r.push(s)}),Yd.waitFor(r).next(function(){return n.lookupMutationBatches(e,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;Cf(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),Cf(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=t.path,r=i.length+1,o=Up.prefixForPath(this.userId,i),a=IDBKeyRange.lowerBound(o),s=new Od(Jf);return np(e).iterate({range:a},function(e,t,o){var a=Zi(e,3),u=a[0],c=a[1],l=a[2],h=Td(c);u===n.userId&&i.isPrefixOf(h)?h.length===r&&(s=s.add(l)):o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,i=[],r=[];return t.forEach(function(t){r.push(tp(e).get(t).next(function(e){if(null===e)throw _f("Dangling document-mutation reference found, which points to "+t);Cf(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),i.push(n.serializer.fromDbMutationBatch(e))}))}),Yd.waitFor(r).next(function(){return i})},e.prototype.removeMutationBatch=function(e,t){var n=this;return Zd(e.simpleDbTransaction,this.userId,t).next(function(i){return n.removeCachedMutationKeys(t.batchId),Yd.forEach(i,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Yd.resolve();var i=IDBKeyRange.lowerBound(Up.prefixForUser(t.userId)),r=[];return np(e).iterate({range:i},function(e,n,i){if(e[0]===t.userId){var o=Td(e[1]);r.push(o)}else i.done()}).next(function(){Cf(0===r.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+r.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return Jd(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return ip(e).get(this.userId).next(function(e){return e||new Lp(t.userId,-1,"")})},e}();function Jd(e,t,n){var i=Up.prefixForPath(t,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),a=!1;return np(e).iterate({range:o,keysOnly:!0},function(e,n,i){var o=Zi(e,3),s=o[0],u=o[1];o[2],s===t&&u===r&&(a=!0),i.done()}).next(function(){return a})}function Zd(e,t,n){var i,r,o=e.store(Fp.store),a=e.store(Up.store),s=[],u=IDBKeyRange.only(n.batchId),c=0,l=o.iterate({range:u},function(e,t,n){return c++,n.delete()});s.push(l.next(function(){Cf(1===c,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));var h=[];try{for(var f=Ji(n.mutations),d=f.next();!d.done;d=f.next()){var p=d.value,g=Up.key(t,p.key.path,n.batchId);s.push(a.delete(g)),h.push(p.key)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}return Yd.waitFor(s).next(function(){return h})}function ep(e){return e instanceof Uint8Array?(Cf("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function tp(e){return fg.getStore(e,Fp.store)}function np(e){return fg.getStore(e,Up.store)}function ip(e){return fg.getStore(e,Lp.store)}(zd=Gd||(Gd={}))[zd.QueryCache=0]="QueryCache",zd[zd.SyncEngine=1]="SyncEngine";var rp=function(){function e(e,t){Cf((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){Cf((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(Gd.QueryCache,2)},e.forSyncEngine=function(){return new e(Gd.SyncEngine)},e}(),op="SimpleDb",ap=function(){function e(t){this.db=t,12.2===e.getIOSVersion(lr())&&Af("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,i){return Cf(e.isAvailable(),"IndexedDB not supported in current environment."),bf(op,"Opening database:",t),new Yd(function(r,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;r(new e(n))},a.onblocked=function(){o(new kf(Tf.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new kf(Tf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(e){bf(op,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,r=new up(a.transaction);i.createOrUpgrade(n,r,e.oldVersion,Mp).next(function(){bf(op,"Database upgrade to version "+Mp+" complete")})}}).toPromise()},e.delete=function(e){return bf(op,"Removing database:",e),lp(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=lr(),n=e.getIOSVersion(t),i=0<n&&n<10,r=e.getAndroidVersion(t),o=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||i||o)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){var i=up.open(this.db,e,t),r=n(i).catch(function(e){return i.abort(e),Yd.reject(e)}).toPromise();return r.catch(function(){}),i.completionPromise.then(function(){return r})},e.prototype.close=function(){this.db.close()},e}(),sp=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return lp(this.dbCursor.delete())},e}(),up=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new md,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=fp(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,i){return new e(t.transaction(i,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(bf(op,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return Cf(!!t,"Object store not part of transaction: "+e),new cp(t)},e}(),cp=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){return lp(void 0!==t?(bf(op,"PUT",this.store.name,e,t),this.store.put(t,e)):(bf(op,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},e.prototype.add=function(e){return bf(op,"ADD",this.store.name,e,e),lp(this.store.add(e))},e.prototype.get=function(e){var t=this;return lp(this.store.get(e)).next(function(n){return void 0===n&&(n=null),bf(op,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return bf(op,"DELETE",this.store.name,e),lp(this.store.delete(e))},e.prototype.count=function(){return bf(op,"COUNT",this.store.name),lp(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),i=[];return this.iterateCursor(n,function(e,t){i.push(t)}).next(function(){return i})},e.prototype.deleteAll=function(e,t){bf(op,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var i=this.cursor(n);return this.iterateCursor(i,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var i=this.cursor(n);return this.iterateCursor(i,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Yd(function(n,i){t.onerror=function(e){var t=fp(e.target.error);i(t)},t.onsuccess=function(t){var i=t.target.result;i?e(i.primaryKey,i.value).next(function(e){e?i.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new Yd(function(i,r){e.onerror=function(e){r(e.target.error)},e.onsuccess=function(e){var r=e.target.result;if(r){var o=new sp(r),a=t(r.primaryKey,r.value,o);if(a instanceof Yd){var s=a.catch(function(e){return o.done(),Yd.reject(e)});n.push(s)}o.isDone?i():null===o.skipToKey?r.continue():r.continue(o.skipToKey)}else i()}}).next(function(){return Yd.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(Cf(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function lp(e){return new Yd(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=fp(e.target.error);n(t)}})}var hp=!1;function fp(e){var t=ap.getIOSVersion(lr());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var i=new kf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hp||(hp=!0,setTimeout(function(){throw i},0)),i}}return e}var dp=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=rp.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Id.fromTimestamp(new kd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return mp(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var i=this;return this.retrieveMetadata(e).next(function(r){return r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),i.saveMetadata(e,r)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(i){return i.targetCount+=1,n.updateMetadataFromQueryData(t,i),n.saveMetadata(e,i)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return pp(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return Cf(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var i=this,r=0,o=[];return pp(e).iterate(function(a,s){var u=i.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(r++,o.push(i.removeQueryData(e,u)))}).next(function(){return Yd.waitFor(o)}).next(function(){return r})},e.prototype.forEachTarget=function(e,t){var n=this;return pp(e).iterate(function(e,i){var r=n.serializer.fromDbTarget(i);t(r)})},e.prototype.retrieveMetadata=function(e){return gp(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,fg.getStore(n,Hp.store)).put(Hp.key,t);var n},e.prototype.saveQueryData=function(e,t){return pp(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,i=t.canonicalId(),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return pp(e).iterate({range:r,index:Vp.queryTargetsIndexName},function(e,i,r){var a=n.serializer.fromDbTarget(i);t.isEqual(a.query)&&(o=a,r.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var i=this,r=[],o=vp(e);return t.forEach(function(t){var a=Cd(t.path);r.push(o.put(new qp(n,a))),r.push(i.referenceDelegate.addReference(e,t))}),Yd.waitFor(r)},e.prototype.removeMatchingKeys=function(e,t,n){var i=this,r=vp(e);return Yd.forEach(t,function(t){var o=Cd(t.path);return Yd.waitFor([r.delete([n,o]),i.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=vp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),i=vp(e),r=qd();return i.iterate({range:n,keysOnly:!0},function(e,t,n){var i=Td(e[1]),o=new gd(i);r=r.add(o)}).next(function(){return r})},e.prototype.containsKey=function(e,t){var n=Cd(t.path),i=IDBKeyRange.bound([n],[ed(n)],!1,!0),r=0;return vp(e).iterate({index:qp.documentTargetsIndex,keysOnly:!0,range:i},function(e,t,n){var i=Zi(e,2),o=i[0];i[1],0!==o&&(r++,n.done())}).next(function(){return 0<r})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return pp(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function pp(e){return fg.getStore(e,Vp.store)}function gp(e){return ap.getStore(e,Hp.store).get(Hp.key).next(function(e){return Cf(null!==e,"Missing metadata row."),e})}function mp(e){return gp(e).next(function(e){return e.highestListenSequenceNumber})}function vp(e){return fg.getStore(e,qp.store)}var yp=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return gd.comparator(e.key,t.key)},e}(),bp=function(e){function t(t,n,i,r,o){var a=e.call(this,t,n)||this;return a.data=i,a.proto=o,a.hasLocalMutations=!!r.hasLocalMutations,a.hasCommittedMutations=!!r.hasCommittedMutations,a}return Ki(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var i=t.field(e),r=n.field(e);return null!==i&&null!==r?i.compareTo(r):_f("Trying to compare documents on fields that don't exist")},t}(yp),Ap=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.hasCommittedMutations=!(!i||!i.hasCommittedMutations),r}return Ki(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(yp),wp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(yp),_p=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t,n,i=this.mapKeyFn(e),r=this.inner[i];if(void 0!==r)try{for(var o=Ji(r),a=o.next();!a.done;a=o.next()){var s=Zi(a.value,2),u=s[0],c=s[1];if(u.isEqual(e))return c}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),i=this.inner[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(i[r][0].isEqual(e))return void(i[r]=[e,t]);i.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(i,1),!0;return!1},e.prototype.forEach=function(e){Pf(this.inner,function(t,n){var i,r;try{for(var o=Ji(n),a=o.next();!a.done;a=o.next()){var s=Zi(a.value,2),u=s[0],c=s[1];e(u,c)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}})},e.prototype.isEmpty=function(){return Of(this.inner)},e}(),Cp=function(){function e(){this.changes=$d(),this.documentSizes=new _p(function(e){return e.toString()})}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,i=this.assertChanges().get(t);return i?Yd.resolve(i):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},e.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return Cf(null!==this.changes,"Changes have already been applied."),this.changes},e}(),Sp="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Ep=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=ap.getStore(e,Qp.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var i,r,o=[];if(0<t.length){var a=Ip(e),s=qd();try{for(var u=Ji(t),c=u.next();!c.done;c=u.next()){var l=c.value,h=l.key,f=l.doc;o.push(a.put(Dp(h),f)),s=s.add(h),o.push(this.indexManager.addToCollectionParentIndex(e,h.path.popLast()))}}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}this.keepDocumentChangeLog&&o.push(xp(e).put({changes:this.serializer.toDbResourcePaths(s)})),o.push(this.updateSize(e,n))}return Yd.waitFor(o)},e.prototype.removeEntry=function(e,t){var n=Ip(e),i=Dp(t);return n.get(i).next(function(e){return e?n.delete(i).next(function(){return Np(e)}):Yd.resolve(0)})},e.prototype.getEntry=function(e,t){var n=this;return Ip(e).get(Dp(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Ip(e).get(Dp(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Np(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,i=Ld();return this.forEachDbEntry(e,t,function(e,t){i=t?i.insert(e,n.serializer.fromDbRemoteDocument(t)):i.insert(e,null)}).next(function(){return i})},e.prototype.getSizedEntries=function(e,t){var n=this,i=Ld(),r=new xd(gd.comparator);return this.forEachDbEntry(e,t,function(e,t){r=t?(i=i.insert(e,n.serializer.fromDbRemoteDocument(t)),r.insert(e,Np(t))):(i=i.insert(e,null),r.insert(e,0))}).next(function(){return{maybeDocuments:i,sizeMap:r}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Yd.resolve();var i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),r=t.getIterator(),o=r.getNext();return Ip(e).iterate({range:i},function(e,t,i){for(var a=gd.fromSegments(e);o&&gd.comparator(o,a)<0;)n(o,null),o=r.getNext();o&&o.isEqual(a)&&(n(o,t),o=r.hasNext()?r.getNext():null),o?i.skip(o.path.toArray()):i.done()}).next(function(){for(;o;)n(o,null),o=r.hasNext()?r.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;Cf(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Ud(),r=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return Ip(e).iterate({range:a},function(e,o,a){if(e.length===r){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof bp&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},e.prototype.getNewDocumentChanges=function(e){var t=this;Cf(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=qd(),i=$d(),r=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=xp(e);return a.iterate({range:r},function(e,i){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==i.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return Yd.reject(new kf(Tf.DATA_LOSS,Sp))});n=n.unionWith(t.serializer.fromDbResourcePaths(i.changes)),t._lastProcessedDocumentChangeId=i.id}).next(function(){var r=[];return n.forEach(function(n){r.push(t.getEntry(e,n).next(function(e){var t=e||new Ap(n,Id.forDeletedDoc());i=i.insert(n,t)}))}),Yd.waitFor(r)}).next(function(){return i})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return xp(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,i){t._lastProcessedDocumentChangeId=e,i.done()})},e.prototype.newChangeBuffer=function(){return new kp(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Tp(e).get(jp.key).next(function(e){return Cf(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return Tp(e).put(jp.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next(function(i){return i.byteSize+=t,n.setMetadata(e,i)})},e}();function Tp(e){return fg.getStore(e,jp.store)}var kp=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return Ki(t,e),t.prototype.applyChanges=function(e){var t=this,n=0,i=[];return this.assertChanges().forEach(function(e,r){var o=t.documentCache.serializer.toDbRemoteDocument(r),a=t.documentSizes.get(e);Cf(void 0!==a,"Attempting to change document "+e.toString()+" without having read it first");var s=Np(o);n+=s-a,i.push({key:e,doc:o})}),this.documentCache.addEntries(e,i,n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(Cp);function Ip(e){return fg.getStore(e,Bp.store)}function xp(e){return fg.getStore(e,Qp.store)}function Dp(e){return e.path.toArray()}function Np(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw _f("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Pp=function(){function e(){this.collectionParentIndex=new Op}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Yd.resolve()},e.prototype.getCollectionParents=function(e,t){return Yd.resolve(this.collectionParentIndex.getEntries(t))},e}(),Op=function(){function e(){this.index={}}return e.prototype.add=function(e){Cf(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Od(fd.comparator),r=!i.has(n);return this.index[t]=i.add(n),r},e.prototype.getEntries=function(e){return(this.index[e]||new Od(fd.comparator)).toArray()},e}(),Mp=8,Rp=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,i){var r,o=this;Cf(n<i&&0<=n&&i<=Mp,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&1<=i&&(e.createObjectStore($p.store),(r=e).createObjectStore(Lp.store,{keyPath:Lp.keyPath}),r.createObjectStore(Fp.store,{keyPath:Fp.keyPath,autoIncrement:!0}).createIndex(Fp.userMutationsIndex,Fp.userMutationsKeyPath,{unique:!0}),r.createObjectStore(Up.store),Gp(e),e.createObjectStore(Bp.store));var a,s=Yd.resolve();return n<3&&3<=i&&(0!==n&&((a=e).deleteObjectStore(qp.store),a.deleteObjectStore(Vp.store),a.deleteObjectStore(Hp.store),Gp(e)),s=s.next(function(){return e=t.store(Hp.store),n=new Hp(0,0,Id.MIN.toTimestamp(),0),e.put(Hp.key,n);var e,n})),n<4&&4<=i&&(0!==n&&(s=s.next(function(){return n=e,(i=t).store(Fp.store).loadAll().next(function(e){n.deleteObjectStore(Fp.store),n.createObjectStore(Fp.store,{keyPath:Fp.keyPath,autoIncrement:!0}).createIndex(Fp.userMutationsIndex,Fp.userMutationsKeyPath,{unique:!0});var t=i.store(Fp.store),r=e.map(function(e){return t.put(e)});return Yd.waitFor(r)});var n,i})),s=s.next(function(){e.createObjectStore(Yp.store,{keyPath:Yp.keyPath}),e.createObjectStore(Qp.store,{keyPath:"id",autoIncrement:!0})})),n<5&&5<=i&&(s=s.next(function(){return o.removeAcknowledgedMutations(t)})),n<6&&6<=i&&(s=s.next(function(){return e.createObjectStore(jp.store),o.addDocumentGlobal(t)})),n<7&&7<=i&&(s=s.next(function(){return o.ensureSequenceNumbers(t)})),n<8&&8<=i&&(s=s.next(function(){return o.createCollectionParentIndex(e,t)})),s},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Bp.store).iterate(function(e,n){t+=Np(n)}).next(function(){var n=new jp(t);return e.store(jp.store).put(jp.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Lp.store),i=e.store(Fp.store);return n.loadAll().next(function(n){return Yd.forEach(n,function(n){var r=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return i.loadAll(Fp.userMutationsIndex,r).next(function(i){return Yd.forEach(i,function(i){Cf(i.userId===n.userId,"Cannot process batch "+i.batchId+" from unexpected user");var r=t.serializer.fromDbMutationBatch(i);return Zd(e,n.userId,r).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(qp.store),n=e.store(Bp.store);return mp(e).next(function(e){var i=[];return n.iterate(function(n,r){var o=new fd(n),a=[0,Cd(o)];i.push(t.get(a).next(function(n){return n?Yd.resolve():(i=o,t.put(new qp(0,Cd(i),e)));var i}))}).next(function(){return Yd.waitFor(i)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(Wp.store,{keyPath:Wp.keyPath});var n=t.store(Wp.store),i=new Op,r=function(e){if(i.add(e)){var t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Cd(r)})}};return t.store(Bp.store).iterate({keysOnly:!0},function(e,t){var n=new fd(e);return r(n.popLast())}).next(function(){return t.store(Up.store).iterate({keysOnly:!0},function(e,t){var n=Zi(e,3),i=(n[0],n[1]),o=(n[2],Td(i));return r(o.popLast())})})},e}(),$p=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),Lp=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),Fp=function(){function e(e,t,n,i,r){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),Up=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Cd(t)]},e.key=function(e,t,n){return[e,Cd(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),Bp=function(){function e(e,t,n,i){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=i}return e.store="remoteDocuments",e}(),jp=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),Vp=function(){function e(e,t,n,i,r,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),qp=function(){function e(e,t,n){this.targetId=e,this.path=t,Cf(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),Hp=function(){function e(e,t,n,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=i}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),Wp=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function Gp(e){e.createObjectStore(qp.store,{keyPath:qp.keyPath}).createIndex(qp.documentTargetsIndex,qp.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Vp.store,{keyPath:Vp.keyPath}).createIndex(Vp.queryTargetsIndexName,Vp.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Hp.store)}var zp,Kp,Qp=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),Yp=function(){function e(e,t,n,i,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=i,this.lastProcessedDocumentChangeId=r}return e.store="clientMetadata",e.keyPath="clientId",e}(),Xp=er(er(er([Lp.store,Fp.store,Up.store,Bp.store,Vp.store,$p.store,Hp.store,qp.store],[Yp.store,Qp.store]),[jp.store]),[Wp.store]),Jp=function(){function e(){this.collectionParentsCache=new Op}return e.prototype.addToCollectionParentIndex=function(e,t){if(Cf(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){Cf(1<=t.length,"Invalid collection path.");var n=t.lastSegment(),i=t.popLast();return Zp(e).put({collectionId:n,parent:Cd(i)})}return Yd.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],i=IDBKeyRange.bound([t,""],[ed(t),""],!1,!0);return Zp(e).loadAll(i).next(function(e){var i,r;try{for(var o=Ji(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.collectionId!==t)break;n.push(Td(s.parent))}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return n})},e}();function Zp(e){return fg.getStore(e,Wp.store)}(Kp=zp||(zp={}))[Kp.Listen=0]="Listen",Kp[Kp.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Kp[Kp.LimboResolution=2]="LimboResolution";var eg=function(){function e(e,t,n,i,r,o){void 0===r&&(r=Id.MIN),void 0===o&&(o=Ef()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),tg=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=gd.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Ap(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=gd.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new wp(t,n)):_f("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof bp){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new Bp(null,null,t,n)}if(e instanceof Ap){var i=e.key.path.toArray(),r=this.toDbTimestamp(e.version);return n=e.hasCommittedMutations,new Bp(null,new function(e,t){this.path=e,this.readTime=t}(i,r),null,n)}return e instanceof wp?(i=e.key.path.toArray(),r=this.toDbTimestamp(e.version),new Bp(new function(e,t){this.path=e,this.version=t}(i,r),null,null,!0)):_f("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new function(e,t){this.seconds=e,this.nanoseconds=t}(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new kd(e.seconds,e.nanoseconds);return Id.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,i=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),r=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Fp(e,t.batchId,t.localWriteTime.toMillis(),i,r)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),i=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),r=kd.fromMillis(e.localWriteTimeMs);return new Kd(e.batchId,r,n,i)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Cd(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){var t,n,i=qd();try{for(var r=Ji(e),o=r.next();!o.done;o=r.next()){var a=o.value;i=i.add(new gd(Td(a)))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return i},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new eg(t,e.targetId,zp.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){Cf(zp.Listen===e.purpose,"Only queries with purpose "+zp.Listen+" may be stored, got "+e.purpose);var t,n,i=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),n=e.resumeToken instanceof Uint8Array?(Cf("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new Vp(e.targetId,e.query.canonicalId(),i,n,e.sequenceNumber,t)},e}();function ng(e,t){var n=Zi(e,2),i=n[0],r=n[1],o=Zi(t,2),a=o[0],s=o[1],u=Jf(i,a);return 0===u?Jf(r,s):u}var ig=function(){function e(e){this.maxElements=e,this.buffer=new Od(ng),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ng(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),rg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},og=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),ag=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.gcTask=null}return e.prototype.start=function(){Cf(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==og.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;Cf(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;bf("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(id.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(dg)})},e}(),sg=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Yd.resolve(cd.INVALID);var i=new ig(t);return this.delegate.forEachTarget(e,function(e){return i.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return i.addElement(e)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===og.COLLECTION_DISABLED?(bf("LruGarbageCollector","Garbage collection skipped; disabled"),Yd.resolve(rg)):this.getCacheSize(e).next(function(i){return i<n.params.cacheSizeCollectionThreshold?(bf("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rg):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,i,r,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>c.params.maximumSequenceNumbersToCollect?(bf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,i)}).next(function(i){return n=i,a=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return r=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),vf()<=sf.DEBUG&&bf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-o)+"ms\n\tRemoved "+r+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Yd.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e})})},e}(),ug="IndexedDbPersistence",cg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lg="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",hg=function(e){function t(t,n){var i=e.call(this)||this;return i.simpleDbTransaction=t,i.currentSequenceNumber=n,i}return Ki(t,e),t}(function(){}),fg=function(){function e(t,n,i,r,o,a,s){if(this.persistenceKey=t,this.clientId=n,this.queue=r,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new kf(Tf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new Ag(this,a),this.dbName=t+e.MAIN_DATABASE,this.serializer=new tg(o),this.document=i.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new dp(this.referenceDelegate,this.serializer),this.indexManager=new Jp,this.remoteDocumentCache=new Ep(this.serializer,this.indexManager,this.allowTabSynchronization),!i.window||!i.window.localStorage)throw new kf(Tf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof hg)return ap.getStore(e.simpleDbTransaction,t);throw _f("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,i,r,o,a){return Yi(this,void 0,void 0,function(){var s;return Xi(this,function(u){switch(u.label){case 0:return[4,(s=new e(t,n,i,r,o,a)).start()];case 1:return u.sent(),[2,s]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,i,r,o,a,s){return Yi(this,void 0,void 0,function(){var u;return Xi(this,function(c){switch(c.label){case 0:return[4,(u=new e(t,n,i,r,o,a,s)).start()];case 1:return c.sent(),[2,u]}})})},e.prototype.start=function(){var e=this;return Cf(!this.started,"IndexedDbPersistence double-started!"),Cf(null!==this.window,"Expected 'window' to be defined"),ap.openOrCreate(this.dbName,Mp,new Rp(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[Hp.store],function(t){return mp(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new cd(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",Xp,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return Yi(t,void 0,void 0,function(){return Xi(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return Yi(t,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",Xp,function(t){return gg(t).put(new Yp(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var i=e.isPrimary;return e.isPrimary=n,i!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),i&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return pg(e).get($p.key).next(function(e){return Yd.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return gg(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return Yi(this,void 0,void 0,function(){var t,n,i=this;return Xi(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var o=e.getStore(r,Yp.store);return o.loadAll().next(function(e){t=i.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return Yd.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if(0<(t=t.filter(function(e){return e.clientId!==i.clientId})).length){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,er(e));return i.remoteDocumentCache.removeDocumentChangesThroughChangeId(r,n)}})})]);case 1:r.sent(),n.forEach(function(e){i.window.localStorage.removeItem(i.zombiedClientLocalStorageKey(e.clientId))}),r.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(id.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return pg(e).get($p.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new kf(Tf.FAILED_PRECONDITION,lg);return!1}}return!(!t.networkEnabled||!t.inForeground)||gg(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,i=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(n||i&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&bf(ug,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return Yi(this,void 0,void 0,function(){var e=this;return Xi(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[$p.store,Yp.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[Yp.store],function(t){return gg(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return Yi(this,void 0,void 0,function(){var n;return Xi(this,function(i){switch(i.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,ap.delete(n)]):[2,Promise.resolve()];case 1:return i.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return Cf(this.started,"Cannot initialize MutationQueue before persistence is started."),Xd.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return Cf(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return Cf(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return Cf(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var i=this;return bf(ug,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",Xp,function(r){return"readwrite-primary"===t?i.verifyPrimaryLease(r).next(function(t){if(!t)throw Af("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new kf(Tf.FAILED_PRECONDITION,cg);return n(new hg(r,i.listenSequence.next()))}).next(function(e){return i.acquireOrExtendPrimaryLease(r).next(function(){return e})}):i.verifyAllowTabSynchronization(r).next(function(){return n(new hg(r,i.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return pg(e).get($p.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new kf(Tf.FAILED_PRECONDITION,lg)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new $p(this.clientId,this.allowTabSynchronization,Date.now());return pg(e).put($p.key,t)},e.isAvailable=function(){return ap.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=pg(e);return n.get($p.key).next(function(e){return t.isLocalClient(e)?(bf(ug,"Releasing primary lease."),n.delete($p.key)):Yd.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(Af("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(Cf(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(Cf("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return bf(ug,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return Af(ug,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){Af("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function dg(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){if((n=e).code!==Tf.FAILED_PRECONDITION||n.message!==cg)throw e;var n;return bf(ug,"Unexpectedly lost primary lease"),[2]})})}function pg(e){return e.store($p.store)}function gg(e){return e.store(Yp.store)}var mg,vg,yg,bg,Ag=function(){function e(e,t){this.db=e,this.garbageCollector=new sg(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return wg(e,t)},e.prototype.removeReference=function(e,t){return wg(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return wg(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Yd.resolve(!0):(i=t,r=!1,ip(n=e).iterateSerial(function(e){return Jd(n,e,i).next(function(e){return e&&(r=!0),Yd.resolve(!e)})}).next(function(){return r}));var n,i,r},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,i=0,r=0,o=[];return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return i++,n.removeOrphanedDocument(e,a).next(function(e){r+=e})});o.push(u)}}).next(function(){return Yd.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(e,-r)}).next(function(){return i})},e.prototype.removeOrphanedDocument=function(e,t){var n,i=0,r=this.db.getRemoteDocumentCache();return Yd.waitFor([vp(e).delete((n=t,[0,Cd(n.path)])),r.removeEntry(e,t).next(function(e){i+=e})]).next(function(){return i})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return wg(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,i=vp(e),r=cd.INVALID;return i.iterate({index:qp.documentTargetsIndex},function(e,i){var o=Zi(e,2),a=o[0],s=(o[1],i.path),u=i.sequenceNumber;0===a?(r!==cd.INVALID&&t(new gd(Td(n)),r),r=u,n=s):r=cd.INVALID}).next(function(){r!==cd.INVALID&&t(new gd(Td(n)),r)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function wg(e,t){return vp(e).put((n=t,i=e.currentSequenceNumber,new qp(0,Cd(n.path),i)));var n,i}(vg=mg||(mg={}))[vg.NullValue=0]="NullValue",vg[vg.BooleanValue=1]="BooleanValue",vg[vg.NumberValue=2]="NumberValue",vg[vg.TimestampValue=3]="TimestampValue",vg[vg.StringValue=4]="StringValue",vg[vg.BlobValue=5]="BlobValue",vg[vg.RefValue=6]="RefValue",vg[vg.GeoPointValue=7]="GeoPointValue",vg[vg.ArrayValue=8]="ArrayValue",vg[vg.ObjectValue=9]="ObjectValue",(bg=yg||(yg={}))[bg.Default=0]="Default",bg[bg.Estimate=1]="Estimate",bg[bg.Previous=2]="Previous";var _g=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(yg.Estimate,n);case"previous":return new e(yg.Previous,n);case"none":case void 0:return new e(yg.Default,n);default:return _f("fromSnapshotOptions() called with invalid options.")}},e}(),Cg=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return Cf(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Jf(this.typeOrder,e.typeOrder)},e}(),Sg=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=mg.NullValue,t.internalValue=null,t}return Ki(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Cg),Eg=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.BooleanValue,n}return Ki(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Jf(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Cg),Tg=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.NumberValue,n}return Ki(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(i=e.internalValue)?-1:i<n?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1:this.defaultCompareTo(e);var n,i},t}(Cg);function kg(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Ig,xg,Dg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.isEqual=function(e){return e instanceof t&&kg(this.internalValue,e.internalValue)},t}(Tg),Ng=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.isEqual=function(e){return e instanceof t&&kg(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Tg),Pg=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.StringValue,n}return Ki(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Jf(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Cg),Og=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.TimestampValue,n}return Ki(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Mg?-1:this.defaultCompareTo(e)},t}(Cg),Mg=function(e){function t(t,n){var i=e.call(this)||this;return i.localWriteTime=t,i.previousValue=n,i.typeOrder=mg.TimestampValue,i}return Ki(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===yg.Estimate?new Og(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===yg.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Og?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Cg),Rg=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.BlobValue,n}return Ki(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Cg),$g=function(e){function t(t,n){var i=e.call(this)||this;return i.databaseId=t,i.key=n,i.typeOrder=mg.RefValue,i}return Ki(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:gd.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Cg),Lg=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.GeoPointValue,n}return Ki(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Cg),Fg=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.ObjectValue,n}return Ki(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,i){t[n]=i.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),i=e.internalValue.getIterator();n.hasNext()&&i.hasNext();){var r=n.getNext(),o=i.getNext();if(r.key!==o.key||!r.value.isEqual(o.value))return!1}return!n.hasNext()&&!i.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),i=e.internalValue.getIterator();n.hasNext()&&i.hasNext();){var r=n.getNext(),o=i.getNext(),a=Jf(r.key,o.key)||r.value.compareTo(o.value);if(a)return a}return Jf(n.hasNext(),i.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(Cf(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var i=this.child(e.firstSegment());i instanceof t||(i=t.EMPTY);var r=i.set(e.popFirst(),n);return this.setChild(e.firstSegment(),r)},t.prototype.delete=function(e){if(Cf(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var i=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),i))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){Cf(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new Od(pd.comparator);return this.internalValue.forEach(function(n,i){var r=new pd([n]);if(i instanceof t){var o=i.fieldMask().fields;o.isEmpty()?e=e.add(r):o.forEach(function(t){e=e.add(r.child(t))})}else e=e.add(r)}),Bg.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new xd(Jf)),t}(Cg),Ug=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mg.ArrayValue,n}return Ki(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){var t,n;try{for(var i=Ji(this.internalValue),r=i.next();!r.done;r=i.next())if(r.value.isEqual(e))return!0}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(e.internalValue[i]);if(r)return r}return Jf(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},t}(Cg),Bg=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Od(pd.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),jg=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}();(xg=Ig||(Ig={}))[xg.Set=0]="Set",xg[xg.Patch=1]="Patch",xg[xg.Transform=2]="Transform",xg[xg.Delete=3]="Delete";var Vg=function(){function e(e,t){this.updateTime=e,this.exists=t,Cf(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof bp&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof bp:(Cf(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),qg=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&Cf(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof bp?e.version:Id.MIN},e}(),Hg=function(e){function t(t,n,i){var r=e.call(this)||this;return r.key=t,r.value=n,r.precondition=i,r.type=Ig.Set,r}return Ki(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),Cf(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new bp(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var i=qg.getPostMutationVersion(e);return new bp(this.key,i,this.value,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(qg),Wg=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=i,o.precondition=r,o.type=Ig.Patch,o}return Ki(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Cf(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new wp(this.key,t.version);var n=this.patchDocument(e);return new bp(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var i=qg.getPostMutationVersion(e),r=this.patchDocument(e);return new bp(this.key,i,r,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof bp?e.data:Fg.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var i=t.data.field(n);e=null!==i?e.set(n,i):e.delete(n)}}),e},t}(qg),Gg=function(e){function t(t,n){var i=e.call(this)||this;return i.key=t,i.fieldTransforms=n,i.type=Ig.Transform,i.precondition=Vg.exists(!0),i}return Ki(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Cf(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new wp(this.key,t.version);var n=this.requireDocument(e),i=this.serverTransformResults(e,t.transformResults),r=t.version,o=this.transformObject(n.data,i);return new bp(this.key,r,o,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var i=this.requireDocument(e),r=this.localTransformResults(n,e,t),o=this.transformObject(i.data,r);return new bp(this.key,i.version,o,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){var t,n,i=null;try{for(var r=Ji(this.fieldTransforms),o=r.next();!o.done;o=r.next()){var a=o.value,s=e instanceof bp?e.field(a.field):void 0,u=a.transform.computeBaseValue(s||null);null!=u&&(i=null==i?Fg.EMPTY.set(a.field,u):i.set(a.field,u))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return i},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&Zf(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){Cf(e instanceof bp,"Unknown MaybeDocument type "+e);var t=e;return Cf(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];Cf(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<t.length;i++){var r=this.fieldTransforms[i],o=r.transform,a=null;e instanceof bp&&(a=e.field(r.field)),n.push(o.applyToRemoteDocument(a,t[i]))}return n},t.prototype.localTransformResults=function(e,t,n){var i,r,o=[];try{for(var a=Ji(this.fieldTransforms),s=a.next();!s.done;s=a.next()){var u=s.value,c=u.transform,l=null;t instanceof bp&&(l=t.field(u.field)),null===l&&n instanceof bp&&(l=n.field(u.field)),o.push(c.applyToLocalView(l,e))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},t.prototype.transformObject=function(e,t){Cf(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var i=this.fieldTransforms[n].field;e=e.set(i,t[n])}return e},t}(qg),zg=function(e){function t(t,n){var i=e.call(this)||this;return i.key=t,i.precondition=n,i.type=Ig.Delete,i}return Ki(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),Cf(null==t.transformResults,"Transform results received by DeleteMutation."),new Ap(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&Cf(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ap(this.key,Id.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(qg),Kg=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(i){return n.getDocumentInternal(e,t,i)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){var i,r;try{for(var o=Ji(n),a=o.next();!a.done;a=o.next())e=a.value.applyToLocalView(t,e)}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var i=Ld();return t.forEach(function(e,t){var r,o;try{for(var a=Ji(n),s=a.next();!s.done;s=a.next())t=s.value.applyToLocalView(e,t)}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}i=i.insert(e,t)}),i},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(i){var r=n.applyLocalMutationsToDocuments(e,t,i),o=$d();return r.forEach(function(e,t){t||(t=new Ap(e,Id.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new gd(t)).next(function(e){var t=Ud();return e instanceof bp&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;Cf(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,r=Ud();return this.indexManager.getCollectionParents(e,i).next(function(o){return Yd.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(i));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){r=r.insert(e,t)})})}).next(function(){return r})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){var i,r,o,a;try{for(var s=Ji(e),u=s.next();!u.done;u=s.next()){var c=u.value;try{for(var l=Ji(c.mutations),h=l.next();!h.done;h=l.next()){var f=h.value,d=f.key;if(t.path.isImmediateParentOf(d.path)){var p=n.get(d),g=f.applyToLocalView(p,p,c.localWriteTime);n=g instanceof bp?n.insert(d,g):n.remove(d)}}}catch(e){o={error:e}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}).next(function(){return n.forEach(function(e,i){t.matches(i)||(n=n.remove(e))}),n})},e}(),Qg=function(){function e(){this.refsByKey=new Od(Yg.compareByKey),this.refsByTarget=new Od(Yg.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Yg(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new Yg(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=gd.EMPTY,i=new Yg(n,e),r=new Yg(n,e+1),o=[];return this.refsByTarget.forEachInRange([i,r],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=gd.EMPTY,n=new Yg(t,e),i=new Yg(t,e+1),r=qd();return this.refsByTarget.forEachInRange([n,i],function(e){r=r.add(e.key)}),r},e.prototype.containsKey=function(e){var t=new Yg(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Yg=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return gd.comparator(e.key,t.key)||Jf(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Jf(e.targetOrBatchId,t.targetOrBatchId)||gd.comparator(e.key,t.key)},e}(),Xg=function(){function e(e,t){this.persistence=e,this.localViewReferences=new Qg,this.queryDataByTarget={},Cf(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Kg(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var i;return t.mutationQueue.getAllMutationBatches(n).next(function(r){return i=r,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new Kg(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){var r,o,a,s,u,c,l,h,f=[],d=[],p=qd();try{for(var g=Ji(i),m=g.next();!m.done;m=g.next()){var v=m.value;f.push(v.batchId);try{for(var y=Ji(v.mutations),b=y.next();!b.done;b=y.next()){var A=b.value;p=p.add(A.key)}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}try{for(var w=Ji(e),_=w.next();!_.done;_=w.next()){v=_.value,d.push(v.batchId);try{for(var C=Ji(v.mutations),S=C.next();!S.done;S=C.next())A=S.value,p=p.add(A.key)}catch(e){l={error:e}}finally{try{S&&!S.done&&(h=C.return)&&h.call(C)}finally{if(l)throw l.error}}}}catch(e){u={error:e}}finally{try{_&&!_.done&&(c=w.return)&&c.call(w)}finally{if(u)throw u.error}}return t.localDocuments.getDocuments(n,p).next(function(e){return{affectedDocuments:e,removedBatchIds:f,addedBatchIds:d}})})})},e.prototype.localWrite=function(e){var t=this,n=kd.now(),i=e.reduce(function(e,t){return e.add(t.key)},qd());return this.persistence.runTransaction("Locally write mutations","readwrite",function(r){return t.localDocuments.getDocuments(r,i).next(function(i){var o,a,s=[];try{for(var u=Ji(e),c=u.next();!c.done;c=u.next()){var l=c.value,h=l.extractBaseValue(i.get(l.key));null!=h&&s.push(new Wg(l.key,h,h.fieldMask(),Vg.exists(!0)))}}catch(a){o={error:a}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return t.mutationQueue.addMutationBatch(r,n,s,e).next(function(e){var t=e.applyToLocalDocumentSet(i);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Yd.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var i=e.batch.keys(),r=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,r)}).next(function(){return r.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,i)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var i;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return Cf(null!==e,"Attempt to reject nonexistent batch!"),i=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,i)})})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,i=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(r){var o=[],a=qd();Nf(t.targetChanges,function(i,s){var u=n.queryDataByTarget[i];if(u){s.addedDocuments.forEach(function(e){a=a.add(e)}),s.modifiedDocuments.forEach(function(e){a=a.add(e)}),o.push(n.queryCache.removeMatchingKeys(r,s.removedDocuments,i).next(function(){return n.queryCache.addMatchingKeys(r,s.addedDocuments,i)}));var c=s.resumeToken;if(0<c.length){var l=u;u=u.copy({resumeToken:c,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[i]=u,e.shouldPersistQueryData(l,u,s)&&o.push(n.queryCache.updateQueryData(r,u))}}});var s=$d(),u=qd();t.documentUpdates.forEach(function(e,t){u=u.add(e)}),o.push(i.getEntries(r,u).next(function(e){t.documentUpdates.forEach(function(u,c){var l=e.get(u);null==l||c.version.isEqual(Id.MIN)||a.has(c.key)&&!l.hasPendingWrites||0<=c.version.compareTo(l.version)?(i.addEntry(c),s=s.insert(u,c)):bf("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))})}));var c=t.snapshotVersion;if(!c.isEqual(Id.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(r).next(function(e){return Cf(0<=c.compareTo(e),"Watch stream reverted to previous snapshot?? "+c+" < "+e),n.queryCache.setTargetsMetadata(r,r.currentSequenceNumber,c)});o.push(l)}return Yd.waitFor(o).next(function(){return i.apply(r)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(r,s)})})},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size)},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Yd.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Yd.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var i;return t.queryCache.getQueryData(n,e).next(function(r){return r?(i=r,Yd.resolve()):t.queryCache.allocateTargetId(n).next(function(r){return i=new eg(e,r,zp.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,i)})}).next(function(){return Cf(!t.queryDataByTarget[i.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[i.targetId]=i})})},e.prototype.releaseQuery=function(e,t){var n=this,i=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",i,function(i){return n.queryCache.getQueryData(i,e).next(function(r){Cf(null!=r,"Tried to release nonexistent query: "+e);var o=r.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?Yd.resolve():Yd.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(i,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(i,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var i=this,r=t.batch,o=r.keys(),a=Yd.resolve();return o.forEach(function(i){a=a.next(function(){return n.getEntry(e,i)}).next(function(e){var o=e,a=t.docVersions.get(i);Cf(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=r.applyToRemoteDocument(i,o,t))?n.addEntry(o):Cf(!e,"Mutation batch "+r+" applied to document "+e+" resulted in null"))})}),a.next(function(){return i.mutationQueue.removeMutationBatch(e,r)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Jg=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Ef(),this.batchesByDocumentKey=new Od(Yg.compareByKey)}return e.prototype.checkEmpty=function(e){return Yd.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var i=t.batchId,r=this.indexOfExistingBatchId(i,"acknowledged");Cf(0===r,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[r];return Cf(i===o.batchId,"Queue ordering failure: expected batch "+i+", got batch "+o.batchId),this.lastStreamToken=n,Yd.resolve()},e.prototype.getLastStreamToken=function(e){return Yd.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Yd.resolve()},e.prototype.addMutationBatch=function(e,t,n,i){var r,o;Cf(0!==i.length,"Mutation batches should not be empty");var a=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&Cf(this.mutationQueue[this.mutationQueue.length-1].batchId<a,"Mutation batchIDs must be monotonically increasing order");var s=new Kd(a,t,n,i);this.mutationQueue.push(s);try{for(var u=Ji(i),c=u.next();!c.done;c=u.next()){var l=c.value;this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Yg(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast())}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return Yd.resolve(s)},e.prototype.lookupMutationBatch=function(e,t){return Yd.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return Cf(null!=n,"Failed to find local mutation batch."),Yd.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,i=this.indexOfBatchId(n),r=i<0?0:i;return Yd.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getAllMutationBatches=function(e){return Yd.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,i=new Yg(t,0),r=new Yg(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([i,r],function(e){Cf(t.isEqual(e.key),"Should only iterate over a single key's batches");var i=n.findMutationBatch(e.targetOrBatchId);Cf(null!==i,"Batches in the index must exist in the main table"),o.push(i)}),Yd.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,i=new Od(Jf);return t.forEach(function(e){var t=new Yg(e,0),r=new Yg(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,r],function(t){Cf(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.targetOrBatchId)})}),Yd.resolve(this.findMutationBatches(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){Cf(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,i=n.length+1,r=n;gd.isDocumentKey(r)||(r=r.child(""));var o=new Yg(new gd(r),0),a=new Od(Jf);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.targetOrBatchId)),!0)},o),Yd.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var i=t.findMutationBatch(e);null!==i&&n.push(i)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Cf(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var i=this.batchesByDocumentKey;return Yd.forEach(t.mutations,function(r){var o=new Yg(r.key,t.batchId);return i=i.delete(o),n.referenceDelegate.removeMutationReference(e,r.key)}).next(function(){n.batchesByDocumentKey=i})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Yg(t,0),i=this.batchesByDocumentKey.firstAfterOrEqual(n);return Yd.resolve(t.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&Cf(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Yd.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return Cf(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return Cf(n.batchId===e,"If found batch must match"),n},e}(),Zg=function(){function e(e){this.persistence=e,this.queries=new _p(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Id.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Qg,this.targetCount=0,this.targetIdGenerator=rp.forQueryCache()}return e.prototype.getTargetCount=function(e){return Yd.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Yd.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Yd.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Yd.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Yd.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Yd.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return Cf(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Yd.resolve()},e.prototype.updateQueryData=function(e,t){return Cf(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Yd.resolve()},e.prototype.removeQueryData=function(e,t){return Cf(0<this.targetCount,"Removing a target from an empty cache"),Cf(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Yd.resolve()},e.prototype.removeTargets=function(e,t,n){var i=this,r=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(i.queries.delete(a),o.push(i.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),Yd.waitFor(o).next(function(){return r})},e.prototype.getQueryCount=function(e){return Yd.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Yd.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return _f("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(function(t){r.push(i.addReference(e,t))}),Yd.waitFor(r)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(function(t){r.push(i.removeReference(e,t))}),Yd.waitFor(r)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Yd.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Yd.resolve(n)},e.prototype.containsKey=function(e,t){return Yd.resolve(this.references.containsKey(t))},e}(),em=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new xd(gd.comparator),this.newDocumentChanges=qd(),this.size=0}return e.prototype.addEntries=function(e,t,n){var i,r,o=[];try{for(var a=Ji(t),s=a.next();!s.done;s=a.next()){var u=s.value,c=u.maybeDocument.key;this.docs=this.docs.insert(c,u),this.newDocumentChanges=this.newDocumentChanges.add(c),o.push(this.indexManager.addToCollectionParentIndex(e,c.path.popLast()))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return this.size+=n,Yd.waitFor(o)},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,Yd.resolve(n.size)):Yd.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Yd.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return Yd.resolve(this.docs.get(t))},e.prototype.getEntries=function(e,t){var n=this,i=Ld();return t.forEach(function(e){var t=n.docs.get(e);i=i.insert(e,t?t.maybeDocument:null)}),Yd.resolve(i)},e.prototype.getSizedEntries=function(e,t){var n=this,i=Ld(),r=new xd(gd.comparator);return t.forEach(function(e){var t=n.docs.get(e);i=i.insert(e,t?t.maybeDocument:null),r=r.insert(e,t?t.size:0)}),Yd.resolve({maybeDocuments:i,sizeMap:r})},e.prototype.getDocumentsMatchingQuery=function(e,t){Cf(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Ud(),i=new gd(t.path.child("")),r=this.docs.getIteratorFrom(i);r.hasNext();){var o=r.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof bp&&t.matches(s)&&(n=n.insert(s.key,s))}return Yd.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return Yd.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=$d();return this.newDocumentChanges.forEach(function(e){var i=t.docs.get(e),r=i?i.maybeDocument:new Ap(e,Id.forDeletedDoc());n=n.insert(e,r)}),this.newDocumentChanges=qd(),Yd.resolve(n)},e.prototype.newChangeBuffer=function(){return new tm(this.sizer,this)},e.prototype.getSize=function(e){return Yd.resolve(this.size)},e}(),tm=function(e){function t(t,n){var i=e.call(this)||this;return i.sizer=t,i.documentCache=n,i}return Ki(t,e),t.prototype.applyChanges=function(e){var t=this,n=0,i=[];return this.assertChanges().forEach(function(e,r){var o=t.documentSizes.get(e);Cf(void 0!==o,"Attempting to change document "+e.toString()+" without having read it first");var a=t.sizer(r);n+=a-o,i.push({maybeDocument:r,size:a})}),this.documentCache.addEntries(e,i,n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(Cp),nm=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new cd(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Zg(this),this.indexManager=new Pp,this.remoteDocumentCache=new em(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n,i){return new e(t,function(e){return new om(e,new tg(n),i)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new rm(e)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Jg(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var i=this;bf("MemoryPersistence","Starting transaction:",e);var r=new im(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(r).next(function(e){return i.referenceDelegate.onTransactionCommitted(r).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return Yd.or((n=this.mutationQueues,i=[],Pf(n,function(e,t){return i.push(t)}),i).map(function(n){return function(){return n.containsKey(e,t)}}));var n,i},e}(),im=function(e){this.currentSequenceNumber=e},rm=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Yd.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Yd.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Yd.resolve()},e.prototype.removeTarget=function(e,t){var n=this,i=this.persistence.getQueryCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return i.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return Yd.forEach(this.orphanedDocuments,function(i){return t.isReferenced(e,i).next(function(t){return t?Yd.resolve():n.removeEntry(e,i).next(function(){})})})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Yd.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Yd.resolve(n.inMemoryPins.containsKey(t))}])},e}(),om=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new _p(function(e){return Cd(e.path)}),this.garbageCollector=new sg(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Yd.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Yd.forEach(this.orphanedSequenceNumbers,function(i,r){return n.isPinned(e,i,r).next(function(e){return e?Yd.resolve():t(r)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,i=0,r=this.persistence.getRemoteDocumentCache();return r.forEachDocumentKey(e,function(o){return n.isPinned(e,o,t).next(function(t){return t?Yd.resolve():(i++,r.removeEntry(e,o).next())})}).next(function(){return i})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Yd.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Yd.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Yd.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Yd.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _f("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var i=this;return Yd.or([function(){return i.persistence.mutationQueuesContainKey(e,t)},function(){return Yd.resolve(i.inMemoryPins.containsKey(t))},function(){return i.persistence.getQueryCache().containsKey(e,t)},function(){var e=i.orphanedSequenceNumbers.get(t);return Yd.resolve(void 0!==e&&n<e)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),am=Number,sm=am.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),um=am.MAX_SAFE_INTEGER||Math.pow(2,53)-1,cm=am.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function lm(e){return null==e}function hm(e){return cm(e)&&e<=um&&sm<=e}var fm,dm,pm=function(){function e(e,t,n,i,r){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=i,this.maxDelayMs=r,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),i=Math.max(0,Date.now()-this.lastAttemptTime),r=Math.max(0,n-i);0<this.currentBaseMs&&bf("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,r,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),gm="PersistentStream";(dm=fm||(fm={}))[dm.Initial=0]="Initial",dm[dm.Starting=1]="Starting",dm[dm.Open=2]="Open",dm[dm.Error=3]="Error",dm[dm.Backoff=4]="Backoff";var mm,vm,ym,bm,Am=function(){function e(e,t,n,i,r,o){this.queue=e,this.idleTimerId=n,this.connection=i,this.credentialsProvider=r,this.listener=o,this.state=fm.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new pm(e,t,1e3,1.5,6e4)}return e.prototype.isStarted=function(){return this.state===fm.Starting||this.state===fm.Open||this.state===fm.Backoff},e.prototype.isOpen=function(){return this.state===fm.Open},e.prototype.start=function(){this.state!==fm.Error?(Cf(this.state===fm.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(fm.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){Cf(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=fm.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return this.isOpen()?[2,this.close(fm.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return Yi(this,void 0,void 0,function(){return Xi(this,function(n){switch(n.label){case 0:return Cf(this.isStarted(),"Only started streams should be closed."),Cf(e===fm.Error||lm(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==fm.Error?this.backoff.reset():t&&t.code===Tf.RESOURCE_EXHAUSTED?(Af(t.toString()),Af("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Tf.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;Cf(this.state===fm.Initial,"Must be in initial state to auth"),this.state=fm.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new kf(Tf.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;Cf(this.state===fm.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return Cf(t.state===fm.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=fm.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;Cf(this.state===fm.Error,"Should only perform backoff when in Error state"),this.state=fm.Backoff,this.backoff.backoffAndRun(function(){return Yi(e,void 0,void 0,function(){return Xi(this,function(e){return Cf(this.state===fm.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=fm.Initial,this.start(),Cf(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return Cf(this.isStarted(),"Can't handle server close on non-started stream"),bf(gm,"close with error: "+e),this.stream=null,this.close(fm.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(bf(gm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),wm=function(e){function t(t,n,i,r,o){var a=e.call(this,t,id.ListenStreamConnectionBackoff,id.ListenStreamIdle,n,i,o)||this;return a.serializer=r,a}return Ki(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Am),_m=function(e){function t(t,n,i,r,o){var a=e.call(this,t,id.WriteStreamConnectionBackoff,id.WriteStreamIdle,n,i,o)||this;return a.serializer=r,a.handshakeComplete_=!1,a}return Ki(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(Cf(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return Cf(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){Cf(this.isOpen(),"Writing handshake requires an opened stream"),Cf(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;Cf(this.isOpen(),"Writing mutations requires an opened stream"),Cf(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Cf(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(Am),Cm=function(){function e(e,t,n,i){this.queue=e,this.connection=t,this.credentials=n,this.serializer=i}return e.prototype.newPersistentWriteStream=function(e){return new _m(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new wm(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var i=$d();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);i=i.insert(n.key,n)});var r=[];return e.forEach(function(e){var t=i.get(e);Cf(!!t,"Missing entity in write response for "+e),r.push(t)}),r})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(i){return n.connection.invokeRPC(e,t,i)}).catch(function(e){throw e.code===Tf.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(i){return n.connection.invokeStreamingRPC(e,t,i)}).catch(function(e){throw e.code===Tf.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),Sm=function(){function e(e){this.datastore=e,this.readVersions=jd(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(e){var t;if(e instanceof bp)t=e.version;else{if(!(e instanceof Ap))throw _f("Document in a transaction was a "+e.constructor.name);t=Id.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new kf(Tf.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.lookup=function(e){var t=this;if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new kf(Tf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return this.datastore.lookup(e).then(function(e){return e.forEach(function(e){e instanceof Ap||e instanceof bp?t.recordVersion(e):_f("Document in a transaction was a "+e.constructor.name)}),e})},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?Vg.updateTime(t):Vg.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.isEqual(Id.forDeletedDoc()))throw new kf(Tf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return t?Vg.updateTime(t):Vg.exists(!0)},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}},e.prototype.delete=function(e){this.write([new zg(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,Id.forDeletedDoc())},e.prototype.commit=function(){var e=this;if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;var t=this.readVersions;if(this.mutations.forEach(function(e){t=t.remove(e.key)}),!t.isEmpty())throw new kf(Tf.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return this.datastore.commit(this.mutations).then(function(){e.committed=!0})},e.prototype.ensureCommitNotCalled=function(){Cf(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();(vm=mm||(mm={}))[vm.Unknown=0]="Unknown",vm[vm.Online=1]="Online",vm[vm.Offline=2]="Offline",(bm=ym||(ym={}))[bm.RemoteStore=0]="RemoteStore",bm[bm.SharedClientState=1]="SharedClientState";var Em,Tm,km=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=mm.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(mm.Unknown),Cf(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(id.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,Cf(e.state===mm.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(mm.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===mm.Online?(this.setAndBroadcast(mm.Unknown),Cf(0===this.watchStreamFailures,"watchStreamFailures must be 0"),Cf(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(mm.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===mm.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Af(t),this.shouldWarnClientIsOffline=!1):bf("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function Im(e){switch(e){case Tf.OK:return _f("Treated status OK as error");case Tf.CANCELLED:case Tf.UNKNOWN:case Tf.DEADLINE_EXCEEDED:case Tf.RESOURCE_EXHAUSTED:case Tf.INTERNAL:case Tf.UNAVAILABLE:case Tf.UNAUTHENTICATED:return!1;case Tf.INVALID_ARGUMENT:case Tf.NOT_FOUND:case Tf.ALREADY_EXISTS:case Tf.PERMISSION_DENIED:case Tf.FAILED_PRECONDITION:case Tf.ABORTED:case Tf.OUT_OF_RANGE:case Tf.UNIMPLEMENTED:case Tf.DATA_LOSS:return!0;default:return _f("Unknown status code: "+e)}}function xm(e){if(void 0===e)return Af("GRPC error has no .code"),Tf.UNKNOWN;switch(e){case Em.OK:return Tf.OK;case Em.CANCELLED:return Tf.CANCELLED;case Em.UNKNOWN:return Tf.UNKNOWN;case Em.DEADLINE_EXCEEDED:return Tf.DEADLINE_EXCEEDED;case Em.RESOURCE_EXHAUSTED:return Tf.RESOURCE_EXHAUSTED;case Em.INTERNAL:return Tf.INTERNAL;case Em.UNAVAILABLE:return Tf.UNAVAILABLE;case Em.UNAUTHENTICATED:return Tf.UNAUTHENTICATED;case Em.INVALID_ARGUMENT:return Tf.INVALID_ARGUMENT;case Em.NOT_FOUND:return Tf.NOT_FOUND;case Em.ALREADY_EXISTS:return Tf.ALREADY_EXISTS;case Em.PERMISSION_DENIED:return Tf.PERMISSION_DENIED;case Em.FAILED_PRECONDITION:return Tf.FAILED_PRECONDITION;case Em.ABORTED:return Tf.ABORTED;case Em.OUT_OF_RANGE:return Tf.OUT_OF_RANGE;case Em.UNIMPLEMENTED:return Tf.UNIMPLEMENTED;case Em.DATA_LOSS:return Tf.DATA_LOSS;default:return _f("Unknown status code: "+e)}}(Tm=Em||(Em={}))[Tm.OK=0]="OK",Tm[Tm.CANCELLED=1]="CANCELLED",Tm[Tm.UNKNOWN=2]="UNKNOWN",Tm[Tm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tm[Tm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tm[Tm.NOT_FOUND=5]="NOT_FOUND",Tm[Tm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tm[Tm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tm[Tm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tm[Tm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tm[Tm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tm[Tm.ABORTED=10]="ABORTED",Tm[Tm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tm[Tm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tm[Tm.INTERNAL=13]="INTERNAL",Tm[Tm.UNAVAILABLE=14]="UNAVAILABLE",Tm[Tm.DATA_LOSS=15]="DATA_LOSS";var Dm,Nm,Pm,Om,Mm=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||gd.comparator(t.key,n.key)}:function(e,t){return gd.comparator(e.key,t.key)},this.keyedMap=Ud(),this.sortedSet=new xd(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();n.hasNext();){var r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i},e}();(Nm=Dm||(Dm={}))[Nm.Added=0]="Added",Nm[Nm.Removed=1]="Removed",Nm[Nm.Modified=2]="Modified",Nm[Nm.Metadata=3]="Metadata",(Om=Pm||(Pm={}))[Om.Local=0]="Local",Om[Om.Synced=1]="Synced";var Rm,$m,Lm=function(){function e(){this.changeMap=new xd(gd.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Dm.Added&&n.type===Dm.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Dm.Metadata&&n.type!==Dm.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Dm.Modified&&n.type===Dm.Modified?this.changeMap=this.changeMap.insert(t,{type:Dm.Modified,doc:e.doc}):e.type===Dm.Modified&&n.type===Dm.Added?this.changeMap=this.changeMap.insert(t,{type:Dm.Added,doc:e.doc}):e.type===Dm.Removed&&n.type===Dm.Added?this.changeMap=this.changeMap.remove(t):e.type===Dm.Removed&&n.type===Dm.Modified?this.changeMap=this.changeMap.insert(t,{type:Dm.Removed,doc:n.doc}):e.type===Dm.Added&&n.type===Dm.Removed?this.changeMap=this.changeMap.insert(t,{type:Dm.Modified,doc:e.doc}):_f("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Fm=function(){function e(e,t,n,i,r,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,i,r){var o=[];return n.forEach(function(e){o.push({type:Dm.Added,doc:e})}),new e(t,n,Mm.emptySet(n),o,i,r,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0},e}(),Um=function(){function e(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var i,r=((i={})[t]=Bm.createSynthesizedTargetChangeForCurrentChange(t,n),i);return new e(Id.MIN,r,Wd(),$d(),qd())},e}(),Bm=function(){function e(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Ef(),n,qd(),qd(),qd())},e}(),jm=function(e,t,n,i){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=i},Vm=function(e,t){this.targetId=e,this.existenceFilter=t};($m=Rm||(Rm={}))[$m.NoChange=0]="NoChange",$m[$m.Added=1]="Added",$m[$m.Removed=2]="Removed",$m[$m.Current=3]="Current",$m[$m.Reset=4]="Reset";var qm=function(e,t,n,i){void 0===n&&(n=Ef()),void 0===i&&(i=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i},Hm=function(){function e(){this.pendingResponses=0,this.documentChanges=zm(),this._resumeToken=Ef(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qd(),t=qd(),n=qd();return this.documentChanges.forEach(function(i,r){switch(r){case Dm.Added:e=e.add(i);break;case Dm.Modified:t=t.add(i);break;case Dm.Removed:n=n.add(i);break;default:_f("Encountered invalid change type: "+r)}}),new Bm(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=zm()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Wm=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=$d(),this.pendingDocumentTargetMapping=Gm(),this.pendingTargetResets=new Od(Jf)}return e.prototype.handleDocumentChange=function(e){var t,n,i,r;try{for(var o=Ji(e.updatedTargetIds),a=o.next();!a.done;a=o.next()){var s=a.value;e.newDoc instanceof bp?this.addDocumentToTarget(s,e.newDoc):e.newDoc instanceof Ap&&this.removeDocumentFromTarget(s,e.key,e.newDoc)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}try{for(var u=Ji(e.removedTargetIds),c=u.next();!c.done;c=u.next())s=c.value,this.removeDocumentFromTarget(s,e.key,e.newDoc)}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var i=t.ensureTargetState(n);switch(e.state){case Rm.NoChange:t.isActiveTarget(n)&&i.updateResumeToken(e.resumeToken);break;case Rm.Added:i.recordTargetResponse(),i.isPending||i.clearPendingChanges(),i.updateResumeToken(e.resumeToken);break;case Rm.Removed:i.recordTargetResponse(),i.isPending||t.removeTarget(n),Cf(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Rm.Current:t.isActiveTarget(n)&&(i.markCurrent(),i.updateResumeToken(e.resumeToken));break;case Rm.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),i.updateResumeToken(e.resumeToken));break;default:_f("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):Nf(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,i=this.queryDataForActiveTarget(t);if(i){var r=i.query;if(r.isDocumentQuery())if(0===n){var o=new gd(r.path);this.removeDocumentFromTarget(t,o,new Ap(o,Id.forDeletedDoc()))}else Cf(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};Nf(this.targetStates,function(i,r){var o=t.queryDataForActiveTarget(i);if(o){if(r.current&&o.query.isDocumentQuery()){var a=new gd(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(i,a)||t.removeDocumentFromTarget(i,a,new Ap(a,e))}r.hasPendingChanges&&(n[i]=r.toTargetChange(),r.clearPendingChanges())}});var i=qd();this.pendingDocumentTargetMapping.forEach(function(e,n){var r=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===zp.LimboResolution||(r=!1)}),r&&(i=i.add(e))});var r=new Um(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,i);return this.pendingDocumentUpdates=$d(),this.pendingDocumentTargetMapping=Gm(),this.pendingTargetResets=new Od(Jf),r},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Dm.Modified:Dm.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var i=this.ensureTargetState(e);this.targetContainsDocument(e,t)?i.addDocumentChange(t,Dm.Removed):i.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Hm),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Od(Jf),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;Cf(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Hm,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Gm(){return new xd(gd.comparator)}function zm(){return new xd(gd.comparator)}var Km="RemoteStore",Qm=function(){function e(e,t,n,i,r){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=r,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return Yi(o,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(bf(Km,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new km(n,i),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(mm.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(mm.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(bf(Km,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return bf(Km,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(mm.Unknown),[2]}})})},e.prototype.listen=function(e){Cf(!xf(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){Cf(xf(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),Of(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(mm.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){Cf(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Wm(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!Of(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return Yi(this,void 0,void 0,function(){var e=this;return Xi(this,function(t){return Nf(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return void 0===e&&Cf(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(mm.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return Yi(this,void 0,void 0,function(){var n;return Xi(this,function(i){switch(i.label){case 0:return this.onlineStateTracker.set(mm.Online),e instanceof qm&&e.state===Rm.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof jm?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Vm?this.watchChangeAggregator.handleExistenceFilter(e):(Cf(e instanceof qm,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Id.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=i.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;Cf(!e.isEqual(Id.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return Nf(n.targetChanges,function(n,i){if(0<i.resumeToken.length){var r=t.listenTargets[n];r&&(t.listenTargets[n]=r.copy({resumeToken:i.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:Ef()}),t.sendUnwatchRequest(e);var i=new eg(n.query,e,zp.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(i)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;Cf(!!e.cause,"Handling target error without a cause");var n=e.cause,i=Promise.resolve();return e.targetIds.forEach(function(e){i=i.then(function(){return Yi(t,void 0,void 0,function(){return Xi(this,function(t){return xf(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),i},e.prototype.fillWritePipeline=function(){return Yi(this,void 0,void 0,function(){var e,t;return Xi(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){Cf(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},e.prototype.startWriteStream=function(){Cf(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){var t,n;try{for(var i=Ji(e.writePipeline),r=i.next();!r.done;r=i.next()){var o=r.value;e.writeStream.writeMutations(o.mutations)}}catch(n){t={error:n}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}).catch(dg)},e.prototype.onMutationResult=function(e,t){var n=this;Cf(0<this.writePipeline.length,"Got result for empty write pipeline");var i=this.writePipeline.shift(),r=Qd.from(i,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(r).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return Yi(this,void 0,void 0,function(){var t=this;return Xi(this,function(n){return void 0===e&&Cf(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},e.prototype.handleHandshakeError=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return Im(e.code)?(bf(Km,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Ef(),[2,this.localStore.setLastStreamToken(Ef()).catch(dg)]):[2]})})},e.prototype.handleWriteError=function(e){return Yi(this,void 0,void 0,function(){var t,n=this;return Xi(this,function(i){return Im(r=e.code)&&r!==Tf.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2];var r})})},e.prototype.createTransaction=function(){return new Sm(this.datastore)},e.prototype.restartNetwork=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(mm.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(bf(Km,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(mm.Unknown),t.label=4;case 4:return[2]}})})},e}(),Ym=function(){function e(e,t){if(Rf("GeoPoint",arguments,2),Ff("GeoPoint","number",1,e),Ff("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new kf(Tf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new kf(Tf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Jf(this._lat,e._lat)||Jf(this._long,e._long)},e}(),Xm=function(){function e(e,t,n,i,r,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){var e,t;if(null===this.memoizedOrderBy){var n=this.getInequalityFilterField(),i=this.getFirstOrderByField();if(null!==n&&null===i)n.isKeyField()?this.memoizedOrderBy=[uv]:this.memoizedOrderBy=[new sv(n),uv];else{Cf(null===n||null!==i&&n.isEqual(i),"First orderBy should match inequality field.");var r=!(this.memoizedOrderBy=[]);try{for(var o=Ji(this.explicitOrderBy),a=o.next();!a.done;a=o.next()){var s=a.value;this.memoizedOrderBy.push(s),s.field.isKeyField()&&(r=!0)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}if(!r){var u=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ov.ASCENDING;this.memoizedOrderBy.push(u===ov.ASCENDING?uv:cv)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){Cf(null==this.getInequalityFilterField()||!(t instanceof Zm)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Cf(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){Cf(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){var e,t,n,i;if(null===this.memoizedCanonicalId){var r=this.path.canonicalString();this.isCollectionGroupQuery()&&(r+="|cg:"+this.collectionGroup),r+="|f:";try{for(var o=Ji(this.filters),a=o.next();!a.done;a=o.next())r+=a.value.canonicalId(),r+=","}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}r+="|ob:";try{for(var s=Ji(this.orderBy),u=s.next();!u.done;u=s.next())r+=u.value.canonicalId(),r+=","}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}lm(this.limit)||(r+="|l:",r+=this.limit),this.startAt&&(r+="|lb:",r+=this.startAt.canonicalId()),this.endAt&&(r+="|ub:",r+=this.endAt.canonicalId()),this.memoizedCanonicalId=r}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),lm(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.docComparator=function(e,t){var n,i,r=!1;try{for(var o=Ji(this.orderBy),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.compare(e,t);if(0!==u)return u;r=r||s.field.isKeyField()}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return Cf(r,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!lm(this.limit)},e.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){var e,t;try{for(var n=Ji(this.filters),i=n.next();!i.done;i=n.next()){var r=i.value;if(r instanceof Zm&&r.isInequality())return r.field}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e.prototype.findFilterOperator=function(e){var t,n;try{for(var i=Ji(this.filters),r=i.next();!r.done;r=i.next()){var o=r.value;if(o instanceof Zm&&0<=e.indexOf(o.op))return o.op}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},e.prototype.isDocumentQuery=function(){return gd.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):gd.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){var t,n;try{for(var i=Ji(this.explicitOrderBy),r=i.next();!r.done;r=i.next()){var o=r.value;if(!o.field.isKeyField()&&null===e.field(o.field))return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0},e.prototype.matchesFilters=function(e){var t,n;try{for(var i=Ji(this.filters),r=i.next();!r.done;r=i.next())if(!r.value.matches(e))return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){Cf(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Jm=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return _f("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),Zm=function(e){function t(t,n,i){var r=e.call(this)||this;return r.field=t,r.op=n,r.value=i,r}return Ki(t,e),t.create=function(e,n,i){if(e.isKeyField())return n===Jm.IN?(Cf(i instanceof Ug,"Comparing on key with IN, but filter value not an ArrayValue"),Cf(i.internalValue.every(function(e){return e instanceof $g}),"Comparing on key with IN, but an array value was not a RefValue"),new tv(e,i)):(Cf(i instanceof $g,"Comparing on key, but filter value not a RefValue"),Cf(n!==Jm.ARRAY_CONTAINS&&n!==Jm.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new ev(e,n,i));if(i.isEqual(Sg.INSTANCE)){if(n!==Jm.EQUAL)throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new t(e,n,i)}if(i.isEqual(Ng.NAN)){if(n!==Jm.EQUAL)throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new t(e,n,i)}return n===Jm.ARRAY_CONTAINS?new nv(e,i):n===Jm.IN?(Cf(i instanceof Ug,"IN filter has invalid value: "+i.toString()),new iv(e,i)):n===Jm.ARRAY_CONTAINS_ANY?(Cf(i instanceof Ug,"ARRAY_CONTAINS_ANY filter has invalid value: "+i.toString()),new rv(e,i)):new t(e,n,i)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case Jm.LESS_THAN:return e<0;case Jm.LESS_THAN_OR_EQUAL:return e<=0;case Jm.EQUAL:return 0===e;case Jm.GREATER_THAN:return 0<e;case Jm.GREATER_THAN_OR_EQUAL:return 0<=e;default:return _f("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return 0<=[Jm.LESS_THAN,Jm.LESS_THAN_OR_EQUAL,Jm.GREATER_THAN,Jm.GREATER_THAN_OR_EQUAL].indexOf(this.op)},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(function(){}),ev=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.matches=function(e){var t=this.value,n=gd.comparator(e.key,t.key);return this.matchesComparison(n)},t}(Zm),tv=function(e){function t(t,n){var i=e.call(this,t,Jm.IN,n)||this;return i.value=n,i}return Ki(t,e),t.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(Zm),nv=function(e){function t(t,n){return e.call(this,t,Jm.ARRAY_CONTAINS,n)||this}return Ki(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Ug&&t.contains(this.value)},t}(Zm),iv=function(e){function t(t,n){var i=e.call(this,t,Jm.IN,n)||this;return i.value=n,i}return Ki(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(Zm),rv=function(e){function t(t,n){var i=e.call(this,t,Jm.ARRAY_CONTAINS_ANY,n)||this;return i.value=n,i}return Ki(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Ug&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(Zm),ov=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),av=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){var e,t,n=this.before?"b:":"a:";try{for(var i=Ji(this.position),r=i.next();!r.done;r=i.next())n+=r.value.toString()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.sortsBeforeDocument=function(e,t){Cf(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=e[i],o=this.position[i];if(r.field.isKeyField())Cf(o instanceof $g,"Bound has a non-key value where the key path is being used."),n=gd.comparator(o.key,t.key);else{var a=t.field(r.field);Cf(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(r.dir===ov.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],i=e.position[t];if(!n.isEqual(i))return!1}return!0},e}(),sv=function(){function e(e,t){this.field=e,void 0===t&&(t=ov.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?bp.compareByKey(e,t):bp.compareByField(this.field,e,t);switch(this.dir){case ov.ASCENDING:return n;case ov.DESCENDING:return-1*n;default:return _f("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),uv=new sv(pd.keyField(),ov.ASCENDING),cv=new sv(pd.keyField(),ov.DESCENDING),lv=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Mg(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),hv=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){var t,n,i=pv(e),r=function(e){i.find(function(t){return t.isEqual(e)})||i.push(e)};try{for(var o=Ji(this.elements),a=o.next();!a.done;a=o.next())r(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return new Ug(i)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Zf(t.elements,this.elements)},e}(),fv=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){var t,n,i=pv(e),r=function(e){i=i.filter(function(t){return!t.isEqual(e)})};try{for(var o=Ji(this.elements),a=o.next();!a.done;a=o.next())r(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return new Ug(i)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Zf(t.elements,this.elements)},e}(),dv=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Dg&&this.operand instanceof Dg){var i=n.internalValue+this.operand.internalValue;return new Dg(i)}return i=n.internalValue+this.operand.internalValue,new Ng(i)},e.prototype.applyToRemoteDocument=function(e,t){return Cf(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Tg?e:new Dg(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function pv(e){return e instanceof Ug?e.internalValue.slice():[]}var gv,mv,vv=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),yv=((gv={})[ov.ASCENDING.name]="ASCENDING",gv[ov.DESCENDING.name]="DESCENDING",gv),bv=((mv={})[Jm.LESS_THAN.name]="LESS_THAN",mv[Jm.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",mv[Jm.GREATER_THAN.name]="GREATER_THAN",mv[Jm.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",mv[Jm.EQUAL.name]="EQUAL",mv[Jm.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",mv[Jm.IN.name]="IN",mv[Jm.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",mv),Av=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wv(e,t){Cf(!lm(e),t+" is missing")}function _v(e){return"number"==typeof e?e:"string"==typeof e?Number(e):_f("can't parse "+e)}var Cv=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Tf.UNKNOWN:xm(e.code);return new kf(t,e.message||"")},e.prototype.toInt32Value=function(e){return lm(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return lm(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);Cf(!!e,"Cannot deserialize null or undefined timestamp.");var t=_v(e.seconds||"0"),n=e.nanos||0;return new kd(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=Av.exec(e);if(Cf(!!n,"invalid timestamp: "+e),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}var r=new Date(e),o=Math.floor(r.getTime()/1e3);return new kd(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(Cf(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),od.fromBase64String(e)):(Cf(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),od.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return Cf(!!e,"Trying to deserialize version that isn't set"),Id.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=fd.fromString(e);return Cf(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return Cf(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),Cf(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new gd(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?fd.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new fd(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new fd(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return Cf(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Sg)return{nullValue:"NULL_VALUE"};if(e instanceof Eg)return{booleanValue:e.value()};if(e instanceof Dg)return{integerValue:""+e.value()};if(e instanceof Ng){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Pg?{stringValue:e.value()}:e instanceof Fg?{mapValue:this.toMapValue(e)}:e instanceof Ug?{arrayValue:this.toArrayValue(e)}:e instanceof Og?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Lg?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Rg?{bytesValue:this.toBytes(e.value())}:e instanceof $g?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:_f("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Sg.INSTANCE;if("booleanValue"in e)return Eg.of(e.booleanValue);if("integerValue"in e)return new Dg(_v(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ng.NAN;if("Infinity"===e.doubleValue)return Ng.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ng.NEGATIVE_INFINITY}return new Ng(e.doubleValue)}if("stringValue"in e)return new Pg(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){wv(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Ug(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return wv(e.timestampValue,"timestampValue"),new Og(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){wv(e.geoPointValue,"geoPointValue");var i=e.geoPointValue.latitude||0,r=e.geoPointValue.longitude||0;return new Lg(new Ym(i,r))}if("bytesValue"in e){wv(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Rg(o)}if("referenceValue"in e){wv(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new ud(a.get(1),a.get(3)),u=new gd(this.extractLocalPathFromResourceName(a));return new $g(s,u)}return _f("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return Cf(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new bp(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,i){n[e]=t.toValue(i)}),n},e.prototype.fromFields=function(e){var t=this,n=e,i=Fg.EMPTY;return Pf(n,function(e,n){i=i.set(new pd([e]),t.fromValue(n))}),i},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){Cf(!!e.found,"Tried to deserialize a found document from a missing document."),wv(e.found.name,"doc.found.name"),wv(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),i=this.fromFields(e.found.fields||{});return new bp(t,n,i,{},e.found)},e.prototype.fromMissing=function(e){Cf(!!e.missing,"Tried to deserialize a missing document from a found document."),Cf(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Ap(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):_f("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Rm.Added:return"ADD";case Rm.Current:return"CURRENT";case Rm.NoChange:return"NO_CHANGE";case Rm.Removed:return"REMOVE";case Rm.Reset:return"RESET";default:return _f("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Vm)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof jm){if(e.newDoc instanceof bp){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Ap)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof qm){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return Em.OK;switch(e){case Tf.OK:return Em.OK;case Tf.CANCELLED:return Em.CANCELLED;case Tf.UNKNOWN:return Em.UNKNOWN;case Tf.DEADLINE_EXCEEDED:return Em.DEADLINE_EXCEEDED;case Tf.RESOURCE_EXHAUSTED:return Em.RESOURCE_EXHAUSTED;case Tf.INTERNAL:return Em.INTERNAL;case Tf.UNAVAILABLE:return Em.UNAVAILABLE;case Tf.UNAUTHENTICATED:return Em.UNAUTHENTICATED;case Tf.INVALID_ARGUMENT:return Em.INVALID_ARGUMENT;case Tf.NOT_FOUND:return Em.NOT_FOUND;case Tf.ALREADY_EXISTS:return Em.ALREADY_EXISTS;case Tf.PERMISSION_DENIED:return Em.PERMISSION_DENIED;case Tf.FAILED_PRECONDITION:return Em.FAILED_PRECONDITION;case Tf.ABORTED:return Em.ABORTED;case Tf.OUT_OF_RANGE:return Em.OUT_OF_RANGE;case Tf.UNIMPLEMENTED:return Em.UNIMPLEMENTED;case Tf.DATA_LOSS:return Em.DATA_LOSS;default:return _f("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return _f("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t;if("targetChange"in e){wv(e.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=e.targetChange.resumeToken||this.emptyByteString(),o=e.targetChange.cause,a=o&&this.fromRpcStatus(o);t=new qm(n,i,r,a||null)}else if("documentChange"in e){wv(e.documentChange,"documentChange"),wv(e.documentChange.document,"documentChange.name"),wv(e.documentChange.document.name,"documentChange.document.name"),wv(e.documentChange.document.updateTime,"documentChange.document.updateTime");var s=e.documentChange,u=this.fromName(s.document.name),c=this.fromVersion(s.document.updateTime),l=this.fromFields(s.document.fields||{}),h=new bp(u,c,l,{},s.document),f=s.targetIds||[],d=s.removedTargetIds||[];t=new jm(f,d,h.key,h)}else if("documentDelete"in e){wv(e.documentDelete,"documentDelete"),wv(e.documentDelete.document,"documentDelete.document");var p=e.documentDelete;u=this.fromName(p.document),c=p.readTime?this.fromVersion(p.readTime):Id.forDeletedDoc(),h=new Ap(u,c),d=p.removedTargetIds||[],t=new jm([],d,h.key,h)}else if("documentRemove"in e){wv(e.documentRemove,"documentRemove"),wv(e.documentRemove.document,"documentRemove");var g=e.documentRemove;u=this.fromName(g.document),d=g.removedTargetIds||[],t=new jm([],d,u,null)}else{if(!("filter"in e))return _f("Unknown change type "+JSON.stringify(e));wv(e.filter,"filter"),wv(e.filter.targetId,"filter.targetId");var m=e.filter,v=m.count||0,y=new vv(v),b=m.targetId;t=new Vm(b,y)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Rm.NoChange:"ADD"===e?Rm.Added:"REMOVE"===e?Rm.Removed:"CURRENT"===e?Rm.Current:"RESET"===e?Rm.Reset:_f("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Id.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Id.MIN:t.readTime?this.fromVersion(t.readTime):Id.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Hg)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof zg)t={delete:this.toName(e.key)};else if(e instanceof Wg)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Gg))return _f("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Vg.NONE;if(e.update){wv(e.update.name,"name");var i=this.fromName(e.update.name),r=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Wg(i,r,o,n)}return new Hg(i,r,n)}if(e.delete)return i=this.fromName(e.delete),new zg(i,n);if(e.transform){i=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return Cf(!0===n.exists,'Transforms only support precondition "exists == true"'),new Gg(i,a)}return _f("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return Cf(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_f("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Vg.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Vg.exists(e.exists):Vg.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,i=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),r=null;return e.transformResults&&0<e.transformResults.length&&(r=e.transformResults.map(function(e){return n.fromValue(e)})),new function(e,t){this.version=e,this.transformResults=t}(i,r)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(Cf(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof lv)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hv)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof fv)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof dv)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw _f("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)Cf("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=lv.instance;else if("appendMissingElements"in e){var i=e.appendMissingElements.values||[];n=new hv(i.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e)i=e.removeAllFromArray.values||[],n=new fv(i.map(function(e){return t.fromValue(e)}));else if("increment"in e){var r=this.fromValue(e.increment);Cf(r instanceof Tg,"NUMERIC_ADD transform requires a NumberValue"),n=new dv(r)}else _f("Unknown transform proto: "+JSON.stringify(e));var o=pd.fromServerFormat(e.fieldPath);return new jg(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;Cf(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Xm.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(Cf(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Cf(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var i=this.toFilter(e.filters);i&&(t.structuredQuery.where=i);var r=this.toOrder(e.orderBy);r&&(t.structuredQuery.orderBy=r);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,r=null;if(0<i){Cf(1===i,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?r=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Xm(t,r,s,a,u,c,l)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case zp.Listen:return null;case zp.ExistenceFilterMismatch:return"existence-filter-mismatch";case zp.LimboResolution:return"limbo-document";default:return _f("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Zm?t.toUnaryOrFieldFilter(e):_f("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):_f("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,i=e.values.map(function(e){return t.fromValue(e)});return new av(i,n)},e.prototype.toDirection=function(e){return yv[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return ov.ASCENDING;case"DESCENDING":return ov.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return bv[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Jm.EQUAL;case"GREATER_THAN":return Jm.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Jm.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Jm.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Jm.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Jm.ARRAY_CONTAINS;case"IN":return Jm.IN;case"ARRAY_CONTAINS_ANY":return Jm.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return _f("Unspecified operator");default:return _f("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return pd.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new sv(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return Zm.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Jm.EQUAL){if(e.value.isEqual(Ng.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Sg.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Zm.create(t,Jm.EQUAL,Ng.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Zm.create(n,Jm.EQUAL,Sg.INSTANCE);case"OPERATOR_UNSPECIFIED":return _f("Unspecified filter");default:return _f("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return pd.fromServerFormat(e)});return Bg.fromArray(t)},e}(),Sv=function(){function e(e){this.syncEngine=e,this.queries=new _p(function(e){return e.canonicalId()}),this.onlineState=mm.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,i=this.queries.get(t);return i||(n=!0,i=new function(){this.listeners=[]},this.queries.set(t,i)),i.listeners.push(e),e.applyOnlineStateChange(this.onlineState),i.viewSnap&&e.onViewSnapshot(i.viewSnap),n?this.syncEngine.listen(t).then(function(e){return i.targetId=e}):Promise.resolve(i.targetId)},e.prototype.unlisten=function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r;return Xi(this,function(o){return t=e.query,n=!1,(i=this.queries.get(t))&&0<=(r=i.listeners.indexOf(e))&&(i.listeners.splice(r,1),n=0===i.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){var t,n,i,r;try{for(var o=Ji(e),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.query,c=this.queries.get(u);if(c){try{for(var l=Ji(c.listeners),h=l.next();!h.done;h=l.next())h.value.onViewSnapshot(s)}catch(e){i={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}c.viewSnap=s}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.onWatchError=function(e,t){var n,i,r=this.queries.get(e);if(r)try{for(var o=Ji(r.listeners),a=o.next();!a.done;a=o.next())a.value.onError(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){var i,r;try{for(var o=Ji(n.listeners),a=o.next();!a.done;a=o.next())a.value.applyOnlineStateChange(e)}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}})},e}(),Ev=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=mm.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){var t,n;if(Cf(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){var i=[];try{for(var r=Ji(e.docChanges),o=r.next();!o.done;o=r.next()){var a=o.value;a.type!==Dm.Metadata&&i.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e=new Fm(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(Cf(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==mm.Offline;return this.options.waitForSyncWhenOnline&&n?(Cf(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===mm.Offline},e.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){Cf(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Fm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Tv=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){var i,r,o=qd(),a=qd();try{for(var s=Ji(n.docChanges),u=s.next();!u.done;u=s.next()){var c=u.value;switch(c.type){case Dm.Added:o=o.add(c.doc.key);break;case Dm.Removed:a=a.add(c.doc.key)}}}catch(t){i={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return new e(t,o,a)},e}(),kv=function(e){this.key=e},Iv=function(e){this.key=e},xv=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qd(),this.mutatedKeys=qd(),this.documentSet=new Mm(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,i=t?t.changeSet:new Lm,r=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=r,s=!1,u=this.query.hasLimit()&&r.size===this.query.limit?r.last():null;if(e.inorderTraversal(function(e,t){var c=r.get(e),l=t instanceof bp?t:null;l&&(Cf(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(i.track({type:Dm.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(c,l)||(i.track({type:Dm.Modified,doc:l}),d=!0,u&&0<n.query.docComparator(l,u)&&(s=!0)):!c&&l?(i.track({type:Dm.Added,doc:l}),d=!0):c&&!l&&(i.track({type:Dm.Removed,doc:c}),d=!0,u&&(s=!0)),d&&(o=l?(a=a.add(l),f?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),i.track({type:Dm.Removed,doc:c})}return Cf(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:i,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var i=this;Cf(!e.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return n=e.type,r=t.type,(o=function(e){switch(e){case Dm.Added:return 1;case Dm.Modified:case Dm.Metadata:return 2;case Dm.Removed:return 0;default:return _f("Unknown ChangeType: "+e)}})(n)-o(r)||i.query.docComparator(e.doc,t.doc);var n,r,o}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Pm.Synced:Pm.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Fm(this.query,e.documentSet,r,o,e.mutatedKeys,s===Pm.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===mm.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Lm,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return Cf(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qd(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new Iv(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new kv(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=qd();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Fm.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Pm.Local)},e}(),Dv="SyncEngine",Nv=function(){function e(e,t,n,i){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=i,this.syncEngineListener=null,this.queryViewsByQuery=new _p(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new xd(gd.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Qg,this.mutationUserCallbacks={},this.limboTargetIdGenerator=rp.forSyncEngine(),this.isPrimary=void 0,this.onlineState=mm.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){Cf(null!==e,"SyncEngine listener cannot be null"),Cf(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r,o;return Xi(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(i=this.queryViewsByQuery.get(e))?(t=i.targetId,this.sharedClientState.addLocalQueryTarget(t),n=i.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return r=a.sent(),o=this.sharedClientState.addLocalQueryTarget(r.targetId),t=r.targetId,[4,this.initializeViewAndComputeSnapshot(r,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(r),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){var n=this,i=e.query;return this.localStore.executeQuery(i).then(function(r){return n.localStore.remoteDocumentKeys(e.targetId).then(function(o){var a=new xv(i,o),s=a.computeDocChanges(r),u=Bm.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&n.onlineState!==mm.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);Cf(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),Cf(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new function(e,t,n){this.query=e,this.targetId=t,this.view=n}(i,e.targetId,a);return n.queryViewsByQuery.set(i,l),n.queryViewsByTarget[e.targetId]=l,c.snapshot})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){var t=this;return this.localStore.executeQuery(e.query).then(function(n){return t.localStore.remoteDocumentKeys(e.targetId).then(function(i){return Yi(t,void 0,void 0,function(){var t;return Xi(this,function(r){return t=e.view.synchronizeWithPersistedState(n,i),this.isPrimary&&this.updateTrackedLimbos(e.targetId,t.limboChanges),[2,t]})})})})},e.prototype.unlisten=function(e){return Yi(this,void 0,void 0,function(){var t,n=this;return Xi(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),Cf(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(dg)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then(function(e){return n.sharedClientState.addPendingMutation(e.batchId),n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(e,t){var n=this;void 0===t&&(t=5),Cf(0<=t,"Got negative number of retries for transaction.");var i=this.remoteStore.createTransaction();return function(){try{var t=e(i);return!lm(t)&&t.catch&&t.then?t.catch(function(e){return Promise.reject(n.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(r){return i.commit().then(function(){return r}).catch(function(i){return 0===t?Promise.reject(i):n.runTransaction(e,t-1)})})},e.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then(function(n){return Pf(e.targetChanges,function(e,n){var i=t.limboResolutionsByTarget[Number(e)];i&&(Cf(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<n.addedDocuments.size?i.receivedDocument=!0:0<n.modifiedDocuments.size?Cf(i.receivedDocument,"Received change for limbo target document without add."):0<n.removedDocuments.size&&(Cf(i.receivedDocument,"Received remove for limbo target document without add."),i.receivedDocument=!1))}),t.emitNewSnapsAndNotifyLocalStore(n,e)}).catch(dg)},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===ym.RemoteStore||!this.isPrimary&&t===ym.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(t,i){var r=i.view.applyOnlineStateChange(e);Cf(0===r.limboChanges.length,"OnlineState should not affect limbo documents."),r.snapshot&&n.push(r.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o,a,s,u=this;return Xi(this,function(c){switch(c.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(i=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(i),delete this.limboResolutionsByTarget[e],r=(r=new xd(gd.comparator)).insert(i,new Ap(i,Id.forDeletedDoc())),o=qd().add(i),a=new Um(Id.MIN,{},new Od(Jf),r,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return Cf(!!(s=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch(dg)];case 2:c.sent(),this.syncEngineListener.onWatchError(s.query,t),c.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return Yi(this,void 0,void 0,function(){var i;return Xi(this,function(r){switch(r.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(i=r.sent())?(bf(Dv,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):_f("Unknown batchState: "+t),r.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(i)];case 5:return r.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){var t=this;this.assertSubscribed("applySuccessfulWrite()");var n=e.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(e).then(function(e){return t.sharedClientState.updateMutationState(n,"acknowledged"),t.emitNewSnapsAndNotifyLocalStore(e)}).catch(dg)},e.prototype.rejectFailedWrite=function(e,t){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then(function(i){return n.sharedClientState.updateMutationState(e,"rejected",t),n.emitNewSnapsAndNotifyLocalStore(i)}).catch(dg)},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new xd(Jf)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var i=n.get(e);i&&(Cf(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?i.reject(t):i.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){var n,i;try{for(var r=Ji(t),o=r.next();!o.done;o=r.next()){var a=o.value;a instanceof kv?(this.limboDocumentRefs.addReference(a.key,e),this.trackLimboChange(a)):a instanceof Iv?(bf(Dv,"Document no longer in limbo: "+a.key),this.limboDocumentRefs.removeReference(a.key,e),this.limboDocumentRefs.containsKey(a.key)||this.removeLimboTarget(a.key)):_f("Unknown limbo change: "+JSON.stringify(a))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){bf(Dv,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),i=Xm.atPath(t.path);this.limboResolutionsByTarget[n]=new function(e){this.key=e}(t),this.remoteStore.listen(new eg(i,n,zp.LimboResolution,cd.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o=this;return Xi(this,function(a){switch(a.label){case 0:return n=[],i=[],r=[],this.queryViewsByQuery.forEach(function(a,s){r.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var r=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,r);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=Tv.fromSnapshot(s.targetId,a.snapshot);i.push(u)}}))}),[4,Promise.all(r)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(i)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){Cf(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return Yi(this,void 0,void 0,function(){var t,n;return Xi(this,function(i){switch(i.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=i.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:i.sent(),i.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return i.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r,o,a,s,u,c,l=this;return Xi(this,function(h){switch(h.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return h.sent(),i=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(i.toArray())];case 2:r=h.sent();try{for(o=Ji(r),a=o.next();!a.done;a=o.next())s=a.value,this.remoteStore.listen(s)}catch(h){t={error:h}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,u=[],c=Promise.resolve(),Nf(this.queryViewsByTarget,function(e,t){l.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then(function(){return l.unlisten(t.query)}),l.remoteStore.unlisten(t.targetId)}),[4,c]);case 4:return h.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(u)];case 5:return h.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:h.sent(),h.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;Nf(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new xd(gd.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){var t,n,i=this,r=Promise.resolve(),o=[],a=[],s=function(e){r=r.then(function(){return Yi(i,void 0,void 0,function(){var t,n,i,r;return Xi(this,function(s){switch(s.label){case 0:return(n=this.queryViewsByTarget[e])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return t=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(i=s.sent()).snapshot&&a.push(i.snapshot),[3,8];case 4:return Cf(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(e)];case 5:return Cf(!!(r=s.sent()),"Query data for target "+e+" not found"),[4,this.localStore.allocateQuery(r)];case 6:return t=s.sent(),[4,this.initializeViewAndComputeSnapshot(t,!1)];case 7:s.sent(),s.label=8;case 8:return o.push(t),[2]}})})})};try{for(var u=Ji(e),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return r.then(function(){return i.syncEngineListener.onWatchChange(a),o})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return Yi(this,void 0,void 0,function(){var i,r=this;return Xi(this,function(o){switch(o.label){case 0:if(this.isPrimary)return bf(Dv,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,5];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return Yi(r,void 0,void 0,function(){var i;return Xi(this,function(r){switch(r.label){case 0:return i=Um.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(n,i)];case 1:return r.sent(),[2]}})})},function(e){return Yi(r,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return(i=e).code!==Tf.DATA_LOSS||i.message!==Sp?[3,2]:(t=[],Nf(this.queryViewsByTarget,function(e){return t.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t)]);case 1:return n.sent(),[3,3];case 2:throw e;case 3:return[2]}var i})})})];case 2:return i=this.queryViewsByTarget[e],this.removeAndCleanupQuery(i),[4,this.localStore.releaseQuery(i.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(i.query,n),[3,5];case 4:_f("Unexpected target state: "+t),o.label=5;case 5:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o,a,s,u,c,l,h,f,d,p,g,m,v=this;return Xi(this,function(y){switch(y.label){case 0:if(!this.isPrimary)return[2];y.label=1;case 1:y.trys.push([1,8,9,10]),a=Ji(e),s=a.next(),y.label=2;case 2:return s.done?[3,7]:(g=s.value,Cf(!this.queryViewsByTarget[g],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(g)]);case 3:return Cf(!!(u=y.sent()),"Query data for active target "+g+" not found"),[4,this.localStore.allocateQuery(u)];case 4:return c=y.sent(),[4,this.initializeViewAndComputeSnapshot(c,!1)];case 5:y.sent(),this.remoteStore.listen(c),y.label=6;case 6:return s=a.next(),[3,2];case 7:return[3,10];case 8:return l=y.sent(),n={error:l},[3,10];case 9:try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}return[7];case 10:h=function(e){var t;return Xi(this,function(n){switch(n.label){case 0:return(t=f.queryViewsByTarget[e])?[4,f.localStore.releaseQuery(t.query,!1).then(function(){v.remoteStore.unlisten(e),v.removeAndCleanupQuery(t)}).catch(dg)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},f=this,y.label=11;case 11:y.trys.push([11,16,17,18]),d=Ji(t),p=d.next(),y.label=12;case 12:return p.done?[3,15]:(g=p.value,[5,h(g)]);case 13:y.sent(),y.label=14;case 14:return p=d.next(),[3,12];case 15:return[3,18];case 16:return m=y.sent(),r={error:m},[3,18];case 17:try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}return[7];case 18:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?qd().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:qd()},e}(),Pv=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Ov="SharedClientState",Mv="firestore_clients",Rv="firestore_mutations",$v="firestore_targets",Lv=function(){function e(e,t,n,i){this.user=e,this.batchId=t,this.state=n,Cf(void 0!==(this.error=i)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,i){var r=JSON.parse(i),o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),a=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(a=new kf(r.error.code,r.error.message)),o?new e(t,n,r.state,a):(Af(Ov,"Failed to parse mutation state for ID '"+n+"': "+i),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Fv=function(){function e(e,t,n){this.targetId=e,this.state=t,Cf(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var i=JSON.parse(n),r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new kf(i.error.code,i.error.message)),r?new e(t,i.state,o):(Af(Ov,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Uv=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var i=JSON.parse(n),r="object"==typeof i&&i.activeTargetIds instanceof Array,o=Wd(),a=0;r&&a<i.activeTargetIds.length;++a)r=hm(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new e(t,o):(Af(Ov,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Bv=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in mm&&"string"==typeof n.clientId?new e(n.clientId,mm[n.onlineState]):(Af(Ov,"Failed to parse online state: "+t),null)},e}(),jv=function(){function e(){this.activeTargetIds=Wd()}return e.prototype.addQueryTarget=function(e){Cf(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Vv=function(){function e(t,n,i,r,o){if(this.queue=t,this.platform=n,this.persistenceKey=i,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new kf(Tf.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+i,this.activeClients[this.localClientId]=new jv,this.clientStateKeyRe=new RegExp("^"+Mv+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Rv+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+$v+"_"+a+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+i,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return Yi(this,void 0,void 0,function(){var e,t,n,i,r,o,a,s,u,c,l,h,f,d,p,g=this;return Xi(this,function(m){switch(m.label){case 0:return Cf(!this.started,"WebStorageSharedClientState already started"),Cf(null!==this.syncEngine,"syncEngine property must be set before calling start()"),Cf(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:r=m.sent();try{for(o=Ji(r),a=o.next();!a.done;a=o.next())(s=a.value)!==this.localClientId&&(u=this.getItem(this.toWebStorageClientStateKey(s)))&&(c=Uv.fromWebStorageEntry(s,u))&&(this.activeClients[c.clientId]=c)}catch(m){e={error:m}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.persistClientState(),(l=this.storage.getItem(this.onlineStateKey))&&(h=this.fromWebStorageOnlineState(l))&&this.handleOnlineStateEvent(h);try{for(f=Ji(this.earlyEvents),d=f.next();!d.done;d=f.next())p=d.value,this.handleWebStorageEvent(p)}catch(m){n={error:m}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return g.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Wd();return Pf(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var i=Fv.fromWebStorageEntry(e,n);i&&(t=i.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var i=this;t.forEach(function(e){i.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){i.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return bf(Ov,"READ",e,t),t},e.prototype.setItem=function(e,t){bf(Ov,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){bf(Ov,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(bf(Ov,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void Af("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var t,n,i,r,o,a;return Xi(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(i)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(r)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(Cf(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=cd.INVALID;if(null!=e)try{var n=JSON.parse(e);Cf("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){Af(Ov,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==cd.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var i=new Lv(this.currentUser,e,t,n),r=this.toWebStorageMutationBatchKey(e);this.setItem(r,i.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:mm[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var i=this.toWebStorageQueryTargetMetadataKey(e),r=new Fv(e,t,n);this.setItem(i,r.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return Cf(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Mv+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return $v+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Rv+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return Cf(null!==n,"Cannot parse client state key '"+e+"'"),Uv.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);Cf(null!==n,"Cannot parse mutation batch key '"+e+"'");var i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return Lv.fromWebStorageEntry(new Pv(r),i,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);Cf(null!==n,"Cannot parse query target key '"+e+"'");var i=Number(n[1]);return Fv.fromWebStorageEntry(i,t)},e.prototype.fromWebStorageOnlineState=function(e){return Bv.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return e.user.uid!==this.currentUser.uid?(bf(Ov,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,i=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var r=this.getAllActiveQueryTargets(),o=[],a=[];return r.forEach(function(e){return Yi(n,void 0,void 0,function(){return Xi(this,function(t){return i.has(e)||o.push(e),[2]})})}),i.forEach(function(e){return Yi(n,void 0,void 0,function(){return Xi(this,function(t){return r.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),qv=function(){function e(){this.localState=new jv,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new jv,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Hv="FirestoreClient",Wv=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return og.withCacheSize(this.cacheSizeBytes)},e}(),Gv=function(){function e(e,t,n,i){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=i,this.clientId=Xf.newId(),this._clientShutdown=!1}return e.prototype.start=function(e){var t=this;this.verifyNotShutdown();var n=new md,i=new md,r=!1;return this.credentials.setChangeListener(function(o){r?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(r=!0,t.initializePersistence(e,i,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),i.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var i=this;return e instanceof Wv?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!i.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),i.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof kf?e.code===Tf.FAILED_PRECONDITION||e.code===Tf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotShutdown=function(){if(this._clientShutdown)throw new kf(Tf.FAILED_PRECONDITION,"The client has already been shutdown.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,i=fg.buildStoragePrefix(this.databaseInfo),r=new Cv(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return Yi(n,void 0,void 0,function(){var n,o;return Xi(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Vv.isAvailable(this.platform))throw new kf(Tf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.synchronizeTabs?(this.sharedClientState=new Vv(this.asyncQueue,this.platform,i,this.clientId,e),[4,fg.createMultiClientIndexedDbPersistence(i,this.clientId,this.platform,this.asyncQueue,r,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new qv,[4,fg.createIndexedDbPersistence(i,this.clientId,this.platform,this.asyncQueue,r,o)];case 3:n=a.sent(),a.label=4;case 4:return[2,(this.persistence=n).referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=nm.createEagerPersistence(this.clientId),this.sharedClientState=new qv,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return bf(Hv,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(i){return Yi(n,void 0,void 0,function(){var n,r,o,a,s,u=this;return Xi(this,function(c){switch(c.label){case 0:return this.localStore=new Xg(this.persistence,e),t&&(this.lruScheduler=new ag(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),r=this.platform.newSerializer(this.databaseInfo.databaseId),o=new Cm(this.asyncQueue,i,this.credentials,r),a=function(e){return u.syncEngine.applyOnlineStateChange(e,ym.RemoteStore)},s=function(e){return u.syncEngine.applyOnlineStateChange(e,ym.SharedClientState)},this.remoteStore=new Qm(this.localStore,o,this.asyncQueue,a,n),this.syncEngine=new Nv(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Sv(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return Yi(u,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return Yi(u,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return[4,this.shutdown()];case 1:return e.sent(),[2]}})})})];case 4:return c.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),bf(Hv,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(){var e=this;return this.asyncQueue.enqueue(function(){return Yi(e,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this._clientShutdown?[3,4]:(this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()]);case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:e.sent(),this.credentials.removeChangeListener(),this._clientShutdown=!0,e.label=4;case 4:return[2]}})})})},e.prototype.listen=function(e,t,n){var i=this;this.verifyNotShutdown();var r=new Ev(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return i.eventMgr.listen(r)}),r},e.prototype.unlisten=function(e){var t=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof bp)return e;if(e instanceof Ap)return null;throw new kf(Tf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=qd(),i=new xv(e,n),r=i.computeDocChanges(t);return i.applyChanges(r,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotShutdown();var n=new md;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(e.prototype,"clientShutdown",{get:function(){return this._clientShutdown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return Yi(t,void 0,void 0,function(){return Xi(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},e}(),zv=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Kv=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,i){if(!(t instanceof Array)||t.length<1)throw new kf(Tf.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Yf(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(Ff("FieldPath","string",n,e[n]),0===e[n].length)throw new kf(Tf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pd(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kf("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(pd.keyField().canonicalString()),e}(),Qv=new RegExp("[~\\*/\\[\\]]"),Yv=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){Cf(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(Pv.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){Cf(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Xv=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;Cf(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new kf(Tf.ABORTED,"getToken aborted due to token change.");return n?(Cf("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){Cf(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){Cf(null!=this.tokenListener,"removeChangeListener() called twice"),Cf(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getFirebaseUser=function(){var e=this.app.INTERNAL.getUid();return Cf(null===e||"string"==typeof e,"Received invalid UID: "+e),new Pv(e)},e}(),Jv=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Pv.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Zv=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Jv(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Pv.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function ey(e){return function(e,t){var n,i;if("object"!=typeof e||null===e)return!1;var r=e;try{for(var o=Ji(["next","error","complete"]),a=o.next();!a.done;a=o.next()){var s=a.value;if(s in r&&"function"==typeof r[s])return!0}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1}(e)}var ty,ny,iy=function(){function e(e){this._methodName=e}return e.delete=function(){return Mf("FieldValue.delete",arguments),ry.instance},e.serverTimestamp=function(){return Mf("FieldValue.serverTimestamp",arguments),oy.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $f("FieldValue.arrayUnion",arguments,1),new ay(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $f("FieldValue.arrayRemove",arguments,1),new sy(e)},e.increment=function(e){return Ff("FieldValue.increment","number",1,e),Rf("FieldValue.increment",arguments,1),new uy(e)},e.prototype.isEqual=function(e){return this===e},e}(),ry=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return Ki(t,e),t.instance=new t,t}(iy),oy=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return Ki(t,e),t.instance=new t,t}(iy),ay=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return Ki(t,e),t}(iy),sy=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return Ki(t,e),t}(iy),uy=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return Ki(t,e),t}(iy),cy=If(iy,"Use FieldValue.<field>() instead."),ly=/^__.*__$/,hy=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Wg(e,this.data,this.fieldMask,t)):n.push(new Hg(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Gg(e,this.fieldTransforms)),n},e}(),fy=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new Wg(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Gg(e,this.fieldTransforms)),n},e}();function dy(e){switch(e){case ty.Set:case ty.MergeSet:case ty.Update:return!0;case ty.Argument:return!1;default:throw _f("Unexpected case for UserDataSource: "+e)}}(ny=ty||(ty={}))[ny.Set=0]="Set",ny[ny.Update=1]="Update",ny[ny.MergeSet=2]="MergeSet",ny[ny.Argument=3]="Argument";var py=function(){function e(e,t,n,i,r,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=i,void 0===r&&this.validatePath(),this.arrayElement=void 0!==i&&i,this.fieldTransforms=r||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),i=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return i.validatePathSegment(t),i},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),i=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return i.validatePath(),i},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new kf(Tf.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(dy(this.dataSource)&&ly.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),gy=function(e,t){this.databaseId=e,this.key=t},my=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new py(ty.Set,e,pd.EMPTY_PATH);yy("Data must be an object, but it was:",n,t);var i=this.parseData(t,n);return new hy(i,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var i,r,o=new py(ty.MergeSet,e,pd.EMPTY_PATH);yy("Data must be an object, but it was:",o,t);var a,s,u=this.parseData(t,o);if(n){var c=new Od(pd.comparator);try{for(var l=Ji(n),h=l.next();!h.done;h=l.next()){var f=h.value,d=void 0;if(f instanceof Kv)d=f._internalPath;else{if("string"!=typeof f)throw _f("Expected stringOrFieldPath to be a string or a FieldPath");d=Ay(e,f)}if(!o.contains(d))throw new kf(Tf.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");c=c.add(d)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}a=Bg.fromSet(c),s=o.fieldTransforms.filter(function(e){return a.covers(e.field)})}else a=Bg.fromArray(o.fieldMask),s=o.fieldTransforms;return new hy(u,a,s)},e.prototype.parseUpdateData=function(e,t){var n=this,i=new py(ty.Update,e,pd.EMPTY_PATH);yy("Data must be an object, but it was:",i,t);var r=new Od(pd.comparator),o=Fg.EMPTY;Pf(t,function(t,a){var s=Ay(e,t),u=i.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof ry)r=r.add(s);else{var c=n.parseData(a,u);null!=c&&(r=r.add(s),o=o.set(s,c))}});var a=Bg.fromSet(r);return new fy(o,a,i.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,i){var r=new py(ty.Update,e,pd.EMPTY_PATH),o=[by(e,t)],a=[n];if(i.length%2!=0)throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<i.length;s+=2)o.push(by(e,i[s])),a.push(i[s+1]);var u=new Od(pd.comparator),c=Fg.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=r.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof ry)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=Bg.fromSet(u);return new fy(c,p,r.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new py(ty.Argument,e,pd.EMPTY_PATH),i=this.parseData(t,n);return Cf(null!=i,"Parsed data should not be null."),Cf(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=wy(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(vy(e=this.runPreConverter(e,t)))return yy("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof iy)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,i=new xd(Jf);return Of(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):Pf(e,function(e,r){var o=n.parseData(r,t.childContextForField(e));null!=o&&(i=i.insert(e,o))}),new Fg(i)},e.prototype.parseArray=function(e,t){var n,i,r=[],o=0;try{for(var a=Ji(e),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.parseData(u,t.childContextForArray(o));null==c&&(c=Sg.INSTANCE),r.push(c),o++}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return new Ug(r)},e.prototype.parseSentinelFieldValue=function(e,t){if(!dy(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof ry){if(t.dataSource!==ty.MergeSet)throw t.dataSource===ty.Update?(Cf(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof oy)t.fieldTransforms.push(new jg(t.path,lv.instance));else if(e instanceof ay){var n=this.parseArrayTransformElements(e._methodName,e._elements),i=new hv(n);t.fieldTransforms.push(new jg(t.path,i))}else if(e instanceof sy){n=this.parseArrayTransformElements(e._methodName,e._elements);var r=new fv(n);t.fieldTransforms.push(new jg(t.path,r))}else if(e instanceof uy){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new dv(o);t.fieldTransforms.push(new jg(t.path,a))}else _f("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Sg.INSTANCE;if("number"==typeof e)return hm(e)?new Dg(e):new Ng(e);if("boolean"==typeof e)return Eg.of(e);if("string"==typeof e)return new Pg(e);if(e instanceof Date)return new Og(kd.fromDate(e));if(e instanceof kd)return new Og(new kd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Ym)return new Lg(e);if(e instanceof od)return new Rg(e);if(e instanceof gy)return new $g(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Wf(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,i){var r=new py(ty.Argument,e,pd.EMPTY_PATH);return n.parseData(t,r.childContextForArray(i))})},e}();function vy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kd||e instanceof Ym||e instanceof od||e instanceof gy||e instanceof iy)}function yy(e,t,n){if(!vy(n)||!Hf(n)){var i=Wf(n);throw"an object"===i?t.createError(e+" a custom object"):t.createError(e+" "+i)}}function by(e,t){if(t instanceof Kv)return t._internalPath;if("string"==typeof t)return Ay(e,t);throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ay(e,t){try{return function(e){if(0<=e.search(Qv))throw new kf(Tf.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Kv.bind.apply(Kv,er([void 0],e.split("."))))}catch(t){throw new kf(Tf.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=wy(t);throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function wy(e){return e instanceof Error?e.message:e.toString()}var _y=og.COLLECTION_DISABLED,Cy=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new kf(Tf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Bf("settings","non-empty string","host",e.host),this.host=e.host,jf("settings","boolean","ssl",e.ssl),this.ssl=Df(e.ssl,!0);if(zf("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),jf("settings","object","credentials",e.credentials),this.credentials=e.credentials,jf("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?Af("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&Af("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Df(e.timestampsInSnapshots,!0),jf("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=og.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==_y&&e.cacheSizeBytes<og.MINIMUM_CACHE_SIZE_BYTES)throw new kf(Tf.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+og.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}jf("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Sy=function(){},Ey=function(){function e(t){var n=this;this._queue=new yd,this.INTERNAL={delete:function(){return Yi(n,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return e.sent(),[2]}})})}};var i=new Sy;if("object"==typeof t.options){var r=t;i.firebaseApp=r,i.databaseId=e.databaseIdFromApp(r),i.persistenceKey=i.firebaseApp.name,i.credentials=new Xv(r)}else{var o=t;if(!o.projectId)throw new kf(Tf.INVALID_ARGUMENT,"Must provide projectId");i.databaseId=new ud(o.projectId,o.database),i.persistenceKey="[DEFAULT]",i.credentials=new Yv}i.settings=new Cy({}),this._config=i,this._databaseId=i.databaseId}return e.prototype.settings=function(e){if(Rf("Firestore.settings",arguments,1),Ff("Firestore.settings","object",1,e),xf(e,"persistence"))throw new kf(Tf.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Cy(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new kf(Tf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._config.settings=t).credentials&&(this._config.credentials=function(e){if(!e)return new Yv;switch(e.type){case"gapi":var t=e.client;return Cf(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Zv(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new kf(Tf.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new kf(Tf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&Af("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=Df(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Wv(this._config.settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=fg.buildStoragePrefix(this.makeDatabaseInfo()),n=new md;return this._queue.enqueueAndForget(function(){return Yi(e,void 0,void 0,function(){var e;return Xi(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new kf(Tf.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,fg.clearPersistence(t)];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new function(){}),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new function(e,t,n,i,r){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=i,this.forceLongPolling=r}(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling)},e.prototype.configureClient=function(e){var t=this;Cf(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),Cf(!this._firestoreClient,"configureClient() called multiple times");var n=this.makeDatabaseInfo();return this._dataConverter=new my(function(e){if(e instanceof Iy){var n=t._config.databaseId,i=e.firestore._config.databaseId;if(!i.isEqual(n))throw new kf(Tf.INVALID_ARGUMENT,"Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return new gy(t._config.databaseId,e._key)}return e}),this._firestoreClient=new Gv(Sf.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!xf(t,"projectId"))throw new kf(Tf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new kf(Tf.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ud(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new kf(Tf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return Rf("Firestore.collection",arguments,1),Ff("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new My(fd.fromString(e),this)},e.prototype.doc=function(e){return Rf("Firestore.doc",arguments,1),Ff("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Iy.forPath(fd.fromString(e),this)},e.prototype.collectionGroup=function(e){if(Rf("Firestore.collectionGroup",arguments,1),Ff("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new kf(Tf.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Py(new Xm(fd.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return Rf("Firestore.runTransaction",arguments,1),Ff("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new Ty(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new ky(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(vf()){case sf.DEBUG:return"debug";case sf.ERROR:return"error";case sf.SILENT:return"silent";default:return _f("Unknown log level: "+vf())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(Rf("Firestore.setLogLevel",arguments,1),Ff("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":yf(sf.DEBUG);break;case"error":yf(sf.ERROR);break;case"silent":yf(sf.SILENT);break;default:throw new kf(Tf.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),Ty=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;Rf("Transaction.get",arguments,1);var n=Fy("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return _f("Mismatch in docs returned from document lookup.");var i=e[0];if(i instanceof Ap)return new Dy(t._firestore,n._key,null,!1,!1);if(i instanceof bp)return new Dy(t._firestore,n._key,i,!1,!1);throw _f("BatchGetDocumentsRequest returned unexpected document type: "+i.constructor.name)})},e.prototype.set=function(e,t,n){Lf("Transaction.set",arguments,2,3);var i=Fy("Transaction.set",e,this._firestore),r=(n=Ry("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(i._key,r),this},e.prototype.update=function(e,t,n){for(var i,r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return r="string"==typeof t||t instanceof Kv?($f("Transaction.update",arguments,3),i=Fy("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(Rf("Transaction.update",arguments,2),i=Fy("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(i._key,r),this},e.prototype.delete=function(e){Rf("Transaction.delete",arguments,1);var t=Fy("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),ky=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){Lf("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var i=Fy("WriteBatch.set",e,this._firestore),r=(n=Ry("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(r.toMutations(i._key,Vg.NONE)),this},e.prototype.update=function(e,t,n){for(var i,r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),r="string"==typeof t||t instanceof Kv?($f("WriteBatch.update",arguments,3),i=Fy("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(Rf("WriteBatch.update",arguments,2),i=Fy("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(r.toMutations(i._key,Vg.exists(!0))),this},e.prototype.delete=function(e){Rf("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Fy("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new zg(t._key,Vg.NONE)),this},e.prototype.commit=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new kf(Tf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Iy=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new kf(Tf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new gd(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new My(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(Rf("DocumentReference.collection",arguments,1),Ff("DocumentReference.collection","non-empty string",1,e),!e)throw new kf(Tf.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=fd.fromString(e);return new My(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){Lf("DocumentReference.set",arguments,1,2);var n=(t=Ry("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Vg.NONE))},e.prototype.update=function(e,t){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return n="string"==typeof e||e instanceof Kv?($f("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,i)):(Rf("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Vg.exists(!0)))},e.prototype.delete=function(){return Rf("DocumentReference.delete",arguments,0),this._firestoreClient.write([new zg(this._key,Vg.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Lf("DocumentReference.onSnapshot",arguments,1,4);var n,i={includeMetadataChanges:!1},r=0;"object"!=typeof e[r]||ey(e[r])||(zf("DocumentReference.onSnapshot",i=e[r],["includeMetadataChanges"]),jf("DocumentReference.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++);var o={includeMetadataChanges:i.includeMetadataChanges};return n=ey(e[r])?e[r]:(Ff("DocumentReference.onSnapshot","function",r,e[r]),Uf("DocumentReference.onSnapshot","function",r+1,e[r+1]),Uf("DocumentReference.onSnapshot","function",r+2,e[r+2]),{next:e[r],error:e[r+1],complete:e[r+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,i=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(i=t.error.bind(t));var r=new zv({next:function(e){if(t.next){Cf(e.docs.size<=1,"Too many documents returned on a document query");var i=e.docs.get(n._key);t.next(new Dy(n.firestore,n._key,i,e.fromCache,e.hasPendingWrites))}},error:i}),o=this._firestoreClient.listen(Xm.atPath(this._key.path),r,e);return function(){r.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return Lf("DocumentReference.get",arguments,0,1),Ly("DocumentReference.get",e),new Promise(function(n,i){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new Dy(t.firestore,t._key,e,!0,e instanceof bp&&e.hasLocalMutations))},i):t.getViaSnapshotListener(n,i,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){i(),!r.exists&&r.metadata.fromCache?t(new kf(Tf.UNAVAILABLE,"Failed to get document because the client is offline.")):r.exists&&r.metadata.fromCache&&n&&"server"===n.source?t(new kf(Tf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(r)},error:t})},e}(),xy=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Dy=function(){function e(e,t,n,i,r){this._firestore=e,this._key=t,this._document=n,this._fromCache=i,this._hasPendingWrites=r}return e.prototype.data=function(e){return Lf("DocumentSnapshot.data",arguments,0,1),e=$y("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,_g.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(Lf("DocumentSnapshot.get",arguments,1,2),t=$y("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(by("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,_g.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Iy(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new xy(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kf("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,i={};return e.forEach(function(e,r){i[e]=n.convertValue(r,t)}),i},e.prototype.convertValue=function(e,t){if(e instanceof Fg)return this.convertObject(e,t);if(e instanceof Ug)return this.convertArray(e,t);if(e instanceof $g){var n=e.value(t),i=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(i)||Af("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+i.projectId+"/"+i.database+") instead."),new Iy(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),Ny=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return Cf("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Dy),Py=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,i){var r,o,a;Rf("Query.where",arguments,3),Gf("Query.where",3,i),"in"!==n&&"array-contains-any"!==n&&function(e,t,n,i){if(!t.some(function(e){return e===i}))throw new kf(Tf.INVALID_ARGUMENT,"Invalid value "+Wf(i)+" provided to function Query.where() for its "+Qf(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains"],0,n);var s=by("Query.where",t),u=Jm.fromString(n);if(s.isKeyField()){if(u===Jm.ARRAY_CONTAINS||u===Jm.ARRAY_CONTAINS_ANY)throw new kf(Tf.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+u.toString()+"' queries on FieldPath.documentId().");if(u===Jm.IN){this.validateDisjunctiveFilterElements(i,u);var c=[];try{for(var l=Ji(i),h=l.next();!h.done;h=l.next()){var f=h.value;c.push(this.parseDocumentIdValue(f))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}a=new Ug(c)}else a=this.parseDocumentIdValue(i)}else u!==Jm.IN&&u!==Jm.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(i,u),a=this.firestore._dataConverter.parseQueryValue("Query.where",i);var d=Zm.create(s,u,a);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore)},e.prototype.orderBy=function(t,n){var i;if(Lf("Query.orderBy",arguments,1,2),Uf("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)i=ov.ASCENDING;else{if("desc"!==n)throw new kf(Tf.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");i=ov.DESCENDING}if(null!==this._query.startAt)throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=by("Query.orderBy",t),o=new sv(r,i);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(Rf("Query.limit",arguments,1),Ff("Query.limit","number",1,t),t<=0)throw new kf(Tf.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];$f("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(r),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];$f("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(r),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];$f("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(r),this.firestore)},e.prototype.endAt=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];$f("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(r),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kf("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,i){if(Gf(e,1,t),t instanceof Dy){if(0<n.length)throw new kf(Tf.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var r=t;if(!r.exists)throw new kf(Tf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,r._document,i)}var o=[t].concat(n);return this.boundFromFields(e,o,i)},e.prototype.boundFromDocument=function(e,t,n){var i,r,o=[];try{for(var a=Ji(this._query.orderBy),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.field.isKeyField())o.push(new $g(this.firestore._databaseId,t.key));else{var c=t.field(u.field);if(c instanceof Mg)throw new kf(Tf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return new av(o,n)},e.prototype.boundFromFields=function(e,t,n){var i=this._query.explicitOrderBy;if(t.length>i.length)throw new kf(Tf.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],o=0;o<t.length;o++){var a=t[o];if(i[o].field.isKeyField()){if("string"!=typeof a)throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(fd.fromString(a));if(!gd.isDocumentKey(s))throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new gd(s);r.push(new $g(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);r.push(c)}}return new av(r,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Lf("Query.onSnapshot",arguments,1,4);var n,i={},r=0;return"object"!=typeof e[r]||ey(e[r])||(zf("Query.onSnapshot",i=e[r],["includeMetadataChanges"]),jf("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++),n=ey(e[r])?e[r]:(Ff("Query.onSnapshot","function",r,e[r]),Uf("Query.onSnapshot","function",r+1,e[r+1]),Uf("Query.onSnapshot","function",r+2,e[r+2]),{next:e[r],error:e[r+1],complete:e[r+2]}),this.onSnapshotInternal(i,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,i=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(i=t.error.bind(t));var r=new zv({next:function(e){t.next&&t.next(new Oy(n.firestore,n._query,e))},error:i}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,r,e);return function(){r.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return Lf("Query.get",arguments,0,1),Ly("Query.get",e),new Promise(function(n,i){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Oy(t.firestore,t._query,e))},i):t.getViaSnapshotListener(n,i,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){i(),r.metadata.fromCache&&n&&"server"===n.source?t(new kf(Tf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(r)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(fd.fromString(e));if(!gd.isDocumentKey(t))throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new $g(this.firestore._databaseId,new gd(t))}if(e instanceof Iy){var n=e;return new $g(this.firestore._databaseId,n._key)}throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Wf(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new kf(Tf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new kf(Tf.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new kf(Tf.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter(function(e){return Number.isNaN(e)}).length)throw new kf(Tf.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof Zm){var t=[Jm.ARRAY_CONTAINS,Jm.ARRAY_CONTAINS_ANY],n=[Jm.IN,Jm.ARRAY_CONTAINS_ANY],i=0<=t.indexOf(e.op),r=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(r||i){var s=null;if(r&&(s=this._query.findFilterOperator(n)),null===s&&i&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new kf(Tf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new kf(Tf.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new kf(Tf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Oy=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new xy(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;Lf("QuerySnapshot.forEach",arguments,1,2),Ff("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(i){e.call(t,n.convertToDocumentImpl(i))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Py(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(zf("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),jf("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new kf(Tf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var i,r=0;return n.docChanges.map(function(t){var o=new Ny(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return Cf(t.type===Dm.Added,"Invalid event type for first snapshot"),Cf(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==Dm.Metadata}).map(function(t){var i=new Ny(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),r=-1,a=-1;return t.type!==Dm.Added&&(Cf(0<=(r=o.indexOf(t.doc.key)),"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Dm.Removed&&(a=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case Dm.Added:return"added";case Dm.Modified:case Dm.Metadata:return"modified";case Dm.Removed:return"removed";default:return _f("Unknown change type: "+e)}}(t.type),doc:i,oldIndex:r,newIndex:a}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kf("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Ny(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();er(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Oy.prototype.docChanges,e,{get:function(){return function(){throw new kf(Tf.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var My=function(e){function t(t,n){var i=e.call(this,Xm.atPath(t),n)||this;if(t.length%2!=1)throw new kf(Tf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return Ki(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Iy(new gd(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(Lf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Xf.newId()),Ff("CollectionReference.doc","non-empty string",1,e),""===e)throw new kf(Tf.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=fd.fromString(e);return Iy.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){Rf("CollectionReference.add",arguments,1),Ff("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Py);function Ry(e,t){if(void 0===t)return{merge:!1};if(zf(e,t,["merge","mergeFields"]),jf(e,"boolean","merge",t.merge),function(e,t,n,i,r){void 0!==i&&function(e,t,n,i,r){if(!(i instanceof Array))throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Wf(i));for(var o=0;o<i.length;++o)if(!r(i[o]))throw new kf(Tf.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+Wf(i[o]))}(e,t,n,i,r)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof Kv}),void 0!==t.mergeFields&&void 0!==t.merge)throw new kf(Tf.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function $y(e,t){return void 0===t?{}:(zf(e,t,["serverTimestamps"]),Vf(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Ly(e,t){Uf(e,"object",1,t),t&&(zf(e,t,["source"]),Vf(e,0,"source",t.source,["default","server","cache"]))}function Fy(e,t,n){if(t instanceof Iy){if(t.firestore!==n)throw new kf(Tf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Kf(e,"DocumentReference",1,t)}var Uy=If(Ey,"Use firebase.firestore() instead."),By=If(Ty,"Use firebase.firestore().runTransaction() instead."),jy=If(ky,"Use firebase.firestore().batch() instead."),Vy=If(Iy,"Use firebase.firestore().doc() instead."),qy=If(Dy),Hy=If(Ny),Wy=If(Py),Gy=If(Oy),zy=If(My,"Use firebase.firestore().collection() instead."),Ky={Firestore:Uy,GeoPoint:Ym,Timestamp:kd,Blob:ad,Transaction:By,WriteBatch:jy,DocumentReference:Vy,DocumentSnapshot:qy,Query:Wy,QueryDocumentSnapshot:Hy,QuerySnapshot:Gy,CollectionReference:zy,FieldPath:Kv,FieldValue:cy,setLogLevel:Ey.setLogLevel,CACHE_SIZE_UNLIMITED:_y};var Qy=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Yy="ConnectivityMonitor",Xy=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){var e,t;bf(Yy,"Network connectivity changed: AVAILABLE");try{for(var n=Ji(this.callbacks),i=n.next();!i.done;i=n.next())(0,i.value)(0)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.onNetworkUnavailable=function(){var e,t;bf(Yy,"Network connectivity changed: UNAVAILABLE");try{for(var n=Ji(this.callbacks),i=n.next();!i.done;i=n.next())(0,i.value)(1)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Jy=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){Cf(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){Cf(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){Cf(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){Cf(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){Cf(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){Cf(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),Zy="Connection",eb={BatchGetDocuments:"batchGet",Commit:"commit"},tb="gl-js/ fire/"+gf,nb=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=tb},e.prototype.invokeRPC=function(e,t,n){var i=this,r=this.makeUrl(e);return new Promise(function(o,a){var s=new pf;s.listenOnce(ff.COMPLETE,function(){try{switch(s.getLastErrorCode()){case hf.NO_ERROR:var t=s.getResponseJson();bf(Zy,"XHR received:",JSON.stringify(t)),o(t);break;case hf.TIMEOUT:bf(Zy,'RPC "'+e+'" timed out'),a(new kf(Tf.DEADLINE_EXCEEDED,"Request time out"));break;case hf.HTTP_ERROR:var n=s.getStatus();bf(Zy,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n?a(new kf(function(e){switch(e){case 200:return Tf.OK;case 400:return Tf.INVALID_ARGUMENT;case 401:return Tf.UNAUTHENTICATED;case 403:return Tf.PERMISSION_DENIED;case 404:return Tf.NOT_FOUND;case 409:return Tf.ABORTED;case 416:return Tf.OUT_OF_RANGE;case 429:return Tf.RESOURCE_EXHAUSTED;case 499:return Tf.CANCELLED;case 500:return Tf.UNKNOWN;case 501:return Tf.UNIMPLEMENTED;case 503:return Tf.UNAVAILABLE;case 504:return Tf.DEADLINE_EXCEEDED;default:return 200<=e&&e<300?Tf.OK:400<=e&&e<500?Tf.FAILED_PRECONDITION:500<=e&&e<600?Tf.INTERNAL:Tf.UNKNOWN}}(n),"Server responded with status "+s.getStatusText())):(bf(Zy,'RPC "'+e+'" failed'),a(new kf(Tf.UNAVAILABLE,"Connection failed.")));break;default:_f('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{bf(Zy,'RPC "'+e+'" completed.')}});var u=JSON.stringify(t);bf(Zy,"XHR sending: ",r+" "+u);var c={"Content-Type":"text/plain"};i.modifyHeadersForRequest(c,n),s.send(r,"POST",u,c,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=lf(),r={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(r.initMessageHeaders,t),fr()||(r.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");bf(Zy,"Creating WebChannel: "+o+" "+r);var a=i.createWebChannel(o,r),s=!1,u=!1,c=new Jy({sendFn:function(e){u?bf(Zy,"Not sending because WebChannel is closed:",e):(s||(bf(Zy,"Opening WebChannel transport."),a.open(),s=!0),bf(Zy,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),l=function(e,t){a.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return l(df.EventType.OPEN,function(){u||bf(Zy,"WebChannel transport opened.")}),l(df.EventType.CLOSE,function(){u||(u=!0,bf(Zy,"WebChannel transport closed"),c.callOnClose())}),l(df.EventType.ERROR,function(e){u||(u=!0,bf(Zy,"WebChannel transport errored:",e),c.callOnClose(new kf(Tf.UNAVAILABLE,"The operation could not be completed")))}),l(df.EventType.MESSAGE,function(e){if(!u){var t=e.data[0];Cf(!!t,"Got a webchannel message without data.");var n=t,i=n.error||n[0]&&n[0].error;if(i){bf(Zy,"WebChannel received error:",i);var r=i.status,o=function(e){var t=Em[r];if(void 0!==t)return xm(t)}(),s=i.message;void 0===o&&(o=Tf.INTERNAL,s="Unknown error status: "+r+" with message "+i.message),u=!0,c.callOnClose(new kf(o,s)),a.close()}else bf(Zy,"WebChannel received:",t),c.callOnMessage(t)}}),setTimeout(function(){c.callOnOpen()},0),c},e.prototype.makeUrl=function(e){var t=eb[e];Cf(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),ib=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new nb(e))},e.prototype.newConnectivityMonitor=function(){return Xy.isAvailable()?new Xy:new Qy},e.prototype.newSerializer=function(e){return new Cv(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();Sf.setPlatform(new ib),function(e){e.INTERNAL.registerService("firestore",function(e){return new Ey(e)},function(e){Cf(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Ky))}(Yr);var rb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ob=function(e){function t(n,i,r){var o=e.call(this,i)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=r,o}return Ki(t,e),t}(Error),ab=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getInstanceIdToken=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(e=t.sent())?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getContext=function(){return Yi(this,void 0,void 0,function(){var e,t;return Xi(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}();function sb(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i]));return n}var ub,cb,lb=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return sb(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?sb(e,function(e){return t.decode(e)}):e},e}(),hb=function(){function e(e,t){var n=this;void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new lb,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new ab(e),this.cancelAllRequests=new Promise(function(e){n.deleteService=function(){return e()}})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+t+".cloudfunctions.net/"+e:this.emulatorOrigin+"/"+t+"/"+n+"/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(i){return n.call(e,i,t||{})}},e.prototype.postJSON=function(e,t,n){return Yi(this,void 0,void 0,function(){var i,r;return Xi(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return i=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:r=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,i.json()];case 6:return r=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:i.status,json:r}]}})})},e.prototype.call=function(e,t,n){return Yi(this,void 0,void 0,function(){var i,r,o,a,s,u,c,l;return Xi(this,function(h){switch(h.label){case 0:return i=this._url(e),t=this.serializer.encode(t),r={data:t},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=h.sent()).authToken&&o.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&o.append("Firebase-Instance-ID-Token",a.instanceIdToken),s=n.timeout||7e4,[4,Promise.race([this.postJSON(i,r,o),(f=s,new Promise(function(e,t){setTimeout(function(){t(new ob("deadline-exceeded","deadline-exceeded"))},f)})),this.cancelAllRequests])];case 2:if(!(u=h.sent()))throw new ob("cancelled","Firebase Functions instance was deleted.");if(c=function(e,t,n){var i=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),r=i,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!rb[s])return new ob("internal","internal");i=rb[s],r=s}var u=a.message;"string"==typeof u&&(r=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(e){}return"ok"===i?null:new ob(i,r,o)}(u.status,u.json,this.serializer))throw c;if(!u.json)throw new ob("internal","Response is not valid JSON object.");if(void 0===(l=u.json.data)&&(l=u.json.result),void 0===l)throw new ob("internal","Response is missing data field.");return[2,{data:this.serializer.decode(l)}]}var f})})},e}();ub={Functions:hb},Yr.INTERNAL.registerService("functions",function(e,t,n){return new hb(e,n)},ub,void 0,!0);var fb,db,pb,gb,mb=((cb={})["only-available-in-window"]="This method is available in a Window context.",cb["only-available-in-sw"]="This method is available in a service worker context.",cb["should-be-overriden"]="This method should be overriden by extended classes.",cb["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",cb["permission-default"]="The required permissions were not granted and dismissed instead.",cb["permission-blocked"]="The required permissions were not granted and blocked instead.",cb["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",cb["notifications-blocked"]="Notifications have been blocked.",cb["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",cb["sw-registration-expected"]="A service worker registration was the expected input.",cb["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",cb["invalid-saved-token"]="Unable to access details of the saved token.",cb["sw-reg-redundant"]="The service worker being used for push was made redundant.",cb["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",cb["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",cb["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",cb["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",cb["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",cb["token-update-no-token"]="FCM returned no token when updating the user to push.",cb["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",cb["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",cb["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",cb["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",cb["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",cb["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",cb["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",cb["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",cb["failed-to-delete-token"]="Unable to delete the currently saved token.",cb["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",cb["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",cb["bad-scope"]="The service worker scope must be a string with at least one character.",cb["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",cb["bad-subscription"]="The subscription must be a valid PushSubscription.",cb["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",cb["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",cb["failed-delete-vapid-key"]="The VAPID key could not be deleted.",cb["invalid-public-vapid-key"]="The public VAPID key must be a string.",cb["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",cb["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",cb),vb=new gr("messaging","Messaging",mb),yb=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),bb="https://fcm.googleapis.com";function Ab(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),r=0;r<e.byteLength;r++)if(n.getUint8(r)!==i.getUint8(r))return!1;return!0}function wb(e){var t;return(t=new Uint8Array(e),btoa(String.fromCharCode.apply(String,er(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(db=fb||(fb={})).TYPE_OF_MSG="firebase-messaging-msg-type",db.DATA="firebase-messaging-msg-data",(gb=pb||(pb={})).PUSH_MSG_RECEIVED="push-msg-received",gb.NOTIFICATION_CLICKED="notification-clicked";var _b=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Yi(this,void 0,void 0,function(){var i,r,o,a,s,u,c,l,h;return Xi(this,function(f){switch(f.label){case 0:i=wb(t.getKey("p256dh")),r=wb(t.getKey("auth")),o="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+i+"&encryption_auth="+r,Ab(n.buffer,yb.buffer)||(a=wb(n),o+="&application_pub_key="+a),(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:s,body:o},f.label=1;case 1:return f.trys.push([1,4,,5]),[4,fetch(bb+"/fcm/connect/subscribe",u)];case 2:return[4,f.sent().json()];case 3:return c=f.sent(),[3,5];case 4:throw l=f.sent(),vb.create("token-subscribe-failed",{errorInfo:l});case 5:if(c.error)throw h=c.error.message,vb.create("token-subscribe-failed",{errorInfo:h});if(!c.token)throw vb.create("token-subscribe-no-token");if(!c.pushSet)throw vb.create("token-subscribe-no-push-set");return[2,{token:c.token,pushSet:c.pushSet}]}})})},e.prototype.updateToken=function(e,t,n,i,r){return Yi(this,void 0,void 0,function(){var o,a,s,u,c,l,h,f,d;return Xi(this,function(p){switch(p.label){case 0:o=wb(i.getKey("p256dh")),a=wb(i.getKey("auth")),s="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+i.endpoint+"&encryption_key="+o+"&encryption_auth="+a,Ab(r.buffer,yb.buffer)||(u=wb(r),s+="&application_pub_key="+u),(c=new Headers).append("Content-Type","application/x-www-form-urlencoded"),l={method:"POST",headers:c,body:s},p.label=1;case 1:return p.trys.push([1,4,,5]),[4,fetch(bb+"/fcm/connect/subscribe",l)];case 2:return[4,p.sent().json()];case 3:return h=p.sent(),[3,5];case 4:throw f=p.sent(),vb.create("token-update-failed",{errorInfo:f});case 5:if(h.error)throw d=h.error.message,vb.create("token-update-failed",{errorInfo:d});if(!h.token)throw vb.create("token-update-no-token");return[2,h.token]}})})},e.prototype.deleteToken=function(e,t,n){return Yi(this,void 0,void 0,function(){var i,r,o,a,s,u;return Xi(this,function(c){switch(c.label){case 0:i="authorized_entity="+e+"&token="+t+"&pushSet="+n,(r=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:r,body:i},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(bb+"/fcm/connect/unsubscribe",o)];case 2:return[4,c.sent().json()];case 3:if((a=c.sent()).error)throw s=a.error.message,vb.create("token-unsubscribe-failed",{errorInfo:s});return[3,5];case 4:throw u=c.sent(),vb.create("token-unsubscribe-failed",{errorInfo:u});case 5:return[2]}})})},e}();function Cb(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}var Sb="undefined",Eb="fcm_token_object_Store";var Tb=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},e.prototype.getIndex=function(e,t){return this.createTransaction(function(n){return n.index(e).get(t)})},e.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},e.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},e.prototype.closeDatabase=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Yi(this,void 0,void 0,function(){var n,i,r,o;return Xi(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),i=n.transaction(this.objectStoreName,t),r=i.objectStore(this.objectStoreName),[4,(s=e(r),new Promise(function(e,t){s.onsuccess=function(){e(s.result)},s.onerror=function(){t(s.error)}}))];case 2:return o=a.sent(),[2,new Promise(function(e,t){i.oncomplete=function(){e(o)},i.onerror=function(){t(i.error)}})]}var s})})},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,n){var i=indexedDB.open(e.dbName,e.dbVersion);i.onsuccess=function(){t(i.result)},i.onerror=function(){e.dbPromise=null,n(i.error)},i.onupgradeneeded=function(t){return e.onDbUpgrade(i,t)}})),this.dbPromise},e}(),kb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return Ki(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:!function(){var e=indexedDB.open(Sb);e.onerror=function(e){},e.onsuccess=function(t){!function(e){if(e.objectStoreNames.contains(Eb)){var t=e.transaction(Eb).objectStore(Eb),n=new _b,i=t.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var t=i.result;if(t){var r=t.value;n.deleteToken(r.fcmSenderId,r.fcmToken,r.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(Sb)}}}(e.result)}}();case 2:var i,r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=Qi({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=Cb(t.vapidKey)),"string"==typeof t.auth&&(n.auth=Cb(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=Cb(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){if(!e)throw vb.create("bad-token");return Ib({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){if(!e)throw vb.create("bad-scope");return Ib({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){if(!e.swScope)throw vb.create("bad-scope");if(!e.vapidKey)throw vb.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw vb.create("bad-subscription");if(!e.fcmSenderId)throw vb.create("bad-sender-id");if(!e.fcmToken)throw vb.create("bad-token");if(!e.fcmPushSet)throw vb.create("bad-push-set");return Ib(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(vb.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw vb.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}})})},t}(Tb);function Ib(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw vb.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw vb.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw vb.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw vb.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw vb.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw vb.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw vb.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw vb.create("bad-push-set")}var xb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Ki(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw vb.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}})})},t.prototype.saveVapidDetails=function(e,t){return Yi(this,void 0,void 0,function(){var n;return Xi(this,function(i){if("string"!=typeof e||0===e.length)throw vb.create("bad-scope");if(null===t||65!==t.length)throw vb.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]})})},t.prototype.deleteVapidDetails=function(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw vb.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}})})},t}(Tb),Db="messagingSenderId",Nb=function(){function e(e){var t=this;if(!e.options[Db]||"string"!=typeof e.options[Db])throw vb.create("bad-sender-id");this.messagingSenderId=e.options[Db],this.tokenDetailsModel=new kb,this.vapidDetailsModel=new xb,this.iidModel=new _b,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return Yi(this,void 0,void 0,function(){var e,t,n,i,r;return Xi(this,function(o){switch(o.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw vb.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return i=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(r=o.sent())?[2,this.manageExistingToken(t,i,n,r)]:[2,this.getNewToken(t,i,n)]}})})},e.prototype.manageExistingToken=function(e,t,n,i){return Yi(this,void 0,void 0,function(){return Xi(this,function(r){switch(r.label){case 0:return function(e,t,n){if(!n.vapidKey||!Ab(t.buffer,n.vapidKey.buffer))return!1;var i=e.endpoint===n.endpoint,r=Ab(e.getKey("auth"),n.auth),o=Ab(e.getKey("p256dh"),n.p256dh);return i&&r&&o}(t,n,i)?Date.now()<i.createTime+6048e5?[2,i.fcmToken]:[2,this.updateToken(e,t,n,i)]:[4,this.deleteTokenFromDB(i.fcmToken)];case 1:return r.sent(),[2,this.getNewToken(e,t,n)]}})})},e.prototype.updateToken=function(e,t,n,i){return Yi(this,void 0,void 0,function(){var r,o,a;return Xi(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,i.fcmToken,i.fcmPushSet,t,n)];case 1:return r=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r,fcmPushSet:i.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,r];case 4:return a=s.sent(),[4,this.deleteToken(i.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},e.prototype.getNewToken=function(e,t,n){return Yi(this,void 0,void 0,function(){var i,r;return Xi(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return i=o.sent(),r={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i.token,fcmPushSet:i.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(r)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,i.token]}})})},e.prototype.deleteToken=function(e){return Yi(this,void 0,void 0,function(){var t,n;return Xi(this,function(i){switch(i.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return i.sent(),[4,this.getSWRegistration_()];case 2:return(t=i.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=i.sent())return[2,n.unsubscribe()];i.label=4;case 4:return[2,!0]}})})},e.prototype.deleteTokenFromDB=function(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}})})},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then(function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},e.prototype.requestPermission=function(){throw vb.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw vb.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw vb.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw vb.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw vb.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw vb.create("only-available-in-sw")},e.prototype.delete=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}(),Pb="FCM_MSG",Ob=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(e){n.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){n.onSubChange(e)}),self.addEventListener("notificationclick",function(e){n.onNotificationClick(e)}),n}return Ki(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r,o,a;return Xi(this,function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(s){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(i=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return r=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,r.showNotification(i,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}})})},t.prototype.onSubChange_=function(e){return Yi(this,void 0,void 0,function(){var e,t,n,i;return Xi(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=r.sent(),[3,3];case 2:throw t=r.sent(),vb.create("unable-to-resubscribe",{errorInfo:t});case 3:return r.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return r.sent(),[3,8];case 5:return n=r.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(i=r.sent()))throw n;return[4,this.deleteToken(i.fcmToken)];case 7:throw r.sent(),n;case 8:return[2]}})})},t.prototype.onNotificationClick_=function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r;return Xi(this,function(o){switch(o.label){case 0:return e.notification&&e.notification.data&&e.notification.data[Pb]?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(t=e.notification.data[Pb]).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(i=o.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return i=o.sent(),[3,5];case 3:return[4,i.focus()];case 4:i=o.sent(),o.label=5;case 5:return i?(delete t.notification,delete t.fcmOptions,r=Rb(pb.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(i,r)]):[2]}})})},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Qi({},e.notification);return n.data=Qi({},e.notification.data,((t={})[Pb]=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw vb.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r;return Xi(this,function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,Mb()];case 1:for(n=o.sent(),i=null,r=0;r<n.length;r++)if(new URL(n[r].url,self.location.href).href===t){i=n[r];break}return[2,i]}})})},t.prototype.attemptToMessageClient_=function(e,t){return Yi(this,void 0,void 0,function(){return Xi(this,function(n){if(!e)throw vb.create("no-window-client-to-msg");return e.postMessage(t),[2]})})},t.prototype.hasVisibleClients_=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){switch(e.label){case 0:return[4,Mb()];case 1:return[2,e.sent().some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})]}})})},t.prototype.sendMessageToWindowClients_=function(e){return Yi(this,void 0,void 0,function(){var t,n,i=this;return Xi(this,function(r){switch(r.label){case 0:return[4,Mb()];case 1:return t=r.sent(),n=Rb(pb.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map(function(e){return i.attemptToMessageClient_(e,n)}))];case 2:return r.sent(),[2]}})})},t.prototype.getSWRegistration_=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return Yi(this,void 0,void 0,function(){var e,t;return Xi(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw vb.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,yb]:[2,t]}})})},t}(Nb);function Mb(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Rb(e,t){var n;return(n={})[fb.TYPE_OF_MSG]=e,n[fb.DATA]=t,n}var $b,Lb=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Er(function(e){n.messageObserver=e}),n.onTokenRefreshInternal=Er(function(e){n.tokenRefreshObserver=e}),n.setupSWMessageListener_(),n}return Ki(t,e),t.prototype.getToken=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return Yi(this,void 0,void 0,function(){var e,t;return Xi(this,function(n){switch(n.label){case 0:if(!(e=document.querySelector('link[rel="manifest"]')))return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e.href)];case 2:return[4,n.sent().json()];case 3:return t=n.sent(),[3,5];case 4:return n.sent(),[2];case 5:if(!t||!t.gcm_sender_id)return[2];if("103953800507"!==t.gcm_sender_id)throw vb.create("incorrect-gcm-sender-id");return[2]}})})}()),[4,this.manifestCheckPromise];case 1:return t.sent(),[2,e.prototype.getToken.call(this)]}})})},t.prototype.requestPermission=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?vb.create("permission-blocked"):vb.create("permission-default")}})})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw vb.create("sw-registration-expected");if(null!=this.registrationToUse)throw vb.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw vb.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw vb.create("use-public-key-before-get-token");var t=Cb(e);if(65!==t.length)throw vb.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise(function(n,i){if(t)if("activated"!==t.state)if("redundant"!==t.state){var r=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;i(vb.create("sw-reg-redundant"))}t.removeEventListener("statechange",r)};t.addEventListener("statechange",r)}else i(vb.create("sw-reg-redundant"));else n(e);else i(vb.create("no-sw-in-reg"))})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(e){throw vb.create("failed-serviceworker-registration",{browserErrorMessage:e.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return(e.registrationToUse=t).update(),t})}))},t.prototype.getPublicVapidKey_=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,yb]})})},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[fb.TYPE_OF_MSG]){var n=t.data;switch(n[fb.TYPE_OF_MSG]){case pb.PUSH_MSG_RECEIVED:case pb.NOTIFICATION_CLICKED:var i=n[fb.DATA];e.messageObserver&&e.messageObserver.next(i)}}},!1)},t}(Nb);function Fb(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}$b={isSupported:Fb},Yr.INTERNAL.registerService("messaging",function(e){if(!Fb())throw vb.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Ob(e):new Lb(e)},$b);var Ub="firebasestorage.googleapis.com",Bb="storageBucket",jb=function(){function e(e,t){this.code_=qb(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return qb(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),Vb={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function qb(e){return"storage/"+e}function Hb(){return new jb(Vb.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Wb(){return new jb(Vb.CANCELED,"User canceled the upload/download.")}function Gb(){return new jb(Vb.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zb(e,t,n){return new jb(Vb.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function Kb(){return new jb(Vb.APP_DELETED,"The Firebase app was deleted.")}function Qb(e,t){return new jb(Vb.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Yb(e){throw new jb(Vb.INTERNAL_ERROR,"Internal error: "+e)}var Xb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Jb(e){switch(e){case Xb.RAW:case Xb.BASE64:case Xb.BASE64URL:case Xb.DATA_URL:return;default:throw"Expected one of the event types: ["+Xb.RAW+", "+Xb.BASE64+", "+Xb.BASE64URL+", "+Xb.DATA_URL+"]."}}var Zb=function(e,t){this.data=e,this.contentType=t||null};function eA(e,t){switch(e){case Xb.RAW:return new Zb(tA(t));case Xb.BASE64:case Xb.BASE64URL:return new Zb(nA(e,t));case Xb.DATA_URL:return new Zb((n=new oA(t)).base64?nA(Xb.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw Qb(Xb.DATA_URL,"Malformed data URL.")}return tA(t)}(n.rest),new oA(t).contentType)}var n;throw Hb()}function tA(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function nA(e,t){switch(e){case Xb.BASE64:var n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i)throw Qb(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Xb.BASE64URL:var r=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(r||o)throw Qb(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw Qb(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var iA,rA,oA=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw Qb(Xb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,i,r=t[1]||null;null!=r&&(this.base64=(i=";base64",(n=r).length>=i.length&&n.substring(n.length-i.length)===i),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)},aA={STATE_CHANGED:"state_changed"},sA="running",uA="pausing",cA="paused",lA="success",hA="canceling",fA="canceled",dA="error",pA={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gA(e){switch(e){case sA:case uA:case hA:return pA.RUNNING;case cA:return pA.PAUSED;case lA:return pA.SUCCESS;case fA:return pA.CANCELED;case dA:default:return pA.ERROR}}function mA(e){return null!=e}function vA(e){return void 0!==e}function yA(e){return"function"==typeof e}function bA(e){return"object"==typeof e}function AA(e){return"string"==typeof e||e instanceof String}function wA(e){return"number"==typeof e||e instanceof Number}function _A(e){return CA()&&e instanceof Blob}function CA(){return"undefined"!=typeof Blob}(rA=iA||(iA={}))[rA.NO_ERROR=0]="NO_ERROR",rA[rA.NETWORK_ERROR=1]="NETWORK_ERROR",rA[rA.ABORT=2]="ABORT";var SA=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=iA.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=iA.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=iA.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}return e.prototype.send=function(e,t,n,i){if(this.sent_)throw Yb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),mA(i))for(var r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return mA(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Yb("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Yb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Yb("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){mA(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){mA(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),EA=function(){function e(){}return e.prototype.createXhrIo=function(){return new SA},e}();var TA=function(){function e(e,t){var n=0,i="";_A(e)?(n=(this.data_=e).size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(_A(this.data_)){var i=(o=t,a=n,(r=this.data_).webkitSlice?r.webkitSlice(o,a):r.mozSlice?r.mozSlice(o,a):r.slice?r.slice(o,a):null);return null===i?null:new e(i)}var r,o,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(CA()){var i=t.map(function(t){return t instanceof e?t.data_:t});return new e(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var i=new n,r=0;r<e.length;r++)i.append(e[r]);return i.getBlob()}if(CA())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,i))}var r=t.map(function(e){return AA(e)?eA(Xb.RAW,e).data:e.data_}),o=0;r.forEach(function(e){o+=e.byteLength});var a=new Uint8Array(o),s=0;return r.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}(),kA=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n,i;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw i=t,new jb(Vb.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")},e.makeFromUrl=function(t){for(var n,i=null,r="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+r+"(/(.*))?$","i"),a=Ub.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),i=new e(h,f),c.postModify(i);break}}if(null==i)throw n=t,new jb(Vb.INVALID_URL,"Invalid URL '"+n+"'.");return i},e}();function IA(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return bA(n=t)&&!Array.isArray(n)?t:null}function xA(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function DA(e){return"https://"+Ub+"/v0"+e}function NA(e){var t=encodeURIComponent,n="?";for(var i in e)e.hasOwnProperty(i)&&(n=n+(t(i)+"=")+t(e[i])+"&");return n.slice(0,-1)}function PA(e,t){return t}var OA=function(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||PA},MA=null;function RA(e,t,n){var i=IA(t);return null===i?null:function(e,t,n){for(var i,r,o={type:"file"},a=n.length,s=0;s<a;s++){var u=n[s];o[u.local]=u.xform(o,t[u.server])}return i=o,r=e,Object.defineProperty(i,"ref",{get:function(){var e=i.bucket,t=i.fullPath,n=new kA(e,t);return r.makeStorageReference(n)}}),o}(e,i,n)}function $A(e,t){for(var n={},i=t.length,r=0;r<i;r++){var o=t[r];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function LA(e){if(!bA(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!bA(n))throw"Expected object for 'customMetadata' mapping."}else if(bA(i=n)&&null!==i)throw"Mapping for '"+t+"' cannot be an object."}var i}var FA="maxResults",UA=1e3,BA="pageToken",jA="prefixes",VA="items";function qA(e){if(!bA(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===FA){if(!wA(n=e[FA])||!Number.isInteger(n)||e[FA]<=0)throw"Expected maxResults to be a positive number.";if(1e3<e[FA])throw"Expected maxResults to be less than or equal to "+UA+"."}else{if(t!==BA)throw"Unknown option: "+t;if(e[BA]&&!AA(e[BA]))throw"Expected pageToken to be string."}var n}var HA=function(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function WA(e){if(!e)throw Hb()}function GA(e,t){return function(n,i){var r=RA(e,i,t);return WA(null!==r),r}}function zA(e){return function(t,n){var i,r,o=(i=e,null===(r=IA(n))?null:function(e,t){var n,i,r,o,a={prefixes:[],items:[],nextPageToken:t.nextPageToken},s=e.bucket();if(null===s)throw new jb(Vb.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Bb+"' property when initializing the app?");if(t[jA])try{for(var u=Ji(t[jA]),c=u.next();!c.done;c=u.next()){var l=c.value.replace(/\/$/,""),h=e.makeStorageReference(new kA(s,l));a.prefixes.push(h)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}if(t[VA])try{for(var f=Ji(t[VA]),d=f.next();!d.done;d=f.next()){var p=d.value;h=e.makeStorageReference(new kA(s,p.name)),a.items.push(h)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}return a}(i,r));return WA(null!==o),o}}function KA(e){return function(t,n){var i,r,o;return(i=401===t.getStatus()?new jb(Vb.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,new jb(Vb.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,new jb(Vb.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):n).setServerResponseProp(n.serverResponseProp()),i}}function QA(e){var t=KA(e);return function(n,i){var r,o=t(n,i);return 404===n.getStatus()&&(r=e.path,o=new jb(Vb.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")),o.setServerResponseProp(i.serverResponseProp()),o}}function YA(e,t,n){var i=DA(t.fullServerUrl()),r=e.maxOperationRetryTime(),o=new HA(i,"GET",GA(e,n),r);return o.errorHandler=QA(t),o}function XA(e,t,n){var i,r,o=Object.assign({},n);return o.fullPath=e.path,o.size=t.size(),o.contentType||(o.contentType=(r=t,(i=null)&&i.contentType||r&&r.type()||"application/octet-stream")),o}var JA=function(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null};function ZA(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){WA(!1)}return WA(!!n&&-1!==(t||["active"]).indexOf(n)),n}var ew=function(e,t,n){if(yA(e)||mA(t)||mA(n))this.next=e,this.error=t||null,this.complete=n||null;else{var i=e;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}};function tw(e,t,n){for(var i=t.length,r=t.length,o=0;o<t.length;o++)if(t[o].optional){i=o;break}var a,s,u,c,l,h;if(!(i<=n.length&&n.length<=r))throw a=i,s=r,u=e,c=n.length,h=a===s?1===(l=a)?"argument":"arguments":(l="between "+a+" and "+s,"arguments"),new jb(Vb.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+u+"`: Expected "+l+" "+h+", received "+c+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?zb(o,e,t.message):zb(o,e,t)}}var nw=function(e,t){var n=this;this.validator=function(t){n.optional&&!vA(t)||e(t)},this.optional=!!t};function iw(e,t){function n(e){if(!AA(e))throw"Expected string."}var i,r,o;return i=e?(r=n,o=e,function(e){r(e),o(e)}):n,new nw(i,t)}function rw(e){return new nw(LA,e)}function ow(){return new nw(function(e){if(!(wA(e)&&0<=e))throw"Expected a number 0 or greater."})}function aw(e,t){return new nw(function(t){if(!(null===t||mA(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function sw(e){return new nw(function(e){if(null!==e&&!yA(e))throw"Expected a Function."},e)}function uw(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,er(t))})}}var cw=function(){function e(e,t,n,i,r,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=r,this.metadata_=o,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=sA,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(Vb.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(dA))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(Vb.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(dA))},this.promise_=new Promise(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return 262144<e.size()},e.prototype.start_=function(){this.state_===sA&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case sA:e(n);break;case hA:t.transition_(fA);break;case uA:t.transition_(cA)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n,i,r,o,a,s,u,c,l,h,f,d,p,g=(n=e.authWrapper_,i=e.location_,r=e.mappings_,o=e.blob_,a=e.metadata_,s=i.bucketOnlyServerUrl(),c={name:(u=XA(i,o,a)).fullPath},l=DA(s),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":o.size(),"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},f=$A(u,r),d=n.maxUploadRetryTime(),(p=new HA(l,"POST",function(e){var t;ZA(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){WA(!1)}return WA(AA(t)),t},d)).urlParams=c,p.headers=h,p.body=f,p.errorHandler=KA(i),p),m=e.authWrapper_.makeRequest(g,t);(e.request_=m).getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var i,r,o,a,s,u,c=(i=e.authWrapper_,r=e.location_,o=t,a=e.blob_,s=i.maxUploadRetryTime(),(u=new HA(o,"POST",function(e){var t=ZA(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){WA(!1)}n||WA(!1);var i=Number(n);return WA(!isNaN(i)),new JA(i,a.size(),"final"===t)},s)).headers={"X-Goog-Upload-Command":"query"},u.errorHandler=KA(r),u),l=e.authWrapper_.makeRequest(c,n);(e.request_=l).getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new JA(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_(function(r){var o;try{o=function(e,t,n,i,r,o,a,s){var u=new JA(0,0);if(u.total=a?(u.current=a.current,a.total):(u.current=0,i.size()),i.size()!==u.total)throw new jb(Vb.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;0<r&&(l=Math.min(l,r));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=i.slice(h,f);if(null===p)throw Gb();var g=t.maxUploadRetryTime(),m=new HA(n,"POST",function(e,n){var r,a=ZA(e,["active","final"]),s=u.current+l,c=i.size();return r="final"===a?GA(t,o)(e,n):null,new JA(s,c,"final"===a,r)},g);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=KA(e),m}(e.location_,e.authWrapper_,i,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(r){return e.error_=r,void e.transition_(dA)}var a=e.authWrapper_.makeRequest(o,r);(e.request_=a).getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(lA)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=YA(e.authWrapper_,e.location_,e.mappings_),i=e.authWrapper_.makeRequest(n,t);(e.request_=i).getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(lA)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,i,r){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=XA(t,i,r),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$A(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=TA.getBlob(c,i,l);if(null===h)throw Gb();var f={name:u.fullPath},d=DA(o),p=e.maxUploadRetryTime(),g=new HA(d,"POST",GA(e,n),p);return g.urlParams=f,g.headers=a,g.body=h.uploadData(),g.errorHandler=KA(t),g}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.authWrapper_.makeRequest(n,t);(e.request_=i).getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(lA)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case hA:case uA:this.state_=e,null!==this.request_&&this.request_.cancel();break;case sA:var t=this.state_===cA;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case cA:this.state_=e,this.notifyObservers_();break;case fA:this.error_=Wb(),this.state_=e,this.notifyObservers_();break;case dA:case lA:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case uA:this.transition_(cA);break;case hA:this.transition_(fA);break;case sA:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=gA(this.state_);return new function(e,t,n,i,r,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=i,this.task=r,this.ref=o}(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,i){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=sw(!0).validator,a=aw(null,!0).validator;function s(e){try{return void o(e)}catch(e){}try{if(a(e),!(vA(e.next)||vA(e.error)||vA(e.complete)))throw"";return}catch(e){throw r}}tw("on",[iw(function(){if(e!==aA.STATE_CHANGED)throw"Expected one of the event types: ["+aA.STATE_CHANGED+"]."}),aw(s,!0),sw(!0),sw(!0)],arguments);var u=this;function c(e){return function(t,n,r){null!==e&&tw("on",e,arguments);var o=new ew(t,n,i);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[aw(function(e){if(null===e)throw r;s(e)}),sw(!0),sw(!0)];return vA(t)||vA(n)||vA(i)?c(null)(t,n,i):c(l)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(gA(this.state_)){case pA.SUCCESS:uw(this.resolve_.bind(null,this.snapshot))();break;case pA.CANCELED:case pA.ERROR:uw(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(gA(this.state_)){case pA.RUNNING:case pA.PAUSED:e.next&&uw(e.next.bind(e,this.snapshot))();break;case pA.SUCCESS:e.complete&&uw(e.complete.bind(e))();break;case pA.CANCELED:case pA.ERROR:e.error&&uw(e.error.bind(e,this.error_))();break;default:e.error&&uw(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){tw("resume",[],arguments);var e=this.state_===cA||this.state_===uA;return e&&this.transition_(sA),e},e.prototype.pause=function(){tw("pause",[],arguments);var e=this.state_===sA;return e&&this.transition_(uA),e},e.prototype.cancel=function(){tw("cancel",[],arguments);var e=this.state_===sA||this.state_===uA;return e&&this.transition_(hA),e},e}(),lw=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof kA?t:kA.makeFromUrl(t)}return e.prototype.toString=function(){return tw("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return function(){if(MA)return MA;var e=[];e.push(new OA("bucket")),e.push(new OA("generation")),e.push(new OA("metageneration")),e.push(new OA("name","fullPath",!0));var t=new OA("name");t.xform=function(e,t){return!AA(n=t)||n.length<2?n:xA(n);var n},e.push(t);var n=new OA("size");return n.xform=function(e,t){return mA(t)?Number(t):t},e.push(n),e.push(new OA("timeCreated")),e.push(new OA("updated")),e.push(new OA("md5Hash",null,!0)),e.push(new OA("cacheControl",null,!0)),e.push(new OA("contentDisposition",null,!0)),e.push(new OA("contentEncoding",null,!0)),e.push(new OA("contentLanguage",null,!0)),e.push(new OA("contentType",null,!0)),e.push(new OA("metadata","customMetadata",!0)),MA=e}()},e.prototype.child=function(e){tw("child",[iw()],arguments);var t,n,i=(t=this.location.path,n=e.split("/").filter(function(e){return 0<e.length}).join("/"),0===t.length?n:t+"/"+n),r=new kA(this.location.bucket,i);return this.newRef(this.authWrapper,r)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new kA(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new kA(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return xA(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),tw("put",[new nw(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||CA()&&e instanceof Blob))throw"Expected Blob or File."}),rw(!0)],arguments),this.throwIfRoot_("put"),new cw(this,this.authWrapper,this.location,this.mappings(),new TA(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=Xb.RAW),tw("putString",[iw(),iw(Jb,!0),rw(!0)],arguments),this.throwIfRoot_("putString");var i=eA(t,e),r=Object.assign({},n);return!mA(r.contentType)&&mA(i.contentType)&&(r.contentType=i.contentType),new cw(this,this.authWrapper,this.location,this.mappings(),new TA(i.data,!0),r)},e.prototype.delete=function(){var e=this;return tw("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var n,i,r,o,a,s=(n=e.authWrapper,r=DA((i=e.location).fullServerUrl()),o=n.maxOperationRetryTime(),(a=new HA(r,"DELETE",function(e,t){},o)).successCodes=[200,204],a.errorHandler=QA(i),a);return e.authWrapper.makeRequest(s,t).getPromise()})},e.prototype.listAll=function(){tw("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},e.prototype.listAllHelper=function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o;return Xi(this,function(a){switch(a.label){case 0:return r={pageToken:t},[4,this.list(r)];case 1:return o=a.sent(),(n=e.prefixes).push.apply(n,er(o.prefixes)),(i=e.items).push.apply(i,er(o.items)),null==o.nextPageToken?[3,3]:[4,this.listAllHelper(e,o.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.list=function(e){tw("list",[(!0,new nw(qA,!0))],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(n){var i=e||{},r=function(e,t,n,i,r){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",0<"/".length&&(o.delimiter="/"),i&&(o.pageToken=i),r&&(o.maxResults=r);var a=DA(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime(),u=new HA(a,"GET",zA(e),s);return u.urlParams=o,u.errorHandler=KA(t),u}(t.authWrapper,t.location,0,i.pageToken,i.maxResults);return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getMetadata=function(){var e=this;return tw("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var n=YA(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){var t=this;return tw("updateMetadata",[rw()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var i,r,o,a,s,u,c,l,h=(i=t.authWrapper,r=t.location,o=e,a=t.mappings(),s=DA(r.fullServerUrl()),u=$A(o,a),c=i.maxOperationRetryTime(),(l=new HA(s,"PATCH",GA(i,a),c)).headers={"Content-Type":"application/json; charset=utf-8"},l.body=u,l.errorHandler=QA(r),l);return t.authWrapper.makeRequest(h,n).getPromise()})},e.prototype.getDownloadURL=function(){var e=this;return tw("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var n,i,r,o,a,s,u=(n=e.authWrapper,i=e.location,r=e.mappings(),o=DA(i.fullServerUrl()),a=n.maxOperationRetryTime(),(s=new HA(o,"GET",function(e,t){return function(n,i){var r=RA(e,i,t);return WA(null!==r),function(e,t){var n=IA(t);if(null===n)return null;if(!AA(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var r=encodeURIComponent;return i.split(",").map(function(t){var n=e.bucket,i=e.fullPath;return DA("/b/"+r(n)+"/o/"+r(i))+NA({alt:"media",token:t})})[0]}(r,i)}}(n,r),a)).errorHandler=QA(i),s);return e.authWrapper.makeRequest(u,t).getPromise().then(function(e){if(null===e)throw new jb(Vb.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw t=e,new jb(Vb.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var t},e}(),hw=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}(),fw=function(){function e(){this.map=new Map,this.id=-9007199254740991}return e.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},e.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},e}(),dw=function(){function e(t,n,i,r,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;mA(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=i,this.pool_=o,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new fw}return e.extractBucket_=function(e){var t=e[Bb]||null;return null==t?null:kA.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&mA(this.app_.INTERNAL)&&mA(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw Kb();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new hw(Kb());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),pw=function(){function e(e,t,n,i,r,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){var i,r=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());vA(s)?r(s):r()}catch(t){o(t)}else null!==a?((i=Hb()).setServerResponseProp(a.getResponseText()),e.errorCallback_?o(e.errorCallback_(a,i)):o(i)):n.canceled?o(i=e.appDelete_?Kb():Wb()):o(i=new jb(Vb.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new gw(!1,null,!0)):this.backoffId_=function(e,t,n){var i=1,r=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){r=setTimeout(function(){r=null,e(h,s())},t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];u||(e?c.call.apply(c,er([null,e],t)):s()||o?c.call.apply(c,er([null,e],t)):(i<64&&(i*=2),l(1===a?(a=2,0):1e3*(i+Math.random()))))}var f=!1;function d(e){f||(f=!0,u||(null!==r?(e||(a=2),clearTimeout(r),l(0)):e||(a=1)))}return l(0),setTimeout(function(){d(o=!0)},n),d}(function(t,n){if(n)t(!1,new gw(!1,null,!0));else{var i=e.pool_.createXhrIo();e.pendingXhr_=i,null!==e.progressCallback_&&i.addUploadProgressListener(r),i.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(r),e.pendingXhr_=null;var i=(n=n).getErrorCode()===iA.NO_ERROR,o=n.getStatus();if(i&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new gw(a,n))}else{var s=n.getErrorCode()===iA.ABORT;t(!1,new gw(!1,null,s))}})}function r(t){var n=t.loaded,i=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,i)}},t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||i},e}(),gw=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function mw(e,t,n){var i,r,o,a,s=NA(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return i=c,null!==(r=t)&&0<r.length&&(i.Authorization="Firebase "+r),o=c,a=void 0!==Yr?Yr.SDK_VERSION:"AppManager",o["X-Firebase-Storage-Version"]="webjs/"+a,new pw(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var vw,yw=function(){function e(e,t,n){if(this.bucket_=null,this.authWrapper_=new dw(e,function(e,t){return new lw(e,t)},mw,this,t),this.app_=e,null!=n)this.bucket_=kA.makeFromBucketSpec(n);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new kA(i,""))}this.internals_=new bw(this)}return e.prototype.ref=function(e){if(tw("ref",[iw(function(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new lw(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},e.prototype.refFromURL=function(e){return tw("refFromURL",[iw(function(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{kA.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new lw(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){tw("setMaxUploadRetryTime",[ow()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){tw("setMaxOperationRetryTime",[ow()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),bw=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},e}();function Aw(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function ww(e,t,n){var i,r=new Promise(function(r,o){Aw(i=e[t].apply(e,n)).then(r,o)});return r.request=i,r}function _w(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function Cw(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return ww(this[t],i,arguments)})})}function Sw(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function Ew(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return e=this[t],(n=ww(e,i,arguments)).then(function(e){if(e)return new kw(e,n.request)});var e,n})})}function Tw(e){this._index=e}function kw(e,t){this._cursor=e,this._request=t}function Iw(e){this._store=e}function xw(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function Dw(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new xw(n)}function Nw(e){this._db=e}vw={TaskState:pA,TaskEvent:aA,StringFormat:Xb,Storage:yw,Reference:lw},Yr.INTERNAL.registerService("storage",function(e,t,n){return new yw(e,new EA,n)},vw,void 0,!0),_w(Tw,"_index",["name","keyPath","multiEntry","unique"]),Cw(Tw,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Ew(Tw,"_index",IDBIndex,["openCursor","openKeyCursor"]),_w(kw,"_cursor",["direction","key","primaryKey","value"]),Cw(kw,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(kw.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),Aw(t._request).then(function(e){if(e)return new kw(e,t._request)})})})}),Iw.prototype.createIndex=function(){return new Tw(this._store.createIndex.apply(this._store,arguments))},Iw.prototype.index=function(){return new Tw(this._store.index.apply(this._store,arguments))},_w(Iw,"_store",["name","keyPath","indexNames","autoIncrement"]),Cw(Iw,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Ew(Iw,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Sw(Iw,"_store",IDBObjectStore,["deleteIndex"]),xw.prototype.objectStore=function(){return new Iw(this._tx.objectStore.apply(this._tx,arguments))},_w(xw,"_tx",["objectStoreNames","mode"]),Sw(xw,"_tx",IDBTransaction,["abort"]),Dw.prototype.createObjectStore=function(){return new Iw(this._db.createObjectStore.apply(this._db,arguments))},_w(Dw,"_db",["name","version","objectStoreNames"]),Sw(Dw,"_db",IDBDatabase,["deleteObjectStore","close"]),Nw.prototype.transaction=function(){return new xw(this._db.transaction.apply(this._db,arguments))},_w(Nw,"_db",["name","version","objectStoreNames"]),Sw(Nw,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[Iw,Tw].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),i=n[n.length-1],r=this._store||this._index,o=r[e].apply(r,n.slice(0,-1));o.onsuccess=function(){i(o.result)}})})}),[Tw,Iw].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,i=[];return new Promise(function(r){n.iterateCursor(e,function(e){e?(i.push(e.value),void 0===t||i.length!=t?e.continue():r(i)):r(i)})})})});var Pw,Ow=1e4,Mw="w:0.2.0",Rw="FIS_v2",$w="https://firebaseinstallations.googleapis.com/v1",Lw=36e5,Fw=((Pw={})["missing-app-config-values"]="Missing App configuration values.",Pw["create-installation-failed"]="Could not register Firebase Installation.",Pw["generate-token-failed"]="Could not generate Auth Token.",Pw["not-registered"]="Firebase Installation is not registered.",Pw["installation-not-found"]="Firebase Installation not found.",Pw["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Pw["app-offline"]="Could not process request. Application offline.",Pw["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Pw),Uw=new gr("installations","Installations",Fw);function Bw(e){return e instanceof pr&&e.code.includes("request-failed")}function jw(e){if(!e||!e.options)throw Uw.create("missing-app-config-values");var t=e.name,n=e.options,i=n.projectId,r=n.apiKey,o=n.appId;if(!(t&&i&&r&&o))throw Uw.create("missing-app-config-values");return{appName:t,projectId:i,apiKey:r,appId:o}}function Vw(e){var t=e.projectId;return $w+"/projects/"+t+"/installations"}function qw(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Hw(e,t){return Yi(this,void 0,void 0,function(){var n,i;return Xi(this,function(r){switch(r.label){case 0:return[4,t.json()];case 1:return n=r.sent(),i=n.error,[2,Uw.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})]}})})}function Ww(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Gw(e,t){var n=t.refreshToken,i=Ww(e);return i.append("Authorization",Rw+" "+n),i}function zw(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return 500<=(t=n.sent()).status&&t.status<600?[2,e()]:[2,t]}})})}function Kw(e){return new Promise(function(t){setTimeout(t,e)})}var Qw=/^[cdef][\w-]{21}$/,Yw="";var Xw="firebase-installations-database",Jw=1,Zw="firebase-installations-store",e_=null;function t_(){var e,t,n;return e_||(e=function(e){switch(e.oldVersion){case 0:e.createObjectStore(Zw)}},t=ww(indexedDB,"open",[Xw,Jw]),(n=t.request)&&(n.onupgradeneeded=function(t){e&&e(new Dw(n.result,t.oldVersion,n.transaction))}),e_=t.then(function(e){return new Nw(e)})),e_}function n_(e,t){return Yi(this,void 0,void 0,function(){var n,i,r;return Xi(this,function(o){switch(o.label){case 0:return n=o_(e),[4,t_()];case 1:return i=o.sent(),[4,(r=i.transaction(Zw,"readwrite")).objectStore(Zw).put(t,n)];case 2:return o.sent(),[4,r.complete];case 3:return o.sent(),[2,t]}})})}function i_(e){return Yi(this,void 0,void 0,function(){var t,n,i;return Xi(this,function(r){switch(r.label){case 0:return t=o_(e),[4,t_()];case 1:return n=r.sent(),[4,(i=n.transaction(Zw,"readwrite")).objectStore(Zw).delete(t)];case 2:return r.sent(),[4,i.complete];case 3:return r.sent(),[2]}})})}function r_(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o,a,s;return Xi(this,function(u){switch(u.label){case 0:return n=o_(e),[4,t_()];case 1:return i=u.sent(),r=i.transaction(Zw,"readwrite"),[4,(o=r.objectStore(Zw)).get(n)];case 2:return a=u.sent(),(s=t(a))===a?[2,s]:void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,r.complete];case 7:return u.sent(),[2,s]}})})}function o_(e){return e.appName+"!"+e.appId}function a_(e){return Yi(this,void 0,void 0,function(){var t,n,i;return Xi(this,function(r){switch(r.label){case 0:return[4,r_(e,function(n){var i=function(e){var t=e||{fid:function(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=(n=e,btoa(String.fromCharCode.apply(String,er(n))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);return Qw.test(t)?t:Yw}catch(e){return Yw}var n}(),registrationStatus:0};return u_(t)?{fid:t.fid,registrationStatus:0}:t}(n),r=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return[4,s_(e)];case 1:t=n.sent(),n.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,Kw(100)];case 3:return n.sent(),[4,s_(e)];case 4:return t=n.sent(),[3,2];case 5:if(0===t.registrationStatus)throw Uw.create("create-installation-failed");return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Uw.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Yi(this,void 0,void 0,function(){var n,i;return Xi(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,7]),[4,function(e,n){var i=t.fid;return Yi(this,void 0,void 0,function(){var t,n,r,o,a,s;return Xi(this,function(u){switch(u.label){case 0:return t=Vw(e),n=Ww(e),r={fid:i,authVersion:Rw,appId:e.appId,sdkVersion:Mw},o={method:"POST",headers:n,body:JSON.stringify(r)},[4,zw(function(){return fetch(t,o)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(s=u.sent()).fid||i,registrationStatus:2,refreshToken:s.refreshToken,authToken:qw(s.authToken)}];case 3:return[4,Hw("Create Installation",a)];case 4:throw u.sent()}})})}(e)];case 1:return n=r.sent(),[2,n_(e,n)];case 2:return Bw(i=r.sent())&&409===i.serverCode?[4,i_(e)]:[3,4];case 3:return r.sent(),[3,6];case 4:return[4,n_(e,{fid:t.fid,registrationStatus:0})];case 5:r.sent(),r.label=6;case 6:throw i;case 7:return[2]}})})}(e,n);return{installationEntry:n,registrationPromise:i}}(e,i);return t=r.registrationPromise,r.installationEntry})];case 1:return(n=r.sent()).fid!==Yw?[3,3]:(i={},[4,t]);case 2:return[2,(i.installationEntry=r.sent(),i)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function s_(e){return r_(e,function(e){if(!e)throw Uw.create("installation-not-found");return u_(e)?{fid:e.fid,registrationStatus:0}:e})}function u_(e){return 1===e.registrationStatus&&e.registrationTime+Ow<Date.now()}function c_(e){return Yi(this,void 0,void 0,function(){var t,n,i;return Xi(this,function(r){switch(r.label){case 0:return[4,r_(e,function(n){if(!h_(n))throw Uw.create("not-registered");var i,r,o,a,s,u=n.authToken;if(2!==(o=u).requestStatus||(a=o,(s=Date.now())<a.creationTime||a.creationTime+a.expiresIn<s+Lw)){if(1===u.requestStatus)return t=function(e){return Yi(this,void 0,void 0,function(){var t,n;return Xi(this,function(i){switch(i.label){case 0:return[4,l_(e)];case 1:t=i.sent(),i.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,Kw(100)];case 3:return i.sent(),[4,l_(e)];case 4:return t=i.sent(),[3,2];case 5:if(0===(n=t.authToken).requestStatus)throw Uw.create("generate-token-failed");return[2,n]}})})}(e),n;if(!navigator.onLine)throw Uw.create("app-offline");var c=(i=n,r={requestStatus:1,requestTime:Date.now()},Qi({},i,{authToken:r}));return t=function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r;return Xi(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o,a;return Xi(this,function(s){switch(s.label){case 0:return u=e,c=t.fid,n=Vw(u)+"/"+c+"/authTokens:generate",i=Gw(e,t),r={installation:{sdkVersion:Mw}},o={method:"POST",headers:i,body:JSON.stringify(r)},[4,zw(function(){return fetch(n,o)})];case 1:return(a=s.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,qw(s.sent())];case 3:return[4,Hw("Generate Auth Token",a)];case 4:throw s.sent()}var u,c})})}(e,t)];case 1:return n=o.sent(),r=Qi({},t,{authToken:n}),[4,n_(e,r)];case 2:return o.sent(),[2,n];case 3:return!Bw(i=o.sent())||401!==i.serverCode&&404!==i.serverCode?[3,5]:[4,i_(e)];case 4:return o.sent(),[3,7];case 5:return r=Qi({},t,{authToken:{requestStatus:0}}),[4,n_(e,r)];case 6:o.sent(),o.label=7;case 7:throw i;case 8:return[2]}})})}(e,c),c}return n})];case 1:return n=r.sent(),t?[4,t]:[3,3];case 2:return i=r.sent(),[3,4];case 3:i=n.authToken,r.label=4;case 4:return[2,i.token]}})})}function l_(e){return r_(e,function(e){if(!h_(e))throw Uw.create("not-registered");var t;return 1===(t=e.authToken).requestStatus&&t.requestTime+Ow<Date.now()?Qi({},e,{authToken:{requestStatus:0}}):e})}function h_(e){return void 0!==e&&2===e.registrationStatus}Yr.INTERNAL.registerService("installations",function(e){return jw(e),{app:e,getId:function(){return function(e){return Yi(this,void 0,void 0,function(){var t,n,i,r;return Xi(this,function(o){switch(o.label){case 0:return[4,a_(t=jw(e))];case 1:return n=o.sent(),i=n.installationEntry,(r=n.registrationPromise)&&r.catch(function(){}),2===i.registrationStatus&&c_(t).catch(function(){}),[2,i.fid]}})})}(e)},getToken:function(){return function(e){return Yi(this,void 0,void 0,function(){var t;return Xi(this,function(n){switch(n.label){case 0:return[4,function(e){return Yi(this,void 0,void 0,function(){var t,n,i;return Xi(this,function(r){switch(r.label){case 0:return[4,a_(e)];case 1:return t=r.sent(),n=t.installationEntry,(i=t.registrationPromise)?[4,i]:[3,3];case 2:return r.sent(),[3,4];case 3:if(2!==n.registrationStatus)throw Uw.create("create-installation-failed");r.label=4;case 4:return[2]}})})}(t=jw(e))];case 1:return n.sent(),[2,c_(t)]}})})}(e)},delete:function(){return function(e){return Yi(this,void 0,void 0,function(){var t,n;return Xi(this,function(i){switch(i.label){case 0:return[4,r_(t=jw(e),function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=i.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Uw.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Uw.create("app-offline");case 3:return[4,function(e,t){return Yi(this,void 0,void 0,function(){var n,i,r,o;return Xi(this,function(a){switch(a.label){case 0:return s=e,u=t.fid,n=Vw(s)+"/"+u,i=Gw(e,t),r={method:"DELETE",headers:i},[4,zw(function(){return fetch(n,r)})];case 1:return(o=a.sent()).ok?[3,3]:[4,Hw("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}var s,u})})}(t,n)];case 4:return i.sent(),[4,i_(t)];case 5:i.sent(),i.label=6;case 6:return[2]}})})}(e)}}});var f_,d_,p_,g_,m_,v_,y_,b_="0.2.11",A_="FB-PERF-TRACE-MEASURE",w_="@firebase/performance/config",__="@firebase/performance/configexpire",C_="Performance",S_=((f_={})["trace started"]="Trace {$traceName} was started before.",f_["trace stopped"]="Trace {$traceName} is not running.",f_["no window"]="Window is not available.",f_["no app id"]="App id is not available.",f_["no project id"]="Project id is not available.",f_["no api key"]="Api key is not available.",f_["invalid cc log"]="Attempted to queue invalid cc event",f_["FB not default"]="Performance can only start when Firebase app instance is the default one.",f_["RC response not ok"]="RC response is not ok",f_),E_=new gr("performance",C_,S_),T_=function(){function e(e){if(!e)throw E_.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver(function(e){var n,i;try{for(var r=Ji(e.getEntries()),o=r.next();!o.done;o=r.next()){var a=o.value;t(a)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===d_&&(d_=new e(p_)),d_},e}(),k_=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw E_.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw E_.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw E_.create("no api key");return e},e.getInstance=function(){return void 0===g_&&(g_=new e),g_},e}();function I_(){return m_}function x_(){switch(T_.getInstance().document.visibilityState){case"visible":return v_.VISIBLE;case"hidden":return v_.HIDDEN;case"prerender":return v_.PRERENDER;default:return v_.UNKNOWN}}(y_=v_||(v_={}))[y_.UNKNOWN=0]="UNKNOWN",y_[y_.VISIBLE=1]="VISIBLE",y_[y_.HIDDEN=2]="HIDDEN",y_[y_.PRERENDER=3]="PRERENDER",y_[y_.UNLOADED=4]="UNLOADED";var D_=new Br(C_);D_.logLevel=Pr.INFO;var N_="0.0.1",P_={loggingEnabled:!0},O_="FIREBASE_INSTALLATIONS_AUTH";var M_="Could not fetch config, will use default configs";function R_(e){if(!e)return e;var t=k_.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=P_.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=$_(t.tracesSamplingRate),t.logNetworkAfterSampling=$_(t.networkRequestsSamplingRate),e}function $_(e){return Math.random()<=e}var L_,F_=1;function U_(){var e;return F_=2,L_=L_||(e=T_.getInstance().document,new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})).then(function(){return(e=k_.getInstance().firebaseAppInstance.installations().getId()).then(function(e){m_=e}),e;var e}).then(function(e){return function(e){var t,n,i=function(){var e=T_.getInstance().localStorage,t=e.getItem(__);if(t&&Number(t)>Date.now()){var n=e.getItem(w_);if(n)try{return JSON.parse(n)}catch(e){return}}}();return i?(R_(i),Promise.resolve()):(t=e,(n=k_.getInstance().firebaseAppInstance.installations().getToken(),n.then(function(e){}),n).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+k_.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+k_.getInstance().getApiKey(),i=new Request(n,{method:"POST",headers:{Authorization:O_+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:k_.getInstance().getAppId(),app_version:b_,sdk_version:N_})});return fetch(i).then(function(e){if(e.ok)return e.json();throw E_.create("RC response not ok")})}).catch(function(){D_.info(M_)})).then(function(e){return R_(e)}).then(function(e){return function(e){if(e){var t=T_.getInstance().localStorage;t.setItem(w_,JSON.stringify(e)),t.setItem(__,String(Date.now()+60*k_.getInstance().configTimeToLive*60*1e3))}}(e)},function(){})}(e)}).then(function(){return B_()},function(){return B_()})}function B_(){F_=3}var j_,V_=3,q_=[];function H_(){if(j_)return j_;var e,t=(e=z_,function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];!function(e){if(!e.eventTime||!e.message)throw E_.create("invalid cc log");q_=er(q_,[e])}({message:e.apply(void 0,er(i)),eventTime:Date.now()})});return(j_=new Br("@firebase/performance/cc")).logHandler=t,j_}function W_(e){var t=k_.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&T_.getInstance().requiredApisAvailable()&&(e.isAuto&&x_()!==v_.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3===F_?G_(e):U_().then(function(){return G_(e)},function(){return G_(e)})))}function G_(e){I_()&&setTimeout(function(){return H_().log(e,1)},0)}function z_(e,t){return 0===t?(i={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},r={application_info:K_(),network_request_metric:i},JSON.stringify(r)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=Q_(e.counters));var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=Q_(n));var i={application_info:K_(),trace_metric:t};return JSON.stringify(i)}(e);var n,i,r}function K_(){return{google_app_id:k_.getInstance().getAppId(),app_instance_id:I_(),web_app_info:{sdk_version:b_,page_url:T_.getInstance().getUrl(),service_worker_status:(e=T_.getInstance().navigator,"serviceWorker"in e?e.serviceWorker.controller?2:3:1),visibility_state:x_(),effective_connection_type:function(){var e=T_.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var e}function Q_(e){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})}!function e(t){setTimeout(function(){if(0!==V_){if(!q_.length)return e(1e4);var t=er(q_);q_=[];var n=t.map(function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}}),i={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:k_.getInstance().logSource,log_event:n};fetch(k_.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(i)}).then(function(e){return e.ok||D_.info("Call to Firebase backend failed."),e.json()}).then(function(t){var n=Number(t.next_request_wait_millis),i=isNaN(n)?1e4:Math.max(1e4,n);V_=3,e(i)}).catch(function(){q_=er(t,q_),V_--,D_.info("Tries left: "+V_+"."),e(1e4)})}},t)}(5500);var Y_=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=T_.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||A_+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw E_.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw E_.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),W_(this)},e.prototype.record=function(e,t,n){var i,r;if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Qi({},n.attributes)),n&&n.metrics)try{for(var o=Ji(Object.keys(n.metrics)),a=o.next();!a.done;a=o.next()){var s=a.value;isNaN(Number(n.metrics[s]))||(this.counters[s]=Number(Math.floor(n.metrics[s])))}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}W_(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&(this.counters[e]=0),this.counters[e]+=t},e.prototype.putMetric=function(e,t){this.counters[e]=t},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){this.customAttributes[e]=t},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return Qi({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,i){var r=T_.getInstance().getUrl();if(r){var o=new e("_wt_"+r,!0),a=Math.floor(1e3*T_.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.incrementMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.incrementMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.incrementMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){var s=n.find(function(e){return"first-paint"===e.name});s&&s.startTime&&o.incrementMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find(function(e){return"first-contentful-paint"===e.name});u&&u.startTime&&o.incrementMetric("_fcp",Math.floor(1e3*u.startTime)),i&&o.incrementMetric("_fid",Math.floor(1e3*i))}W_(o)}},e.createUserTimingTrace=function(t){W_(new e(t,!1,t))},e}();function X_(e){var t=e;if(t&&void 0!==t.responseStart){var n,i,r=T_.getInstance().getTimeOrigin(),o=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,s=Math.floor(1e3*(t.responseEnd-t.startTime)),u={url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:s};n=u,(i=k_.getInstance()).instrumentationEnabled&&n.url!==i.logEndPointUrl.split("?")[0]&&i.loggingEnabled&&i.logNetworkAfterSampling&&setTimeout(function(){return H_().log(n,0)},0)}}var J_=5e3;function Z_(){I_()&&(setTimeout(function(){return function(){var e=T_.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var i=setTimeout(function(){Y_.createOobTrace(t,n),i=void 0},J_);e.onFirstInputDelay(function(e){i&&(clearTimeout(i),Y_.createOobTrace(t,n,e))})}else Y_.createOobTrace(t,n)}()},0),setTimeout(function(){return function(){var e,t,n=T_.getInstance(),i=n.getEntriesByType("resource");try{for(var r=Ji(i),o=r.next();!o.done;o=r.next()){X_(o.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.setupObserver("resource",X_)}()},0),setTimeout(function(){return function(){var e,t,n=T_.getInstance(),i=n.getEntriesByType("measure");try{for(var r=Ji(i),o=r.next();!o.done;o=r.next()){eC(o.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.setupObserver("measure",eC)}()},0))}function eC(e){var t=e.name;t.substring(0,A_.length)!==A_&&Y_.createUserTimingTrace(t)}var tC,nC=function(){function e(e){this.app=e,T_.getInstance().requiredApisAvailable()?U_().then(Z_,Z_):D_.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return e.prototype.trace=function(e){return new Y_(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return k_.getInstance().instrumentationEnabled},set:function(e){k_.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return k_.getInstance().dataCollectionEnabled},set:function(e){k_.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),e}();return tC=window,p_=tC,Yr.INTERNAL.registerService("performance",function(e){if("[DEFAULT]"!==e.name)throw E_.create("FB not default");return k_.getInstance().firebaseAppInstance=e,new nC(e)},{}),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Yr}),function(){var e,t,n,i,r={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(r=function(){var e=[],t=[],n="mdlComponentConfigInternal_";function i(t,n){for(var i=0;i<e.length;i++)if(e[i].className===t)return void 0!==n&&(e[i]=n),e[i];return!1}function r(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function o(e,t){return-1!==r(e).indexOf(t)}function a(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var i=document.createEvent("Events");return i.initEvent(e,t,n),i}function s(t,n){if(void 0===t&&void 0===n)for(var r=0;r<e.length;r++)s(e[r].className,e[r].cssClass);else{var o=t;if(void 0===n){var a=i(o);a&&(n=a.cssClass)}for(var c=document.querySelectorAll("."+n),l=0;l<c.length;l++)u(c[l],o)}}function u(s,u){if(!("object"==typeof s&&s instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var c=a("mdl-componentupgrading",!0,!0);if(s.dispatchEvent(c),!c.defaultPrevented){var l=r(s),h=[];if(u)o(s,u)||h.push(i(u));else{var f=s.classList;e.forEach(function(e){f.contains(e.cssClass)&&-1===h.indexOf(e)&&!o(s,e.className)&&h.push(e)})}for(var d,p=0,g=h.length;p<g;p++){if(!(d=h[p]))throw new Error("Unable to find a registered component for the given class.");l.push(d.className),s.setAttribute("data-upgraded",l.join(","));var m=new d.classConstructor(s);m[n]=d,t.push(m);for(var v=0,y=d.callbacks.length;v<y;v++)d.callbacks[v](s);d.widget&&(s[d.className]=m);var b=a("mdl-componentupgraded",!0,!1);s.dispatchEvent(b)}}}function c(e){if(e){var i=t.indexOf(e);t.splice(i,1);var r=e.element_.getAttribute("data-upgraded").split(","),o=r.indexOf(e[n].classAsString);r.splice(o,1),e.element_.setAttribute("data-upgraded",r.join(","));var s=a("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(s)}}return{upgradeDom:s,upgradeElement:u,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,i=0,r=t.length;i<r;i++)(n=t[i])instanceof HTMLElement&&(u(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var t=0;t<e.length;t++)s(e[t].className)},registerUpgradedCallback:function(e,t){var n=i(e);n&&n.callbacks.push(t)},register:function(t){var r=!0;void 0===t.widget&&void 0===t.widget||(r=t.widget||t.widget);var o={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:r,callbacks:[]};if(e.forEach(function(e){if(e.cssClass===o.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===o.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have "+n+" defined as a property.");i(t.classAsString,o)||e.push(o)},downgradeElements:function(e){var n=function(e){t.filter(function(t){return t.element_===e}).forEach(c)};if(e instanceof Array||e instanceof NodeList)for(var i=0;i<e.length;i++)n(e[i]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(e)}}}}()).ComponentConfigPublic,r.ComponentConfig,r.Component,r.upgradeDom=r.upgradeDom,r.upgradeElement=r.upgradeElement,r.upgradeElements=r.upgradeElements,r.upgradeAllRegistered=r.upgradeAllRegistered,r.registerUpgradedCallback=r.registerUpgradedCallback,r.register=r.register,r.downgradeElements=r.downgradeElements,window.componentHandler=r,window.componentHandler=r,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),r.upgradeAllRegistered()):(r.upgradeElement=function(){},r.register=function(){})}),e=function(e){this.element_=e,this.init()},window.MaterialButton=e,e.prototype.Constant_={},e.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},e.prototype.blurHandler_=function(e){e&&this.element_.blur()},e.prototype.disable=function(){this.element_.disabled=!0},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.element_.disabled=!1},e.prototype.enable=e.prototype.enable,e.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},r.register({constructor:e,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0}),t=function(e){this.element_=e,this.init()},window.MaterialProgress=t,t.prototype.Constant_={},t.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},t.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},t.prototype.setProgress=t.prototype.setProgress,t.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},t.prototype.setBuffer=t.prototype.setBuffer,t.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},r.register({constructor:t,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0}),n=function(e){this.element_=e,this.init()},window.MaterialSpinner=n,n.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},n.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},n.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[n,i,r],a=0;a<o.length;a++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}t.appendChild(n),t.appendChild(i),t.appendChild(r),this.element_.appendChild(t)},n.prototype.createLayer=n.prototype.createLayer,n.prototype.stop=function(){this.element_.classList.remove("is-active")},n.prototype.stop=n.prototype.stop,n.prototype.start=function(){this.element_.classList.add("is-active")},n.prototype.start=n.prototype.start,n.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},r.register({constructor:n,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0}),i=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()},window.MaterialTextfield=i,i.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},i.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},i.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},i.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},i.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},i.prototype.onReset_=function(e){this.updateClasses_()},i.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},i.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},i.prototype.checkDisabled=i.prototype.checkDisabled,i.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},i.prototype.checkFocus=i.prototype.checkFocus,i.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},i.prototype.checkValidity=i.prototype.checkValidity,i.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},i.prototype.checkDirty=i.prototype.checkDirty,i.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},i.prototype.disable=i.prototype.disable,i.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},i.prototype.enable=i.prototype.enable,i.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},i.prototype.change=i.prototype.change,i.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},r.register({constructor:i,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0}),function(){var e=window.CustomEvent;function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function n(e){e&&e.blur&&e!==document.body&&e.blur()}function i(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function r(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function o(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,i=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),r=function(r){if(r.target===e){var o="DOMNodeRemoved";n|=r.type.substr(0,o.length)===o,window.clearTimeout(t),t=window.setTimeout(i,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,r)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),o.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),a.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}n(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!a.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,a.needsCentering(this.dialog_)?(a.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var a={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(e){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(e){}if(s&&i(s,e)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!a.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new o(e)},registerDialog:function(e){e.showModal||a.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,i=0;t=e.removedNodes[i];++i)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))}};if(a.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},a.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},a.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var i=this.pendingDialogStack[0];i?(i.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},a.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var n,i=0;n=this.pendingDialogStack[i];++i)if(n.dialog===e)return 0===i;e=e.parentElement}return!1},a.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),n(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},a.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),i=this.pendingDialogStack[0];i&&i.dialog.dispatchEvent(n)&&i.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},a.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},a.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},a.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},a.dm=new a.DialogManager,a.formSubmitter=null,a.useValue=null,void 0===window.HTMLDialogElement){var s=document.createElement("form");if(s.setAttribute("method","dialog"),"dialog"!==s.method){var u=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(u){var c=u.get;u.get=function(){return r(this)?"dialog":c.call(this)};var l=u.set;u.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):l.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",u)}}document.addEventListener("click",function(e){if(a.formSubmitter=null,a.useValue=null,!e.defaultPrevented){var n=e.target;if(n&&r(n.form)){if(!("submit"===n.type&&["button","input"].indexOf(n.localName)>-1)){if("input"!==n.localName||"image"!==n.type)return;a.useValue=e.offsetX+","+e.offsetY}t(n)&&(a.formSubmitter=n)}}},!1);var h=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!r(this))return h.call(this);var e=t(this);e&&e.close()},document.addEventListener("submit",function(e){var n=e.target;if(r(n)){e.preventDefault();var i=t(n);if(i){var o=a.formSubmitter;o&&o.form===n?i.close(a.useValue||o.value):i.close(),a.formSubmitter=null}}},!0)}a.forceRegisterDialog=a.forceRegisterDialog,a.registerDialog=a.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return a}):"object"==typeof module&&"object"==typeof module.exports?module.exports=a:window.dialogPolyfill=a}(),function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(e)}}!function(e,i){if(i){var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in r||(r[a]={}),r=r[a]}(i=i(o=r[e=e[e.length-1]]))!=o&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Promise",function(e){function t(e){this.g=0,this.h=void 0,this.a=[];var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;r.prototype.g=function(e){if(null==this.a){this.a=[];var t=this;this.h(function(){t.i()})}this.a.push(e)};var a=n.setTimeout;r.prototype.h=function(e){a(e,0)},r.prototype.i=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.a=null},r.prototype.j=function(e){this.h(function(){throw e})},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.I),reject:e(this.i)}},t.prototype.I=function(e){if(e===this)this.i(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.K(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.v(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(e){return void this.i(e)}"function"==typeof t?this.O(t,e):this.v(e)},t.prototype.i=function(e){this.w(2,e)},t.prototype.v=function(e){this.w(1,e)},t.prototype.w=function(e,t){if(0!=this.g)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.g);this.g=e,this.h=t,this.C()},t.prototype.C=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.g(this.a[e]);this.a=null}};var s=new r;return t.prototype.K=function(e){var t=this.j();e.Da(t.resolve,t.reject)},t.prototype.O=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){o(e)}}:t}var r,o,a=new t(function(e,t){r=e,o=t});return this.Da(i(e,r),i(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Da=function(e,t){function n(){switch(i.g){case 1:e(i.h);break;case 2:t(i.h);break;default:throw Error("Unexpected state: "+i.g)}}var i=this;null==this.a?s.g(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Da(t,n)})},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t(function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Da(i(a.length-1),t),r=n.next()}while(!r.done)})},t});var r=this;function o(e){return void 0!==e}function a(e){return"string"==typeof e}var s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(){}function l(e){e.V=void 0,e.Sa=function(){return e.V?e.V:e.V=new e}}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return null!=e}function d(e){return"array"==h(e)}function p(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function g(e){return"function"==h(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function A(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:A).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function C(e,t){for(var n in t)e[n]=t[n]}var S,E=Date.now||function(){return+new Date};function T(e,t){e=e.split(".");var n,i=r;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)!e.length&&o(t)?i[n]=t:i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}}function k(e,t){function n(){}n.prototype=t.prototype,e.o=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.fc=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}function I(e){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function x(e,t){for(var n="",i=(e=e.split("%s")).length-1,r=0;r<i;r++)n+=e[r]+(r<t.length?t[r]:"%s");I.call(this,n+e[i])}function D(e,t){throw new x("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}k(I,Error),I.prototype.name="CustomError",k(x,I),x.prototype.name="AssertionError";var N=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},P=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,r=a(e)?e.split(""):e,o=0;o<i;o++)o in r&&t.call(n,r[o],o,e)};var O=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=[],r=0,o=a(e)?e.split(""):e,s=0;s<n;s++)if(s in o){var u=o[s];t.call(void 0,u,s,e)&&(i[r++]=u)}return i},M=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),r=a(e)?e.split(""):e,o=0;o<n;o++)o in r&&(i[o]=t.call(void 0,r[o],o,e));return i},R=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=a(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e))return!0;return!1};function $(e,t,n){for(var i=e.length,r=a(e)?e.split(""):e,o=0;o<i;o++)if(o in r&&t.call(n,r[o],o,e))return o;return-1}function L(e,t){return 0<=N(e,t)}function F(e,t){var n;return(n=0<=(t=N(e,t)))&&U(e,t),n}function U(e,t){return 1==Array.prototype.splice.call(e,t,1).length}function B(e,t){!function(e,t){for(var n=a(e)?e.split(""):e,i=e.length-1;0<=i;--i)i in n&&t.call(void 0,n[i],i,e)}(e,function(n,i){t.call(void 0,n,i,e)&&U(e,i)&&0})}function j(e){return Array.prototype.concat.apply([],arguments)}function V(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}function q(e,t,n,i){return Array.prototype.splice.apply(e,H(arguments,1))}function H(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}var W,G=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},z=/&/g,K=/</g,Q=/>/g,Y=/"/g,X=/'/g,J=/\x00/g,Z=/[\x00&<>"']/;function ee(e,t){return e<t?-1:e>t?1:0}e:{var te=r.navigator;if(te){var ne=te.userAgent;if(ne){W=ne;break e}}W=""}function ie(e){return-1!=W.indexOf(e)}function re(e,t,n){for(var i in e)t.call(n,e[i],i,e)}function oe(e){var t,n={};for(t in e)n[t]=e[t];return n}var ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(e,t){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])e[n]=i[n];for(var o=0;o<ae.length;o++)n=ae[o],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function ue(){return(ie("Chrome")||ie("CriOS"))&&!ie("Edge")}function ce(e){return Z.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(z,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(K,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(Q,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(Y,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(X,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(J,"&#0;"))),e}function le(e){return le[" "](e),e}le[" "]=c;var he,fe,de=ie("Opera"),pe=ie("Trident")||ie("MSIE"),ge=ie("Edge"),me=ge||pe,ve=ie("Gecko")&&!(-1!=W.toLowerCase().indexOf("webkit")&&!ie("Edge"))&&!(ie("Trident")||ie("MSIE"))&&!ie("Edge"),ye=-1!=W.toLowerCase().indexOf("webkit")&&!ie("Edge"),be=ye&&ie("Mobile"),Ae=ie("Macintosh");function we(){var e=r.document;return e?e.documentMode:void 0}e:{var _e="",Ce=(fe=W,ve?/rv:([^\);]+)(\)|;)/.exec(fe):ge?/Edge\/([\d\.]+)/.exec(fe):pe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fe):ye?/WebKit\/(\S+)/.exec(fe):de?/(?:Version)[ \/]?(\S+)/.exec(fe):void 0);if(Ce&&(_e=Ce?Ce[1]:""),pe){var Se=we();if(null!=Se&&Se>parseFloat(_e)){he=String(Se);break e}}he=_e}var Ee,Te={};function ke(e){return function(e,t){var n=Te;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(){for(var t=0,n=G(String(he)).split("."),i=G(String(e)).split("."),r=Math.max(n.length,i.length),o=0;0==t&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ee(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ee(0==a[2].length,0==s[2].length)||ee(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}var Ie=r.document;function xe(e,t){this.a=e===Pe&&t||"",this.g=Ne}function De(e){return e instanceof xe&&e.constructor===xe&&e.g===Ne?e.a:(D("expected object of type Const, got '"+e+"'"),"type_error:Const")}Ee=Ie&&pe?we()||("CSS1Compat"==Ie.compatMode?parseInt(he,10):5):void 0,xe.prototype.ka=!0,xe.prototype.ia=function(){return this.a},xe.prototype.toString=function(){return"Const{"+this.a+"}"};var Ne={},Pe={};function Oe(){this.a="",this.h=Re}function Me(e){return e instanceof Oe&&e.constructor===Oe&&e.h===Re?e.a:(D("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}Oe.prototype.ka=!0,Oe.prototype.ia=function(){return this.a.toString()},Oe.prototype.g=function(){return 1},Oe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Re={};function $e(e){var t=new Oe;return t.a=e,t}function Le(){this.a="",this.h=Ve}function Fe(e){return Ue(e).toString()}function Ue(e){return e instanceof Le&&e.constructor===Le&&e.h===Ve?e.a:(D("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}Le.prototype.ka=!0,Le.prototype.ia=function(){return this.a.toString()},Le.prototype.g=function(){return 1},Le.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Be=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function je(e){return e instanceof Le?e:(e="object"==typeof e&&e.ka?e.ia():String(e),Be.test(e)||(e="about:invalid#zClosurez"),qe(e))}var Ve={};function qe(e){var t=new Le;return t.a=e,t}function He(){this.a="",this.g=We}qe("about:blank"),He.prototype.ka=!0;var We={};function Ge(){this.a="",this.j=Ke,this.h=null}function ze(e){return e instanceof Ge&&e.constructor===Ge&&e.j===Ke?e.a:(D("expected object of type SafeHtml, got '"+e+"' of type "+h(e)),"type_error:SafeHtml")}He.prototype.ia=function(){return this.a},He.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},Ge.prototype.g=function(){return this.h},Ge.prototype.ka=!0,Ge.prototype.ia=function(){return this.a.toString()},Ge.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ke={};function Qe(e,t){var n=new Ge;return n.a=e,n.h=t,n}Qe("<!DOCTYPE html>",0);var Ye=Qe("",0);Qe("<br>",0);var Xe,Je,Ze=(Je=!1,function(){return Je||(Xe=function(){if("undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!!e.firstChild&&(t=e.firstChild.firstChild,e.innerHTML=ze(Ye),!t.parentElement)}(),Je=!0),Xe});function et(e,t){this.a=o(e)?e:0,this.g=o(t)?t:0}function tt(e,t){this.width=e,this.height=t}function nt(e){return e?new ft(ct(e)):S||(S=new ft)}function it(e,t){var n=t||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):ot(document,e,t)}function rt(e,t){var n=t||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var i=t||n;e=i.querySelectorAll&&i.querySelector&&e?i.querySelector(e?"."+e:""):ot(n,e,t)[0]||null}return e||null}function ot(e,t,n){var i;if((e=n||e).querySelectorAll&&e.querySelector&&t)return e.querySelectorAll(t?"."+t:"");if(t&&e.getElementsByClassName){var r=e.getElementsByClassName(t);return r}if(r=e.getElementsByTagName("*"),t){var o={};for(n=i=0;e=r[n];n++){var a=e.className;"function"==typeof a.split&&L(a.split(/\s+/),t)&&(o[i++]=e)}return o.length=i,o}return r}et.prototype.toString=function(){return"("+this.a+", "+this.g+")"},et.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},et.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},et.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(e=tt.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},e.aspectRatio=function(){return this.width/this.height},e.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},e.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},e.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var at={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function st(e){return e.scrollingElement?e.scrollingElement:(ye||"CSS1Compat"!=e.compatMode)&&e.body||e.documentElement}function ut(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ct(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function lt(e,t){if("textContent"in e)e.textContent=t;else if(3==e.nodeType)e.data=String(t);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(ct(e).createTextNode(String(t)))}}function ht(e,t){return t?function(e,t){for(;e;){if(t(e))return e;e=e.parentNode,0}return null}(e,function(e){return!t||a(e.className)&&L(e.className.split(/\s+/),t)}):null}function ft(e){this.a=e||r.document||document}ft.prototype.N=function(){return a(void 0)?this.a.getElementById(void 0):void 0};var dt="StopIteration"in r?r.StopIteration:{message:"StopIteration",stack:""};function pt(){}function gt(e){if(e instanceof pt)return e;if("function"==typeof e.fa)return e.fa(!1);if(p(e)){var t=0,n=new pt;return n.next=function(){for(;;){if(t>=e.length)throw dt;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")}function mt(e){if(p(e))return V(e);var t=[];return function(e,t){if(p(e))try{P(e,t,void 0)}catch(e){if(e!==dt)throw e}else{e=gt(e);try{for(;;)t.call(void 0,e.next(),void 0,e)}catch(e){if(e!==dt)throw e}}}(e=gt(e),function(e){t.push(e)}),t}function vt(e,t){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof vt)for(n=e.ha(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function yt(e){if(e.h!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];bt(e.g,i)&&(e.a[n++]=i),t++}e.a.length=n}if(e.h!=e.a.length){var r={};for(n=t=0;t<e.a.length;)bt(r,i=e.a[t])||(e.a[n++]=i,r[i]=1),t++;e.a.length=n}}function bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}pt.prototype.next=function(){throw dt},pt.prototype.fa=function(){return this},(e=vt.prototype).ja=function(){yt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.g[this.a[t]]);return e},e.ha=function(){return yt(this),this.a.concat()},e.clear=function(){this.g={},this.j=this.h=this.a.length=0},e.get=function(e,t){return bt(this.g,e)?this.g[e]:t},e.set=function(e,t){bt(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=t},e.forEach=function(e,t){for(var n=this.ha(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);e.call(t,o,r,this)}},e.fa=function(e){yt(this);var t=0,n=this.j,i=this,r=new pt;return r.next=function(){if(n!=i.j)throw Error("The map has changed since the iterator was created");if(t>=i.a.length)throw dt;var r=i.a[t++];return e?r:i.g[r]},r};var At=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wt(e,t,n,i){for(var r=n.length;0<=(t=e.indexOf(n,t))&&t<i;){var o=e.charCodeAt(t-1);if((38==o||63==o)&&(!(o=e.charCodeAt(t+r))||61==o||38==o||35==o))return t;t+=r+1}return-1}var _t=/#|$/;function Ct(e,t){var n=e.search(_t),i=wt(e,0,t,n);if(0>i)return null;var r=e.indexOf("&",i);return(0>r||r>n)&&(r=n),i+=t.length+1,decodeURIComponent(e.substr(i,r-i).replace(/\+/g," "))}var St=/[?&]($|#)/;function Et(e,t){var n;this.h=this.w=this.j="",this.C=null,this.i=this.g="",this.v=!1,e instanceof Et?(this.v=o(t)?t:e.v,Tt(this,e.j),this.w=e.w,this.h=e.h,kt(this,e.C),this.g=e.g,It(this,qt(e.a)),this.i=e.i):e&&(n=String(e).match(At))?(this.v=!!t,Tt(this,n[1]||"",!0),this.w=Nt(n[2]||""),this.h=Nt(n[3]||"",!0),kt(this,n[4]),this.g=Nt(n[5]||"",!0),It(this,n[6]||"",!0),this.i=Nt(n[7]||"")):(this.v=!!t,this.a=new Ut(null,this.v))}function Tt(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.C=t}else e.C=null}function It(e,t,n){t instanceof Ut?(e.a=t,function(e,t){t&&!e.j&&(Bt(e),e.h=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(jt(this,t),jt(this,n),0<e.length&&(this.h=null,this.a.set(Ht(this,n),V(e)),this.g+=e.length))},e)),e.j=t}(e.a,e.v)):(n||(t=Pt(t,Lt)),e.a=new Ut(t,e.v))}function xt(e){return e instanceof Et?new Et(e):new Et(e,void 0)}function Dt(e,t){return e instanceof Et||(e=xt(e)),t instanceof Et||(t=xt(t)),e.resolve(t)}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pt(e,t,n){return a(e)?(e=encodeURI(e).replace(t,Ot),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ot(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Et.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pt(t,Mt,!0),":");var n=this.h;return(n||"file"==t)&&(e.push("//"),(t=this.w)&&e.push(Pt(t,Mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pt(n,"/"==n.charAt(0)?$t:Rt,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Pt(n,Ft)),e.join("")},Et.prototype.resolve=function(e){var t=new Et(this),n=!!e.j;n?Tt(t,e.j):n=!!e.w,n?t.w=e.w:n=!!e.h,n?t.h=e.h:n=null!=e.C;var i=e.g;if(n)kt(t,e.C);else if(n=!!e.g){if("/"!=i.charAt(0))if(this.h&&!this.g)i="/"+i;else{var r=t.g.lastIndexOf("/");-1!=r&&(i=t.g.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?t.g=i:n=""!==e.a.toString(),n?It(t,qt(e.a)):n=!!e.i,n&&(t.i=e.i),t};var Mt=/[#\/\?@]/g,Rt=/[#\?:]/g,$t=/[#\?]/g,Lt=/[#\?@]/g,Ft=/#/g;function Ut(e,t){this.g=this.a=null,this.h=e||null,this.j=!!t}function Bt(e){e.a||(e.a=new vt,e.g=0,e.h&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.h,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function jt(e,t){Bt(e),t=Ht(e,t),bt(e.a.g,t)&&(e.h=null,e.g-=e.a.get(t).length,bt((e=e.a).g,t)&&(delete e.g[t],e.h--,e.j++,e.a.length>2*e.h&&yt(e)))}function Vt(e,t){return Bt(e),t=Ht(e,t),bt(e.a.g,t)}function qt(e){var t=new Ut;return t.h=e.h,e.a&&(t.a=new vt(e.a),t.g=e.g),t}function Ht(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(e=Ut.prototype).add=function(e,t){Bt(this),this.h=null,e=Ht(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.g+=1,this},e.clear=function(){this.a=this.h=null,this.g=0},e.forEach=function(e,t){Bt(this),this.a.forEach(function(n,i){P(n,function(n){e.call(t,n,i,this)},this)},this)},e.ha=function(){Bt(this);for(var e=this.a.ja(),t=this.a.ha(),n=[],i=0;i<t.length;i++)for(var r=e[i],o=0;o<r.length;o++)n.push(t[i]);return n},e.ja=function(e){Bt(this);var t=[];if(a(e))Vt(this,e)&&(t=j(t,this.a.get(Ht(this,e))));else{e=this.a.ja();for(var n=0;n<e.length;n++)t=j(t,e[n])}return t},e.set=function(e,t){return Bt(this),this.h=null,Vt(this,e=Ht(this,e))&&(this.g-=this.a.get(e).length),this.a.set(e,[t]),this.g+=1,this},e.get=function(e,t){return e&&0<(e=this.ja(e)).length?String(e[0]):t},e.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],t=this.a.ha(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.ja(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),e.push(a)}}return this.h=e.join("&")};var Wt={qc:!0},Gt={sc:!0},zt={pc:!0},Kt={rc:!0};function Qt(){throw Error("Do not instantiate directly")}function Yt(e,t,n,i){if(e=e(t||Jt,void 0,n),i=(i||nt()).a.createElement("DIV"),(e=function(e){if(!m(e))return ce(String(e));if(e instanceof Qt){if(e.da===Wt)return e.content;if(e.da===Kt)return ce(e.content)}return D("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}(e)).match(Xt),e=Qe(e,null),Ze())for(;i.lastChild;)i.removeChild(i.lastChild);return i.innerHTML=ze(e),1==i.childNodes.length&&(1==(e=i.firstChild).nodeType&&(i=e)),i}Qt.prototype.ta=null,Qt.prototype.toString=function(){return this.content};var Xt=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,Jt={};function Zt(){Qt.call(this)}function en(e){return null!=e&&e.da===Wt?e:e instanceof Ge?on(ze(e).toString(),e.g()):on(ce(String(String(e))),function(e){if(null!=e)switch(e.ta){case 1:return 1;case-1:return-1;case 0:return 0}return null}(e))}function tn(){Qt.call(this)}function nn(e,t){this.content=String(e),this.ta=null!=t?t:null}function rn(e){return new nn(e,void 0)}k(Zt,Qt),Zt.prototype.da=Wt,k(tn,Qt),tn.prototype.da=Gt,tn.prototype.ta=1,k(nn,Qt),nn.prototype.da=Kt;var on=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return e=new t(String(e)),void 0!==n&&(e.ta=n),e}}(Zt),an=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e){return new t(String(e))}}(tn);function sn(e){return(e=String(e))?new nn(e,void 0):""}var un=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new t(e),void 0!==n&&(e.ta=n),e):""}}(Zt);function cn(e){return null!=e&&e.da===Wt?String(String(e.content).replace(bn,"").replace(An,"&lt;")).replace(gn,fn):ce(String(e))}function ln(e){return null!=e&&e.da===Gt?e=String(e).replace(mn,pn):e instanceof Le?e=String(Fe(e)).replace(mn,pn):(e=String(e),yn.test(e)?e=e.replace(mn,pn):(D("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz")),e}var hn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function fn(e){return hn[e]}var dn={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function pn(e){return dn[e]}var gn=/[\x00\x22\x27\x3c\x3e]/g,mn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,vn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,yn=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,bn=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,An=/</g;function wn(){return rn("Enter a valid phone number")}function _n(){return rn("Something went wrong. Please try again.")}function Cn(){return rn("This email already exists without any means of sign-in. Please reset the password to recover.")}function Sn(){return rn("Please login again to perform this operation")}function En(e,t,n){if(this.code=Tn+e,!(e=t)){switch(e="",this.code){case"firebaseui/merge-conflict":e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:e+=_n()}e=rn(e).toString()}this.message=e||"",this.credential=n||null}k(En,Error),En.prototype.na=function(){return{code:this.code,message:this.message}},En.prototype.toJSON=function(){return this.na()};var Tn="firebaseui/";function kn(){this.V={}}function In(e,t,n){if(t.toLowerCase()in e.V)throw Error("Configuration "+t+" has already been defined.");e.V[t.toLowerCase()]=n}function xn(e,t,n){if(!(t.toLowerCase()in e.V))throw Error("Configuration "+t+" is not defined.");e.V[t.toLowerCase()]=n}function Dn(e,t){if(!(e=e.get(t)))throw Error("Configuration "+t+" is required.");return e}function Nn(){this.g=void 0,this.a={}}function Pn(e,t,n,i){for(var r=0;r<t.length;r++){var o=t.charAt(r);e.a[o]||(e.a[o]=new Nn),e=e.a[o]}if(i&&void 0!==e.g)throw Error('The collection already contains the key "'+t+'"');e.g=n}function On(e){for(this.a=e,this.g=new Nn,e=0;e<this.a.length;e++){var t=this.g.get("+"+this.a[e].b);t?t.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function Mn(e,t){var n={},i=0;for(void 0!==(e=e.g).g&&(n[i]=e.g);i<t.length;i++){var r=t.charAt(i);if(!(r in e.a))break;void 0!==(e=e.a[r]).g&&(n[i]=e.g)}for(var o in n)if(n.hasOwnProperty(o))return n[o];return[]}function Rn(e){for(var t=0;t<Un.length;t++)if(Un[t].c===e)return Un[t];return null}function $n(e){e=e.toUpperCase();for(var t=[],n=0;n<Un.length;n++)Un[n].f===e&&t.push(Un[n]);return t}function Ln(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var t=[],n=0;n<Un.length;n++)Un[n].b==e&&t.push(Un[n]);e=t}else e=$n(e);return e}function Fn(e){e.sort(function(e,t){return e.name.localeCompare(t.name,"en")})}kn.prototype.get=function(e){if(!(e.toLowerCase()in this.V))throw Error("Configuration "+e+" is not defined.");return this.V[e.toLowerCase()]},(e=Nn.prototype).set=function(e,t){Pn(this,e,t,!1)},e.add=function(e,t){Pn(this,e,t,!0)},e.get=function(e){e:{for(var t=this,n=0;n<e.length;n++)if(!(t=t.a[e.charAt(n)])){e=void 0;break e}e=t}return e?e.g:void 0},e.ja=function(){var e=[];return function e(t,n){void 0!==t.g&&n.push(t.g);for(var i in t.a)e(t.a[i],n)}(this,e),e},e.ha=function(){var e=[];return function e(t,n,i){void 0!==t.g&&i.push(n);for(var r in t.a)e(t.a[r],n+r,i)}(this,"",e),e},e.clear=function(){this.a={},this.g=void 0};var Un=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];Fn(Un);var Bn=new On(Un);function jn(e,t){this.a=e,this.va=t}function Vn(e){e=G(e);var t=Mn(Bn,e);return 0<t.length?new jn("1"==t[0].b?"1-US-0":t[0].c,G(e.substr(t[0].b.length+1))):null}function qn(e){var t=Rn(e.a);if(!t)throw Error("Country ID "+e.a+" not found.");return"+"+t.b+e.va}function Hn(e,t){for(var n=0;n<e.length;n++)if(!L(Wn,e[n])&&(null!==Gn&&e[n]in Gn||L(t,e[n])))return e[n];return null}var Wn=["emailLink","password","phone"],Gn={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"},zn=Object.freeze||function(e){return e};function Kn(e,t,n){this.reset(e,t,n,void 0,void 0)}Kn.prototype.a=null;function Qn(e){this.i=e,this.a=this.h=this.j=this.g=null}function Yn(e,t){this.name=e,this.value=t}Kn.prototype.reset=function(e,t,n,i,r){"number"==typeof r||0,this.h=i||E(),this.j=e,this.i=t,this.g=n,delete this.a},Yn.prototype.toString=function(){return this.name};var Xn=new Yn("SEVERE",1e3),Jn=new Yn("WARNING",900),Zn=new Yn("CONFIG",700);Qn.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.j?t.j:t.g?e(t.g):(D("Root logger has no level set."),null)}(this).value)for(g(t)&&(t=t()),e=new Kn(e,String(t),this.i),n&&(e.a=n),n=this;n;){var i=n,r=e;if(i.a)for(var o=0;t=i.a[o];o++)t(r);n=n.g}};var ei={},ti=null;function ni(){ti||(ti=new Qn(""),ei[""]=ti,ti.j=Zn)}function ii(){this.a=E()}var ri=null;function oi(e){this.j=e||"",ri||(ri=new ii),this.i=ri}function ai(e){return 10>e?"0"+e:String(e)}function si(e){oi.call(this,e)}function ui(){this.i=w(this.h,this),this.a=new si,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}ii.prototype.set=function(e){this.a=e},ii.prototype.reset=function(){this.set(E())},ii.prototype.get=function(){return this.a},oi.prototype.a=!0,oi.prototype.g=!0,oi.prototype.h=!1,k(si,oi),ui.prototype.h=function(e){if(!this.j[e.g]){var t=function(e,t){var n=[];if(n.push(e.j," "),e.g){var i=new Date(t.h);n.push("[",ai(i.getFullYear()-2e3)+ai(i.getMonth()+1)+ai(i.getDate())+" "+ai(i.getHours())+":"+ai(i.getMinutes())+":"+ai(i.getSeconds())+"."+ai(Math.floor(i.getMilliseconds()/10)),"] ")}return n.push("[",function(e,t){t=(e=(e.h-t)/1e3).toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)t=" "+t;return t}(t,e.i.get()),"s] "),n.push("[",t.g,"] "),n.push(t.i),e.h&&(t=t.a)&&n.push("\n",t instanceof Error?t.message:t.toString()),e.a&&n.push("\n"),n.join("")}(this.a,e);if(li)!function(e,t,n,i){e[t]?e[t](n,i||""):e.log(n,i||"")}(li,function(e){if(e){if(e.value>=Xn.value)return"error";if(e.value>=Jn.value)return"warn";if(e.value>=Zn.value)return"log"}return"debug"}(e.j),t,e.a)}};var ci,li=r.console;function hi(e,t){ci&&ci.log(Xn,e,t)}ci=function e(t){var n;if(ni(),!(n=ei[t])){n=new Qn(t);var i=t.lastIndexOf("."),r=t.substr(i+1);(i=e(t.substr(0,i))).h||(i.h={}),i.h[r]=n,n.g=i,ei[t]=n}return n}("firebaseui");var fi=new ui;if(1!=fi.g){var di;ni(),di=ti;var pi=fi.i;di.a||(di.a=[]),di.a.push(pi),fi.g=!0}function gi(e){ci&&ci.log(Jn,e,void 0)}function mi(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function vi(e,t){this.h=e,this.j=t,this.g=0,this.a=null}function yi(e,t){e.j(t),100>e.g&&(e.g++,t.next=e.a,e.a=t)}function bi(){this.g=this.a=null}vi.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var Ai,wi,_i=new vi(function(){return new Si},function(e){e.reset()});function Ci(){var e=Ii,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.g=null),t.next=null),t}function Si(){this.next=this.g=this.a=null}function Ei(e){r.setTimeout(function(){throw e},0)}function Ti(e,t){wi||function(){if(r.Promise&&r.Promise.resolve){var e=r.Promise.resolve(void 0);wi=function(){e.then(xi)}}else wi=function(){var e=xi;!g(r.setImmediate)||r.Window&&r.Window.prototype&&!ie("Edge")&&r.Window.prototype.setImmediate==r.setImmediate?(Ai||(Ai=function(){var e=r.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ie("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=w(function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),void 0!==e&&!ie("Trident")&&!ie("MSIE")){var t=new e,n={},i=n;return t.port1.onmessage=function(){if(o(n.next)){var e=(n=n.next).ab;n.ab=null,e()}},function(e){i.next={ab:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){r.setTimeout(e,0)}}()),Ai(e)):r.setImmediate(e)}}(),ki||(wi(),ki=!0),Ii.add(e,t)}bi.prototype.add=function(e,t){var n=_i.get();n.set(e,t),this.g?this.g.next=n:this.a=n,this.g=n},Si.prototype.set=function(e,t){this.a=e,this.g=t,this.next=null},Si.prototype.reset=function(){this.next=this.g=this.a=null};var ki=!1,Ii=new bi;function xi(){for(var e;e=Ci();){try{e.a.call(e.g)}catch(e){Ei(e)}yi(_i,e)}ki=!1}function Di(e){if(this.a=Ni,this.w=void 0,this.j=this.g=this.h=null,this.i=this.v=!1,e!=c)try{var t=this;e.call(void 0,function(e){Vi(t,Pi,e)},function(e){if(!(e instanceof Ki))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Vi(t,Oi,e)})}catch(e){Vi(this,Oi,e)}}var Ni=0,Pi=2,Oi=3;function Mi(){this.next=this.context=this.g=this.h=this.a=null,this.j=!1}Mi.prototype.reset=function(){this.context=this.g=this.h=this.a=null,this.j=!1};var Ri=new vi(function(){return new Mi},function(e){e.reset()});function $i(e,t,n){var i=Ri.get();return i.h=e,i.g=t,i.context=n,i}function Li(e){if(e instanceof Di)return e;var t=new Di(c);return Vi(t,Pi,e),t}function Fi(e){return new Di(function(t,n){n(e)})}function Ui(e,t){return ji(e,null,t,void 0)}function Bi(e,t){e.g||e.a!=Pi&&e.a!=Oi||qi(e),e.j?e.j.next=t:e.g=t,e.j=t}function ji(e,t,n,i){var r=$i(null,null,null);return r.a=new Di(function(e,a){r.h=t?function(n){try{var r=t.call(i,n);e(r)}catch(e){a(e)}}:e,r.g=n?function(t){try{var r=n.call(i,t);!o(r)&&t instanceof Ki?a(t):e(r)}catch(e){a(e)}}:a}),r.a.h=e,Bi(e,r),r.a}function Vi(e,t,n){if(e.a==Ni){e===n&&(t=Oi,n=new TypeError("Promise cannot resolve to itself")),e.a=1;e:{var i=n,r=e.F,o=e.I;if(i instanceof Di){Bi(i,$i(r||c,o||null,e));var a=!0}else if(mi(i))i.then(r,o,e),a=!0;else{if(m(i))try{var s=i.then;if(g(s)){!function(e,t,n,i,r){function o(e){a||(a=!0,i.call(r,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(r,e))},o)}catch(e){o(e)}}(i,s,r,o,e),a=!0;break e}}catch(t){o.call(e,t),a=!0;break e}a=!1}}a||(e.w=n,e.a=t,e.h=null,qi(e),t!=Oi||n instanceof Ki||function(e,t){e.i=!0,Ti(function(){e.i&&zi.call(null,t)})}(e,n))}}function qi(e){e.v||(e.v=!0,Ti(e.C,e))}function Hi(e){var t=null;return e.g&&(t=e.g,e.g=t.next,t.next=null),e.g||(e.j=null),t}function Wi(e,t,n,i){if(n==Oi&&t.g&&!t.j)for(;e&&e.i;e=e.h)e.i=!1;if(t.a)t.a.h=null,Gi(t,n,i);else try{t.j?t.h.call(t.context):Gi(t,n,i)}catch(e){zi.call(null,e)}yi(Ri,t)}function Gi(e,t,n){t==Pi?e.h.call(e.context,n):e.g&&e.g.call(e.context,n)}Di.prototype.then=function(e,t,n){return ji(this,g(e)?e:null,g(t)?t:null,n)},Di.prototype.$goog_Thenable=!0,Di.prototype.cancel=function(e){this.a==Ni&&Ti(function(){!function e(t,n){if(t.a==Ni)if(t.h){var i=t.h;if(i.g){for(var r=0,o=null,a=null,s=i.g;s&&(s.j||(r++,s.a==t&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==Ni&&1==r?e(i,n):(a?((r=a).next==i.j&&(i.j=r),r.next=r.next.next):Hi(i),Wi(i,o,Oi,n)))}t.h=null}else Vi(t,Oi,n)}(this,new Ki(e))},this)},Di.prototype.F=function(e){this.a=Ni,Vi(this,Pi,e)},Di.prototype.I=function(e){this.a=Ni,Vi(this,Oi,e)},Di.prototype.C=function(){for(var e;e=Hi(this);)Wi(this,e,this.a,this.w);this.v=!1};var zi=Ei;function Ki(e){I.call(this,e)}k(Ki,I),Ki.prototype.name="cancel";var Qi=!pe||9<=Number(Ee),Yi=pe&&!ke("9"),Xi=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{r.addEventListener("test",c,t),r.removeEventListener("test",c,t)}catch(e){}return e}();function Ji(){0!=Zi&&(er[this[v]||(this[v]=++y)]=this),this.O=this.O,this.C=this.C}var Zi=0,er={};function tr(e,t){e.O?o(void 0)?t.call(void 0):t():(e.C||(e.C=[]),e.C.push(o(void 0)?w(t,void 0):t))}function nr(e){e&&"function"==typeof e.m&&e.m()}function ir(e,t){this.type=e,this.g=this.target=t,this.h=!1,this.ib=!0}function rr(e,t){if(ir.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ve){e:{try{le(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:or[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Ji.prototype.O=!1,Ji.prototype.m=function(){if(!this.O&&(this.O=!0,this.l(),0!=Zi)){var e=this[v]||(this[v]=++y);if(0!=Zi&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete er[e]}},Ji.prototype.l=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ir.prototype.stopPropagation=function(){this.h=!0},ir.prototype.preventDefault=function(){this.ib=!1},k(rr,ir);var or=zn({2:"touch",3:"pen",4:"mouse"});rr.prototype.stopPropagation=function(){rr.o.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},rr.prototype.preventDefault=function(){rr.o.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Yi)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ar="closure_listenable_"+(1e6*Math.random()|0),sr=0;function ur(e){e.qa=!0,e.listener=null,e.proxy=null,e.src=null,e.Fa=null}function cr(e){this.src=e,this.a={},this.g=0}function lr(e,t){var n=t.type;n in e.a&&F(e.a[n],t)&&(ur(t),0==e.a[n].length&&(delete e.a[n],e.g--))}function hr(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.qa&&o.listener==t&&o.capture==!!n&&o.Fa==i)return r}return-1}cr.prototype.add=function(e,t,n,i,r){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.g++);var a=hr(e,t,i,r);return-1<a?(t=e[a],n||(t.Ca=!1)):((t=new function(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.Fa=r,this.key=++sr,this.qa=this.Ca=!1}(t,this.src,o,!!i,r)).Ca=n,e.push(t)),t};var fr="closure_lm_"+(1e6*Math.random()|0),dr={};function pr(e,t,n,i,r){if(i&&i.once)return mr(e,t,n,i,r);if(d(t)){for(var o=0;o<t.length;o++)pr(e,t[o],n,i,r);return null}return n=Er(n),e&&e[ar]?e.F.add(String(t),n,!1,m(i)?!!i.capture:!!i,r):gr(e,t,n,!1,i,r)}function gr(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var a=m(r)?!!r.capture:!!r,s=Cr(e);if(s||(e[fr]=s=new cr(e)),(n=s.add(t,n,i,a,o)).proxy)return n;if(i=function(){var e=_r,t=Qi?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Xi||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(br(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return 0,n}function mr(e,t,n,i,r){if(d(t)){for(var o=0;o<t.length;o++)mr(e,t[o],n,i,r);return null}return n=Er(n),e&&e[ar]?e.F.add(String(t),n,!0,m(i)?!!i.capture:!!i,r):gr(e,t,n,!0,i,r)}function vr(e,t,n,i,r){if(d(t))for(var o=0;o<t.length;o++)vr(e,t[o],n,i,r);else i=m(i)?!!i.capture:!!i,n=Er(n),e&&e[ar]?(e=e.F,(t=String(t).toString())in e.a&&(-1<(n=hr(o=e.a[t],n,i,r))&&(ur(o[n]),U(o,n),0==o.length&&(delete e.a[t],e.g--)))):e&&(e=Cr(e))&&(t=e.a[t.toString()],e=-1,t&&(e=hr(t,n,i,r)),(n=-1<e?t[e]:null)&&yr(n))}function yr(e){if("number"!=typeof e&&e&&!e.qa){var t=e.src;if(t&&t[ar])lr(t.F,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(br(n),i):t.addListener&&t.removeListener&&t.removeListener(i),0,(n=Cr(t))?(lr(n,e),0==n.g&&(n.src=null,t[fr]=null)):ur(e)}}}function br(e){return e in dr?dr[e]:dr[e]="on"+e}function Ar(e,t,n,i){var r=!0;if((e=Cr(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.qa&&(o=wr(o,i),r=r&&!1!==o)}return r}function wr(e,t){var n=e.listener,i=e.Fa||e.src;return e.Ca&&yr(e),n.call(i,t)}function _r(e,t){if(e.qa)return!0;if(!Qi){if(!t)e:{t=["window","event"];for(var n=r,i=0;i<t.length;i++)if(null==(n=n[t[i]])){t=null;break e}t=n}if(t=new rr(i=t,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){e:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(e){o=!0}(o||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=t.g;o;o=o.parentNode)i.push(o);for(e=e.type,o=i.length-1;!t.h&&0<=o;o--){t.g=i[o];var a=Ar(i[o],e,!0,t);n=n&&a}for(o=0;!t.h&&o<i.length;o++)t.g=i[o],a=Ar(i[o],e,!1,t),n=n&&a}return n}return wr(e,new rr(t,this))}function Cr(e){return(e=e[fr])instanceof cr?e:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Er(e){return g(e)?e:(e[Sr]||(e[Sr]=function(t){return e.handleEvent(t)}),e[Sr])}function Tr(e,t,n){t||(t={}),n=n||window;var i=e instanceof Le?e:je(void 0!==e.href?e.href:String(e));e=t.target||e.target;var r=[];for(o in t)switch(o){case"width":case"height":case"top":case"left":r.push(o+"="+t[o]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(o+"="+(t[o]?1:0))}var o=r.join(",");return(ie("iPhone")&&!ie("iPod")&&!ie("iPad")||ie("iPad")||ie("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(o=n.document.createElement("A"),i instanceof Le||i instanceof Le||(i="object"==typeof i&&i.ka?i.ia():String(i),Be.test(i)||(i="about:invalid#zClosurez"),i=qe(i)),o.href=Ue(i),o.setAttribute("target",e),t.noreferrer&&o.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),o.dispatchEvent(t),n={}):t.noreferrer?(n=n.open("",e,o),t=Fe(i),n&&(me&&-1!=t.indexOf(";")&&(t="'"+t.replace(/'/g,"%27")+"'"),n.opener=null,t=Qe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ce(t)+'">',null),n.document.write(ze(t)),n.document.close())):(n=n.open(Fe(i),e,o))&&t.noopener&&(n.opener=null),n}function kr(e){window.location.assign(Fe(je(e)))}function Ir(){try{return!!(window.opener&&window.opener.location&&window.opener.location.assign&&window.opener.location.hostname===window.location.hostname&&window.opener.location.protocol===window.location.protocol)}catch(e){}return!1}function xr(e){Tr(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function Dr(e){if(null==(e=m(e)&&1==e.nodeType?e:document.querySelector(String(e))))throw Error("Could not find the FirebaseUI widget element on the page.");return e}function Nr(){return window.location.href}var Pr="accountchooser.com",Or={Vb:Pr,Yb:"googleyolo",NONE:"none"},Mr={Zb:"popup",ac:"redirect"};var Rr={Xb:"callback",$b:"recoverEmail",bc:"resetPassword",cc:"select",dc:"signIn",ec:"verifyEmail"},$r=["anonymous"],Lr=["sitekey","tabindex","callback","expired-callback"];function Fr(e){return Ur(e,e.a.get("widgetUrl")||Nr())}function Ur(e,t){e=Qr(e);for(var n,i=t.search(_t),r=0,o=[];0<=(n=wt(t,r,e,i));)o.push(t.substring(r,n)),r=Math.min(t.indexOf("&",n)+1||i,i);return o.push(t.substr(r)),t=o.join("").replace(St,"$1"),(e+=i="="+encodeURIComponent("select"))?(0>(i=t.indexOf("#"))&&(i=t.length),0>(r=t.indexOf("?"))||r>i?(r=i,n=""):n=t.substring(r+1,i),i=(t=[t.substr(0,r),n,t.substr(i)])[1],t[1]=e?i?i+"&"+e:e:i,e=t[0]+(t[1]?"?"+t[1]:"")+t[2]):e=t,e}function Br(e){var t=!!e.a.get("autoUpgradeAnonymousUsers");return t&&!oo(e)&&hi('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),t}function jr(e){e=e.a.get("signInOptions")||[];for(var t=[],n=0;n<e.length;n++){var i=e[n];(i=m(i)?i:{provider:i}).provider&&t.push(i)}return t}function Vr(e,t){e=jr(e);for(var n=0;n<e.length;n++)if(e[n].provider===t)return e[n];return null}function qr(e){return M(jr(e),function(e){return e.provider})}function Hr(e,t){e=Wr(e);for(var n=0;n<e.length;n++)if(e[n].providerId===t)return e[n];return null}function Wr(e){return M(jr(e),function(e){return Gn[e.provider]||L($r,e.provider)?{providerId:e.provider}:{providerId:e.provider,hb:e.providerName||e.provider,ob:e.buttonColor||null,fb:e.iconUrl?Fe(je(e.iconUrl)):null,Db:e.loginHintKey||null}})}function Gr(e,t){return d(e=(e=Vr(e,t))&&e.scopes)?e:[]}function zr(e,t){return m(e=(e=Vr(e,t))&&e.customParameters)?(e=oe(e),t===firebase.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,t===firebase.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function Kr(e){if(!(e=Vr(e,firebase.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var t=e.whitelistedCountries,n=e.blacklistedCountries;if(void 0!==t&&(!d(t)||0==t.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==n&&!d(n))throw Error("BlacklistedCountries must be an array.");if(t&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!t&&!n)return Un;if(e=[],t){n={};for(var i=0;i<t.length;i++)for(var r=Ln(t[i]),o=0;o<r.length;o++)n[r[o].c]=r[o];for(var a in n)n.hasOwnProperty(a)&&e.push(n[a])}else{for(a={},i=0;i<n.length;i++)for(r=Ln(n[i]),o=0;o<r.length;o++)a[r[o].c]=r[o];for(t=0;t<Un.length;t++)null!==a&&Un[t].c in a||e.push(Un[t])}return e}function Qr(e){return Dn(e.a,"queryParameterForWidgetMode")}function Yr(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&gi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if(g(t))return t;if(a(t))return function(){xr(t)}}return null}function Xr(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&gi("Term of Service URL is missing, the link will not be displayed."),t&&n){if(g(n))return n;if(a(n))return function(){xr(n)}}return null}function Jr(e){return!(e=Vr(e,firebase.auth.EmailAuthProvider.PROVIDER_ID))||void 0===e.requireDisplayName||!!e.requireDisplayName}function Zr(e){return!(!(e=Vr(e,firebase.auth.EmailAuthProvider.PROVIDER_ID))||e.signInMethod!==firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function eo(e){var t=!!e.a.get("immediateFederatedRedirect"),n=qr(e);return e=to(e),t&&1==n.length&&!L(Wn,n[0])&&"redirect"==e}function to(e){for(var t in e=e.a.get("signInFlow"),Mr)if(Mr[t]==e)return Mr[t];return"redirect"}function no(e){return ao(e).uiShown||null}function io(e){return ao(e).signInSuccess||null}function ro(e){return ao(e).signInSuccessWithAuthResult||null}function oo(e){return ao(e).signInFailure||null}function ao(e){return e.a.get("callbacks")||{}}function so(e){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return"none";for(var t in e=e.a.get("credentialHelper"),Or)if(Or[t]==e)return Or[t];return Pr}function uo(e){this.a=xt(e)}var co={Ja:"ui_auid",Wb:"apiKey",Ka:"ui_sd",lb:"mode",Va:"oobCode",PROVIDER_ID:"ui_pid",Na:"ui_sid"};function lo(e){return e.a.a.get(co.Ja)||null}function ho(e,t){t?e.a.a.set(co.PROVIDER_ID,t):jt(e.a.a,co.PROVIDER_ID)}function fo(){Ji.call(this),this.F=new cr(this),this.mb=this,this.Ba=null}function po(e,t){var n,i=e.Ba;if(i)for(n=[];i;i=i.Ba)n.push(i);if(e=e.mb,i=t.type||t,a(t))t=new ir(t,e);else if(t instanceof ir)t.target=t.target||e;else{var r=t;se(t=new ir(i,e),r)}if(r=!0,n)for(var o=n.length-1;!t.h&&0<=o;o--){var s=t.g=n[o];r=go(s,i,!0,t)&&r}if(t.h||(r=go(s=t.g=e,i,!0,t)&&r,t.h||(r=go(s,i,!1,t)&&r)),n)for(o=0;!t.h&&o<n.length;o++)r=go(s=t.g=n[o],i,!1,t)&&r;return r}function go(e,t,n,i){if(!(t=e.F.a[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.qa&&a.capture==n){var s=a.listener,u=a.Fa||a.src;a.Ca&&lr(e.F,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.ib}uo.prototype.toString=function(){return this.a.toString()},k(fo,Ji),fo.prototype[ar]=!0,fo.prototype.Ua=function(e){this.Ba=e},fo.prototype.removeEventListener=function(e,t,n,i){vr(this,e,t,n,i)},fo.prototype.l=function(){if(fo.o.l.call(this),this.F){var e,t=this.F;for(e in t.a){for(var n=t.a[e],i=0;i<n.length;i++)0,ur(n[i]);delete t.a[e],t.g--}}this.Ba=null};var mo={},vo=0;function yo(e,t){if(!e)throw Error("Event target element must be provided!");if(e=Ao(e),mo[e]&&mo[e].length)for(var n=0;n<mo[e].length;n++)po(mo[e][n],t)}function bo(e){var t=Ao(e.N());mo[t]&&mo[t].length&&(function(e,t){0<=(t=$(e,t,void 0))&&U(e,t)}(mo[t],function(t){return t==e}),mo[t].length||delete mo[t])}function Ao(e){return void 0===e.a&&(e.a=vo,vo++),e.a}function wo(e){if(!e)throw Error("Event target element must be provided!");this.a=e,fo.call(this)}function _o(e){var t=Oo;this.i=[],this.O=t,this.K=e||null,this.j=this.a=!1,this.h=void 0,this.F=this.s=this.w=!1,this.v=0,this.g=null,this.C=0}function Co(e,t,n){e.a=!0,e.h=n,e.j=!t,ko(e)}function So(e){if(e.a){if(!e.F)throw new Io(e);e.F=!1}}function Eo(e,t,n){e.i.push([t,n,void 0]),e.a&&ko(e)}function To(e){return R(e.i,function(e){return g(e[1])})}function ko(e){if(e.v&&e.a&&To(e)){var t=e.v,n=No[t];n&&(r.clearTimeout(n.a),delete No[t]),e.v=0}e.g&&(e.g.C--,delete e.g),t=e.h;for(var i=n=!1;e.i.length&&!e.w;){var a=e.i.shift(),s=a[0],u=a[1];if(a=a[2],s=e.j?u:s)try{var c=s.call(a||e.K,t);o(c)&&(e.j=e.j&&(c==t||c instanceof Error),e.h=t=c),(mi(t)||"function"==typeof r.Promise&&t instanceof r.Promise)&&(i=!0,e.w=!0)}catch(i){t=i,e.j=!0,To(e)||(n=!0)}}e.h=t,i&&(c=w(e.I,e,!0),i=w(e.I,e,!1),t instanceof _o?(Eo(t,c,i),t.s=!0):t.then(c,i)),n&&(t=new Do(t),No[t.a]=t,e.v=t.a)}function Io(){I.call(this)}function xo(){I.call(this)}function Do(e){this.a=r.setTimeout(w(this.h,this),0),this.g=e}k(wo,fo),wo.prototype.N=function(){return this.a},wo.prototype.register=function(){var e=Ao(this.N());mo[e]?L(mo[e],this)||mo[e].push(this):mo[e]=[this]},_o.prototype.cancel=function(e){if(this.a)this.h instanceof _o&&this.h.cancel();else{if(this.g){var t=this.g;delete this.g,e?t.cancel(e):(t.C--,0>=t.C&&t.cancel())}this.O?this.O.call(this.K,this):this.F=!0,this.a||(e=new xo(this),So(this),Co(this,!1,e))}},_o.prototype.I=function(e,t){this.w=!1,Co(this,e,t)},_o.prototype.then=function(e,t,n){var i,r,o=new Di(function(e,t){i=e,r=t});return Eo(this,i,function(e){e instanceof xo?o.cancel():r(e)}),o.then(e,t,n)},_o.prototype.$goog_Thenable=!0,k(Io,I),Io.prototype.message="Deferred has already fired",Io.prototype.name="AlreadyCalledError",k(xo,I),xo.prototype.message="Deferred was canceled",xo.prototype.name="CanceledError",Do.prototype.h=function(){throw delete No[this.a],this.g};var No={};function Po(e){var t={},n=t.document||document,i=Me(e).toString(),o=document.createElement("SCRIPT"),a={jb:o,kb:void 0},c=new _o(a),l=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){Mo(o,!0);var e=new Lo($o,"Timeout reached for loading script "+i);So(c),Co(c,!1,e)},h),a.kb=l),o.onload=o.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(Mo(o,t.hc||!1,l),So(c),Co(c,!0,null))},o.onerror=function(){Mo(o,!0,l);var e=new Lo(Ro,"Error while loading script "+i);So(c),Co(c,!1,e)},se(a=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function(e,t){re(t,function(t,n){t&&"object"==typeof t&&t.ka&&(t=t.ia()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:at.hasOwnProperty(n)?e.setAttribute(at[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}(o,a),function(e,t){e.src=Me(t),null===u&&(u=(t=(t=r.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""),(t=u)&&e.setAttribute("nonce",t)}(o,e),function(e){var t=(e||document).getElementsByTagName("HEAD");return t&&0!=t.length?t[0]:e.documentElement}(n).appendChild(o),c}function Oo(){if(this&&this.jb){var e=this.jb;e&&"SCRIPT"==e.tagName&&Mo(e,!0,this.kb)}}function Mo(e,t,n){null!=n&&r.clearTimeout(n),e.onload=c,e.onerror=c,e.onreadystatechange=c,t&&window.setTimeout(function(){ut(e)},0)}var Ro=0,$o=1;function Lo(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),I.call(this,n),this.code=e}function Fo(e){this.a=e||r.googleyolo,this.g=null,this.h=!1}k(Lo,I),l(Fo);var Uo=new xe(Pe,"https://smartlock.google.com/client");function Bo(){this.a=null}function jo(e,t){this.a=e,this.g=t||function(e){throw e}}function Vo(e,t,n,i){this.a=e,this.h=t||null,this.j=n||null,this.g=i||null}function qo(e){return e.email?new Vo(e.email,e.displayName,e.photoUrl,e.providerId):null}function Ho(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function Wo(e){e=(e.a.cookie||"").split(";");for(var t,n,i=[],r=[],o=0;o<e.length;o++)-1==(t=(n=G(e[o])).indexOf("="))?(i.push(""),r.push(n)):(i.push(n.substring(0,t)),r.push(n.substring(t+1)));return{keys:i,values:r}}Fo.prototype.cancel=function(){this.a&&this.h&&(this.g=this.a.cancelLastOperation().catch(function(){}))},l(Bo),Bo.prototype.load=function(){var e=this;if(this.a)return this.a;var t=$e(De(Uo));return r.googleyolo?Li():this.a=function(){var e=null;return Ui(new Di(function(t){"complete"==r.document.readyState?t():(e=function(){t()},mr(window,"load",e))}),function(t){throw vr(window,"load",e),t})}().then(function(){if(!r.googleyolo)return new Di(function(n,i){var o=setTimeout(function(){e.a=null,i(Error("Network error!"))},1e4);r.onGoogleYoloLoad=function(){clearTimeout(o),n()},Ui(Li(Po(t)),function(t){clearTimeout(o),e.a=null,i(t)})})})},jo.prototype.confirm=function(e){return Ui(Li(this.a.confirm(e)),this.g)},Vo.prototype.na=function(){return{email:this.a,displayName:this.h,photoUrl:this.j,providerId:this.g}},(e=Ho.prototype).set=function(e,t,n,i,r,a){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(t))throw Error('Invalid cookie value "'+t+'"');o(n)||(n=-1),r=r?";domain="+r:"",i=i?";path="+i:"",a=a?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(E()+1e3*n).toUTCString(),this.a.cookie=e+"="+t+r+i+n+a},e.get=function(e,t){for(var n,i=e+"=",r=(this.a.cookie||"").split(";"),o=0;o<r.length;o++){if(0==(n=G(r[o])).lastIndexOf(i,0))return n.substr(i.length);if(n==e)return""}return t},e.ha=function(){return Wo(this).keys},e.ja=function(){return Wo(this).values},e.clear=function(){for(var e=Wo(this).keys,t=e.length-1;0<=t;t--){var n=e[t];this.get(n),this.set(n,"",0,void 0,void 0)}};var Go=new Ho;function zo(){}function Ko(e,t,n,i){this.h=void 0!==e&&null!==e?e:-1,this.g=t||null,this.a=n||null,this.j=!!i}function Qo(e,t){this.g=e,this.a=t||null}function Yo(e){if(e&&e.email){var t=e.credential&&firebase.auth.AuthCredential.fromJSON(e.credential);return new Qo(e.email,t)}return null}function Xo(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);255<r&&(t[n++]=255&r,r>>=8),t[n++]=r}return t}function Jo(e){return M(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}function Zo(e){for(this.v=e,this.g=this.v.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.i=[[],[],[],[]],this.a=Array(ea*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.v[4*e],this.v[4*e+1],this.v[4*e+2],this.v[4*e+3]];var t=Array(4);for(e=this.g;e<ea*(this.j+1);e++){if(t[0]=this.a[e-1][0],t[1]=this.a[e-1][1],t[2]=this.a[e-1][2],t[3]=this.a[e-1][3],0==e%this.g){var n=t,i=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=i,sa(t),t[0]^=la[e/this.g][0],t[1]^=la[e/this.g][1],t[2]^=la[e/this.g][2],t[3]^=la[e/this.g][3]}else 6<this.g&&4==e%this.g&&sa(t);this.a[e]=Array(4),this.a[e][0]=this.a[e-this.g][0]^t[0],this.a[e][1]=this.a[e-this.g][1]^t[1],this.a[e][2]=this.a[e-this.g][2]^t[2],this.a[e][3]=this.a[e-this.g][3]^t[3]}}k(Ko,zo),Ko.prototype.set=function(e,t){Go.set(e,t,this.h,this.g,this.a,this.j)},Ko.prototype.get=function(e){return Go.get(e)||null},Ko.prototype.pa=function(e){var t=this.g,n=this.a;Go.get(e),Go.set(e,"",0,t,n)},Qo.prototype.na=function(){return{email:this.g,credential:this.a&&this.a.toJSON()}},Zo.prototype.w=16;var ea=Zo.prototype.w/4;function ta(e,t){for(var n,i=0;i<ea;i++)for(var r=0;4>r;r++)n=t[n=4*r+i],e.h[i][r]=n}function na(e){for(var t=[],n=0;n<ea;n++)for(var i=0;4>i;i++)t[4*i+n]=e.h[n][i];return t}function ia(e,t){for(var n=0;4>n;n++)for(var i=0;4>i;i++)e.h[n][i]^=e.a[4*t+i][n]}function ra(e,t){for(var n=0;4>n;n++)for(var i=0;4>i;i++)e.h[n][i]=t[e.h[n][i]]}function oa(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.i[t][n]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.i[t][(n+t)%ea]}function aa(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.i[t][(n+t)%ea]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.i[t][n]}function sa(e){e[0]=ua[e[0]],e[1]=ua[e[1]],e[2]=ua[e[2]],e[3]=ua[e[3]]}var ua=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ca=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],la=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],ha=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],fa=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],da=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],pa=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],ga=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],ma=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function va(e,t){e=new Zo(ba(e));for(var n,i=q(t=Xo(t),0,16),r="";i.length;){n=16-i.length;for(var o=0;o<n;o++)i.push(0);for(ta(n=e,i),ia(n,0),i=1;i<n.j;++i){ra(n,ua),oa(n),o=n.h;for(var a=n.i[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=ha[a[0]]^fa[a[1]]^a[2]^a[3],o[1][s]=a[0]^ha[a[1]]^fa[a[2]]^a[3],o[2][s]=a[0]^a[1]^ha[a[2]]^fa[a[3]],o[3][s]=fa[a[0]]^a[1]^a[2]^ha[a[3]];ia(n,i)}ra(n,ua),oa(n),ia(n,n.j),r+=Jo(na(n)),i=q(t,0,16)}return r}function ya(e,t){e=new Zo(ba(e));for(var n=[],i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));var r=q(n,0,16);for(t="";r.length;){for(ta(i=e,r),ia(i,i.j),r=1;r<i.j;++r){aa(i),ra(i,ca),ia(i,i.j-r);for(var o=i.h,a=i.i[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=ma[a[0]]^pa[a[1]]^ga[a[2]]^da[a[3]],o[1][s]=da[a[0]]^ma[a[1]]^pa[a[2]]^ga[a[3]],o[2][s]=ga[a[0]]^da[a[1]]^ma[a[2]]^pa[a[3]],o[3][s]=pa[a[0]]^ga[a[1]]^da[a[2]]^ma[a[3]]}if(aa(i),ra(i,ca),ia(i,0),8192>=(i=na(i)).length)i=String.fromCharCode.apply(null,i);else{for(r="",o=0;o<i.length;o+=8192)r+=String.fromCharCode.apply(null,H(i,o,o+8192));i=r}t+=i,r=q(n,0,16)}return t.replace(/(\x00)+$/,"")}function ba(e){for(var t=32-(e=Xo(e.substring(0,32))).length,n=0;n<t;n++)e.push(0);return e}function Aa(e){var t=[];return function e(t,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(d(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),e(t,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&("function"!=typeof(a=n[r])&&(i.push(o),Ca(r,i),i.push(":"),e(t,a,i),o=","));return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":Ca(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},e,t),t.join("")}var wa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},_a=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Ca(e,t){t.push('"',e.replace(_a,function(e){var t=wa[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),wa[e]=t),t}),'"')}function Sa(e){this.a=e}function Ea(){}function Ta(e){this.a=e}function ka(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(e){return!1}}function Ia(){var e=null;try{e=window.localStorage||null}catch(e){}this.a=e}function xa(){var e=null;try{e=window.sessionStorage||null}catch(e){}this.a=e}function Da(e,t){this.g=e,this.a=t+"::"}Sa.prototype.set=function(e,t){o(t)?this.a.set(e,Aa(t)):this.a.pa(e)},Sa.prototype.get=function(e){try{var t=this.a.get(e)}catch(e){return}if(null!==t)try{return JSON.parse(t)}catch(e){throw"Storage: Invalid value was encountered"}},k(Ea,zo),Ea.prototype.clear=function(){var e=mt(this.fa(!0)),t=this;P(e,function(e){t.pa(e)})},k(Ta,Ea),(e=Ta.prototype).set=function(e,t){try{this.a.setItem(e,t)}catch(e){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},e.get=function(e){if(!a(e=this.a.getItem(e))&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},e.pa=function(e){this.a.removeItem(e)},e.fa=function(e){var t=0,n=this.a,i=new pt;return i.next=function(){if(t>=n.length)throw dt;var i=n.key(t++);if(e)return i;if(!a(i=n.getItem(i)))throw"Storage mechanism: Invalid value was encountered";return i},i},e.clear=function(){this.a.clear()},e.key=function(e){return this.a.key(e)},k(Ia,Ta),k(xa,Ta),k(Da,Ea),Da.prototype.set=function(e,t){this.g.set(this.a+e,t)},Da.prototype.get=function(e){return this.g.get(this.a+e)},Da.prototype.pa=function(e){this.g.pa(this.a+e)},Da.prototype.fa=function(e){var t=this.g.fa(!0),n=this,i=new pt;return i.next=function(){for(var i=t.next();i.substr(0,n.a.length)!=n.a;)i=t.next();return e?i.substr(n.a.length):n.g.get(i)},i};var Na=new Ia,Pa=new Sa(ka(Na)?new Da(Na,"firebaseui"):null),Oa=new xa,Ma=new Sa(ka(Oa)?new Da(Oa,"firebaseui"):null),Ra={name:"pendingEmailCredential",storage:Ma},$a={name:"pendingRedirect",storage:Ma},La={name:"redirectUrl",storage:Ma},Fa={name:"rememberAccount",storage:Ma},Ua={name:"rememberedAccounts",storage:Pa},Ba={name:"emailForSignIn",storage:new Sa(new Ko(3600,"/"))},ja={name:"pendingEncryptedCredential",storage:new Sa(new Ko(3600,"/"))};function Va(e,t){return e.storage.get(t?e.name+":"+t:e.name)}function qa(e,t){e.storage.a.pa(t?e.name+":"+t:e.name)}function Ha(e,t,n){e.storage.set(n?e.name+":"+n:e.name,t)}function Wa(e){return Va(La,e)||null}function Ga(e,t){Ha(La,e,t)}function za(e,t){Ha(Fa,e,t)}function Ka(e){return e=Va(Ua,e)||[],e=M(e,function(e){return qo(e)}),O(e,f)}function Qa(e){return Yo(e=Va(Ra,e)||null)}function Ya(e){qa(Ra,e)}function Xa(e,t){Ha(Ra,e.na(),t)}function Ja(e){Ha($a,"pending",e)}var Za=null;function es(e){return!(!e||-32e3!=e.code||"Service unavailable"!=e.message)}function ts(e,t,n,i){Za||(e={callbacks:{empty:e,select:function(e,i){e&&e.account&&t?t(qo(e.account)):n&&n(!es(i))},store:e,update:e},language:"en",providers:void 0,ui:i},"undefined"!=typeof accountchooser&&accountchooser.Api&&accountchooser.Api.init?Za=accountchooser.Api.init(e):(Za=new is(e),function(){var e=Za;g(e.a.callbacks.empty)&&e.a.callbacks.empty()}()))}function ns(e,t,n){function i(){var e=Dt(window.location.href,n).toString();Za.select(M(t||[],function(e){return e.na()}),{clientCallbackUrl:e})}t&&t.length?i():Za.checkEmpty(function(t,n){t||n?e(!es(n)):i()})}function is(e){this.a=e,this.a.callbacks=this.a.callbacks||{}}var rs={code:-32e3,message:"Service unavailable",data:"Service is unavailable."};(e=is.prototype).store=function(){g(this.a.callbacks.store)&&this.a.callbacks.store(void 0,rs)},e.select=function(){g(this.a.callbacks.select)&&this.a.callbacks.select(void 0,rs)},e.update=function(){g(this.a.callbacks.update)&&this.a.callbacks.update(void 0,rs)},e.checkDisabled=function(e){e(!0)},e.checkEmpty=function(e){e(void 0,rs)},e.checkAccountExist=function(e,t){t(void 0,rs)},e.checkShouldUpdate=function(e,t){t(void 0,rs)};var os,as,ss,us,cs={};function ls(e,t,n,i){cs[e].apply(null,Array.prototype.slice.call(arguments,1))}var hs=/MSIE ([\d.]+).*Windows NT ([\d.]+)/,fs=/Firefox\/([\d.]+)/,ds=/Opera[ \/]([\d.]+)(.*Version\/([\d.]+))?/,ps=/Chrome\/([\d.]+)/,gs=/((Windows NT ([\d.]+))|(Mac OS X ([\d_]+))).*Version\/([\d.]+).*Safari/,ms=/Mac OS X;.*(?!(Version)).*Safari/,vs=/Android ([\d.]+).*Safari/,ys=/OS ([\d_]+) like Mac OS X.*Mobile.*Safari/,bs=/Konqueror\/([\d.]+)/,As=/MSIE ([\d.]+).*Windows Phone OS ([\d.]+)/;function ws(e,t){for(e=e.split(t||"."),this.a=[],t=0;t<e.length;t++)this.a.push(parseInt(e[t],10))}function _s(e,t){return 0<=function(e,t){t instanceof ws||(t=new ws(String(t)));for(var n=Math.max(e.a.length,t.a.length),i=0;i<n;i++){var r=e.a[i],o=t.a[i];if(void 0!==r&&void 0!==o&&r!==o)return r-o;if(void 0===r)return-1;if(void 0===o)return 1}return 0}(e,t)}function Cs(e){return e.classList?e.classList:a(e=e.className)&&e.match(/\S+/g)||[]}function Ss(e,t){return e.classList?e.classList.contains(t):L(Cs(e),t)}function Es(e,t){e.classList?e.classList.add(t):Ss(e,t)||(e.className+=0<e.className.length?" "+t:t)}function Ts(e,t){e.classList?e.classList.remove(t):Ss(e,t)&&(e.className=O(Cs(e),function(e){return e!=t}).join(" "))}function ks(e){var t=e.type;switch(a(t)&&t.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return 0<=(t=e.selectedIndex)?e.options[t].value:null;case"select-multiple":t=[];for(var n,i=0;n=e.options[i];i++)n.selected&&t.push(n.value);return t.length?t:null;default:return null!=e.value?e.value:null}}function Is(e,t){var n=e.type;switch(a(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=t;break;case"select-one":if(e.selectedIndex=-1,a(t))for(var i=0;n=e.options[i];i++)if(n.value==t){n.selected=!0;break}break;case"select-multiple":for(a(t)&&(t=[t]),i=0;n=e.options[i];i++)if(n.selected=!1,t)for(var r,o=0;r=t[o];o++)n.value==r&&(n.selected=!0);break;default:e.value=null!=t?t:""}}function xs(e,t,n,i,r,o){if(ye&&!ke("525"))return!0;if(Ae&&r)return Ds(e);if(r&&!i)return!1;if(!ve&&("number"==typeof t&&(t=Ns(t)),(!n||Ae)&&(17==t||18==t||Ae&&91==t)||Ae&&16==t&&(i||o)))return!1;if((ye||ge)&&i&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(pe&&i&&t==e)return!1;switch(e){case 13:return!ve||!o&&!r&&!(n&&i);case 27:return!(ye||ge||ve)}return(!ve||!(i||r||o))&&Ds(e)}function Ds(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(ye||ge)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ve;default:return!1}}function Ns(e){if(ve)e=function(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}(e);else if(Ae&&ye)switch(e){case 93:e=91}return e}function Ps(e){fo.call(this),this.a=e,pr(e,"keydown",this.g,!1,this),pr(e,"click",this.h,!1,this)}function Os(e,t){var n=new Rs(t);if(po(e,n)){n=new Ms(t);try{po(e,n)}finally{t.stopPropagation()}}}function Ms(e){rr.call(this,e.a),this.type="action"}function Rs(e){rr.call(this,e.a),this.type="beforeaction"}function $s(e){fo.call(this),this.a=e,e=pe?"focusout":"blur",this.g=pr(this.a,pe?"focusin":"focus",this,!pe),this.h=pr(this.a,e,this,!pe)}function Ls(e,t){fo.call(this),this.g=e||1,this.a=t||r,this.h=w(this.Rb,this),this.j=E()}function Fs(e){e.Ea=!1,e.Y&&(e.a.clearTimeout(e.Y),e.Y=null)}function Us(e){Ji.call(this),this.g=e,this.a={}}k(Ps,fo),Ps.prototype.g=function(e){(13==e.keyCode||ye&&3==e.keyCode)&&Os(this,e)},Ps.prototype.h=function(e){Os(this,e)},Ps.prototype.l=function(){Ps.o.l.call(this),vr(this.a,"keydown",this.g,!1,this),vr(this.a,"click",this.h,!1,this),delete this.a},k(Ms,rr),k(Rs,rr),k($s,fo),$s.prototype.handleEvent=function(e){var t=new rr(e.a);t.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",po(this,t)},$s.prototype.l=function(){$s.o.l.call(this),yr(this.g),yr(this.h),delete this.a},k(Ls,fo),(e=Ls.prototype).Ea=!1,e.Y=null,e.Rb=function(){if(this.Ea){var e=E()-this.j;0<e&&e<.8*this.g?this.Y=this.a.setTimeout(this.h,this.g-e):(this.Y&&(this.a.clearTimeout(this.Y),this.Y=null),po(this,"tick"),this.Ea&&(Fs(this),this.start()))}},e.start=function(){this.Ea=!0,this.Y||(this.Y=this.a.setTimeout(this.h,this.g),this.j=E())},e.l=function(){Ls.o.l.call(this),Fs(this),delete this.a},k(Us,Ji);var Bs=[];function js(e,t,n,i){d(n)||(n&&(Bs[0]=n.toString()),n=Bs);for(var r=0;r<n.length;r++){var o=pr(t,n[r],i||e.handleEvent,!1,e.g||e);if(!o)break;e.a[o.key]=o}}function Vs(e){re(e.a,function(e,t){this.a.hasOwnProperty(t)&&yr(e)},e),e.a={}}function qs(e){fo.call(this),this.a=null,this.g=e,e=pe||ge||ye&&!ke("531")&&"TEXTAREA"==e.tagName,this.h=new Us(this),js(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function Hs(e){null!=e.a&&(r.clearTimeout(e.a),e.a=null)}function Ws(e){return(e=new rr(e.a)).type="input",e}function Gs(e,t){fo.call(this),e&&(this.Ia&&Xs(this),this.oa=e,this.Ha=pr(this.oa,"keypress",this,t),this.Ta=pr(this.oa,"keydown",this.xb,t,this),this.Ia=pr(this.oa,"keyup",this.Ab,t,this))}Us.prototype.l=function(){Us.o.l.call(this),Vs(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},k(qs,fo),qs.prototype.handleEvent=function(e){if("input"==e.type)pe&&ke(10)&&0==e.keyCode&&0==e.j||(Hs(this),po(this,Ws(e)));else if("keydown"!=e.type||function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(Ds(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ve;default:return 166>e.keyCode||183<e.keyCode}}(e)){var t="keydown"==e.type?this.g.value:null;pe&&229==e.keyCode&&(t=null);var n=Ws(e);Hs(this),this.a=function(e,t){if(g(e))t&&(e=w(e,t));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(0)?-1:r.setTimeout(e,0)}(function(){this.a=null,this.g.value!=t&&po(this,n)},this)}},qs.prototype.l=function(){qs.o.l.call(this),this.h.m(),Hs(this),delete this.g},k(Gs,fo),(e=Gs.prototype).oa=null,e.Ha=null,e.Ta=null,e.Ia=null,e.S=-1,e.W=-1,e.Pa=!1;var zs={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ks={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Qs=!ye||ke("525"),Ys=Ae&&ve;function Xs(e){e.Ha&&(yr(e.Ha),yr(e.Ta),yr(e.Ia),e.Ha=null,e.Ta=null,e.Ia=null),e.oa=null,e.S=-1,e.W=-1}function Js(e,t,n,i){rr.call(this,i),this.type="key",this.keyCode=e,this.j=t,this.repeat=n}function Zs(e,t,n,i){this.top=e,this.right=t,this.bottom=n,this.left=i}function eu(e,t){var n=ct(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""}function tu(e){try{var t=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return pe&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function nu(e){var t=ct(e),n=new et(0,0),i=t?ct(t):document;return e==(i=!pe||9<=Number(Ee)||"CSS1Compat"==nt(i).a.compatMode?i.documentElement:i.body)?n:(e=tu(e),t=st(i=nt(t).a),i=i.parentWindow||i.defaultView,t=pe&&ke("10")&&i.pageYOffset!=t.scrollTop?new et(t.scrollLeft,t.scrollTop):new et(i.pageXOffset||t.scrollLeft,i.pageYOffset||t.scrollTop),n.a=e.left+t.a,n.g=e.top+t.g,n)}(e=Gs.prototype).xb=function(e){(ye||ge)&&(17==this.S&&!e.ctrlKey||18==this.S&&!e.altKey||Ae&&91==this.S&&!e.metaKey)&&(this.W=this.S=-1),-1==this.S&&(e.ctrlKey&&17!=e.keyCode?this.S=17:e.altKey&&18!=e.keyCode?this.S=18:e.metaKey&&91!=e.keyCode&&(this.S=91)),Qs&&!xs(e.keyCode,this.S,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.W=Ns(e.keyCode),Ys&&(this.Pa=e.altKey))},e.Ab=function(e){this.W=this.S=-1,this.Pa=e.altKey},e.handleEvent=function(e){var t=e.a,n=t.altKey;if(pe&&"keypress"==e.type)var i=this.W,r=13!=i&&27!=i?t.keyCode:0;else(ye||ge)&&"keypress"==e.type?(i=this.W,r=0<=t.charCode&&63232>t.charCode&&Ds(i)?t.charCode:0):de&&!ye?r=Ds(i=this.W)?t.keyCode:0:("keypress"==e.type?(Ys&&(n=this.Pa),t.keyCode==t.charCode?32>t.keyCode?(i=t.keyCode,r=0):(i=this.W,r=t.charCode):(i=t.keyCode||this.W,r=t.charCode||0)):(i=t.keyCode||this.W,r=t.charCode||0),Ae&&63==r&&224==i&&(i=191));var o=i=Ns(i);i?63232<=i&&i in zs?o=zs[i]:25==i&&e.shiftKey&&(o=9):t.keyIdentifier&&t.keyIdentifier in Ks&&(o=Ks[t.keyIdentifier]),ve&&Qs&&"keypress"==e.type&&!xs(o,this.S,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=o==this.S,this.S=o,(t=new Js(o,r,e,t)).altKey=n,po(this,t))},e.N=function(){return this.oa},e.l=function(){Gs.o.l.call(this),Xs(this)},k(Js,rr),Zs.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Zs.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Zs.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Zs.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var iu={thin:2,medium:4,thick:6};function ru(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:null;if(n in iu)e=iu[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{t=e.style.left;var i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=t,e.runtimeStyle.left=i,e=+n}return e}function ou(){}function au(e){fo.call(this),this.w=e||nt(),this.Ya=null,this.la=!1,this.j=null,this.I=void 0,this.xa=this.za=this.Z=null}function su(e,t){return e.j?rt(t,e.j||e.w.a):null}function uu(e){return e.I||(e.I=new Us(e)),e.I}function cu(e,t){e.za&&P(e.za,t,void 0)}function lu(e,t){var n=ht(e,"firebaseui-textfield");t?(Ts(e,"firebaseui-input-invalid"),Es(e,"firebaseui-input"),n&&Ts(n,"firebaseui-textfield-invalid")):(Ts(e,"firebaseui-input"),Es(e,"firebaseui-input-invalid"),n&&Es(n,"firebaseui-textfield-invalid"))}function hu(e,t,n){tr(e,_(nr,t=new qs(t))),js(uu(e),t,"input",n)}function fu(e,t,n){tr(e,_(nr,t=new Gs(t))),js(uu(e),t,"key",function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))})}function du(e,t,n){tr(e,_(nr,t=new Ps(t))),js(uu(e),t,"action",function(e){e.stopPropagation(),e.preventDefault(),n(e)})}function pu(e){Es(e,"firebaseui-hidden")}function gu(e,t){t&&lt(e,t),Ts(e,"firebaseui-hidden")}function mu(e){return!Ss(e,"firebaseui-hidden")&&"none"!=e.style.display}function vu(e){var t=(e=e||{}).email,n=e.disabled,i='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="email">';return i=e.gc?i+"Enter new email address":i+"Email",i+='</label><input type="email" name="email" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+cn(null!=t?t:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',on(i)}function yu(e){var t='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return t=(e=(e=e||{}).label)?t+en(e):t+"Next",on(t+"</button>")}function bu(){var e=""+yu({label:sn("Sign In")});return on(e)}function Au(){var e=""+yu({label:sn("Save")});return on(e)}function wu(){var e=""+yu({label:sn("Continue")});return on(e)}function _u(e){var t='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="newPassword">';return t=(e=(e=e||{}).label)?t+en(e):t+"Choose password",on(t+'</label><input type="password" name="newPassword" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function Cu(){var e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="password">';return on((e={}.current?e+"Current password":e+"Password")+'</label><input type="password" name="password" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function Su(){return on('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function Eu(e){var t='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return t=(e=(e=e||{}).label)?t+en(e):t+"Cancel",on(t+"</button>")}function Tu(e){var t="";return e.H&&e.G&&(t+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),on(t)}function ku(e){var t="";return e.H&&e.G&&(t+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),on(t)}function Iu(e){return e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+en(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',on(e)}function xu(e){var t=e.content;return e=e.qb,on('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(e?" "+cn(e):"")+'">'+en(t)+"</dialog>")}function Du(e){var t=e.message;return on(xu({content:un('<div class="firebaseui-dialog-icon-wrapper"><div class="'+cn(e.Ga)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+en(t)+"</div>")}))}function Nu(e){for(var t='<div class="firebaseui-list-box-actions">',n=(e=e.items).length,i=0;i<n;i++){var r=e[i];t+='<button type="button" data-listboxid="'+cn(r.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(r.Ga?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+cn(r.Ga)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+en(r.label)+"</div></button>"}return t=""+xu({qb:sn("firebaseui-list-box-dialog"),content:un(t+"</div>")}),on(t)}function Pu(e){return on((e=e||{}).Tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function Ou(e){var t="";if((e=(e=e||{}).ma).hb)t+=e.hb;else switch(e.providerId){case"google.com":t+="Google";break;case"github.com":t+="GitHub";break;case"facebook.com":t+="Facebook";break;case"twitter.com":t+="Twitter";break;case"anonymous":t+="Guest";break;default:t+="Password"}return rn(t)}function Mu(e){Lu(e,"upgradeElement")}function Ru(e){Lu(e,"downgradeElements")}l(ou),ou.prototype.a=0,k(au,fo),(e=au.prototype).Cb=ou.Sa(),e.N=function(){return this.j},e.Ua=function(e){if(this.Z&&this.Z!=e)throw Error("Method not supported");au.o.Ua.call(this,e)},e.eb=function(){this.j=this.w.a.createElement("DIV")},e.render=function(e){if(this.la)throw Error("Component already rendered");this.j||this.eb(),e?e.insertBefore(this.j,null):this.w.a.body.appendChild(this.j),this.Z&&!this.Z.la||this.u()},e.u=function(){this.la=!0,cu(this,function(e){!e.la&&e.N()&&e.u()})},e.ua=function(){cu(this,function(e){e.la&&e.ua()}),this.I&&Vs(this.I),this.la=!1},e.l=function(){this.la&&this.ua(),this.I&&(this.I.m(),delete this.I),cu(this,function(e){e.m()}),this.j&&ut(this.j),this.Z=this.j=this.xa=this.za=null,au.o.l.call(this)},e.removeChild=function(e,t){if(e){var n=a(e)?e:e.Ya||(e.Ya=":"+(e.Cb.a++).toString(36));if(this.xa&&n?e=(null!==(e=this.xa)&&n in e?e[n]:void 0)||null:e=null,n&&e){var i=this.xa;if(n in i&&delete i[n],F(this.za,e),t&&(e.ua(),e.j&&ut(e.j)),null==(t=e))throw Error("Unable to set parent component");t.Z=null,au.o.Ua.call(t,null)}}if(!e)throw Error("Child is not in parent component");return e},Iu.B="firebaseui.auth.soy2.element.infoBar",Du.B="firebaseui.auth.soy2.element.progressDialog",Nu.B="firebaseui.auth.soy2.element.listBoxDialog",Pu.B="firebaseui.auth.soy2.element.busyIndicator";var $u=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function Lu(e,t){e&&window.componentHandler&&window.componentHandler[t]&&P($u,function(n){Ss(e,n)&&window.componentHandler[t](e),P(it(n,e),function(e){window.componentHandler[t](e)})})}function Fu(e,t,n){if(Uu.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),Mu(e),t&&du(this,e,function(t){var n=e.getBoundingClientRect();(t.clientX<n.left||n.left+n.width<t.clientX||t.clientY<n.top||n.top+n.height<t.clientY)&&Uu.call(this)}),!n){var i=this.N().parentElement||this.N().parentNode;if(i){var r=this;this.ba=function(){if(e.open){var t=e.getBoundingClientRect().height,n=i.getBoundingClientRect().height,o=i.getBoundingClientRect().top-document.body.getBoundingClientRect().top,a=i.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=e.getBoundingClientRect().width,u=i.getBoundingClientRect().width;e.style.top=(o+(n-t)/2).toString()+"px",t=a+(u-s)/2,e.style.left=t.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-t-s).toString()+"px"}else window.removeEventListener("resize",r.ba)},this.ba(),window.addEventListener("resize",this.ba,!1)}}}function Uu(){var e=Bu.call(this);e&&(Ru(e),e.open&&e.close(),ut(e),this.ba&&window.removeEventListener("resize",this.ba))}function Bu(){return rt("firebaseui-id-dialog")}function ju(){ut(Vu.call(this))}function Vu(){return su(this,"firebaseui-id-info-bar")}function qu(){return su(this,"firebaseui-id-dismiss-info-bar")}var Hu={yb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",wb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg",tb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg",Sb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",Eb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",Gb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",nb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png"};function Wu(e,t,n){for(var i in ir.call(this,e,t),n)this[i]=n[i]}function Gu(e,t,n,i,r){au.call(this,n),this.$a=e,this.Za=t,this.Aa=!1,this.Ma=i||null,this.v=this.ea=null,this.$=oe(Hu),se(this.$,r||{})}function zu(e){return e.N().parentElement||e.N().parentNode}function Ku(e,t,n){fu(e,t,function(){n.focus()})}function Qu(e,t,n){fu(e,t,function(){n()})}function Yu(e,t,n){t=(e=e||{}).Qa;var i=e.ga;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+vu(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?Eu(null):"")+yu(null)+'</div></div><div class="firebaseui-card-footer">'+(i?ku(n):Tu(n))+"</div></form></div>",on(e)}function Xu(e,t,n){return t=(e=e||{}).ga,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+vu(e)+Cu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Su()+'</div><div class="firebaseui-form-actions">'+bu()+'</div></div><div class="firebaseui-card-footer">'+(t?ku(n):Tu(n))+"</div></form></div>",on(e)}function Ju(e,t,n){var i=(e=e||{}).Ib;t=e.Oa;var r=e.ga,o='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+vu(e);return i?(e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="name">First &amp; last name</label><input type="text" name="name" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+cn(null!=(e=(e=e||{}).name)?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',e=on(e)):e="",n=o+e+_u(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?Eu(null):"")+Au()+'</div></div><div class="firebaseui-card-footer">'+(r?ku(n):Tu(n))+"</div></form></div>",on(n)}function Zu(e,t,n){return t=(e=e||{}).Oa,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+vu(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?Eu(null):"")+yu({label:sn("Send")})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(e)}function ec(e,t,n){t=e.T;var i="";return i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Follow the instructions sent to <strong>"+en(e.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',t&&(i+='<div class="firebaseui-form-actions">'+yu({label:sn("Done")})+"</div>"),i+='</div><div class="firebaseui-card-footer">'+Tu(n)+"</div></div>",on(i)}function tc(e,t,n){return on('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+Pu(null)+"</div></div>")}function nc(){return on('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function ic(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(e="A sign-in email with additional instructions was sent to <strong>"+en(e.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+on('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+Eu({label:sn("Back")})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function rc(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+on('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+Eu({label:sn("Back")})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(e)}function oc(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+vu(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Eu(null)+yu(null)+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(e)}function ac(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Eu({label:sn("Dismiss")})+"</div></div></div>";return on(e)}function sc(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Eu({label:sn("Dismiss")})+"</div></div></div>";return on(e)}function uc(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(e="You’ve already used <strong>"+en(e.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+Cu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Su()+'</div><div class="firebaseui-form-actions">'+bu()+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function cc(e,t,n){var i=e.email;return t="",e=sn(e=""+Ou(e)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(i="You’ve already used <strong>"+en(i)+"</strong>. You can connect your <strong>"+en(e)+"</strong> account with <strong>"+en(i)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(e="For this flow to successfully connect your "+en(e)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+bu()+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function lc(e,t,n){t="";var i=""+Ou(e);return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(e="You originally intended to connect <strong>"+en(i=sn(i))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(i="If you still want to connect your <strong>"+en(i)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+wu()+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function hc(e,t,n){var i=e.email;return t="",e=sn(e=""+Ou(e)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(i="You’ve already used <strong>"+en(i)+"</strong>. Sign in with "+en(e)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+yu({label:sn("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function fc(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="To continue sign in with <strong>"+en(e.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Eu(null)+yu({label:sn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function dc(e){var t="";return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+en(e.email)+"</strong></p>")+_u(function(e){function t(){}var n={label:sn("New password")};for(var i in t.prototype=e,e=new t,n)e[i]=n[i];return e}(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Au()+"</div></div></form></div>",on(t)}function pc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((e=e||{}).T?'<div class="firebaseui-form-actions">'+wu()+"</div>":"")+"</div></div>",on(e)}function gc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).T?'<div class="firebaseui-form-actions">'+yu(null)+"</div>":"")+"</div></div>",on(e)}function mc(e){var t=e.T,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Your sign-in email address has been changed back to <strong>"+en(e.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+yu(null)+"</div>":"")+"</div></form></div>",on(n)}function vc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).T?'<div class="firebaseui-form-actions">'+yu(null)+"</div>":"")+"</div></div>",on(e)}function yc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((e=e||{}).T?'<div class="firebaseui-form-actions">'+wu()+"</div>":"")+"</div></div>",on(e)}function bc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).T?'<div class="firebaseui-form-actions">'+yu(null)+"</div>":"")+"</div></div>",on(e)}function Ac(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+en(e.errorMessage)+"</p></div></div>",on(e)}function wc(e,t,n){var i=e.Fb;return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(e="Continue with "+en(e.Ub)+"?")+'</h2><p class="firebaseui-text">'+(i="You originally wanted to sign in with "+en(i))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Eu(null)+yu({label:sn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form></div>",on(t)}function _c(e,t,n){var i='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';t=(e=e.Hb).length;for(var r=0;r<t;r++){var o={ma:e[r]},a=n,s=(o=o||{}).ma,u=o,c="";switch((u=u||{}).ma.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+cn(rn(c))+' firebaseui-id-idp-button" data-provider-id="'+cn(s.providerId)+'" style="background-color:',null!=(c=s.ob)&&c.da===zt?c=c.content:null==c?c="":c instanceof He?c instanceof He&&c.constructor===He&&c.g===We?c=c.a:(D("expected object of type SafeStyle, got '"+c+"' of type "+h(c)),c="type_error:SafeStyle"):(c=String(c),vn.test(c)||(D("Bad value `%s` for |filterCssValue",[c]),c="zSoyz")),u=u+cn(c)+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var l="";if((c=(c=(c=o)||{}).ma).fb)l+=ln(c.fb);else switch(c.providerId){case"google.com":l+=ln(a.yb);break;case"github.com":l+=ln(a.wb);break;case"facebook.com":l+=ln(a.tb);break;case"twitter.com":l+=ln(a.Sb);break;case"phone":l+=ln(a.Gb);break;case"anonymous":l+=ln(a.nb);break;default:l+=ln(a.Eb)}a=u+cn(ln(a=an(l)))+'"></span>',"password"==s.providerId?a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with email</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Email</span>':"phone"==s.providerId?a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with phone</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Phone</span>':"anonymous"==s.providerId?a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Continue as guest</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Guest</span>':a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">'+(s="Sign in with "+en(Ou(o)))+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+en(Ou(o))+"</span>",i+='<li class="firebaseui-list-item">'+(o=on(a+"</button>"))+"</li>"}return i+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+ku(n)+"</div></div>",on(i)}function Cc(e,t,n){var i,r=(e=e||{}).sb,o=e.Qa;return t=e.ga,e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="phoneNumber">Phone number</label><input type="tel" name="phoneNumber" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+cn(null!=(e=(e=e||{}).va)?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',i=(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+on(e))+(i=r?on('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(o?Eu(null):"")+yu({label:sn("Verify")})+'</div></div><div class="firebaseui-card-footer">',t?(t='<p class="firebaseui-tos firebaseui-phone-tos">',t=n.H&&n.G?t+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':t+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=on(t+"</p>")):n=on('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Tu(n),on(i+n+"</div></form></div>")}function Sc(e,t,n){var i="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+en(t=(e=e||{}).phoneNumber)+"</a>",en(t),t=i,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+(i=on('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="phoneConfirmationCode">6-digit code</label><input type="number" name="phoneConfirmationCode" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Eu(null)+yu({label:sn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Tu(n)+"</div></form>",e=on('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),on(t+(n+e+"</div>"))}function Ec(){return su(this,"firebaseui-id-submit")}function Tc(){return su(this,"firebaseui-id-secondary-link")}function kc(e,t){du(this,Ec.call(this),function(t){e(t)});var n=Tc.call(this);n&&t&&du(this,n,function(e){t(e)})}function Ic(){return su(this,"firebaseui-id-password")}function xc(){return su(this,"firebaseui-id-password-error")}function Dc(){var e=Ic.call(this),t=xc.call(this);hu(this,e,function(){mu(t)&&(lu(e,!0),pu(t))})}function Nc(){var e=Ic.call(this),t=xc.call(this);return ks(e)?(lu(e,!0),pu(t),t=!0):(lu(e,!1),gu(t,rn("Enter your password").toString()),t=!1),t?ks(e):null}function Pc(e,t,n,i,r,o){Gu.call(this,uc,{email:e},o,"passwordLinking",{H:i,G:r}),this.a=t,this.L=n}k(Wu,ir),k(Gu,au),(e=Gu.prototype).eb=function(){var e=Yt(this.$a,this.Za,this.$,this.w);Mu(e),this.j=e},e.u=function(){if(Gu.o.u.call(this),yo(zu(this),new Wu("pageEnter",zu(this),{pageId:this.Ma})),this.Xa()&&this.$.H){var e=this.$.H;du(this,this.Xa(),function(){e()})}if(this.Wa()&&this.$.G){var t=this.$.G;du(this,this.Wa(),function(){t()})}},e.ua=function(){yo(zu(this),new Wu("pageExit",zu(this),{pageId:this.Ma})),Gu.o.ua.call(this)},e.l=function(){window.clearTimeout(this.ea),this.Za=this.$a=this.ea=null,this.Aa=!1,this.v=null,Ru(this.N()),Gu.o.l.call(this)},e.M=function(e,t,n,i){function r(){if(o.O)return null;o.Aa=!1,window.clearTimeout(o.ea),o.ea=null,o.v&&(Ru(o.v),ut(o.v),o.v=null)}var o=this;return o.Aa?null:(function(e){e.Aa=!0;var t=Ss(e.N(),"firebaseui-use-spinner");e.ea=window.setTimeout(function(){e.N()&&null===e.v&&(e.v=Yt(Pu,{Tb:t},null,e.w),e.N().appendChild(e.v),Mu(e.v))},500)}(o),e.apply(null,t).then(n,i).then(r,r))},C(Gu.prototype,{g:function(e){ju.call(this);var t=Yt(Iu,{message:e},null,this.w);this.N().appendChild(t),du(this,qu.call(this),function(){ut(t)})},ic:ju,lc:Vu,kc:qu,X:function(e,t){e=Yt(Du,{Ga:e,message:t},null,this.w),Fu.call(this,e)},h:Uu,pb:Bu,nc:function(){return su(this,"firebaseui-tos")},Xa:function(){return su(this,"firebaseui-tos-link")},Wa:function(){return su(this,"firebaseui-pp-link")},oc:function(){return su(this,"firebaseui-tos-list")}}),Yu.B="firebaseui.auth.soy2.page.signIn",Xu.B="firebaseui.auth.soy2.page.passwordSignIn",Ju.B="firebaseui.auth.soy2.page.passwordSignUp",Zu.B="firebaseui.auth.soy2.page.passwordRecovery",ec.B="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",tc.B="firebaseui.auth.soy2.page.callback",nc.B="firebaseui.auth.soy2.page.blank",ic.B="firebaseui.auth.soy2.page.emailLinkSignInSent",rc.B="firebaseui.auth.soy2.page.emailNotReceived",oc.B="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",ac.B="firebaseui.auth.soy2.page.differentDeviceError",sc.B="firebaseui.auth.soy2.page.anonymousUserMismatch",uc.B="firebaseui.auth.soy2.page.passwordLinking",cc.B="firebaseui.auth.soy2.page.emailLinkSignInLinking",lc.B="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",hc.B="firebaseui.auth.soy2.page.federatedLinking",fc.B="firebaseui.auth.soy2.page.unsupportedProvider",dc.B="firebaseui.auth.soy2.page.passwordReset",pc.B="firebaseui.auth.soy2.page.passwordResetSuccess",gc.B="firebaseui.auth.soy2.page.passwordResetFailure",mc.B="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",vc.B="firebaseui.auth.soy2.page.emailChangeRevokeFailure",yc.B="firebaseui.auth.soy2.page.emailVerificationSuccess",bc.B="firebaseui.auth.soy2.page.emailVerificationFailure",Ac.B="firebaseui.auth.soy2.page.unrecoverableError",wc.B="firebaseui.auth.soy2.page.emailMismatch",_c.B="firebaseui.auth.soy2.page.providerSignIn",Cc.B="firebaseui.auth.soy2.page.phoneSignInStart",Sc.B="firebaseui.auth.soy2.page.phoneSignInFinish",k(Pc,Gu),Pc.prototype.u=function(){this.R(),this.P(this.a,this.L),Qu(this,this.i(),this.a),this.i().focus(),Pc.o.u.call(this)},Pc.prototype.l=function(){this.a=null,Pc.o.l.call(this)},Pc.prototype.J=function(){return ks(su(this,"firebaseui-id-email"))},C(Pc.prototype,{i:Ic,D:xc,R:Dc,A:Nc,aa:Ec,ca:Tc,P:kc});var Oc=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Mc(){return su(this,"firebaseui-id-email")}function Rc(){return su(this,"firebaseui-id-email-error")}function $c(e){var t=Mc.call(this),n=Rc.call(this);hu(this,t,function(){mu(n)&&(lu(t,!0),pu(n))}),e&&fu(this,t,function(){e()})}function Lc(){return G(ks(Mc.call(this))||"")}function Fc(){var e=Mc.call(this),t=Rc.call(this),n=ks(e)||"";return n?Oc.test(n)?(lu(e,!0),pu(t),t=!0):(lu(e,!1),gu(t,rn("That email address isn't correct").toString()),t=!1):(lu(e,!1),gu(t,rn("Enter your email address to continue").toString()),t=!1),t?G(ks(e)):null}function Uc(e,t,n,i,r,o,a){Gu.call(this,Xu,{email:n,ga:!!o},a,"passwordSignIn",{H:i,G:r}),this.a=e,this.L=t}function Bc(e,t,n,i,r,o){Gu.call(this,e,t,i,r||"notice",o),this.a=n||null}function jc(e,t,n,i,r){Bc.call(this,ec,{email:e,T:!!t},t,r,"passwordRecoveryEmailSent",{H:n,G:i})}function Vc(e,t){Bc.call(this,yc,{T:!!e},e,t,"emailVerificationSuccess")}function qc(e,t){Bc.call(this,bc,{T:!!e},e,t,"emailVerificationFailure")}function Hc(e,t){Bc.call(this,pc,{T:!!e},e,t,"passwordResetSuccess")}function Wc(e,t){Bc.call(this,gc,{T:!!e},e,t,"passwordResetFailure")}function Gc(e,t){Bc.call(this,vc,{T:!!e},e,t,"emailChangeRevokeFailure")}function zc(e,t){Bc.call(this,Ac,{errorMessage:e},void 0,t,"unrecoverableError")}k(Uc,Gu),Uc.prototype.u=function(){this.R(),this.aa(),this.ca(this.a,this.L),Ku(this,this.s(),this.i()),Qu(this,this.i(),this.a),ks(this.s())?this.i().focus():this.s().focus(),Uc.o.u.call(this)},Uc.prototype.l=function(){this.L=this.a=null,Uc.o.l.call(this)},C(Uc.prototype,{s:Mc,U:Rc,R:$c,P:Lc,J:Fc,i:Ic,D:xc,aa:Dc,A:Nc,sa:Ec,ra:Tc,ca:kc}),k(Bc,Gu),Bc.prototype.u=function(){this.a&&(this.s(this.a),this.i().focus()),Bc.o.u.call(this)},Bc.prototype.l=function(){this.a=null,Bc.o.l.call(this)},C(Bc.prototype,{i:Ec,A:Tc,s:kc}),k(jc,Bc),k(Vc,Bc),k(qc,Bc),k(Hc,Bc),k(Wc,Bc),k(Gc,Bc),k(zc,Bc);var Kc=!1,Qc=null;function Yc(e,t){Kc=!!t,Qc||("undefined"==typeof accountchooser&&function(){var e=window.navigator&&window.navigator.userAgent;if(e){var t;if(t=e.match(ds)){var n=new ws(t[3]||t[1]);return!(0<=e.indexOf("Opera Mini"))&&(0<=e.indexOf("Opera Mobi")?0<=e.indexOf("Android")&&_s(n,"10.1"):_s(n,"8.0"))}if(t=e.match(fs))return _s(new ws(t[1]),"2.0");if(t=e.match(ps))return _s(new ws(t[1]),"6.0");if(t=e.match(gs))return n=new ws(t[6]),e=t[3]&&new ws(t[3]),t=t[5]&&new ws(t[5],"_"),(!(!e||!_s(e,"6.0"))||!(!t||!_s(t,"10.5.6")))&&_s(n,"3.0");if(t=e.match(vs))return _s(new ws(t[1]),"3.0");if(t=e.match(ys))return _s(new ws(t[1],"_"),"4.0");if(t=e.match(bs))return _s(new ws(t[1]),"4.7");if(t=e.match(As))return n=new ws(t[1]),e=new ws(t[2]),_s(n,"7.0")&&_s(e,"7.0");if(t=e.match(hs))return n=new ws(t[1]),e=new ws(t[2]),_s(n,"7.0")&&_s(e,"6.0");if(e.match(ms))return!1}return!0}()?(t=$e(De(new xe(Pe,"//www.gstatic.com/accountchooser/client.js"))),Qc=Ui(Li(Po(t)),function(){})):Qc=Li()),Qc.then(e,e)}function Xc(e,t){(e=ao(e=Ph(e)).accountChooserInvoked||null)?e(t):t()}function Jc(e,t,n){(e=ao(e=Ph(e)).accountChooserResult||null)?e(t,n):n()}function Zc(e,t,n,i){function r(){var t=e();t&&(t=no(Ph(t)))&&t()}ts(function(){var o=e();o&&function(e,t,n,i,r){i?(ls("callback",e,t),Kc&&n()):Xc(e,function(){Ja(Eh(e)),ns(function(i){qa($a,Eh(e)),Jc(e,i?"empty":"unavailable",function(){ls("signIn",e,t),(i||Kc)&&n()})},Ka(Eh(e)),r)})}(o,t,r,n,i)},function(n){var i=e();i&&function(e,t,n,i){function r(e){e=il(e),ul(t,n,void 0,e),i()}Jc(t,"accountSelected",function(){za(!1,Eh(t));var o=al(t);Dh(t,Ch(t).fetchSignInMethodsForEmail(e.a).then(function(r){ll(t,n,r,e.a,e.h||void 0,void 0,o),i()},r))})}(n,i,t,r)},function(n){var i=e();i&&function(e,t,n,i){Jc(t,e?"addAccount":"unavailable",function(){ls("signIn",t,n),(e||Kc)&&i()})}(n,i,t,r)},e()&&function(e){return e.a.get("acUiConfig")||null}(Ph(e())))}function el(e,t,n,i){function r(n){if(!n.name||"cancel"!=n.name){e:{var i=n.message;try{var r=((JSON.parse(i).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(r&&r.length){var o=!0;break e}}catch(e){}o=!1}if(o)n=zu(t),t.m(),ul(e,n,void 0,rn("Your sign-in session has expired. Please try again.").toString());else{if(o=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;o=il(n)}t.g(o)}}}if(Nh(e),i)return tl(e,n),Li();if(!n.credential)throw Error("No credential found!");if(!(i=Ch(e).currentUser||n.user))throw Error("User not logged in.");i=new Vo(i.email,i.displayName,i.photoURL,"password"==n.credential.providerId?null:n.credential.providerId),null!=Va(Fa,Eh(e))&&!Va(Fa,Eh(e))||function(e,t){var n=Ka(t),i=$(n,function(t){return t.a==e.a&&(t.g||null)==(e.g||null)});-1<i&&U(n,i),n.unshift(e),Ha(Ua,M(n,function(e){return e.na()}),t)}(i,Eh(e)),qa(Fa,Eh(e));try{var o=function(e,t){return Oh(e),Ih(e,function(n){if(e.h&&!e.h.isAnonymous&&Br(Ph(e))&&!Ch(e).currentUser)return Rh(e).then(function(){return"password"==t.credential.providerId&&(t.credential=null),t});if(n)return Rh(e).then(function(){return n.linkWithCredential(t.credential)}).then(function(e){return t.user=e.user,t.credential=e.credential,t.operationType=e.operationType,t.additionalUserInfo=e.additionalUserInfo,t},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return $h(e,n,t.credential)});if(!t.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Rh(e).then(function(){return Sh(e).updateCurrentUser(t.user)}).then(function(){return t.user=Sh(e).currentUser,t.operationType="signIn",t.credential&&t.credential.providerId&&"password"==t.credential.providerId&&(t.credential=null),t})})}(e,n)}catch(e){return hi(e.code||e.message,e),t.g(e.code||e.message),Li()}return n=o.then(function(t){tl(e,t)},r).then(void 0,r),Dh(e,o),Li(n)}function tl(e,t){if(!t.user)throw Error("No user found");var n=ro(Ph(e));if(io(Ph(e))&&n&&gi("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=ro(Ph(e));var i=Wa(Eh(e))||void 0;qa(La,Eh(e));var r=!1;Ir()?(n&&!n(t,i)||(r=!0,window.opener.location.assign(Fe(je(nl(e,i))))),n||window.close()):n&&!n(t,i)||(r=!0,kr(nl(e,i))),r||e.reset()}else{n=t.user,t=t.credential,i=io(Ph(e)),r=Wa(Eh(e))||void 0,qa(La,Eh(e));var o=!1;Ir()?(i&&!i(n,t,r)||(o=!0,window.opener.location.assign(Fe(je(nl(e,r))))),i||window.close()):i&&!i(n,t,r)||(o=!0,kr(nl(e,r))),o||e.reset()}}function nl(e,t){if(!(e=t||Ph(e).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function il(e){var t="";switch(e.code){case"auth/email-already-in-use":t+="The email address is already used by another account";break;case"auth/requires-recent-login":t+=Sn();break;case"auth/too-many-requests":t+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":t+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":t+="That email address doesn't match an existing account";break;case"auth/user-token-expired":t+=Sn();break;case"auth/weak-password":t+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":t+="The email and password you entered don't match";break;case"auth/network-request-failed":t+="A network error has occurred";break;case"auth/invalid-phone-number":t+=wn();break;case"auth/invalid-verification-code":t+=rn("Wrong code. Try again.");break;case"auth/code-expired":t+="This code is no longer valid";break;case"auth/expired-action-code":t+="This code has expired.";break;case"auth/invalid-action-code":t+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(t=rn(t).toString())return t;try{return JSON.parse(e.message),hi("Internal error: "+e.message,void 0),_n().toString()}catch(t){return e.message}}function rl(e,t,n,i){function r(){Ja(Eh(e)),Dh(e,t.M(w(e.Qb,e),[u],function(){if("file:"===(window.location&&window.location.protocol))return Dh(e,bh(e).then(function(n){t.m(),qa($a,Eh(e)),ls("callback",e,s,Li(n))},o))},a))}function o(n){if(qa($a,Eh(e)),!n.name||"cancel"!=n.name)switch(n.code){case"auth/popup-blocked":r();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":t.g(il(n));break;default:t.m(),ls("callback",e,s,Fi(n))}}function a(n){qa($a,Eh(e)),n.name&&"cancel"==n.name||(hi("signInWithRedirect: "+n.code,void 0),n=il(n),"blank"==t.Ma&&eo(Ph(e))?(t.m(),ls("providerSignIn",e,s,n)):t.g(n))}var s=zu(t),u=function(e,t,n){var i=Gn[t]&&firebase.auth[Gn[t]]?new firebase.auth[Gn[t]]:0==t.indexOf("saml.")?new firebase.auth.SAMLAuthProvider(t):new firebase.auth.OAuthProvider(t);if(!i)throw Error("Invalid Firebase Auth provider!");var r=Gr(Ph(e),t);if(i.addScope)for(var o=0;o<r.length;o++)i.addScope(r[o]);return r=zr(Ph(e),t)||{},n&&(e=t==firebase.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":t==firebase.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=Hr(Ph(e),t))&&e.Db)&&(r[e]=n),i.setCustomParameters&&i.setCustomParameters(r),i}(e,n,i);"redirect"==to(Ph(e))?r():Dh(e,function(e,t){return Oh(e),Ih(e,function(n){return n&&!Qa(Eh(e))?n.linkWithPopup(t).then(function(e){return e},function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return $h(e,t)}):Ch(e).signInWithPopup(t)})}(e,u).then(function(n){t.m(),ls("callback",e,s,Li(n))},o))}function ol(e,t,n){var i,r,o=function(e,t){var n=null;return P(jr(e),function(e){e.authMethod===t&&(n=e.provider)}),n}(Ph(e),n&&n.authMethod||null);return n&&n.idToken&&o===firebase.auth.GoogleAuthProvider.PROVIDER_ID?(Gr(Ph(e),firebase.auth.GoogleAuthProvider.PROVIDER_ID).length?(rl(e,t,o,n.id),n=Li(!0)):(i=firebase.auth.GoogleAuthProvider.credential(n.idToken),r=!1,i=t.M(w(e.Nb,e),[i],function(n){var i=zu(t);t.m(),ls("callback",e,i,Li(n)),r=!0},function(n){if(!(n.name&&"cancel"==n.name||n&&"auth/credential-already-in-use"==n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var i=zu(t);t.m(),ls("callback",e,i,Fi(n))}else n=il(n),t.g(n)}),Dh(e,i),n=i.then(function(){return r},function(){return!1})),n):(n&&t.g(rn("The selected credential for the authentication provider is not supported!").toString()),Li(!1))}function al(e){return 1==(e=qr(Ph(e))).length&&e[0]==firebase.auth.EmailAuthProvider.PROVIDER_ID}function sl(e){return 1==(e=qr(Ph(e))).length&&e[0]==firebase.auth.PhoneAuthProvider.PROVIDER_ID}function ul(e,t,n,i){al(e)?i?ls("signIn",e,t,n,i):fl(e,t,n):e&&sl(e)&&!i?ls("phoneSignInStart",e,t):e&&eo(Ph(e))&&!i?ls("federatedRedirect",e,t):ls("providerSignIn",e,t,i)}function cl(e,t,n,i){var r=zu(t);Dh(e,t.M(w(Ch(e).fetchSignInMethodsForEmail,Ch(e)),[n],function(o){za(so(Ph(e))==Pr,Eh(e)),t.m(),ll(e,r,o,n,void 0,i)},function(e){e=il(e),t.g(e)}))}function ll(e,t,n,i,r,o,a){n.length||Zr(Ph(e))?!n.length&&Zr(Ph(e))?ls("sendEmailLinkForSignIn",e,t,i,function(){ls("signIn",e,t)}):L(n,firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ls("passwordSignIn",e,t,i,a):1==n.length&&n[0]===firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ls("sendEmailLinkForSignIn",e,t,i,function(){ls("signIn",e,t)}):(n=Hn(n,qr(Ph(e))))?(Xa(new Qo(i),Eh(e)),ls("federatedSignIn",e,t,i,n,o)):ls("unsupportedProvider",e,t,i):ls("passwordSignUp",e,t,i,r,void 0,a)}function hl(e,t,n,i,r,o){var a=zu(t);Dh(e,t.M(w(e.vb,e),[n,o],function(){t.m(),ls("emailLinkSignInSent",e,a,n,i,o)},r))}function fl(e,t,n){so(Ph(e))==Pr?Yc(function(){Za?Xc(e,function(){Ja(Eh(e)),ns(function(i){qa($a,Eh(e)),Jc(e,i?"empty":"unavailable",function(){ls("signIn",e,t,n)})},Ka(Eh(e)),Fr(Ph(e)))}):(Oh(e),Zc(_h,t,!1,Fr(Ph(e))))},!1):(Kc=!1,Xc(e,function(){Jc(e,"unavailable",function(){ls("signIn",e,t,n)})}))}function dl(e){var t=Nr();return(t=Ct(t,e=Dn(Ph(e).a,"queryParameterForSignInSuccessUrl")))?Fe(je(t)):null}function pl(){return Ct(Nr(),"oobCode")}function gl(){var e=Ct(Nr(),"continueUrl");return e?function(){kr(e)}:null}function ml(e,t){var n=Dr(t);switch(function(e){var t=Nr();for(var n in t=Ct(t,e=Qr(Ph(e)))||"",Rr)if(Rr[n].toLowerCase()==t.toLowerCase())return Rr[n];return"callback"}(e)){case"callback":(t=dl(e))&&Ga(t,Eh(e)),e.gb()?ls("callback",e,n):ul(e,n);break;case"resetPassword":ls("passwordReset",e,n,pl(),gl());break;case"recoverEmail":ls("emailChangeRevocation",e,n,pl());break;case"verifyEmail":ls("emailVerification",e,n,pl(),gl());break;case"signIn":ls("emailLinkSignInCallback",e,n,Nr()),Mh();break;case"select":if((t=dl(e))&&Ga(t,Eh(e)),Za){ul(e,n);break}return void Yc(function(){Oh(e),Zc(_h,n,!0)},!0);default:throw Error("Unhandled widget operation.")}(t=no(Ph(e)))&&t()}function vl(e,t){Gu.call(this,sc,void 0,t,"anonymousUserMismatch"),this.a=e}function yl(e){Gu.call(this,tc,void 0,e,"callback")}function bl(e,t,n){if(n.user){var i={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},r=Qa(Eh(e)),o=r&&r.g;if(o&&!function(e,t){if(t==e.email)return!0;if(e.providerData)for(var n=0;n<e.providerData.length;n++)if(t==e.providerData[n].email)return!0;return!1}(n.user,o))!function(e,t,n){var i=zu(t);Dh(e,Rh(e).then(function(){t.m(),ls("emailMismatch",e,i,n)},function(e){e.name&&"cancel"==e.name||(e=il(e.code),t.g(e))}))}(e,t,i);else{var a=r&&r.a;a?Dh(e,n.user.linkWithCredential(a).then(function(n){i={user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},Al(e,t,i)},function(n){wl(e,t,n)})):Al(e,t,i)}}else n=zu(t),t.m(),Ya(Eh(e)),ul(e,n)}function Al(e,t,n){Ya(Eh(e)),el(e,t,n)}function wl(e,t,n){var i=zu(t);Ya(Eh(e)),n=il(n),t.m(),ul(e,i,void 0,n)}function _l(e,t,n,i){var r=zu(t);Dh(e,Ch(e).fetchSignInMethodsForEmail(n).then(function(o){t.m(),o.length?L(o,firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ls("passwordLinking",e,r,n):1==o.length&&o[0]===firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ls("emailLinkSignInLinking",e,r,n):(o=Hn(o,qr(Ph(e))))?ls("federatedLinking",e,r,n,o,i):(Ya(Eh(e)),ls("unsupportedProvider",e,r,n)):(Ya(Eh(e)),ls("passwordRecovery",e,r,n,!1,Cn().toString()))},function(n){wl(e,t,n)}))}function Cl(e,t){Gu.call(this,ac,void 0,t,"differentDeviceError"),this.a=e}function Sl(e,t,n,i){Gu.call(this,mc,{email:e,T:!!n},i,"emailChangeRevoke"),this.i=t,this.a=n||null}function El(){return su(this,"firebaseui-id-new-password")}function Tl(){return su(this,"firebaseui-id-password-toggle")}function kl(){this.La=!this.La;var e=Tl.call(this),t=El.call(this);this.La?(t.type="text",Es(e,"firebaseui-input-toggle-off"),Ts(e,"firebaseui-input-toggle-on")):(t.type="password",Es(e,"firebaseui-input-toggle-on"),Ts(e,"firebaseui-input-toggle-off")),t.focus()}function Il(){return su(this,"firebaseui-id-new-password-error")}function xl(){this.La=!1;var e=El.call(this);e.type="password";var t=Il.call(this);hu(this,e,function(){mu(t)&&(lu(e,!0),pu(t))});var n=Tl.call(this);Es(n,"firebaseui-input-toggle-on"),Ts(n,"firebaseui-input-toggle-off"),function(e,t,n){tr(e,_(nr,t=new $s(t))),js(uu(e),t,"focusin",n)}(this,e,function(){Es(n,"firebaseui-input-toggle-focus"),Ts(n,"firebaseui-input-toggle-blur")}),function(e,t,n){tr(e,_(nr,t=new $s(t))),js(uu(e),t,"focusout",n)}(this,e,function(){Es(n,"firebaseui-input-toggle-blur"),Ts(n,"firebaseui-input-toggle-focus")}),du(this,n,w(kl,this))}function Dl(){var e=El.call(this),t=Il.call(this);return ks(e)?(lu(e,!0),pu(t),t=!0):(lu(e,!1),gu(t,rn("Enter your password").toString()),t=!1),t?ks(e):null}function Nl(e,t,n){Gu.call(this,dc,{email:e},n,"passwordReset"),this.a=t}function Pl(e,t,n,i){"auth/weak-password"==(i&&i.code)?(e=il(i),lu(n.i(),!1),gu(n.A(),e),n.i().focus()):(n&&n.m(),(n=new Wc).render(t),Ah(e,n))}function Ol(e,t){try{var n="number"==typeof e.selectionStart}catch(e){n=!1}n?(e.selectionStart=t,e.selectionEnd=t):pe&&!ke("9")&&("textarea"==e.type&&(t=e.value.substring(0,t).replace(/(\r\n|\r|\n)/g,"\n").length),(e=e.createTextRange()).collapse(!0),e.move("character",t),e.select())}function Ml(e,t,n,i,r,o){Gu.call(this,oc,{email:n},o,"emailLinkSignInConfirmation",{H:i,G:r}),this.i=e,this.s=t}function Rl(e,t,n,i,r){Gu.call(this,lc,{ma:e},r,"emailLinkSignInLinkingDifferentDevice",{H:n,G:i}),this.a=t}function $l(e){Gu.call(this,nc,void 0,e,"blank")}function Ll(e,t,n,i,r){var o=new $l,a=new uo(n),s=a.a.a.get(co.Va)||"",u=a.a.a.get(co.Na)||"",c="1"===a.a.a.get(co.Ka),l=lo(a),h=a.a.a.get(co.PROVIDER_ID)||null,f=!Va(Ba,Eh(e)),d=i||function(e,t){var n=null;if(t=Va(Ba,t))try{var i=ya(e,t),r=JSON.parse(i);n=r&&r.email||null}catch(e){}return n}(u,Eh(e)),p=(i=function(e,t){var n=null;if(t=Va(ja,t))try{var i=ya(e,t);n=JSON.parse(i)}catch(e){}return Yo(n||null)}(u,Eh(e)))&&i.a;h&&p&&p.providerId!==h&&(p=null),o.render(t),Ah(e,o),Dh(e,o.M(function(){Li(null);var t=null;return(l&&f||f&&c?Fi(Error("anonymous-user-not-found")):function(e,t){var n=lo(new uo(t));return n?(t=new Di(function(t,i){var r=Sh(e).onAuthStateChanged(function(e){r(),e&&e.isAnonymous&&e.uid===n?t(e):e&&e.isAnonymous&&e.uid!==n?i(Error("anonymous-user-mismatch")):i(Error("anonymous-user-not-found"))});Dh(e,r)}),Dh(e,t),t):Li(null)}(e,n).then(function(e){if(h&&!p)throw Error("pending-credential-not-found");return e})).then(function(n){return t=n,r?null:Ch(e).checkActionCode(s)}).then(function(){return t})},[],function(i){d?function(e,t,n,i,r,o){var a=zu(t);t.X("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",rn("Signing in...").toString());var s=null;r=(o?function(e,t,n,i,r){Oh(e);var o=r||null,a=firebase.auth.EmailAuthProvider.credentialWithLink(n,i);return n=o?Ch(e).signInWithEmailLink(n,i).then(function(e){return e.user.linkWithCredential(o)}).then(function(){return Rh(e)}).then(function(){return $h(e,{code:"auth/email-already-in-use"},o)}):Ch(e).fetchSignInMethodsForEmail(n).then(function(n){return n.length?$h(e,{code:"auth/email-already-in-use"},a):t.linkWithCredential(a)}),Dh(e,n),n}(e,o,n,i,r):function(e,t,n,i){Oh(e);var r,o=i||null;return t=Ch(e).signInWithEmailLink(t,n).then(function(e){if(r={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},o)return e.user.linkWithCredential(o).then(function(e){r={user:e.user,credential:o,operationType:r.operationType,additionalUserInfo:e.additionalUserInfo}})}).then(function(){Rh(e)}).then(function(){return Sh(e).updateCurrentUser(r.user)}).then(function(){return r.user=Sh(e).currentUser,r}),Dh(e,t),t}(e,n,i,r)).then(function(n){qa(ja,Eh(e)),qa(Ba,Eh(e)),t.h(),t.X("firebaseui-icon-done",rn("Signed in!").toString()),s=setTimeout(function(){t.h(),el(e,t,n,!0)},1e3),Dh(e,function(){t&&(t.h(),t.m()),clearTimeout(s)})},function(r){if(t.h(),t.m(),!r.name||"cancel"!=r.name){var o=il(r);"auth/email-already-in-use"==r.code||"auth/credential-already-in-use"==r.code?(qa(ja,Eh(e)),qa(Ba,Eh(e))):"auth/invalid-email"==r.code?(o=rn("The email provided does not match the current sign-in session.").toString(),ls("emailLinkConfirmation",e,a,i,Fl,null,o)):ul(e,a,n,o)}}),Dh(e,r)}(e,o,d,n,p,i):c?(o.m(),ls("differentDeviceError",e,t)):(o.m(),ls("emailLinkConfirmation",e,t,n,Fl))},function(i){var r=void 0;if(!i||!i.name||"cancel"!=i.name)switch(o.m(),i&&i.message){case"anonymous-user-not-found":ls("differentDeviceError",e,t);break;case"anonymous-user-mismatch":ls("anonymousUserMismatch",e,t);break;case"pending-credential-not-found":ls("emailLinkNewDeviceLinking",e,t,n,Ul);break;default:i&&(r=il(i)),ul(e,t,void 0,r)}}))}function Fl(e,t,n,i){Ll(e,t,i,n,!0)}function Ul(e,t,n){Ll(e,t,n)}function Bl(e,t,n,i,r,o){Gu.call(this,cc,{email:e,ma:t},o,"emailLinkSignInLinking",{H:i,G:r}),this.a=n}function jl(e,t,n,i,r,o){Gu.call(this,ic,{email:e},o,"emailLinkSignInSent",{H:i,G:r}),this.s=t,this.a=n}function Vl(e,t,n,i,r,o,a){Gu.call(this,wc,{Ub:e,Fb:t},a,"emailMismatch",{H:r,G:o}),this.s=n,this.i=i}function ql(e,t,n,i,r){Gu.call(this,rc,void 0,r,"emailNotReceived",{H:n,G:i}),this.i=e,this.a=t}function Hl(e,t,n,i,r,o){Gu.call(this,hc,{email:e,ma:t},o,"federatedLinking",{H:i,G:r}),this.a=n}function Wl(e,t,n,i,r,o){Gu.call(this,Zu,{email:n,Oa:!!t},o,"passwordRecovery",{H:i,G:r}),this.a=e,this.s=t}function Gl(){return su(this,"firebaseui-id-name")}function zl(){return su(this,"firebaseui-id-name-error")}function Kl(e,t,n,i,r,o,a,s,u){Gu.call(this,Ju,{email:i,Ib:e,name:r,Oa:!!n,ga:!!s},u,"passwordSignUp",{H:o,G:a}),this.a=t,this.J=n,this.D=e}function Ql(e,t){var n=Jr(Ph(e)),i=t.P(),r=null;n&&(r=t.L());var o=t.R();if(i){if(n){if(!r)return void t.A().focus();r=ce(r)}if(o){var a=firebase.auth.EmailAuthProvider.credential(i,o);Dh(e,t.M(w(e.Lb,e),[i,o],function(i){var o={user:i.user,credential:a,operationType:i.operationType,additionalUserInfo:i.additionalUserInfo};return n?(i=i.user.updateProfile({displayName:r}).then(function(){return el(e,t,o)}),Dh(e,i),i):el(e,t,o)},function(n){if(!n.name||"cancel"!=n.name){var r=il(n);switch(n.code){case"auth/email-already-in-use":return function(e,t,n,i){function r(){var e=il(i);lu(t.i(),!1),gu(t.U(),e),t.i().focus()}var o=Ch(e).fetchSignInMethodsForEmail(n).then(function(i){i.length?r():(i=zu(t),t.m(),ls("passwordRecovery",e,i,n,!1,Cn().toString()))},function(){r()});return Dh(e,o),o}(e,t,i,n);case"auth/too-many-requests":r=rn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":lu(t.s(),!1),gu(t.ca(),r);break;default:hi(n="setAccountInfo: "+Aa(n),void 0),t.g(r)}}}))}else t.s().focus()}else t.i().focus()}function Yl(){return su(this,"firebaseui-id-phone-confirmation-code")}function Xl(){return su(this,"firebaseui-id-phone-confirmation-code-error")}function Jl(){return su(this,"firebaseui-id-resend-countdown")}function Zl(e,t,n,i,r,o,a,s,u){Gu.call(this,Sc,{phoneNumber:r},u,"phoneSignInFinish",{H:a,G:s}),this.Ra=o,this.i=new Ls(1e3),this.D=o,this.P=e,this.a=t,this.J=n,this.L=i}k(vl,Gu),vl.prototype.u=function(){var e=this;du(this,this.i(),function(){e.a()}),this.i().focus(),vl.o.u.call(this)},vl.prototype.l=function(){this.a=null,vl.o.l.call(this)},C(vl.prototype,{i:Tc}),cs.anonymousUserMismatch=function(e,t){var n=new vl(function(){n.m(),ul(e,t)});n.render(t),Ah(e,n)},k(yl,Gu),yl.prototype.M=function(e,t,n,i){return e.apply(null,t).then(n,i)},cs.callback=function(e,t,n){var i=new yl;i.render(t),Ah(e,i),t=n||bh(e),Dh(e,t.then(function(t){bl(e,i,t)},function(t){if(t&&("auth/account-exists-with-different-credential"==t.code||"auth/email-already-in-use"==t.code)&&t.email&&t.credential)Xa(new Qo(t.email,t.credential),Eh(e)),_l(e,i,t.email);else if(t&&"auth/user-cancelled"==t.code){var n=Qa(Eh(e)),r=il(t);n&&n.a?_l(e,i,n.g,r):n?cl(e,i,n.g,r):wl(e,i,t)}else t&&"auth/credential-already-in-use"==t.code||(t&&"auth/operation-not-supported-in-this-environment"==t.code&&al(e)?bl(e,i,{user:null,credential:null}):wl(e,i,t))}))},k(Cl,Gu),Cl.prototype.u=function(){var e=this;du(this,this.i(),function(){e.a()}),this.i().focus(),Cl.o.u.call(this)},Cl.prototype.l=function(){this.a=null,Cl.o.l.call(this)},C(Cl.prototype,{i:Tc}),cs.differentDeviceError=function(e,t){var n=new Cl(function(){n.m(),ul(e,t)});n.render(t),Ah(e,n)},k(Sl,Gu),Sl.prototype.u=function(){var e=this;du(this,su(this,"firebaseui-id-reset-password-link"),function(){e.i()}),this.a&&(this.A(this.a),this.s().focus()),Sl.o.u.call(this)},Sl.prototype.l=function(){this.i=this.a=null,Sl.o.l.call(this)},C(Sl.prototype,{s:Ec,D:Tc,A:kc}),k(Nl,Gu),Nl.prototype.u=function(){this.J(),this.D(this.a),Qu(this,this.i(),this.a),this.i().focus(),Nl.o.u.call(this)},Nl.prototype.l=function(){this.a=null,Nl.o.l.call(this)},C(Nl.prototype,{i:El,A:Il,L:Tl,J:xl,s:Dl,R:Ec,P:Tc,D:kc}),cs.passwordReset=function(e,t,n,i){Dh(e,Ch(e).verifyPasswordResetCode(n).then(function(r){var o=new Nl(r,function(){!function(e,t,n,i,r){var o=n.s();o&&Dh(e,n.M(w(Ch(e).confirmPasswordReset,Ch(e)),[i,o],function(){n.m();var i=new Hc(r);i.render(t),Ah(e,i)},function(i){Pl(e,t,n,i)}))}(e,t,o,n,i)});o.render(t),Ah(e,o)},function(){Pl(e,t)}))},cs.emailChangeRevocation=function(e,t,n){var i=null;Dh(e,Ch(e).checkActionCode(n).then(function(t){return i=t.data.email,Ch(e).applyActionCode(n)}).then(function(){!function(e,t,n){var i=new Sl(n,function(){Dh(e,i.M(w(Ch(e).sendPasswordResetEmail,Ch(e)),[n],function(){i.m(),(i=new jc(n,void 0,Yr(Ph(e)),Xr(Ph(e)))).render(t),Ah(e,i)},function(){i.g(rn("Unable to send password reset code to specified email").toString())}))});i.render(t),Ah(e,i)}(e,t,i)},function(){var n=new Gc;n.render(t),Ah(e,n)}))},cs.emailVerification=function(e,t,n,i){Dh(e,Ch(e).applyActionCode(n).then(function(){var n=new Vc(i);n.render(t),Ah(e,n)},function(){var n=new qc;n.render(t),Ah(e,n)}))},k(Ml,Gu),Ml.prototype.u=function(){this.D(this.i),this.J(this.i,this.s),this.a().focus(),Ol(this.a(),(this.a().value||"").length),Ml.o.u.call(this)},Ml.prototype.l=function(){this.s=this.i=null,Ml.o.l.call(this)},C(Ml.prototype,{a:Mc,P:Rc,D:$c,L:Lc,A:Fc,U:Ec,R:Tc,J:kc}),cs.emailLinkConfirmation=function(e,t,n,i,r,o){var a=new Ml(function(){var r=a.A();r?(a.m(),i(e,t,r,n)):a.a().focus()},function(){a.m(),ul(e,t,r||void 0)},r||void 0,Yr(Ph(e)),Xr(Ph(e)));a.render(t),Ah(e,a),o&&a.g(o)},k(Rl,Gu),Rl.prototype.u=function(){this.s(this.a),this.i().focus(),Rl.o.u.call(this)},Rl.prototype.l=function(){this.a=null,Rl.o.l.call(this)},C(Rl.prototype,{i:Ec,s:kc}),cs.emailLinkNewDeviceLinking=function(e,t,n,i){var r=new uo(n);if(n=r.a.a.get(co.PROVIDER_ID)||null,ho(r,null),n){var o=new Rl(Hr(Ph(e),n),function(){o.m(),i(e,t,r.toString())},Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o)}else ul(e,t)},k($l,Gu),cs.emailLinkSignInCallback=Ll,k(Bl,Gu),Bl.prototype.u=function(){this.s(this.a),this.i().focus(),Bl.o.u.call(this)},Bl.prototype.l=function(){this.a=null,Bl.o.l.call(this)},C(Bl.prototype,{i:Ec,s:kc}),cs.emailLinkSignInLinking=function(e,t,n){var i=Qa(Eh(e));if(Ya(Eh(e)),i){var r=i.a.providerId,o=new Bl(n,Hr(Ph(e),r),function(){!function(e,t,n,i){var r=zu(t);hl(e,t,n,function(){ul(e,r,n)},function(i){if(!i.name||"cancel"!=i.name){var o=il(i);i&&"auth/network-request-failed"==i.code?t.g(o):(t.m(),ul(e,r,n,o))}},i)}(e,o,n,i)},Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o)}else ul(e,t)},k(jl,Gu),jl.prototype.u=function(){var e=this;du(this,this.i(),function(){e.a()}),du(this,su(this,"firebaseui-id-trouble-getting-email-link"),function(){e.s()}),this.i().focus(),jl.o.u.call(this)},jl.prototype.l=function(){this.a=this.s=null,jl.o.l.call(this)},C(jl.prototype,{i:Tc}),cs.emailLinkSignInSent=function(e,t,n,i,r){var o=new jl(n,function(){o.m(),ls("emailNotReceived",e,t,n,i,r)},function(){o.m(),i()},Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o)},k(Vl,Gu),Vl.prototype.u=function(){this.D(this.s,this.i),this.A().focus(),Vl.o.u.call(this)},Vl.prototype.l=function(){this.i=this.a=null,Vl.o.l.call(this)},C(Vl.prototype,{A:Ec,J:Tc,D:kc}),cs.emailMismatch=function(e,t,n){var i=Qa(Eh(e));if(i){var r=new Vl(n.user.email,i.g,function(){var t=r;Ya(Eh(e)),el(e,t,n)},function(){var t=n.credential.providerId,o=zu(r);r.m(),i.a?ls("federatedLinking",e,o,i.g,t):ls("federatedSignIn",e,o,i.g,t)},Yr(Ph(e)),Xr(Ph(e)));r.render(t),Ah(e,r)}else ul(e,t)},k(ql,Gu),ql.prototype.u=function(){var e=this;du(this,this.s(),function(){e.a()}),du(this,this.ya(),function(){e.i()}),this.s().focus(),ql.o.u.call(this)},ql.prototype.ya=function(){return su(this,"firebaseui-id-resend-email-link")},ql.prototype.l=function(){this.a=this.i=null,ql.o.l.call(this)},C(ql.prototype,{s:Tc}),cs.emailNotReceived=function(e,t,n,i,r){var o=new ql(function(){hl(e,o,n,i,function(e){e=il(e),o.g(e)},r)},function(){o.m(),ul(e,t,n)},Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o)},k(Hl,Gu),Hl.prototype.u=function(){this.s(this.a),this.i().focus(),Hl.o.u.call(this)},Hl.prototype.l=function(){this.a=null,Hl.o.l.call(this)},C(Hl.prototype,{i:Ec,s:kc}),cs.federatedLinking=function(e,t,n,i,r){var o=Qa(Eh(e));if(o&&o.a){var a=new Hl(n,Hr(Ph(e),i),function(){rl(e,a,i,n)},Yr(Ph(e)),Xr(Ph(e)));a.render(t),Ah(e,a),r&&a.g(r)}else ul(e,t)},cs.federatedRedirect=function(e,t){var n=new $l;n.render(t),Ah(e,n),rl(e,n,t=qr(Ph(e))[0])},cs.federatedSignIn=function(e,t,n,i,r){var o=new Hl(n,Hr(Ph(e),i),function(){rl(e,o,i,n)},Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o),r&&o.g(r)},cs.passwordLinking=function(e,t,n){var i=Qa(Eh(e));Ya(Eh(e));var r=i&&i.a;if(r){var o=new Pc(n,function(){!function(e,t,n,i){var r=t.A();r?Dh(e,t.M(w(e.Kb,e),[n,r],function(n){return n=n.user.linkWithCredential(i).then(function(n){return el(e,t,{user:n.user,credential:i,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})}),Dh(e,n),n},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":lu(t.i(),!1),gu(t.D(),il(e));break;case"auth/too-many-requests":t.g(il(e));break;default:hi("signInWithEmailAndPassword: "+e.message,void 0),t.g(il(e))}})):t.i().focus()}(e,o,n,r)},function(){o.m(),ls("passwordRecovery",e,t,n)},Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o)}else ul(e,t)},k(Wl,Gu),Wl.prototype.u=function(){this.J(),this.L(this.a,this.s),ks(this.i())||this.i().focus(),Qu(this,this.i(),this.a),Wl.o.u.call(this)},Wl.prototype.l=function(){this.s=this.a=null,Wl.o.l.call(this)},C(Wl.prototype,{i:Mc,D:Rc,J:$c,P:Lc,A:Fc,U:Ec,R:Tc,L:kc}),cs.passwordRecovery=function(e,t,n,i,r){var o=new Wl(function(){!function(e,t){var n=t.A();if(n){var i=zu(t);Dh(e,t.M(w(Ch(e).sendPasswordResetEmail,Ch(e)),[n],function(){t.m();var r=new jc(n,function(){r.m(),ul(e,i)},Yr(Ph(e)),Xr(Ph(e)));r.render(i),Ah(e,r)},function(e){lu(t.i(),!1),gu(t.D(),il(e))}))}else t.i().focus()}(e,o)},i?void 0:function(){o.m(),ul(e,t)},n,Yr(Ph(e)),Xr(Ph(e)));o.render(t),Ah(e,o),r&&o.g(r)},cs.passwordSignIn=function(e,t,n,i){var r=new Uc(function(){!function(e,t){var n=t.J(),i=t.A();if(n)if(i){var r=firebase.auth.EmailAuthProvider.credential(n,i);Dh(e,t.M(w(e.Ob,e),[n,i],function(n){return el(e,t,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":lu(t.s(),!1),gu(t.U(),il(e));break;case"auth/too-many-requests":case"auth/wrong-password":lu(t.i(),!1),gu(t.D(),il(e));break;default:hi("verifyPassword: "+e.message,void 0),t.g(il(e))}}))}else t.i().focus();else t.s().focus()}(e,r)},function(){var n=r.P();r.m(),ls("passwordRecovery",e,t,n)},n,Yr(Ph(e)),Xr(Ph(e)),i);r.render(t),Ah(e,r)},k(Kl,Gu),Kl.prototype.u=function(){this.aa(),this.D&&this.Ra(),this.sa(),this.ra(this.a,this.J),this.D?(Ku(this,this.i(),this.A()),Ku(this,this.A(),this.s())):Ku(this,this.i(),this.s()),this.a&&Qu(this,this.s(),this.a),ks(this.i())?this.D&&!ks(this.A())?this.A().focus():this.s().focus():this.i().focus(),Kl.o.u.call(this)},Kl.prototype.l=function(){this.J=this.a=null,Kl.o.l.call(this)},C(Kl.prototype,{i:Mc,U:Rc,aa:$c,bb:Lc,P:Fc,A:Gl,mc:zl,Ra:function(){var e=Gl.call(this),t=zl.call(this);hu(this,e,function(){mu(t)&&(lu(e,!0),pu(t))})},L:function(){var e=Gl.call(this),t=zl.call(this),n=ks(e);return lu(e,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(pu(t),t=!0):(gu(t,rn("Enter your account name").toString()),t=!1),t?G(ks(e)):null},s:El,ca:Il,zb:Tl,sa:xl,R:Dl,jc:Ec,Bb:Tc,ra:kc}),cs.passwordSignUp=function(e,t,n,i,r,o){var a=new Kl(Jr(Ph(e)),function(){Ql(e,a)},r?void 0:function(){a.m(),ul(e,t)},n,i,Yr(Ph(e)),Xr(Ph(e)),o);a.render(t),Ah(e,a)},k(Zl,Gu),Zl.prototype.u=function(){var e=this;this.R(this.Ra),pr(this.i,"tick",this.A,!1,this),this.i.start(),du(this,su(this,"firebaseui-id-change-phone-number-link"),function(){e.P()}),du(this,this.ya(),function(){e.L()}),this.sa(this.a),this.ca(this.a,this.J),this.s().focus(),Zl.o.u.call(this)},Zl.prototype.l=function(){this.L=this.J=this.a=this.P=null,Fs(this.i),vr(this.i,"tick",this.A),this.i=null,Zl.o.l.call(this)},Zl.prototype.A=function(){--this.D,0<this.D?this.R(this.D):(Fs(this.i),vr(this.i,"tick",this.A),this.ra(),this.bb())},C(Zl.prototype,{s:Yl,aa:Xl,sa:function(e){var t=Yl.call(this),n=Xl.call(this);hu(this,t,function(){mu(n)&&(lu(t,!0),pu(n))}),e&&fu(this,t,function(){e()})},U:function(){var e=G(ks(Yl.call(this))||"");return/^\d{6}$/.test(e)?e:null},rb:Jl,R:function(e){lt(Jl.call(this),rn("Resend code in "+(9<e?"0:":"0:0")+e).toString())},ra:function(){pu(this.rb())},ya:function(){return su(this,"firebaseui-id-resend-link")},bb:function(){gu(this.ya())},Bb:Ec,zb:Tc,ca:kc}),cs.phoneSignInFinish=function(e,t,n,i,r,o){var a=new Zl(function(){a.m(),ls("phoneSignInStart",e,t,n)},function(){!function(e,t,n,i){function r(e){t.s().focus(),lu(t.s(),!1),gu(t.aa(),e)}var o=t.U();o?(t.X("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",rn("Verifying...").toString()),Dh(e,t.M(w(i.confirm,i),[o],function(n){t.h(),t.X("firebaseui-icon-done",rn("Verified!").toString());var i=setTimeout(function(){t.h(),t.m();var i={user:Sh(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};el(e,t,i,!0)},1e3);Dh(e,function(){t&&t.h(),clearTimeout(i)})},function(i){if(i.name&&"cancel"==i.name)t.h();else{var o=il(i);switch(i.code){case"auth/credential-already-in-use":t.h();break;case"auth/code-expired":i=zu(t),t.h(),t.m(),ls("phoneSignInStart",e,i,n,o);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":t.h(),r(o);break;default:t.h(),t.g(o)}}}))):r(rn("Wrong code. Try again.").toString())}(e,a,n,r)},function(){a.m(),ul(e,t)},function(){a.m(),ls("phoneSignInStart",e,t,n)},qn(n),i,Yr(Ph(e)),Xr(Ph(e)));a.render(t),Ah(e,a),o&&a.g(o)};var eh=!(pe||ie("Safari")&&!(ue()||ie("Coast")||ie("Opera")||ie("Edge")||ie("Firefox")||ie("FxiOS")||ie("Silk")||ie("Android")));function th(e,t){return/-[a-z]/.test(t)?null:eh&&e.dataset?!ie("Android")||ue()||ie("Firefox")||ie("FxiOS")||ie("Opera")||ie("Silk")||t in e.dataset?void 0===(e=e.dataset[t])?null:e:null:e.getAttribute("data-"+String(t).replace(/([A-Z])/g,"-$1").toLowerCase())}function nh(e,t,n){var i=this;e=Yt(Nu,{items:e},null,this.w),Fu.call(this,e,!0,!0),n&&(n=function(e,t){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if(th(e[n],"listboxid")===t)return e[n];return null}(e,n))&&(n.focus(),function(e,t){var n=(t=t||st(document))||st(document),i=nu(e),r=nu(n);if(!pe||9<=Number(Ee)){s=eu(n,"borderLeftWidth");var a=eu(n,"borderRightWidth");u=eu(n,"borderTopWidth"),c=eu(n,"borderBottomWidth"),a=new Zs(parseFloat(u),parseFloat(a),parseFloat(c),parseFloat(s))}else{var s=ru(n,"borderLeft");a=ru(n,"borderRight");var u=ru(n,"borderTop"),c=ru(n,"borderBottom");a=new Zs(u,a,c,s)}n==st(document)?(s=i.a-n.scrollLeft,i=i.g-n.scrollTop,!pe||10<=Number(Ee)||(s+=a.left,i+=a.top)):(s=i.a-r.a-a.left,i=i.g-r.g-a.top),r=e.offsetWidth,a=e.offsetHeight,u=ye&&!r&&!a,e=o(r)&&!u||!e.getBoundingClientRect?new tt(r,a):new tt((e=tu(e)).right-e.left,e.bottom-e.top),r=n.clientHeight-e.height,a=n.scrollLeft,u=n.scrollTop,n=new et(a+=Math.min(s,Math.max(s-(n.clientWidth-e.width),0)),u+=Math.min(i,Math.max(i-r,0))),t.scrollLeft=n.a,t.scrollTop=n.g}(n,e)),du(this,e,function(e){(e=(e=ht(e.target,"firebaseui-id-list-box-dialog-button"))&&th(e,"listboxid"))&&(Uu.call(i),t(e))})}function ih(){return su(this,"firebaseui-id-phone-number")}function rh(){return su(this,"firebaseui-id-country-selector")}function oh(){return su(this,"firebaseui-id-phone-number-error")}function ah(e,t){return!(!(e=Rn(e))||!L(t,e))}function sh(e){return"firebaseui-flag-"+e.f}function uh(e){var t=this;nh.call(this,function(e){return M(e,function(e){return{id:e.c,Ga:"firebaseui-flag "+sh(e),label:e.name+" ‎+"+e.b}})}(e.a),function(n){ch.call(t,n,e,!0),t.K().focus()},this.wa)}function ch(e,t,n){var i=Rn(e);i&&(n&&((t=Mn(t,n=G(ks(ih.call(this))||""))).length&&t[0].b!=i.b&&(n="+"+i.b+n.substr(t[0].b.length+1),Is(ih.call(this),n))),t=Rn(this.wa),this.wa=e,e=su(this,"firebaseui-id-country-selector-flag"),t&&Ts(e,sh(t)),Es(e,sh(i)),lt(su(this,"firebaseui-id-country-selector-code"),"‎+"+i.b))}function lh(e,t,n,i,r,o,a,s,u,c){Gu.call(this,Cc,{sb:t,va:u||null,Qa:!!n,ga:!!o},c,"phoneSignInStart",{H:i,G:r}),this.J=s||null,this.L=t,this.a=e,this.A=n||null,this.aa=a||null}function hh(e,t,n,i){try{var r=t.R(ss)}catch(e){return}r?os?(t.X("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",rn("Verifying...").toString()),Dh(e,t.M(w(e.Pb,e),[qn(r),n],function(n){var i=zu(t);t.X("firebaseui-icon-done",rn("Code sent!").toString());var o=setTimeout(function(){t.h(),t.m(),ls("phoneSignInFinish",e,i,r,15,n)},1e3);Dh(e,function(){t&&t.h(),clearTimeout(o)})},function(e){if(t.h(),!e.name||"cancel"!=e.name){grecaptcha.reset(us),os=null;var n=e&&e.message||"";if(e.code)switch(e.code){case"auth/too-many-requests":n=rn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return t.K().focus(),void gu(t.D(),wn().toString());default:n=il(e)}t.g(n)}}))):as?gu(t.s(),rn("Solve the reCAPTCHA").toString()):!as&&i&&t.i().click():(t.K().focus(),gu(t.D(),wn().toString()))}function fh(e,t,n,i,r){Gu.call(this,_c,{Hb:t},r,"providerSignIn",{H:n,G:i}),this.a=e}function dh(e,t,n,i,r,o,a){Gu.call(this,Yu,{email:n,Qa:!!t,ga:!!o},a,"signIn",{H:i,G:r}),this.a=e,this.s=t}function ph(e,t,n,i,r,o){Gu.call(this,fc,{email:e},o,"unsupportedProvider",{H:i,G:r}),this.a=t,this.i=n}function gh(e,t){this.$=!1;var n=yh(t);if(vh[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');vh[n]=this,this.g=e,this.A=null,this.s=!1,mh(this.g),this.v=firebase.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),mh(this.v),this.v.setPersistence&&this.v.setPersistence(firebase.auth.Auth.Persistence.SESSION),this.ea=t,this.X=new function(){this.a=new kn,In(this.a,"acUiConfig"),In(this.a,"autoUpgradeAnonymousUsers"),In(this.a,"callbacks"),In(this.a,"credentialHelper",Pr),In(this.a,"immediateFederatedRedirect",!1),In(this.a,"popupMode",!1),In(this.a,"privacyPolicyUrl"),In(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),In(this.a,"queryParameterForWidgetMode","mode"),In(this.a,"signInFlow"),In(this.a,"signInOptions"),In(this.a,"signInSuccessUrl"),In(this.a,"siteName"),In(this.a,"tosUrl"),In(this.a,"widgetUrl")},this.a=this.K=this.i=this.F=null,this.j=[],this.Z=!1,this.O=Fo.Sa(),this.h=this.C=null,this.ba=this.w=!1}function mh(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}k(lh,Gu),lh.prototype.u=function(){this.ca(this.aa,this.J),this.P(this.a,this.A||void 0),this.L||Ku(this,this.K(),this.i()),Qu(this,this.i(),this.a),this.K().focus(),Ol(this.K(),(this.K().value||"").length),lh.o.u.call(this)},lh.prototype.l=function(){this.A=this.a=null,lh.o.l.call(this)},C(lh.prototype,{pb:Bu,K:ih,D:oh,ca:function(e,t,n){var i=this,r=ih.call(this),o=rh.call(this),a=oh.call(this),s=e||Bn,u=s.a;if(0==u.length)throw Error("No available countries provided.");(function(e,t){var n=e.a,i=ah("1-US-0",n),r=null;if(!(r=t&&ah(t,n)?t:i?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");ch.call(this,r,e)}).call(i,s,t),du(this,o,function(){uh.call(i,s)}),hu(this,r,function(){mu(a)&&(lu(r,!0),pu(a));var e=G(ks(r)||""),t=Rn(this.wa),n=Mn(s,e);e=ah("1-US-0",u),n.length&&n[0].b!=t.b&&(t=n[0],ch.call(i,"1"==t.b&&e?"1-US-0":t.c,s))}),n&&fu(this,r,function(){n()})},R:function(e){var t=G(ks(ih.call(this))||""),n=(e=e||Bn).a,i=Mn(Bn,t);if(i.length&&!L(n,i[0]))throw Is(ih.call(this)),ih.call(this).focus(),gu(oh.call(this),rn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=Rn(this.wa),i.length&&i[0].b!=n.b&&ch.call(this,i[0].c,e),i.length&&(t=t.substr(i[0].b.length+1)),t?new jn(this.wa,t):null},sa:rh,U:function(){return su(this,"firebaseui-recaptcha-container")},s:function(){return su(this,"firebaseui-id-recaptcha-error")},i:Ec,ra:Tc,P:kc}),cs.phoneSignInStart=function(e,t,n,i){var r=function(e){var t=null;if(P(jr(e),function(e){e.provider==firebase.auth.PhoneAuthProvider.PROVIDER_ID&&m(e.recaptchaParameters)&&!d(e.recaptchaParameters)&&(t=oe(e.recaptchaParameters))}),t){var n=[];P(Lr,function(e){void 0!==t[e]&&(n.push(e),delete t[e])}),n.length&&gi('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return t}(Ph(e))||{};os=null,as=!(r&&"invisible"===r.size);var o=sl(e),s=function(e){var t=(e=Vr(e,firebase.auth.PhoneAuthProvider.PROVIDER_ID))&&e.defaultCountry||null;t=t&&$n(t);var n=null;return e&&a(e.loginHint)&&(n=Vn(e.loginHint)),t&&t[0]||n&&Rn(n.a)||null}(Ph(e)),u=o?function(e){var t=null;return(e=Vr(e,firebase.auth.PhoneAuthProvider.PROVIDER_ID))&&a(e.loginHint)&&(t=Vn(e.loginHint)),e&&e.defaultNationalNumber||t&&t.va||null}(Ph(e)):null;s=n&&n.a||s&&s.c||null,n=n&&n.va||u,(u=Kr(Ph(e)))&&Fn(u),ss=u?new On(Kr(Ph(e))):Bn;var c=new lh(function(t){hh(e,c,l,!(!t||!t.keyCode))},as,o?null:function(){l.clear(),c.m(),ul(e,t)},Yr(Ph(e)),Xr(Ph(e)),o,ss,s,n);c.render(t),Ah(e,c),i&&c.g(i),r.callback=function(t){c.s()&&pu(c.s()),os=t,as||hh(e,c,l)},r["expired-callback"]=function(){os=null};var l=new firebase.auth.RecaptchaVerifier(as?c.U():c.i(),r,Sh(e).app);Dh(e,c.M(w(l.render,l),[],function(e){us=e},function(n){n.name&&"cancel"==n.name||(n=il(n),c.m(),ul(e,t,void 0,n))}))},k(fh,Gu),fh.prototype.u=function(){this.i(this.a),fh.o.u.call(this)},fh.prototype.l=function(){this.a=null,fh.o.l.call(this)},C(fh.prototype,{i:function(e){function t(t){e(t)}for(var n=this.j?it("firebaseui-id-idp-button",this.j||this.w.a):[],i=0;i<n.length;i++){var r=n[i];du(this,r,_(t,th(r,"providerId")))}}}),cs.providerSignIn=function(e,t,n){var i=new fh(function(n){n==firebase.auth.EmailAuthProvider.PROVIDER_ID?(i.m(),fl(e,t)):n==firebase.auth.PhoneAuthProvider.PROVIDER_ID?(i.m(),ls("phoneSignInStart",e,t)):"anonymous"==n?function(e,t){Dh(e,t.M(w(e.Mb,e),[],function(n){return t.m(),el(e,t,n,!0)},function(e){e.name&&"cancel"==e.name||(hi("ContinueAsGuest: "+e.code,void 0),e=il(e),t.g(e))}))}(e,i):rl(e,i,n),Oh(e),e.O.cancel()},Wr(Ph(e)),Yr(Ph(e)),Xr(Ph(e)));i.render(t),Ah(e,i),n&&i.g(n),function(e){Oh(e);try{(function e(t,n,i){if(t.a&&n){var o=function(){t.h=!0;var r=Promise.resolve(null);return i||(r=t.a.retrieve(n).catch(function(e){if("userCanceled"===e.type||"illegalConcurrentRequest"===e.type)throw e;return null})),r.then(function(e){return e||t.a.hint(n)}).catch(function(r){if("userCanceled"===r.type)t.g=Promise.resolve();else if("illegalConcurrentRequest"===r.type)return t.cancel(),e(t,n,i);return null})};return t.g?t.g.then(o):o()}if(n)return o=Ui(Bo.Sa().load().then(function(){return t.a=r.googleyolo,e(t,n,i)}),function(){return null}),Promise.resolve(o);if("undefined"!=typeof Promise)return Promise.resolve(null);throw Error("One-Tap sign in not supported in the current browser!")})(e.O,function(e){var t=[],n=[];P(jr(e),function(e){e.authMethod&&(t.push(e.authMethod),e.clientId&&n.push({uri:e.authMethod,clientId:e.clientId}))});var i=null;return"googleyolo"===so(e)&&t.length&&(i={supportedIdTokenProviders:n,supportedAuthMethods:t}),i}(Ph(e)),function(e){var t;return Oh(e),(t=e.Z)||(e=zr(e=Ph(e),firebase.auth.GoogleAuthProvider.PROVIDER_ID),t=!(!e||"select_account"!==e.prompt)),t}(e)).then(function(t){return!!e.a&&ol(e,e.a,t)})}catch(e){}}(e)},cs.sendEmailLinkForSignIn=function(e,t,n,i){var r=new yl;r.render(t),Ah(e,r),hl(e,r,n,i,function(i){r.m(),i=il(i),ls("signIn",e,t,n,i)})},k(dh,Gu),dh.prototype.u=function(){this.D(this.a),this.J(this.a,this.s||void 0),this.i().focus(),Ol(this.i(),(this.i().value||"").length),dh.o.u.call(this)},dh.prototype.l=function(){this.s=this.a=null,dh.o.l.call(this)},C(dh.prototype,{i:Mc,P:Rc,D:$c,L:Lc,A:Fc,U:Ec,R:Tc,J:kc}),cs.signIn=function(e,t,n,i){var r=al(e),o=new dh(function(){var t=o,n=t.A()||"";n&&cl(e,t,n)},r&&so(Ph(e))!=Pr?null:function(){o.m(),ul(e,t,n)},n,Yr(Ph(e)),Xr(Ph(e)),r);o.render(t),Ah(e,o),i&&o.g(i)},k(ph,Gu),ph.prototype.u=function(){this.A(this.a,this.i),this.s().focus(),ph.o.u.call(this)},ph.prototype.l=function(){this.i=this.a=null,ph.o.l.call(this)},C(ph.prototype,{s:Ec,D:Tc,A:kc}),cs.unsupportedProvider=function(e,t,n){var i=new ph(n,function(){i.m(),ls("passwordRecovery",e,t,n)},function(){i.m(),ul(e,t,n)},Yr(Ph(e)),Xr(Ph(e)));i.render(t),Ah(e,i)};var vh={};function yh(e){return e||"[DEFAULT]"}function bh(e){return Oh(e),e.i||(e.i=Ih(e,function(t){return t&&!Qa(Eh(e))?Li(Sh(e).getRedirectResult().then(function(e){return e},function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return $h(e,t)})):Li(Ch(e).getRedirectResult().then(function(t){return Br(Ph(e))&&!t.user&&e.h&&!e.h.isAnonymous?Sh(e).getRedirectResult():t}))})),e.i}function Ah(e,t){Oh(e),e.a=t}var wh=null;function _h(){return wh}function Ch(e){return Oh(e),e.v}function Sh(e){return Oh(e),e.g}function Eh(e){return Oh(e),e.ea}function Th(e){return"signIn"===((e=new uo(e)).a.a.get(co.lb)||null)&&!!e.a.a.get(co.Va)}function kh(e,t){var n=Dr(t);if(n.setAttribute("lang","en".replace(/_/g,"-")),wh){var i=wh;Oh(i),Qa(Eh(i))&&gi("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),wh.reset()}wh=e,e.K=n,function(e,t){e.I=null,e.F=new wo(t),e.F.register(),pr(e.F,"pageEnter",function(t){if(t=t&&t.pageId,e.I!=t){var n=Ph(e);(n=ao(n).uiChanged||null)&&n(e.I,t),e.I=t}})}(e,n),ka(new Ia)&&ka(new xa)?ml(e,t):(t=Dr(t),(n=new zc(rn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(t),Ah(e,n)),qa($a,Eh(e))}function Ih(e,t){if(e.w)return t(xh(e));if(Dh(e,function(){e.w=!1}),Br(Ph(e))){var n=new Di(function(n){Dh(e,e.g.onAuthStateChanged(function(i){e.h=i,e.w||(e.w=!0,n(t(xh(e))))}))});return Dh(e,n),n}return e.w=!0,t(null)}function xh(e){return Oh(e),Br(Ph(e))&&e.h&&e.h.isAnonymous?e.h:null}function Dh(e,t){if(Oh(e),t){e.j.push(t);var n=function(){B(e.j,function(e){return e==t})};"function"!=typeof t&&t.then(n,n)}}function Nh(e){void 0!==e.g.languageCode&&e.s&&(e.s=!1,e.g.languageCode=e.A)}function Ph(e){return Oh(e),e.X}function Oh(e){if(e.$)throw Error("AuthUI instance is deleted!")}function Mh(){var e=Nr();if(Th(e)){for(var t in e=new uo(e),co)co.hasOwnProperty(t)&&jt(e.a.a,co[t]);t={state:"signIn",mode:"emailLink",operation:"clear"};var n=r.document.title;r.history&&r.history.replaceState&&r.history.replaceState(t,n,e.toString())}}function Rh(e){return Oh(e),Ch(e).signOut()}function $h(e,t,n){if(Oh(e),t&&t.code&&("auth/email-already-in-use"==t.code||"auth/credential-already-in-use"==t.code)){var i=oo(Ph(e));return Li().then(function(){return i(new En("anonymous-upgrade-merge-conflict",null,n||t.credential))}).then(function(){throw e.a&&(e.a.m(),e.a=null),t})}return Fi(t)}(e=gh.prototype).gb=function(){return Oh(this),"pending"===Va($a,Eh(this))||Th(Nr())},e.start=function(e,t){Oh(this);var n=this;void 0!==this.g.languageCode&&(this.A=this.g.languageCode);var i="en".replace(/_/g,"-");this.g.languageCode=i,this.v.languageCode=i,this.s=!0,this.cb(t);var o=r.document;this.C?this.C.then(function(){"complete"==o.readyState?kh(n,e):mr(window,"load",function(){kh(n,e)})}):"complete"==o.readyState?kh(n,e):mr(window,"load",function(){kh(n,e)})},e.disableAutoSignIn=function(){Oh(this),this.Z=!0},e.reset=function(){Oh(this);var e=this;this.K&&this.K.removeAttribute("lang"),this.F&&bo(this.F),Nh(this),Mh(),qa($a,Eh(this)),Oh(this),this.O.cancel(),this.i=Li({user:null,credential:null}),wh==this&&(wh=null),this.K=null;for(var t=0;t<this.j.length;t++)"function"==typeof this.j[t]?this.j[t]():this.j[t].cancel&&this.j[t].cancel();this.j=[],Ya(Eh(this)),this.a&&(this.a.m(),this.a=null),this.I=null,this.v&&(this.C=Rh(this).then(function(){e.C=null},function(){e.C=null}))},e.cb=function(e){Oh(this);var t,n=this.X;for(t in e)try{xn(n.a,t,e[t])}catch(e){hi('Invalid config: "'+t+'"',void 0)}be&&xn(n.a,"popupMode",!1),Kr(n),!this.ba&&io(Ph(this))&&(gi("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.ba=!0)},e.Jb=function(){Oh(this);var e=Ph(this),t=Dn(e.a,"widgetUrl"),n=Ur(e,t);Ph(this).a.get("popupMode")?(e=(window.screen.availHeight-600)/2,t=(window.screen.availWidth-500)/2,n=n||"about:blank",(e={width:500,height:600,top:0<e?e:0,left:0<t?t:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=e.target||n.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=Tr(n,e))&&e.focus()):kr(n)},e.ub=function(){var e=this;return Oh(this),this.v.app.delete().then(function(){var t=yh(Eh(e));delete vh[t],e.reset(),e.$=!0})},e.vb=function(e,t){Oh(this);var n=this,i=function(){for(var e=32,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();if(!Zr(Ph(this)))throw Error("Email link sign-in should be enabled to trigger email sending.");var r=function(e){if(Zr(e)){var t={url:Nr(),handleCodeInApp:!0};return(e=Vr(e,firebase.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof e.emailLinkSignIn&&se(t,e.emailLinkSignIn()),t.url=Dt(Nr(),t.url).toString(),t}return null}(Ph(this)),o=new uo(r.url);return function(e,t){t?e.a.a.set(co.Na,t):jt(e.a.a,co.Na)}(o,i),t&&t.a&&(function(e,t,n){Ha(ja,va(e,JSON.stringify(t.na())),n)}(i,t,Eh(this)),ho(o,t.a.providerId)),function(e,t){null!==t?e.a.a.set(co.Ka,t?"1":"0"):jt(e.a.a,co.Ka)}(o,function(e){return!(!(e=Vr(e,firebase.auth.EmailAuthProvider.PROVIDER_ID))||!e.forceSameDevice)}(Ph(this))),Ih(this,function(t){return t&&((t=t.uid)?o.a.a.set(co.Ja,t):jt(o.a.a,co.Ja)),r.url=o.toString(),Ch(n).sendSignInLinkToEmail(e,r)}).then(function(){var t=Eh(n),r={};r.email=e,Ha(Ba,va(i,JSON.stringify(r)),t)},function(e){throw qa(ja,Eh(n)),qa(Ba,Eh(n)),e})},e.Ob=function(e,t){Oh(this);var n=this;return Ch(this).signInWithEmailAndPassword(e,t).then(function(i){return Ih(n,function(r){return r?Rh(n).then(function(){return $h(n,{code:"auth/email-already-in-use"},firebase.auth.EmailAuthProvider.credential(e,t))}):i})})},e.Lb=function(e,t){Oh(this);var n=this;return Ih(this,function(i){if(i){var r=firebase.auth.EmailAuthProvider.credential(e,t);return i.linkWithCredential(r)}return Ch(n).createUserWithEmailAndPassword(e,t)})},e.Nb=function(e){Oh(this);var t=this;return Ih(this,function(n){return n?n.linkWithCredential(e).then(function(e){return e},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return $h(t,n,e)}):Ch(t).signInWithCredential(e)})},e.Qb=function(e){Oh(this);var t=this,n=this.i;return this.i=null,Ih(this,function(n){return n&&!Qa(Eh(t))?n.linkWithRedirect(e):Ch(t).signInWithRedirect(e)}).then(function(){},function(e){throw t.i=n,e})},e.Pb=function(e,t){Oh(this);var n=this;return Ih(this,function(i){return i?i.linkWithPhoneNumber(e,t).then(function(e){return new jo(e,function(e){if("auth/credential-already-in-use"==e.code)return $h(n,e);throw e})}):Sh(n).signInWithPhoneNumber(e,t).then(function(e){return new jo(e)})})},e.Mb=function(){return Oh(this),Sh(this).signInAnonymously()},e.Kb=function(e,t){return Oh(this),Ch(this).signInWithEmailAndPassword(e,t)},T("firebaseui.auth.AuthUI",gh),T("firebaseui.auth.AuthUI.getInstance",function(e){return e=yh(e),vh[e]?vh[e]:null}),T("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",gh.prototype.disableAutoSignIn),T("firebaseui.auth.AuthUI.prototype.start",gh.prototype.start),T("firebaseui.auth.AuthUI.prototype.setConfig",gh.prototype.cb),T("firebaseui.auth.AuthUI.prototype.signIn",gh.prototype.Jb),T("firebaseui.auth.AuthUI.prototype.reset",gh.prototype.reset),T("firebaseui.auth.AuthUI.prototype.delete",gh.prototype.ub),T("firebaseui.auth.AuthUI.prototype.isPendingRedirect",gh.prototype.gb),T("firebaseui.auth.AuthUIError",En),T("firebaseui.auth.AuthUIError.prototype.toJSON",En.prototype.toJSON),T("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",Pr),T("firebaseui.auth.CredentialHelper.GOOGLE_YOLO","googleyolo"),T("firebaseui.auth.CredentialHelper.NONE","none"),T("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous")}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:window)}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:window),angular.module("codyColor",["ngRoute","ngAnimate","ngDragDrop","ngCookies","pascalprecht.translate","ngSanitize"]),angular.module("codyColor").config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"locales/locale-",suffix:".json"}),e.registerAvailableLanguageKeys(["en","it"],{"it*":"it","*":"en"}),e.determinePreferredLanguage(function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en"}),e.fallbackLanguage("en"),e.useSanitizeValueStrategy("sanitizeParameters"),e.useCookieStorage()}]),angular.module("codyColor").factory("audioHandler",["$cookies",function(e){let t,n={},i=new Audio;return i.src="audio/music.mp3",i.loop=!0,n.isAudioEnabled=function(){if(void 0===t){let n=e.get("audioEnabled");void 0===n?(e.put("audioEnabled","true"),t=!0):t="true"===n}return t},n.toggleBase=function(){n.isAudioEnabled()?(t=!1,e.put("audioEnabled","false"),i.pause()):(t=!0,e.put("audioEnabled","true"),i.play())},n.splashStartBase=function(){n.isAudioEnabled()&&i.paused&&i.play()},n.playSound=function(e){if(n.isAudioEnabled()){let t=new Audio;t.src="audio/"+e+".mp3",t.play()}},n}]),angular.module("codyColor").factory("authHandler",["$cookies",function(e){let t={};const n={apiKey:"AIzaSyCJoAvdMagPFHTG--zurc3RjBekWLJzvxo",authDomain:"codycolor-f2519.firebaseapp.com",databaseURL:"https://codycolor-f2519.firebaseio.com",projectId:"codycolor-f2519",storageBucket:"codycolor-f2519.appspot.com",messagingSenderId:"839718298178",appId:"1:839718298178:web:6e3b0cf34856eb12"},i={callbacks:{signInSuccessWithAuthResult:function(e){return void 0!==u.onFirebaseSignIn&&u.onFirebaseSignIn(e),!1},signInFailure:function(e){if(void 0!==u.onFirebaseSignInError)return u.onFirebaseSignInError(e)},uiShown:function(){void 0!==u.uiShown&&u.onUiShown()}},signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID,firebase.auth.FacebookAuthProvider.PROVIDER_ID,firebase.auth.TwitterAuthProvider.PROVIDER_ID,firebase.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:function(){void 0!==u.onTosClick&&u.onTosClick()},privacyPolicyUrl:function(){void 0!==u.onPrivacyClick&&u.onPrivacyClick()}};let r,o,a,s=!1,u={},c={},l={};return t.setAuthCallbacks=function(e){u.onFirebaseSignIn=e.onFirebaseSignIn,u.onFirebaseSignInError=e.onFirebaseSignInError,u.onFirebaseSignOut=e.onFirebaseSignOut,u.onFirebaseUserDeleted=e.onFirebaseUserDeleted,u.onFirebaseUserDeletedError=e.onFirebaseUserDeletedError,u.onUiShown=e.onUiShown,u.onPrivacyClick=e.onPrivacyClick,u.onTosClick=e.onTosClick},t.setCookieNickCallback=function(e){void 0===l.nickname&&(a=e)},t.enableCookieSignIn=function(){o=function(n){console.log("1/2 [CookieSignIn] - User "+n.email+" signed in with FirebaseAuth."),c=n;let i=e.get("serverUserData");void 0!==i?(console.log("2/2 [CookieSignIn] - Cookie nickname validated. Welcome, user."),l=JSON.parse(i)):(console.log("2/2 [CookieSignIn] - Cookie nickname not found. Logging out from FirebaseAuth."),t.logout()),void 0!==a&&(a(l.nickname),a=void 0)}},t.disableCookieSignIn=function(){o=void 0},t.initializeAuth=function(){s||(firebase.initializeApp(n),firebase.auth().onAuthStateChanged(function(e){e&&(void 0!==o&&o(e),o=void 0)}),s=!0)},t.initializeUi=function(){r=firebaseui.auth.AuthUI.getInstance()||new firebaseui.auth.AuthUI(firebase.auth())},t.startUi=function(){r.start("#firebaseui-auth-container",i)},t.logout=function(){e.remove("serverUserData"),l={},c={},firebase.auth().signOut().then(function(){void 0!==u.onFirebaseSignOut&&u.onFirebaseSignOut()})},t.deleteAccount=function(){firebase.auth().currentUser.delete().then(function(){e.remove("serverUserData"),l={},c={},u.onFirebaseUserDeleted()}).catch(function(e){void 0!==u.onFirebaseUserDeletedError&&u.onFirebaseUserDeletedError()})},t.isPendingRedirect=function(){return r.isPendingRedirect()},t.loginCompleted=function(){return!(0===Object.entries(l).length&&l.constructor===Object||0===Object.entries(c).length&&c.constructor===Object)},t.setFirebaseUserData=function(e){c=e},t.getFirebaseUserData=function(){return c},t.setServerUserData=function(t){e.put("serverUserData",JSON.stringify(t)),l=t},t.getServerUserData=function(){return l},t}]),angular.module("codyColor").factory("chatHandler",function(){let e={},t=[],n=[],i=[];for(let e=1;e<=16;e++)n.push("CHAT_PREMATCH."+e);for(let e=1;e<=20;e++)i.push("CHAT_POSTMATCH."+e);return e.getChatMessages=function(){return t},e.getChatHintsPreMatch=function(){return n},e.getChatHintsAfterMatch=function(){return i},e.enqueueChatMessage=function(e){t.push(e),t.sort(function(e,t){return e.date<t.date?1:e.date>t.date?-1:0}),t.length>10&&t.splice(10,1)},e.clearChat=function(){t=[]},e}),angular.module("codyColor").controller("arcadeAftermatchCtrl",["$scope","rabbit","gameData","scopeService","$location","$translate","authHandler","navigationHandler","audioHandler","sessionHandler","chatHandler","translationHandler",function(e,t,n,i,r,o,a,s,u,c,l,h){console.log("Controller aftermatch ready.");let f=function(){t.quitGame(),n.initializeGameData(),l.clearChat()};if(s.initializeBackBlock(e),c.isSessionInvalid())return f(),void s.goToPage(r,"/");e.userLogged=a.loginCompleted(),a.loginCompleted()?e.userNickname=a.getServerUserData().nickname:h.setTranslation(e,"userNickname","NOT_LOGGED"),e.timeFormatter=n.formatTimeDecimals,e.player=n.getUserPlayer(),e.enemy=n.getEnemy1vs1(),e.winner=n.getMatchWinner().nickname,e.matchCount=n.getGeneral().matchCount,e.winner===n.getUserPlayer().nickname?u.playSound("win"):e.winner===n.getEnemy1vs1().nickname&&u.playSound("lost"),e.newMatch=function(){n.getUserPlayer().ready=!0,t.sendReadyMessage(),i.safeApply(e,function(){e.newMatchClicked=!0})},t.setPageCallbacks({onReadyMessage:function(){n.getEnemy1vs1().ready=!0,i.safeApply(e,function(){e.enemyRequestNewMatch=!0})},onStartMatch:function(t){n.initializeMatchData(),n.syncGameData(t.gameData),i.safeApply(e,function(){s.goToPage(r,"/arcade-match")})},onGameQuit:function(){f(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onConnectionLost:function(){f(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onChatMessage:function(t){u.playSound("roby-over"),l.enqueueChatMessage(t),i.safeApply(e,function(){e.chatBubbles=l.getChatMessages()})}}),e.chatBubbles=l.getChatMessages(),e.getBubbleStyle=function(e){return e.playerId===n.getUserPlayer().playerId?"chat--bubble-player":"chat--bubble-enemy"},e.chatHints=l.getChatHintsAfterMatch(),e.sendChatMessage=function(n){u.playSound("menu-click");let i=t.sendChatMessage(n);l.enqueueChatMessage(i),e.chatBubbles=l.getChatMessages()},e.exitGame=function(){u.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){u.playSound("menu-click"),t.sendPlayerQuitRequest(),f(),s.goToPage(r,"/home")},e.stopExitGame=function(){u.playSound("menu-click"),e.exitGameModal=!1},e.continueForceExit=function(){u.playSound("menu-click"),s.goToPage(r,"/home")},e.openLanguageModal=function(){e.languageModal=!0,u.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,u.playSound("menu-click")},e.changeLanguage=function(t){o.use(t),e.languageModal=!1,u.playSound("menu-click"),a.loginCompleted()||h.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=u.isAudioEnabled(),e.toggleBase=function(){u.toggleBase(),e.basePlaying=u.isAudioEnabled()}}]),angular.module("codyColor").controller("arcadeMatchCtrl",["$scope","rabbit","gameData","scopeService","pathHandler","$location","$translate","chatHandler","navigationHandler","audioHandler","sessionHandler","translationHandler","authHandler",function(e,t,n,i,r,o,a,s,u,c,l,h,f){let d,p;console.log("Controller arcade match ready.");let g=function(){void 0!==d&&(clearInterval(d),d=void 0),void 0!==p&&(clearInterval(p),p=void 0),t.quitGame(),r.quitGame(),s.clearChat(),n.initializeGameData()};if(u.initializeBackBlock(e),l.isSessionInvalid())return g(),void u.goToPage(o,"/");e.userLogged=f.loginCompleted(),f.loginCompleted()?e.userNickname=f.getServerUserData().nickname:h.setTranslation(e,"userNickname","NOT_LOGGED"),e.showDraggableRoby=!0,r.initialize(e),e.player=n.getUserPlayer(),e.enemy=n.getEnemy1vs1(),e.playerRoby=r.getPlayerRoby(),e.enemiesRoby=r.getEnemiesRoby(),e.timerFormatter=n.formatTimeDecimals,n.getUserPlayer().match.timerValue=n.getGeneral().timerSetting,n.getEnemy1vs1().match.timerValue=n.getGeneral().timerSetting;let m=function(t,n,i){let r="",o="";switch(t){case 0:o="down";break;case 1:o="left";break;case 2:o="up";break;case 3:o="right"}r+=i?"fas fa-chevron-circle-"+o+" playground--arrow-over":"fas fa-angle-"+o+" playground--arrow",e.showArrows&&(r+=" floating-"+o+"-animation"),e.startPositionsCss[t][n]=r},v=function(t){e.startPositionsCss=new Array(4);for(let n=0;n<4;n++){e.startPositionsCss[n]=new Array(5);for(let e=0;e<5;e++)m(n,e,t)}};v(!1),e.tilesCss=new Array(5);for(let t=0;t<5;t++){e.tilesCss[t]=new Array(5);for(let i=0;i<5;i++)switch(n.getGeneral().tiles[t][i]){case"Y":e.tilesCss[t][i]="playground--tile-yellow";break;case"R":e.tilesCss[t][i]="playground--tile-red";break;case"G":e.tilesCss[t][i]="playground--tile-gray"}}let y=3;c.playSound("countdown"),e.startCountdownText=y.toString(),e.countdownInProgress=!0,d=setInterval(function(){--y>0?(c.playSound("countdown"),i.safeApply(e,function(){e.startCountdownText=y.toString()})):0===y?(c.playSound("start"),i.safeApply(e,function(){e.startCountdownText="Let's Cody!"})):(clearInterval(d),d=void 0,i.safeApply(e,function(){e.countdownInProgress=!1}),b())},1e3);let b=function(){let r=n.getGeneral().timerSetting,o=10,a=Date.now()+o;p=setTimeout(function s(){let u=Date.now()-a;u>o&&console.log("Timer lagged!");r-=o+u;let c=r<=0||A();i.safeApply(e,function(){for(let i=0;i<n.getAllPlayers().length;i++){let o=n.getAllPlayers()[i];-1===o.match.time&&(o.match.timerValue=r,c&&(o.match.positioned=!0,o.match.timerValue=0,o.match.time=0,o.userPlayer&&(e.showCompleteGrid=!0,e.showArrows=!1,e.showDraggableRoby=!1,v(!1),t.sendPlayerPositionedMessage())))}});c||(a=Date.now()+o,p=setTimeout(s,o))},o)},A=function(){let e=!0;for(let t=0;t<n.getAllPlayers().length;t++)!0!==n.getAllPlayers()[t].match.positioned&&(e=!1);return e};e.showCompleteGrid=!1,e.showArrows=!1,e.startAnimation=!1,e.draggableRobyImage="roby-idle",e.startDragging=function(){console.log("Start dragging"),c.playSound("roby-drag"),i.safeApply(e,function(){e.showCompleteGrid=!0,e.draggableRobyImage="roby-dragging-trasp",e.showArrows=!0,v(!1)})},e.robyOver=function(t,n,r,o){c.playSound("roby-over"),i.safeApply(e,function(){m(r,o,!0)})},e.robyOut=function(t,n,r,o){i.safeApply(e,function(){m(r,o,!1)})},e.endDragging=function(){console.log("End dragging"),c.playSound("roby-drop"),e.startAnimation||i.safeApply(e,function(){e.showArrows=!1,e.showCompleteGrid=!1,e.draggableRobyImage="roby-idle",v(!1)})},e.robyDropped=function(o,a,s,u){console.log("Roby dropped"),c.playSound("roby-positioned"),e.showCompleteGrid=!0,e.startAnimation||(clearInterval(n.getUserPlayer().match.timer),i.safeApply(e,function(){n.getUserPlayer().match.startPosition={side:s,distance:u},n.getUserPlayer().match.time=n.getUserPlayer().match.timerValue,n.getUserPlayer().match.positioned=!0,e.showDraggableRoby=!1}),r.positionRoby(!0,n.getUserPlayer().match.startPosition),t.sendPlayerPositionedMessage())},t.setPageCallbacks({onEnemyPositioned:function(t){i.safeApply(e,function(){n.getEnemy1vs1().match.timerValue=t.matchTime,n.getEnemy1vs1().match.time=t.matchTime,n.getEnemy1vs1().match.positioned=!0})},onGameQuit:function(){g(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onConnectionLost:function(){g(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onStartAnimation:function(e){n.syncGameData(e.gameData),w()},onEndMatch:function(t){n.syncGameData(t.gameData),r.quitGame(),!0!==e.forceExitModal&&i.safeApply(e,function(){u.goToPage(o,"/arcade-aftermatch")})}});let w=function(){e.startAnimation||(r.positionRoby(!1,n.getEnemy1vs1().match.startPosition),i.safeApply(e,function(){e.startAnimation=!0}),r.calculateAllPlayersPath(),n.calculateArcadeMatchPoints(),!0===n.getMatchWinner().userPlayer&&n.getUserPlayer().wonMatches++,r.animateActiveRobys(function(){t.sendEndAnimationMessage()}))};e.exitGame=function(){c.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){c.playSound("menu-click"),t.sendPlayerQuitRequest(),g(),u.goToPage(o,"/home")},e.stopExitGame=function(){c.playSound("menu-click"),e.exitGameModal=!1},e.continueForceExit=function(){c.playSound("menu-click"),u.goToPage(o,"/home")},e.skip=function(){c.playSound("menu-click"),t.sendEndAnimationMessage(),e.askedForSkip=!0},e.openLanguageModal=function(){e.languageModal=!0,c.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,c.playSound("menu-click")},e.changeLanguage=function(t){a.use(t),e.languageModal=!1,c.playSound("menu-click"),f.loginCompleted()||h.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=c.isAudioEnabled(),e.toggleBase=function(){c.toggleBase(),e.basePlaying=c.isAudioEnabled()}}]),angular.module("codyColor").controller("bootmpAftermatchCtrl",["$scope","rabbit","gameData","scopeService","$location","navigationHandler","audioHandler","sessionHandler","$translate","authHandler","translationHandler",function(e,t,n,i,r,o,a,s,u,c,l){console.log("Controller aftermatch ready.");let h=function(){n.initializeGameData()};if(o.initializeBackBlock(e),s.isSessionInvalid())return h(),void o.goToPage(r,"/");e.userLogged=c.loginCompleted(),c.loginCompleted()?e.userNickname=c.getServerUserData().nickname:l.setTranslation(e,"userNickname","NOT_LOGGED"),n.editPlayer({points:n.getUserPlayer().points+n.getUserPlayer().match.points}),void 0!==n.getEnemy1vs1()&&n.editEnemy1vs1({points:n.getEnemy1vs1().points+n.getEnemy1vs1().match.points}),e.withEnemy=void 0!==n.getEnemy1vs1(),e.timeFormatter=n.formatTimeDecimals,e.player=n.getUserPlayer(),e.enemy=n.getEnemy1vs1(),e.winner=n.getMatchWinner().nickname,e.matchCount=n.getGeneral().matchCount,e.winner===n.getUserPlayer().nickname?a.playSound("win"):e.withEnemy&&e.winner===n.getEnemy1vs1().nickname&&a.playSound("lost"),e.newMatch=function(){n.initializeMatchData(),n.getGeneral().tiles=n.generateNewMatchTiles(),o.goToPage(r,"/bootmp-match")},e.exitGameModal=!1,e.exitGame=function(){a.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){a.playSound("menu-click"),h(),o.goToPage(r,"/home")},e.stopExitGame=function(){a.playSound("menu-click"),e.exitGameModal=!1},e.openLanguageModal=function(){e.languageModal=!0,a.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,a.playSound("menu-click")},e.changeLanguage=function(t){u.use(t),e.languageModal=!1,a.playSound("menu-click"),c.loginCompleted()||l.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=a.isAudioEnabled(),e.toggleBase=function(){a.toggleBase(),e.basePlaying=a.isAudioEnabled()}}]),angular.module("codyColor").controller("bootmpMatchCtrl",["$scope","gameData","scopeService","pathHandler","$location","$translate","navigationHandler","audioHandler","sessionHandler","authHandler","translationHandler",function(e,t,n,i,r,o,a,s,u,c,l){let h,f;console.log("Bootcamp match controller ready.");let d=function(){void 0!==h&&clearInterval(h),void 0!==f&&clearInterval(f),i.quitGame(),t.initializeGameData()};if(a.initializeBackBlock(e),u.isSessionInvalid())return d(),void a.goToPage(r,"/");e.userLogged=c.loginCompleted(),c.loginCompleted()?e.userNickname=c.getServerUserData().nickname:l.setTranslation(e,"userNickname","NOT_LOGGED"),e.showDraggableRoby=!0,i.initialize(e),e.player=t.getUserPlayer(),e.enemy=t.getAllPlayers().length>1?t.getEnemy1vs1():void 0,e.playerRoby=i.getPlayerRoby(),e.enemiesRoby=i.getEnemiesRoby(),e.timerFormatter=t.formatTimeDecimals,t.editPlayer({match:{timerValue:t.getGeneral().timerSetting}}),void 0!==e.enemy&&t.editEnemy1vs1({match:{timerValue:t.getGeneral().timerSetting}});let p=function(t,n,i){let r="",o="";switch(t){case 0:o="down";break;case 1:o="left";break;case 2:o="up";break;case 3:o="right"}r+=i?"fas fa-chevron-circle-"+o+" playground--arrow-over":"fas fa-angle-"+o+" playground--arrow",e.showArrows&&(r+=" floating-"+o+"-animation"),e.startPositionsCss[t][n]=r},g=function(t){e.startPositionsCss=new Array(4);for(let n=0;n<4;n++){e.startPositionsCss[n]=new Array(5);for(let e=0;e<5;e++)p(n,e,t)}};g(!1),e.tilesCss=new Array(5);for(let n=0;n<5;n++){e.tilesCss[n]=new Array(5);for(let i=0;i<5;i++)switch(t.getGeneral().tiles[n][i]){case"Y":e.tilesCss[n][i]="playground--tile-yellow";break;case"R":e.tilesCss[n][i]="playground--tile-red";break;case"G":e.tilesCss[n][i]="playground--tile-gray"}}let m=3;e.startCountdownText=m.toString(),s.playSound("countdown"),e.countdownInProgress=!0,h=setInterval(function(){--m>0?(s.playSound("countdown"),n.safeApply(e,function(){e.startCountdownText=m.toString()})):0===m?(s.playSound("start"),n.safeApply(e,function(){e.startCountdownText="Let's Cody!"})):(clearInterval(h),h=void 0,n.safeApply(e,function(){e.countdownInProgress=!1}),y())},1e3);let v=t.getGeneral().timerSetting/2;switch(t.getGeneral().bootEnemySetting){case 1:v=t.getGeneral().timerSetting/2;break;case 2:v=t.getGeneral().timerSetting/3*2;break;case 3:v=t.getGeneral().timerSetting/4*3}let y=function(){let r=t.getGeneral().timerSetting,o=10,a=Date.now()+o;f=setTimeout(function s(){let u=Date.now()-a;u>o&&console.log("Timer lagged!");r-=o+u;let c=r<=0||b();n.safeApply(e,function(){-1===t.getUserPlayer().match.time&&(t.getUserPlayer().match.timerValue=r,c&&(t.getUserPlayer().match.positioned=!0,t.getUserPlayer().match.timerValue=0,t.getUserPlayer().match.time=0,e.showCompleteGrid=!0,e.showArrows=!1,e.showDraggableRoby=!1,g(!1))),void 0!==t.getEnemy1vs1()&&-1===t.getEnemy1vs1().match.time&&(t.getEnemy1vs1().match.timerValue=r,t.getEnemy1vs1().match.timerValue<=v&&(t.getEnemy1vs1().match.positioned=!0,t.getEnemy1vs1().match.time=v,t.getEnemy1vs1().match.timerValue=v,i.calculateBootEnemyPath()))});b()&&A();c||(a=Date.now()+o,f=setTimeout(s,o))},o)},b=function(){let e=!0;for(let n=0;n<t.getAllPlayers().length;n++)if(!0!==t.getAllPlayers()[n].match.positioned){e=!1;break}return e};e.showCompleteGrid=!1,e.showArrows=!1,e.startAnimation=!1,e.draggableRobyImage="roby-idle",e.startDragging=function(){s.playSound("roby-drag"),n.safeApply(e,function(){e.showCompleteGrid=!0,e.draggableRobyImage="roby-dragging-trasp",e.showArrows=!0,g(!1)})},e.robyOver=function(t,i,r,o){s.playSound("roby-over"),n.safeApply(e,function(){p(r,o,!0)})},e.robyOut=function(t,i,r,o){n.safeApply(e,function(){p(r,o,!1)})},e.endDragging=function(){console.log("End dragging"),s.playSound("roby-drop"),e.startAnimation||n.safeApply(e,function(){e.showArrows=!1,e.showCompleteGrid=!1,e.draggableRobyImage="roby-idle",g(!1)})},e.robyDropped=function(n,r,o,a){console.log("Roby dropped"),s.playSound("roby-positioned"),e.startAnimation||(t.getUserPlayer().match.positioned=!0,t.getUserPlayer().match.startPosition={side:o,distance:a},t.getUserPlayer().match.time=t.getUserPlayer().match.timerValue,e.showCompleteGrid=!0,e.showDraggableRoby=!1,i.positionRoby(!0,t.getUserPlayer().match.startPosition),i.calculateUserPlayerPath(),void 0!==t.getEnemy1vs1()&&(t.getEnemy1vs1().match.positioned=!0,t.getEnemy1vs1().match.time=v,t.getEnemy1vs1().match.timerValue=v,i.calculateBootEnemyPath()),b()&&A())};let A=function(){e.startAnimation||(t.getGeneral().matchCount++,void 0!==e.enemy&&i.positionRoby(!1,t.getEnemy1vs1().match.startPosition),n.safeApply(e,function(){e.startAnimation=!0}),t.calculateArcadeMatchPoints(),i.animateActiveRobys(function(){i.quitGame(),n.safeApply(e,function(){a.goToPage(r,"/bootmp-aftermatch")})},t.getGeneral().bootEnemySetting))};e.exitGameModal=!1,e.exitGame=function(){s.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){s.playSound("menu-click"),d(),a.goToPage(r,"/home")},e.stopExitGame=function(){s.playSound("menu-click"),e.exitGameModal=!1},e.skip=function(){i.quitGame(),!0!==e.forceExitModal&&a.goToPage(r,"/bootmp-aftermatch"),s.playSound("menu-click")},e.openLanguageModal=function(){e.languageModal=!0,s.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,s.playSound("menu-click")},e.changeLanguage=function(t){o.use(t),e.languageModal=!1,s.playSound("menu-click"),c.loginCompleted()||l.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=s.isAudioEnabled(),e.toggleBase=function(){s.toggleBase(),e.basePlaying=s.isAudioEnabled()}}]),angular.module("codyColor").controller("bootmpMmakingCtrl",["$scope","rabbit","navigationHandler","$translate","authHandler","translationHandler","audioHandler","$location","sessionHandler","gameData","scopeService",function(e,t,n,i,r,o,a,s,u,c,l){console.log("Bootcamp making controller ready."),c.getGeneral().gameType=c.getGameTypes().bootmp;let h=function(){c.initializeGameData()};if(n.initializeBackBlock(e),u.isSessionInvalid())return h(),void n.goToPage(s,"/");t.setPageCallbacks({}),e.userLogged=r.loginCompleted(),r.loginCompleted()?(e.userNickname=r.getServerUserData().nickname,e.nickname=r.getServerUserData().nickname):o.setTranslation(e,"userNickname","NOT_LOGGED"),setTimeout(function(){l.safeApply(e,function(){e.pageReady=!0})},200),i(["15_SECONDS","30_SECONDS","1_MINUTE","2_MINUTES"]).then(function(t){e.timerSettings=[{text:t["15_SECONDS"],value:15e3},{text:t["30_SECONDS"],value:3e4},{text:t["1_MINUTE"],value:6e4},{text:t["2_MINUTES"],value:12e4}]}),e.currentTimerIndex=1,e.editTimer=function(t){a.playSound("menu-click"),e.currentTimerIndex=t?e.currentTimerIndex<3?e.currentTimerIndex+1:3:e.currentTimerIndex>0?e.currentTimerIndex-1:0,c.getGeneral().timerSetting=e.timerSettings[e.currentTimerIndex].value},i(["NO_ENEMY","AI_EASY","AI_MEDIUM","AI_HARD"]).then(function(t){e.bootEnemySettings=[{text:t.NO_ENEMY,value:0},{text:t.AI_EASY,value:1},{text:t.AI_MEDIUM,value:2},{text:t.AI_HARD,value:3}]}),e.currentBootEnemySettingIndex=0,c.getGeneral().bootEnemySetting=0,e.editBootEnemySetting=function(t){e.currentBootEnemySettingIndex=t?e.currentBootEnemySettingIndex<3?e.currentBootEnemySettingIndex+1:3:e.currentBootEnemySettingIndex>0?e.currentBootEnemySettingIndex-1:0,c.getGeneral().bootEnemySetting=e.bootEnemySettings[e.currentBootEnemySettingIndex].value},e.createBootcamp=function(){c.getUserPlayer().nickname=e.nickname,c.getUserPlayer().playerId=0,0!==c.getGeneral().bootEnemySetting&&(c.addEnemy(1),c.getEnemy1vs1().nickname="CodyColor",c.getEnemy1vs1().playerId=1),c.getGeneral().tiles=c.generateNewMatchTiles(),n.goToPage(s,"/bootmp-match")},e.exitGameModal=!1,e.exitGame=function(){a.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){a.playSound("menu-click"),h(),n.goToPage(s,"/home")},e.stopExitGame=function(){a.playSound("menu-click"),e.exitGameModal=!1},e.openLanguageModal=function(){e.languageModal=!0,a.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,a.playSound("menu-click")},e.changeLanguage=function(t){i.use(t),i(["15_SECONDS","30_SECONDS","1_MINUTE","2_MINUTES"]).then(function(t){e.timerSettings=[{text:t["15_SECONDS"],value:15e3},{text:t["30_SECONDS"],value:3e4},{text:t["1_MINUTE"],value:6e4},{text:t["2_MINUTES"],value:12e4}]}),i(["NO_ENEMY","AI_EASY","AI_MEDIUM","AI_HARD"]).then(function(t){e.bootEnemySettings=[{text:t.NO_ENEMY,value:0},{text:t.AI_EASY,value:1},{text:t.AI_MEDIUM,value:2},{text:t.AI_HARD,value:3}]}),e.languageModal=!1,a.playSound("menu-click"),r.loginCompleted()||o.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=a.isAudioEnabled(),e.toggleBase=function(){a.toggleBase(),e.basePlaying=a.isAudioEnabled()}}]),angular.module("codyColor").controller("customMmakingCtrl",["$scope","rabbit","navigationHandler","$translate","translationHandler","authHandler","audioHandler","$location","sessionHandler","gameData","scopeService","chatHandler","settings",function(e,t,n,i,r,o,a,s,u,c,l,h,f){console.log("New match custom controller ready."),c.getGeneral().gameType=c.getGameTypes().custom;let d=function(){t.quitGame(),c.initializeGameData(),h.clearChat()};if(n.initializeBackBlock(e),u.isSessionInvalid())return d(),void n.goToPage(s,"/");e.userLogged=o.loginCompleted(),o.loginCompleted()?(e.userNickname=o.getServerUserData().nickname,e.nickname=o.getServerUserData().nickname):r.setTranslation(e,"userNickname","NOT_LOGGED"),o.setCookieNickCallback(function(){l.safeApply(e,function(){e.userLogged=o.loginCompleted(),o.loginCompleted()?(e.userNickname=o.getServerUserData().nickname,e.nickname=o.getServerUserData().nickname):r.setTranslation(e,"userNickname","NOT_LOGGED")})});let p=function(t){l.safeApply(e,function(){e.mmakingState=g.loadingScreen}),setTimeout(function(){l.safeApply(e,function(){e.mmakingState=t})},200)};const g={loadingScreen:"loadingScreen",joinMatch:"joinMatch",nicknameSelection:"nicknameSelection",waitingEnemy:"waitingEnemy",waitingReady:"waitingReady"};e.screens=g,p(g.joinMatch),e.generalData=c.getGeneral(),e.userPlayer=c.getUserPlayer(),e.baseUrl=f.webBaseUrl,e.connected=t.getBrokerConnectionState();let m=!1;e.connected?("0000"!==c.getGeneral().code||c.getUserPlayer().organizer)&&(t.sendGameRequest(),r.setTranslation(e,"joinMessage","SEARCH_MATCH_INFO")):(t.connect(),m=!0),t.setPageCallbacks({onConnected:function(){m&&(("0000"!==c.getGeneral().code||c.getUserPlayer().organizer)&&(t.sendGameRequest(),l.safeApply(e,function(){r.setTranslation(e,"joinMessage","SEARCH_MATCH_INFO")})),m=!1)},onGameRequestResponse:function(n){"0000"===n.code.toString()?l.safeApply(e,function(){r.setTranslation(e,"joinMessage","CODE_NOT_VALID")}):(c.getGeneral().gameRoomId=n.gameRoomId,c.getUserPlayer().playerId=n.playerId,c.syncGameData(n.gameData),t.subscribeGameRoom(),l.safeApply(e,function(){r.setTranslation(e,"totTime",c.formatTimeStatic(c.getGeneral().timerSetting))}),c.getUserPlayer().organizer?p(g.waitingEnemy):(p(g.nicknameSelection),e.enemyPlayer=c.getEnemy1vs1()))},onPlayerAdded:function(t){a.playSound("enemy-found"),l.safeApply(e,function(){c.syncGameData(t.gameData),e.enemyPlayer=c.getEnemy1vs1()}),p(g.enemyFound)},onReadyMessage:function(){c.getEnemy1vs1().ready=!0},onStartMatch:function(t){c.syncGameData(t.gameData),l.safeApply(e,function(){n.goToPage(s,"/arcade-match")})},onGameQuit:function(){d(),l.safeApply(e,function(){r.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onConnectionLost:function(){d(),l.safeApply(e,function(){r.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onChatMessage:function(t){a.playSound("roby-over"),h.enqueueChatMessage(t),l.safeApply(e,function(){e.chatBubbles=h.getChatMessages()})}}),e.chatVisible=!1,e.chatBubbles=h.getChatMessages(),e.getBubbleStyle=function(e){return e.playerId===c.getUserPlayer().playerId?"chat--bubble-player":"chat--bubble-enemy"},e.chatHints=h.getChatHintsPreMatch(),e.sendChatMessage=function(n){a.playSound("menu-click");let i=t.sendChatMessage(n);h.enqueueChatMessage(i),e.chatBubbles=h.getChatMessages()},e.goToCreateMatch=function(){a.playSound("menu-click"),n.goToPage(s,"/custom-new-match")},e.joinGame=function(n){a.playSound("menu-click"),i("SEARCH_MATCH_INFO").then(function(t){e.joinMessage=t},function(t){e.joinMessage=t}),c.editGeneral({code:n}),t.sendGameRequest()},e.playerReady=function(){c.getUserPlayer().ready=!0,!1===c.getEnemy1vs1().ready&&p(g.waitingReady),t.sendReadyMessage()},e.validPlayer=function(){c.getUserPlayer().nickname=e.nickname,p(g.enemyFound),t.sendValidationMessage(),u.enableNoSleep()},e.linkCopied=!1,e.codeCopied=!1,e.copyLink=function(){a.playSound("menu-click"),v(f.webBaseUrl+"/#!?custom="+c.getGeneral().code),e.linkCopied=!0,e.codeCopied=!1},e.copyCode=function(){a.playSound("menu-click"),v(c.getGeneral().code),e.linkCopied=!1,e.codeCopied=!0};let v=function(e){let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};e.exitGameModal=!1,e.exitGame=function(){a.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){a.playSound("menu-click"),t.sendPlayerQuitRequest(),d(),n.goToPage(s,"/home")},e.stopExitGame=function(){a.playSound("menu-click"),e.exitGameModal=!1},e.forceExitModal=!1,e.forceExitText="",e.continueForceExit=function(){a.playSound("menu-click"),d(),n.goToPage(s,"/home")},e.openLanguageModal=function(){e.languageModal=!0,a.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,a.playSound("menu-click")},e.changeLanguage=function(t){i.use(t),e.languageModal=!1,a.playSound("menu-click"),o.loginCompleted()||r.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=a.isAudioEnabled(),e.toggleBase=function(){a.toggleBase(),e.basePlaying=a.isAudioEnabled()}}]),angular.module("codyColor").controller("customNewMatchCtrl",["$scope","rabbit","navigationHandler","scopeService","$translate","translationHandler","audioHandler","$location","sessionHandler","gameData","authHandler",function(e,t,n,i,r,o,a,s,u,c,l){console.log("Empty controller ready.");let h=function(){t.quitGame(),c.initializeGameData()};if(n.initializeBackBlock(e),u.isSessionInvalid())return h(),void n.goToPage(s,"/");e.userLogged=l.loginCompleted(),l.loginCompleted()?(e.userNickname=l.getServerUserData().nickname,e.nickname=l.getServerUserData().nickname):o.setTranslation(e,"userNickname","NOT_LOGGED"),r(["15_SECONDS","30_SECONDS","1_MINUTE","2_MINUTES"]).then(function(t){e.timerSettings=[{text:t["15_SECONDS"],value:15e3},{text:t["30_SECONDS"],value:3e4},{text:t["1_MINUTE"],value:6e4},{text:t["2_MINUTES"],value:12e4}]}),e.currentTimerIndex=1,e.editTimer=function(t){a.playSound("menu-click"),e.currentTimerIndex=t?e.currentTimerIndex<3?e.currentTimerIndex+1:3:e.currentTimerIndex>0?e.currentTimerIndex-1:0,c.getGeneral().timerSetting=e.timerSettings[e.currentTimerIndex].value},t.setPageCallbacks({onConnectionLost:function(){h(),i.safeApply(e,function(){o.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})}}),e.requestMMaking=function(){a.playSound("menu-click"),e.creatingMatch=!0,c.getUserPlayer().nickname=e.nickname,c.getUserPlayer().organizer=!0,n.goToPage(s,"/custom-mmaking")},e.exitGameModal=!1,e.exitGame=function(){a.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){a.playSound("menu-click"),t.sendPlayerQuitRequest(),h(),n.goToPage(s,"/home")},e.stopExitGame=function(){a.playSound("menu-click"),e.exitGameModal=!1},e.forceExitModal=!1,e.forceExitText="",e.continueForceExit=function(){a.playSound("menu-click"),n.goToPage(s,"/home")},e.openLanguageModal=function(){e.languageModal=!0,a.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,a.playSound("menu-click")},e.changeLanguage=function(t){r.use(t),e.languageModal=!1,r(["15_SECONDS","30_SECONDS","1_MINUTE","2_MINUTES"]).then(function(t){e.timerSettings=[{text:t["15_SECONDS"],value:15e3},{text:t["30_SECONDS"],value:3e4},{text:t["1_MINUTE"],value:6e4},{text:t["2_MINUTES"],value:12e4}]}),l.loginCompleted()||o.setTranslation(e,"userNickname","NOT_LOGGED"),a.playSound("menu-click")},e.basePlaying=a.isAudioEnabled(),e.toggleBase=function(){a.toggleBase(),e.basePlaying=a.isAudioEnabled()}}]),angular.module("codyColor").controller("emptyCtrl",["$scope","rabbit","navigationHandler","$translate","authHandler","audioHandler","$location","sessionHandler","translationHandler",function(e,t,n,i,r,o,a,s,u){console.log("Empty controller ready."),n.initializeBackBlock(e),s.isSessionInvalid()?n.goToPage(a,"/"):(e.userLogged=r.loginCompleted(),r.loginCompleted()?e.userNickname=r.getServerUserData().nickname:u.setTranslation(e,"userNickname","NOT_LOGGED"),e.goToHome=function(){n.goToPage(a,"/home"),o.playSound("menu-click")},t.setPageCallbacks({}),e.openLanguageModal=function(){e.languageModal=!0,o.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,o.playSound("menu-click")},e.changeLanguage=function(t){i.use(t),e.languageModal=!1,o.playSound("menu-click"),r.loginCompleted()||u.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=o.isAudioEnabled(),e.toggleBase=function(){o.toggleBase(),e.basePlaying=o.isAudioEnabled()})}]),angular.module("codyColor").controller("homeCtrl",["$scope","rabbit","navigationHandler","audioHandler","$location","sessionHandler","scopeService","$translate","authHandler","translationHandler",function(e,t,n,i,r,o,a,s,u,c){console.log("Controller home ready."),n.initializeBackBlock(e),o.isSessionInvalid()?n.goToPage(r,"/"):(e.totalMatches=0,e.connectedPlayers=0,e.userLogged=u.loginCompleted(),u.loginCompleted()?(e.userNickname=u.getServerUserData().nickname,c.setTranslation(e,"loginOrProfile","PROFILE")):(c.setTranslation(e,"userNickname","NOT_LOGGED"),c.setTranslation(e,"loginOrProfile","LOGIN")),u.setCookieNickCallback(function(){a.safeApply(e,function(){e.userLogged=u.loginCompleted(),u.loginCompleted()?(e.userNickname=u.getServerUserData().nickname,c.setTranslation(e,"loginOrProfile","PROFILE")):(c.setTranslation(e,"userNickname","NOT_LOGGED"),c.setTranslation(e,"loginOrProfile","LOGIN"))})}),e.connected=t.getServerConnectionState(),e.connected&&a.safeApply(e,function(){e.totalMatches=o.getTotalMatches().toString(),e.connectedPlayers=o.getConnectedPlayers().toString()}),t.setPageCallbacks({onConnectionLost:function(){a.safeApply(e,function(){e.connected=!1})},onGeneralInfoMessage:function(){a.safeApply(e,function(){e.connected=!0,e.totalMatches=o.getTotalMatches().toString(),e.connectedPlayers=o.getConnectedPlayers().toString()})}}),e.goToRules=function(){i.playSound("menu-click"),t.setPageCallbacks({}),n.goToPage(r,"/rules")},e.goToRMMaking=function(){i.playSound("menu-click"),e.connected?o.isClientVersionValid()?n.goToPage(r,"/random-mmaking"):(e.noOnlineModal=!0,s("OUTDATED_VERSION_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t})):(e.noOnlineModal=!0,s("NO_CONNECT_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t}))},e.goToCMMaking=function(){i.playSound("menu-click"),e.connected?o.isClientVersionValid()?n.goToPage(r,"/custom-mmaking"):(e.noOnlineModal=!0,s("OUTDATED_VERSION_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t})):(e.noOnlineModal=!0,s("NO_CONNECT_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t}))},e.goToAMMaking=function(){i.playSound("menu-click"),e.connected?o.isClientVersionValid()?n.goToPage(r,"/royale-mmaking"):(e.noOnlineModal=!0,s("OUTDATED_VERSION_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t})):(e.noOnlineModal=!0,s("NO_CONNECT_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t}))},e.goToRankings=function(){i.playSound("menu-click"),e.connected?o.isClientVersionValid()?n.goToPage(r,"/rankings"):(e.noOnlineModal=!0,s("OUTDATED_VERSION_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t})):(e.noOnlineModal=!0,s("NO_CONNECT_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t}))},e.goToLoginProfile=function(){i.playSound("menu-click"),e.connected?o.isClientVersionValid()?n.goToPage(r,"/login"):(e.noOnlineModal=!0,s("OUTDATED_VERSION_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t})):(e.noOnlineModal=!0,s("NO_CONNECT_DESC").then(function(t){e.noOnlineModalText=t},function(t){e.noOnlineModalText=t}))},e.goToBootcamp=function(){i.playSound("menu-click"),n.goToPage(r,"/bootmp-mmaking")},e.goToRanking=function(){i.playSound("menu-click"),n.goToPage(r,"/ranking")},e.goToProfile=function(){i.playSound("menu-click"),n.goToPage(r,"/profile")},e.closeNoConnectionModal=function(){i.playSound("menu-click"),e.noOnlineModal=!1},e.openLanguageModal=function(){i.playSound("menu-click"),e.languageModal=!0},e.closeLanguageModal=function(){i.playSound("menu-click"),e.languageModal=!1},e.changeLanguage=function(t){i.playSound("menu-click"),s.use(t),e.languageModal=!1,u.loginCompleted()?c.setTranslation(e,"loginOrProfile","PROFILE"):(c.setTranslation(e,"userNickname","NOT_LOGGED"),c.setTranslation(e,"loginOrProfile","LOGIN"))},e.basePlaying=i.isAudioEnabled(),e.toggleBase=function(){i.toggleBase(),e.basePlaying=i.isAudioEnabled()})}]),angular.module("codyColor").controller("loginCtrl",["navigationHandler","$scope","audioHandler","$location","sessionHandler","$translate","scopeService","authHandler","rabbit","translationHandler","gameData",function(e,t,n,i,r,o,a,s,u,c,l){console.log("Controller login ready."),e.initializeBackBlock(t);let h=function(e){a.safeApply(t,function(){t.loginState=f.loadingScreen}),setTimeout(function(){a.safeApply(t,function(){t.loginState=e})},200)};const f={loadingScreen:"loadingScreen",login:"login",profile:"profile",nicknameSelection:"nicknameSelection"};if(t.screens=f,t.timeFormatter=l.formatTimeDecimals,s.initializeAuth(),s.initializeUi(),s.disableCookieSignIn(),r.isSessionInvalid()&&s.isPendingRedirect())t.pendingRedirect=!0,r.validateSession(),h(f.login),s.startUi();else{if(r.isSessionInvalid())return void e.goToPage(i,"/");s.loginCompleted()?(t.firebaseUserData=s.getFirebaseUserData(),t.serverUserData=s.getServerUserData(),t.pendingRedirect=!1,u.sendLogInRequest(),h(f.profile)):(t.pendingRedirect=!1,h(f.login),s.startUi())}u.getServerConnectionState()||u.connect(),s.setAuthCallbacks({onFirebaseSignIn:function(e){console.log("Sign in with FirebaseUI completed."),s.setFirebaseUserData(e.user),e.additionalUserInfo.isNewUser?h(f.nicknameSelection):u.sendLogInRequest()},onFirebaseSignInError:function(e){a.safeApply(t,function(){c.setTranslation(t,"singleOptionText","ERR_LOGIN"),t.singleOptionModal=!0,t.firebaseUserData=void 0,t.serverUserData=void 0,t.pendingRedirect=!1}),console.log(e.toString()),s.logout(),s.initializeUi(),s.startUi(),h(f.login)},onFirebaseSignOut:function(){a.safeApply(t,function(){t.firebaseUserData=void 0,t.serverUserData=void 0,t.userLogged=!1,t.pendingRedirect=!1,c.setTranslation(t,"userNickname","NOT_LOGGED")}),s.initializeUi(),s.startUi(),h(f.login)},onFirebaseUserDeleted:function(){a.safeApply(t,function(){t.firebaseUserData=void 0,t.serverUserData=void 0,t.userLogged=!1,t.pendingRedirect=!1,c.setTranslation(t,"userNickname","NOT_LOGGED")}),s.initializeUi(),s.startUi(),h(f.login)},onFirebaseUserDeletedError:function(e){a.safeApply(t,function(){c.setTranslation(t,"singleOptionText","ERR_DELETE"),t.singleOptionModal=!0})},onPrivacyClick:function(){a.safeApply(t,function(){e.goToPage(i,"/privacy")})},onTosClick:function(){a.safeApply(t,function(){e.goToPage(i,"/terms")})},onUiShown:function(){t.safeApply(t,function(){t.pendingRedirect=!1})}}),t.hideSignUpButton=!1,t.ultimateSignUp=function(e){t.hideSignUpButton=!0,u.sendSignUpRequest(e)},u.setPageCallbacks({onLogInResponse:function(e){e.success?(s.setServerUserData({nickname:e.nickname,totalPoints:e.totalPoints,wonMatches:e.wonMatches,avgPoints:e.avgPoints,bestMatch:e.bestMatch}),a.safeApply(t,function(){t.firebaseUserData=s.getFirebaseUserData(),t.serverUserData=s.getServerUserData(),t.userLogged=!0,t.userNickname=s.getServerUserData().nickname}),t.loginState!==f.profile&&h(f.profile)):(a.safeApply(t,function(){c.setTranslation(t,"singleOptionText","ERR_LOGIN"),t.singleOptionModal=!0,t.firebaseUserData=void 0,t.serverUserData=void 0,t.pendingRedirect=!1}),console.log("Error auth response false."),s.deleteAccount(),s.initializeUi(),s.startUi(),h(f.login))},onUserDeletedResponse:function(e){e.success?s.deleteAccount():a.safeApply(t,function(){c.setTranslation(t,"singleOptionText","ERR_DELETE"),t.singleOptionModal=!0})}}),t.logout=function(){n.playSound("menu-click"),c.setTranslation(t,"multiOptionsText","SURE_TO_LOGOUT"),t.multiOptionsModal=!0,t.multiOptionsOk=function(){n.playSound("menu-click"),s.logout(),t.multiOptionsModal=!1}},t.deleteAccount=function(){n.playSound("menu-click"),c.setTranslation(t,"multiOptionsText","SURE_TO_DELETE"),t.multiOptionsModal=!0,t.multiOptionsOk=function(){n.playSound("menu-click"),u.sendUserDeleteRequest(),t.multiOptionsModal=!1}},t.userLogged=s.loginCompleted(),s.loginCompleted()?t.userNickname=s.getServerUserData().nickname:c.setTranslation(t,"userNickname","NOT_LOGGED"),t.goToHome=function(){n.playSound("menu-click"),n.splashStartBase(),s.setAuthCallbacks({}),s.loginCompleted()||s.logout(),e.goToPage(i,"/home")},t.multiOptionsText="",t.multiOptionsModal=!1,t.multiOptionsCancel=function(){n.playSound("menu-click"),t.multiOptionsModal=!1},t.singleOptionText="",t.singleOptionModal=!1,t.singleOptionOk=function(){n.playSound("menu-click"),t.singleOptionModal=!1},t.openLanguageModal=function(){n.playSound("menu-click"),t.languageModal=!0},t.closeLanguageModal=function(){n.playSound("menu-click"),t.languageModal=!1},t.changeLanguage=function(e){n.playSound("menu-click"),o.use(e),t.languageModal=!1,s.loginCompleted()||c.setTranslation(t,"userNickname","NOT_LOGGED")},t.basePlaying=n.isAudioEnabled(),t.toggleBase=function(){n.toggleBase(),t.basePlaying=n.isAudioEnabled()}}]),angular.module("codyColor").controller("randomMmakingCtrl",["$scope","rabbit","gameData","$location","scopeService","$translate","authHandler","navigationHandler","audioHandler","sessionHandler","chatHandler","translationHandler",function(e,t,n,i,r,o,a,s,u,c,l,h){console.log("Controller random matchmaking ready."),n.getGeneral().gameType=n.getGameTypes().random,e.mmakingTimerText="2:00";let f=void 0,d=12e4,p=function(){t.quitGame(),n.initializeGameData(),l.clearChat(),void 0!==f&&clearInterval(f)};if(s.initializeBackBlock(e),c.isSessionInvalid())return p(),void s.goToPage(i,"/");e.userLogged=a.loginCompleted(),a.loginCompleted()?(e.userNickname=a.getServerUserData().nickname,e.nickname=a.getServerUserData().nickname):h.setTranslation(e,"userNickname","NOT_LOGGED");let g=function(t){r.safeApply(e,function(){e.mmakingState=m.loadingScreen}),setTimeout(function(){r.safeApply(e,function(){e.mmakingState=t})},200)};const m={loadingScreen:"loadingScreen",nicknameSelection:"nicknameSelection",waitingEnemy:"waitingEnemy",enemyFound:"enemyFound",waitingReady:"waitingReady"};e.screens=m,g(m.nicknameSelection),e.randomWaitingPlayers=c.getRandomWaitingPlayers().toString(),t.setPageCallbacks({onGeneralInfoMessage:function(){r.safeApply(e,function(){e.randomWaitingPlayers=c.getRandomWaitingPlayers().toString()})},onGameRequestResponse:function(i){n.getGeneral().gameRoomId=i.gameRoomId,n.getUserPlayer().playerId=i.playerId,n.syncGameData(i.gameData),t.subscribeGameRoom(),void 0!==n.getEnemy1vs1()&&(clearInterval(f),f=void 0,g(m.enemyFound),r.safeApply(e,function(){e.enemyNickname=n.getEnemy1vs1().nickname}))},onPlayerAdded:function(t){n.syncGameData(t.gameData),clearInterval(f),f=void 0,g(m.enemyFound),r.safeApply(e,function(){e.enemyNickname=n.getEnemy1vs1().nickname})},onReadyMessage:function(){n.getEnemy1vs1().ready=!0},onStartMatch:function(t){n.syncGameData(t.gameData),r.safeApply(e,function(){s.goToPage(i,"/arcade-match")})},onGameQuit:function(){p(),r.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onConnectionLost:function(){p(),r.safeApply(e,function(){h.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onChatMessage:function(t){u.playSound("roby-over"),l.enqueueChatMessage(t),r.safeApply(e,function(){e.chatBubbles=l.getChatMessages()})}}),e.chatBubbles=l.getChatMessages(),e.getBubbleStyle=function(e){return e.playerId===n.getUserPlayer().playerId?"chat--bubble-player":"chat--bubble-enemy"},e.chatHints=l.getChatHintsPreMatch(),e.sendChatMessage=function(n){u.playSound("menu-click");let i=t.sendChatMessage(n);l.enqueueChatMessage(i),e.chatBubbles=l.getChatMessages()},e.requestMMaking=function(){u.playSound("menu-click"),g(m.waitingEnemy),n.getUserPlayer().nickname=e.nickname,t.sendGameRequest(),f=setInterval(function(){(d-=1e3)>=0?r.safeApply(e,function(){e.mmakingTimerText=n.formatTimeSeconds(d)}):(p(),r.safeApply(e,function(){o("NO_NEW_ENEMY").then(function(t){e.forceExitText=t},function(t){e.forceExitText=t}),e.forceExitModal=!0}))},1e3)},e.playerReady=function(){n.getUserPlayer().ready=!0,!1===n.getEnemy1vs1().ready&&g(m.waitingReady),t.sendReadyMessage()},e.exitGameModal=!1,e.exitGame=function(){u.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){u.playSound("menu-click"),t.sendPlayerQuitRequest(),p(),s.goToPage(i,"/home")},e.stopExitGame=function(){u.playSound("menu-click"),e.exitGameModal=!1},e.forceExitModal=!1,e.forceExitText="",e.continueForceExit=function(){u.playSound("menu-click"),s.goToPage(i,"/home")},e.openLanguageModal=function(){e.languageModal=!0,u.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,u.playSound("menu-click")},e.changeLanguage=function(t){o.use(t),e.languageModal=!1,u.playSound("menu-click"),a.loginCompleted()||h.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=u.isAudioEnabled(),e.toggleBase=function(){u.toggleBase(),e.basePlaying=u.isAudioEnabled()}}]),angular.module("codyColor").controller("rankingsCtrl",["$scope","rabbit","navigationHandler","$translate","authHandler","gameData","rankingsHandler","audioHandler","$location","sessionHandler","translationHandler","scopeService",function(e,t,n,i,r,o,a,s,u,c,l,h){console.log("Rankings controller ready."),n.initializeBackBlock(e),c.isSessionInvalid()?n.goToPage(u,"/"):(e.userLogged=r.loginCompleted(),r.loginCompleted()?e.userNickname=r.getServerUserData().nickname:l.setTranslation(e,"userNickname","NOT_LOGGED"),e.indexes={top10MatchDaily:0,top10MatchGlobal:1,top10PointsDaily:2,top10PointsGlobal:3},e.rankIndex=0,i(["TOP_10_MATCH_DAILY","TOP_10_MATCH_GLOBAL","TOP_10_POINTS_DAILY","TOP_10_POINTS_GLOBAL"]).then(function(t){e.rankingTitles=[t.TOP_10_MATCH_DAILY,t.TOP_10_MATCH_GLOBAL,t.TOP_10_POINTS_DAILY,t.TOP_10_POINTS_GLOBAL]}),i(["TOP_10_MATCH_DAILY_SUBT","TOP_10_MATCH_GLOBAL_SUBT","TOP_10_POINTS_DAILY_SUBT","TOP_10_POINTS_GLOBAL_SUBT"]).then(function(t){e.rankingSubTitles=[t.TOP_10_MATCH_DAILY_SUBT,t.TOP_10_MATCH_GLOBAL_SUBT,t.TOP_10_POINTS_DAILY_SUBT,t.TOP_10_POINTS_GLOBAL_SUBT]}),e.scrollRanking=function(t){e.rankIndex=t?e.rankIndex<3?e.rankIndex+1:0:e.rankIndex>0?e.rankIndex-1:3},e.timeFormatter=o.formatTimeDecimals,a.updateNeeded()?(e.rankings=[],t.sendRankingsRequest()):e.rankings=a.getRankings(),t.setPageCallbacks({onRankingsResponse:function(t){t.success?a.updateRankings({top10MatchDaily:JSON.parse(t.top10MatchDaily),top10MatchGlobal:JSON.parse(t.top10MatchGlobal),top10PointsDaily:JSON.parse(t.top10PointsDaily),top10PointsGlobal:JSON.parse(t.top10PointsGlobal)}):a.updateRankings({top10MatchDaily:[],top10MatchGlobal:[],top10PointsDaily:[],top10PointsGlobal:[]}),h.safeApply(e,function(){e.rankings=a.getRankings()})}}),e.goToHome=function(){n.goToPage(u,"/home"),s.playSound("menu-click")},e.openLanguageModal=function(){e.languageModal=!0,s.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,s.playSound("menu-click")},e.changeLanguage=function(t){s.playSound("menu-click"),i.use(t),e.languageModal=!1,i(["TOP_10_MATCH_DAILY","TOP_10_MATCH_GLOBAL","TOP_10_POINTS_DAILY","TOP_10_POINTS_GLOBAL"]).then(function(t){e.rankingTitles=[t.TOP_10_MATCH_DAILY,t.TOP_10_MATCH_GLOBAL,t.TOP_10_POINTS_DAILY,t.TOP_10_POINTS_GLOBAL]}),i(["TOP_10_MATCH_DAILY_SUBT","TOP_10_MATCH_GLOBAL_SUBT","TOP_10_POINTS_DAILY_SUBT","TOP_10_POINTS_GLOBAL_SUBT"]).then(function(t){e.rankingSubTitles=[t.TOP_10_MATCH_DAILY_SUBT,t.TOP_10_MATCH_GLOBAL_SUBT,t.TOP_10_POINTS_DAILY_SUBT,t.TOP_10_POINTS_GLOBAL_SUBT]}),r.loginCompleted()||l.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=s.isAudioEnabled(),e.toggleBase=function(){s.toggleBase(),e.basePlaying=s.isAudioEnabled()})}]),angular.module("codyColor").controller("royaleAftermatchCtrl",["$scope","rabbit","gameData","scopeService","$location","$translate","authHandler","navigationHandler","audioHandler","sessionHandler","chatHandler","translationHandler",function(e,t,n,i,r,o,a,s,u,c,l,h){let f;console.log("Controller aftermatch ready.");let d=function(){t.quitGame(),n.initializeGameData(),l.clearChat(),void 0!==f&&(clearInterval(f),f=void 0)};if(s.initializeBackBlock(e),c.isSessionInvalid())return d(),void s.goToPage(r,"/");e.userLogged=a.loginCompleted(),a.loginCompleted()?e.userNickname=a.getServerUserData().nickname:h.setTranslation(e,"userNickname","NOT_LOGGED"),e.newMatchTimerValue=6e4,f=setInterval(function(){e.newMatchTimerValue<=0?(void 0!==f&&(clearInterval(f),f=void 0),i.safeApply(e,function(){e.newMatchTimerValue=0}),n.getUserPlayer().ready||(n.getUserPlayer().ready=!0,t.sendReadyMessage())):i.safeApply(e,function(){e.newMatchTimerValue-=1e3})},1e3);let p=function(){e.players=n.getAllPlayers(),n.getAllPlayers().sort(function(e,t){return t.points-e.points!=0?t.points-e.points:t.wonMatches-e.wonMatches!=0?t.wonMatches-e.wonMatches:t.match.points-e.match.points!=0?t.match.points-e.match.points:t.match.pathLength-e.match.pathLength!=0?t.match.pathLength-e.match.pathLength:t.match.time-e.match.time}),e.matchPlayers=n.duplicateAllPlayers(),e.matchPlayers.sort(function(e,t){return t.match.points-e.match.points!=0?t.match.points-e.match.points:t.match.pathLength-e.match.pathLength!=0?t.match.pathLength-e.match.pathLength:t.match.time-e.match.time})};p(),e.timeFormatter=n.formatTimeDecimals,e.timeFormatterCountdown=n.formatTimeSeconds,e.winner=n.getMatchWinner().nickname,e.matchCount=n.getGeneral().matchCount,e.winner===n.getUserPlayer().nickname&&u.playSound("win"),e.newMatch=function(){n.getUserPlayer().ready||(n.getUserPlayer().ready=!0,t.sendReadyMessage()),i.safeApply(e,function(){e.newMatchClicked=!0})},t.setPageCallbacks({onReadyMessage:function(e){n.getPlayerById(e.playerId).ready=!0},onStartMatch:function(t){void 0!==f&&(clearInterval(f),f=void 0),n.initializeMatchData(),n.syncGameData(t.gameData),i.safeApply(e,function(){s.goToPage(r,"/royale-match")})},onGameQuit:function(){d(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onPlayerRemoved:function(t){t.removedPlayerId===n.getUserPlayer().playerId?(d(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})):i.safeApply(e,function(){n.syncGameData(t.gameData),p()})},onConnectionLost:function(){d(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onChatMessage:function(t){u.playSound("roby-over"),l.enqueueChatMessage(t),i.safeApply(e,function(){e.chatBubbles=l.getChatMessages()})}}),e.chatBubbles=l.getChatMessages(),e.getBubbleStyle=function(e){return e.playerId===n.getUserPlayer().playerId?"chat--bubble-player":"chat--bubble-enemy"},e.chatHints=l.getChatHintsAfterMatch(),e.sendChatMessage=function(n){u.playSound("menu-click");let i=t.sendChatMessage(n);l.enqueueChatMessage(i),e.chatBubbles=l.getChatMessages()},e.exitGame=function(){u.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){u.playSound("menu-click"),t.sendPlayerQuitRequest(),d(),s.goToPage(r,"/home")},e.stopExitGame=function(){u.playSound("menu-click"),e.exitGameModal=!1},e.continueForceExit=function(){u.playSound("menu-click"),s.goToPage(r,"/home")},e.openLanguageModal=function(){e.languageModal=!0,u.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,u.playSound("menu-click")},e.changeLanguage=function(t){o.use(t),e.languageModal=!1,u.playSound("menu-click"),a.loginCompleted()||h.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=u.isAudioEnabled(),e.toggleBase=function(){u.toggleBase(),e.basePlaying=u.isAudioEnabled()}}]),angular.module("codyColor").controller("royaleMatchCtrl",["$scope","rabbit","gameData","scopeService","pathHandler","$location","$translate","chatHandler","navigationHandler","audioHandler","sessionHandler","translationHandler","authHandler",function(e,t,n,i,r,o,a,s,u,c,l,h,f){let d,p;console.log("Controller match ready.");let g=function(){void 0!==d&&(clearInterval(d),d=void 0),void 0!==p&&(clearInterval(p),p=void 0),t.quitGame(),r.quitGame(),s.clearChat(),n.initializeGameData()};if(u.initializeBackBlock(e),l.isSessionInvalid())return g(),void u.goToPage(o,"/");e.userLogged=f.loginCompleted(),f.loginCompleted()?e.userNickname=f.getServerUserData().nickname:h.setTranslation(e,"userNickname","NOT_LOGGED"),n.getAllPlayers().sort(function(e,t){return t.points-e.points}),e.showDraggableRoby=!0,r.initialize(e),e.players=n.getAllPlayers(),e.userPlayer=n.getUserPlayer(),e.timerFormatter=n.formatTimeDecimals,e.playerRoby=r.getPlayerRoby(),e.enemiesRoby=r.getEnemiesRoby();for(let e=0;e<n.getAllPlayers().length;e++)n.editPlayer({match:{timerValue:n.getGeneral().timerSetting}},n.getAllPlayers()[e].playerId);let m=function(t,n,i){let r="",o="";switch(t){case 0:o="down";break;case 1:o="left";break;case 2:o="up";break;case 3:o="right"}r+=i?"fas fa-chevron-circle-"+o+" playground--arrow-over":"fas fa-angle-"+o+" playground--arrow",e.showArrows&&(r+=" floating-"+o+"-animation"),e.startPositionsCss[t][n]=r},v=function(t){e.startPositionsCss=new Array(4);for(let n=0;n<4;n++){e.startPositionsCss[n]=new Array(5);for(let e=0;e<5;e++)m(n,e,t)}};v(!1),e.tilesCss=new Array(5);for(let t=0;t<5;t++){e.tilesCss[t]=new Array(5);for(let i=0;i<5;i++)switch(n.getGeneral().tiles[t][i]){case"Y":e.tilesCss[t][i]="playground--tile-yellow";break;case"R":e.tilesCss[t][i]="playground--tile-red";break;case"G":e.tilesCss[t][i]="playground--tile-gray"}}let y=3;c.playSound("countdown"),e.startCountdownText=y.toString(),e.countdownInProgress=!0,d=setInterval(function(){--y>0?(c.playSound("countdown"),i.safeApply(e,function(){e.startCountdownText=y.toString()})):0===y?(c.playSound("start"),i.safeApply(e,function(){e.startCountdownText="Let's Cody!"})):(clearInterval(d),d=void 0,i.safeApply(e,function(){e.countdownInProgress=!1}),b())},1e3);let b=function(){let r=n.getGeneral().timerSetting,o=10,a=Date.now()+o;p=setTimeout(function s(){let u=Date.now()-a;u>o&&console.log("Timer lagged!");r-=o+u;let c=r<=0||A();i.safeApply(e,function(){for(let i=0;i<n.getAllPlayers().length;i++){let o=n.getAllPlayers()[i];-1===o.match.time&&(o.match.timerValue=r,c&&(o.match.positioned=!0,o.match.timerValue=0,o.match.time=0,o.userPlayer&&(e.showCompleteGrid=!0,e.showArrows=!1,e.showDraggableRoby=!1,v(!1),t.sendPlayerPositionedMessage())))}});c||(a=Date.now()+o,p=setTimeout(s,o))},o)},A=function(){let e=!0;for(let t=0;t<n.getAllPlayers().length;t++)!0!==n.getAllPlayers()[t].match.positioned&&(e=!1);return e};e.showCompleteGrid=!1,e.showArrows=!1,e.startAnimation=!1,e.draggableRobyImage="roby-idle",e.startDragging=function(){console.log("Start dragging"),c.playSound("roby-drag"),i.safeApply(e,function(){e.showCompleteGrid=!0,e.draggableRobyImage="roby-dragging-trasp",e.showArrows=!0,v(!1)})},e.robyOver=function(t,n,r,o){c.playSound("roby-over"),i.safeApply(e,function(){m(r,o,!0)})},e.robyOut=function(t,n,r,o){i.safeApply(e,function(){m(r,o,!1)})},e.endDragging=function(){console.log("End dragging"),c.playSound("roby-drop"),e.startAnimation||i.safeApply(e,function(){e.showArrows=!1,e.showCompleteGrid=!1,e.draggableRobyImage="roby-idle",v(!1)})},e.robyDropped=function(o,a,s,u){console.log("Roby dropped"),c.playSound("roby-positioned"),e.showCompleteGrid=!0,e.startAnimation||(i.safeApply(e,function(){n.editPlayer({match:{startPosition:{side:s,distance:u},time:n.getUserPlayer().match.timerValue,positioned:!0}}),e.showDraggableRoby=!1}),r.positionRoby(!0,n.getUserPlayer().match.startPosition),t.sendPlayerPositionedMessage())},t.setPageCallbacks({onEnemyPositioned:function(t){i.safeApply(e,function(){n.getPlayerById(t.playerId).match.timerValue=t.matchTime,n.getPlayerById(t.playerId).match.time=t.matchTime,n.getPlayerById(t.playerId).match.positioned=!0})},onPlayerRemoved:function(t){t.removedPlayerId===n.getUserPlayer().playerId?(g(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})):i.safeApply(e,function(){n.syncGameData(t.gameData)})},onGameQuit:function(){g(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onConnectionLost:function(){g(),i.safeApply(e,function(){h.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onStartAnimation:function(e){n.syncGameData(e.gameData),w()},onEndMatch:function(t){n.syncGameData(t.gameData),r.quitGame(),!0!==e.forceExitModal&&i.safeApply(e,function(){u.goToPage(o,"/royale-aftermatch")})}});let w=function(){if(!e.startAnimation){for(let e=0;e<n.getEnemies().length;e++)r.positionRoby(!1,n.getEnemies()[e].match.startPosition);i.safeApply(e,function(){e.startAnimation=!0}),r.calculateAllPlayersPath(),n.calculateRoyaleMatchPoints(),r.animateActiveRobys(function(){!0!==e.askedForSkip&&t.sendEndAnimationMessage()})}};e.exitGame=function(){c.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){c.playSound("menu-click"),t.sendPlayerQuitRequest(),g(),u.goToPage(o,"/home")},e.stopExitGame=function(){c.playSound("menu-click"),e.exitGameModal=!1},e.continueForceExit=function(){c.playSound("menu-click"),u.goToPage(o,"/home")},e.skip=function(){c.playSound("menu-click"),t.sendEndAnimationMessage(),e.askedForSkip=!0},e.openLanguageModal=function(){e.languageModal=!0,c.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,c.playSound("menu-click")},e.changeLanguage=function(t){a.use(t),e.languageModal=!1,c.playSound("menu-click"),f.loginCompleted()||h.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=c.isAudioEnabled(),e.toggleBase=function(){c.toggleBase(),e.basePlaying=c.isAudioEnabled()}}]),angular.module("codyColor").controller("royaleMmakingCtrl",["$scope","rabbit","navigationHandler","$translate","translationHandler","audioHandler","$location","sessionHandler","gameData","scopeService","chatHandler","settings","authHandler",function(e,t,n,i,r,o,a,s,u,c,l,h,f){let d;console.log("Royale mmaking controller ready."),u.getGeneral().gameType=u.getGameTypes().royale;let p=function(){t.quitGame(),u.initializeGameData(),l.clearChat(),void 0!==d&&clearInterval(d)};if(n.initializeBackBlock(e),s.isSessionInvalid())return p(),void n.goToPage(a,"/");e.userLogged=f.loginCompleted(),f.loginCompleted()?(e.userNickname=f.getServerUserData().nickname,e.nickname=f.getServerUserData().nickname):r.setTranslation(e,"userNickname","NOT_LOGGED"),f.setCookieNickCallback(function(){c.safeApply(e,function(){e.userLogged=f.loginCompleted(),f.loginCompleted()?(e.userNickname=f.getServerUserData().nickname,e.nickname=f.getServerUserData().nickname):r.setTranslation(e,"userNickname","NOT_LOGGED")})});let g=function(t){c.safeApply(e,function(){e.mmakingState=m.loadingScreen}),setTimeout(function(){c.safeApply(e,function(){e.mmakingState=t})},200)};const m={loadingScreen:"loadingScreen",joinMatch:"joinMatch",nicknameSelection:"nicknameSelection",waitingEnemies:"waitingEnemies"};e.screens=m,g(m.joinMatch),e.countdownFormatter=u.formatTimeSeconds,e.generalData=u.getGeneral(),e.userPlayer=u.getUserPlayer(),e.baseUrl=h.webBaseUrl,e.connected=t.getBrokerConnectionState();let v=!1;e.connected?("0000"!==u.getGeneral().code||u.getUserPlayer().organizer)&&(t.sendGameRequest(),r.setTranslation(e,"joinMessage","SEARCH_MATCH_INFO")):(t.connect(),v=!0),t.setPageCallbacks({onConnected:function(){v&&(("0000"!==u.getGeneral().code||u.getUserPlayer().organizer)&&(t.sendGameRequest(),c.safeApply(e,function(){r.setTranslation(e,"joinMessage","SEARCH_MATCH_INFO")})),v=!1)},onGameRequestResponse:function(n){if("0000"===n.code.toString())return void c.safeApply(e,function(){r.setTranslation(e,"joinMessage","CODE_NOT_VALID")});u.getGeneral().gameRoomId=n.gameRoomId,u.getUserPlayer().playerId=n.playerId,u.syncGameData(n.gameData),t.subscribeGameRoom();let i=u.formatTimeStatic(u.getGeneral().timerSetting);r.setTranslation(e,"battleTime",i),u.getGeneral().scheduledStart&&(c.safeApply(e,function(){e.relativeStartDate=(new Date).getTime()+n.msToStart,e.startMatchTimerValue=n.msToStart}),d=setInterval(function(){e.startMatchTimerValue>1e3?c.safeApply(e,function(){e.startMatchTimerValue=e.relativeStartDate-(new Date).getTime()}):(c.safeApply(e,function(){e.startMatchTimerValue=0}),clearInterval(d),d=void 0)},1e3)),u.getUserPlayer().organizer?g(m.waitingEnemies):g(m.nicknameSelection)},onPlayerAdded:function(t){c.safeApply(e,function(){u.syncGameData(t.gameData),e.connectedEnemies=u.getEnemies(),r.setTranslation(e,"totTime",u.formatTimeStatic(u.getGeneral().timerSetting))})},onPlayerRemoved:function(t){t.removedPlayerId===u.getUserPlayer().playerId?(p(),c.safeApply(e,function(){r.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})):c.safeApply(e,function(){u.syncGameData(t.gameData),e.connectedEnemies=u.getEnemies(),r.setTranslation(e,"totTime",u.formatTimeStatic(u.getGeneral().timerSetting))})},onStartMatch:function(t){u.syncGameData(t.gameData),void 0!==d&&(clearInterval(d),d=void 0),c.safeApply(e,function(){n.goToPage(a,"/royale-match")})},onGameQuit:function(){p(),c.safeApply(e,function(){r.setTranslation(e,"forceExitText","ENEMY_LEFT"),e.forceExitModal=!0})},onConnectionLost:function(){p(),c.safeApply(e,function(){r.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})},onChatMessage:function(t){o.playSound("roby-over"),l.enqueueChatMessage(t),c.safeApply(e,function(){e.chatBubbles=l.getChatMessages()})}}),e.goToCreateMatch=function(){o.playSound("menu-click"),n.goToPage(a,"/royale-new-match")},e.joinGame=function(n){o.playSound("menu-click"),i("SEARCH_MATCH_INFO").then(function(t){e.joinMessage=t},function(t){e.joinMessage=t}),u.editGeneral({code:n}),t.sendGameRequest()},e.readyClicked=!1,e.playerReady=function(){e.readyClicked||(u.getUserPlayer().ready=!0,t.sendReadyMessage(),e.readyClicked=!0)},e.validPlayer=function(){u.getUserPlayer().nickname=e.nickname,g(m.waitingEnemies),t.sendValidationMessage(),s.enableNoSleep()},e.chatBubbles=l.getChatMessages(),e.getBubbleStyle=function(e){return e.playerId===u.getUserPlayer().playerId?"chat--bubble-player":"chat--bubble-enemy"},e.chatHints=l.getChatHintsPreMatch(),e.sendChatMessage=function(n){o.playSound("menu-click");let i=t.sendChatMessage(n);l.enqueueChatMessage(i),e.chatBubbles=l.getChatMessages()},e.linkCopied=!1,e.codeCopied=!1,e.copyLink=function(){o.playSound("menu-click"),y(h.webBaseUrl+"/#!?royale="+u.getGeneral().code),e.linkCopied=!0,e.codeCopied=!1},e.copyCode=function(){o.playSound("menu-click"),y(u.getGeneral().code),e.linkCopied=!1,e.codeCopied=!0};let y=function(e){let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};e.exitGameModal=!1,e.exitGame=function(){o.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){o.playSound("menu-click"),t.sendPlayerQuitRequest(),p(),n.goToPage(a,"/home")},e.stopExitGame=function(){o.playSound("menu-click"),e.exitGameModal=!1},e.forceExitModal=!1,e.forceExitText="",e.continueForceExit=function(){o.playSound("menu-click"),n.goToPage(a,"/home")},e.openLanguageModal=function(){e.languageModal=!0,o.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,o.playSound("menu-click")},e.changeLanguage=function(t){i.use(t),e.languageModal=!1,o.playSound("menu-click"),f.loginCompleted()||r.setTranslation(e,"userNickname","NOT_LOGGED")},e.basePlaying=o.isAudioEnabled(),e.toggleBase=function(){o.toggleBase(),e.basePlaying=o.isAudioEnabled()}}]),angular.module("codyColor").controller("royaleNewMatchCtrl",["$scope","rabbit","navigationHandler","scopeService","$translate","translationHandler","audioHandler","$location","sessionHandler","gameData","authHandler",function(e,t,n,i,r,o,a,s,u,c,l){console.log("New match royale controller ready.");let h=function(){t.quitGame(),c.initializeGameData()};if(n.initializeBackBlock(e),u.isSessionInvalid())return h(),void n.goToPage(s,"/");e.userLogged=l.loginCompleted(),l.loginCompleted()?(e.userNickname=l.getServerUserData().nickname,e.nickname=l.getServerUserData().nickname):o.setTranslation(e,"userNickname","NOT_LOGGED"),e.currentTimerIndex=1,r(["15_SECONDS","30_SECONDS","1_MINUTE","2_MINUTES"]).then(function(t){e.timerSettings=[{text:t["15_SECONDS"],value:15e3},{text:t["30_SECONDS"],value:3e4},{text:t["1_MINUTE"],value:6e4},{text:t["2_MINUTES"],value:12e4}]}),e.editTimer=function(t){a.playSound("menu-click"),e.currentTimerIndex=t?e.currentTimerIndex<3?e.currentTimerIndex+1:3:e.currentTimerIndex>0?e.currentTimerIndex-1:0,c.getGeneral().timerSetting=e.timerSettings[e.currentTimerIndex].value},e.currentMaxPlayersIndex=1,r(["PLAYERS_10","PLAYERS_20","PLAYERS_40","PLAYERS_100"]).then(function(t){e.maxPlayersSettings=[{text:t.PLAYERS_10,value:10},{text:t.PLAYERS_20,value:20},{text:t.PLAYERS_40,value:40},{text:t.PLAYERS_100,value:100}]}),e.editMaxPlayers=function(t){a.playSound("menu-click"),e.currentMaxPlayersIndex=t?e.currentMaxPlayersIndex<3?e.currentMaxPlayersIndex+1:3:e.currentMaxPlayersIndex>0?e.currentMaxPlayersIndex-1:0,c.getGeneral().maxPlayersSetting=e.maxPlayersSettings[e.currentMaxPlayersIndex].value},e.currentStartIndex=0,r(["IN_DATE","MANUAL"]).then(function(t){e.startSettings=[{text:t.IN_DATE,value:0},{text:t.MANUAL,value:1}]}),e.editStartMode=function(){a.playSound("menu-click"),0===e.currentStartIndex?e.currentStartIndex=1:e.currentStartIndex=0},t.setPageCallbacks({onConnectionLost:function(){h(),i.safeApply(e,function(){o.setTranslation(e,"forceExitText","FORCE_EXIT"),e.forceExitModal=!0})}}),e.requestMMaking=function(){if(a.playSound("menu-click"),0===e.currentStartIndex){if(!f(e.hours,e.minutes))return;{let t=new Date;t.setHours(e.hours,e.minutes),c.getGeneral().startDate=t.getTime()}}c.getGeneral().gameName=e.gameName,c.getUserPlayer().nickname=e.nickname,c.getUserPlayer().organizer=!0,n.goToPage(s,"/royale-mmaking")};let f=function(e,t){let n=!1,i=new Date,r=i.getHours(),o=i.getMinutes(),a=parseInt(e,10),s=parseInt(t,10);return r<a&&(n=!0),r===a&&o<s&&(n=!0),n};e.exitGame=function(){a.playSound("menu-click"),e.exitGameModal=!0},e.continueExitGame=function(){a.playSound("menu-click"),t.sendPlayerQuitRequest(),h(),n.goToPage(s,"/home")},e.stopExitGame=function(){a.playSound("menu-click"),e.exitGameModal=!1},e.continueForceExit=function(){a.playSound("menu-click"),n.goToPage(s,"/home")},e.openLanguageModal=function(){e.languageModal=!0,a.playSound("menu-click")},e.closeLanguageModal=function(){e.languageModal=!1,a.playSound("menu-click")},e.changeLanguage=function(t){r.use(t),e.languageModal=!1,r(["15_SECONDS","30_SECONDS","1_MINUTE","2_MINUTES"]).then(function(t){e.timerSettings=[{text:t["15_SECONDS"],value:15e3},{text:t["30_SECONDS"],value:3e4},{text:t["1_MINUTE"],value:6e4},{text:t["2_MINUTES"],value:12e4}]}),r(["PLAYERS_10","PLAYERS_20","PLAYERS_40","PLAYERS_100"]).then(function(t){e.maxPlayersSettings=[{text:t.PLAYERS_10,value:10},{text:t.PLAYERS_20,value:20},{text:t.PLAYERS_40,value:40},{text:t.PLAYERS_100,value:100}]}),r(["IN_DATE","MANUAL"]).then(function(t){e.startSettings=[{text:t.IN_DATE,value:0},{text:t.MANUAL,value:1}]}),l.loginCompleted()||o.setTranslation(e,"userNickname","NOT_LOGGED"),a.playSound("menu-click")},e.basePlaying=a.isAudioEnabled(),e.toggleBase=function(){a.toggleBase(),e.basePlaying=a.isAudioEnabled()}}]),angular.module("codyColor").controller("splashCtrl",["$scope","rabbit","navigationHandler","audioHandler","$location","sessionHandler","$routeParams","gameData","authHandler",function(e,t,n,i,r,o,a,s,u){console.log("Controller splash ready."),n.initializeBackBlock(e),o.validateSession(),u.initializeAuth(),u.enableCookieSignIn(),t.getServerConnectionState()||t.connect();let c=a.custom;void 0!==c&&c.length>0&&(s.getGeneral().code=c.toString(),console.log("Custom match!"),n.goToPage(r,"/custom-mmaking"));let l=a.royale;void 0!==l&&l.length>0&&(s.getGeneral().code=l.toString(),console.log("Royale match!"),n.goToPage(r,"/royale-mmaking")),e.clientVersion=o.getClientVersion(),e.goToHome=function(){n.goToPage(r,"/home"),i.splashStartBase(),o.enableNoSleep()}}]),angular.module("codyColor").factory("gameData",function(){let e={},t={};const n={bootmp:"bootmp",random:"random",custom:"custom",royale:"royale"};e.initializeMatchData=function(){if(void 0!==t.general&&void 0!==t.players){t.general.tiles=void 0;for(let e=0;e<t.players.length;e++)t.players[e].match={time:-1,points:0,pathLength:0,animationEnded:!1,positioned:!1,timerValue:0,startPosition:{side:-1,distance:-1},endPosition:{side:-1,distance:-1}}}},e.initializeGameData=function(){e.initializeMatchData(),(t={general:{gameName:void 0,startDate:void 0,scheduledStart:!1,gameRoomId:-1,matchCount:0,timerSetting:3e4,bootEnemySetting:-1,maxPlayersSetting:20,code:"0000",tiles:void 0,gameType:void 0},players:[{nickname:"Anonymous",points:0,wonMatches:0,playerId:-1,ready:!1,validated:!1,organizer:!1,userPlayer:!1,match:{time:-1,points:0,pathLength:0,animationEnded:!1,positioned:!1,timerValue:0,startPosition:{side:-1,distance:-1},endPosition:{side:-1,distance:-1}}}]}).players[0].userPlayer=!0},e.initializeGameData(),e.addEnemy=function(e){t.players.push({nickname:"Anonymous",points:0,wonMatches:0,playerId:-1,ready:!1,validated:!1,organizer:!1,userPlayer:!1,match:{time:-1,points:0,pathLength:0,animationEnded:!1,positioned:!1,timerValue:0,startPosition:{side:-1,distance:-1},endPosition:{side:-1,distance:-1}}}),t.players[t.players.length-1].playerId=e},e.removeEnemy=function(e){let n=i(e);void 0===n||t.players[n].userPlayer||(void 0!==t.players[n].match.timer&&clearInterval(t.players[n].match.timer),t.players.splice(i(e),1))},e.editEnemy1vs1=function(e){let n=r();void 0!==n&&void 0!==t.players[n]&&$.extend(!0,t.players[n],e)},e.editPlayer=function(e,n){void 0!==n?$.extend(!0,t.players[i(n)],e):$.extend(!0,t.players[o()],e)},e.syncGameData=function(n){void 0!==n.general.tiles&&(n.general.tiles=e.formatMatchTiles(n.general.tiles)),$.extend(!0,t.general,n.general);for(let e=0;e<t.players.length;e++){let i=!0;for(let r=0;r<n.players.length;r++)n.players[r].playerId===t.players[e].playerId&&($.extend(!0,t.players[e],n.players[r]),i=!1,n.players[r].presentYet=!0);t.players[e].toRemove=i}for(let n=0;n<t.players.length;n++)!1!==t.players[n].toRemove&&e.removeEnemy(t.players[n].playerId);for(let i=0;i<n.players.length;i++)!0!==n.players[i].presentYet&&(e.addEnemy(i),$.extend(!0,t.players[t.players.length-1],n.players[i]));t.players.sort(function(e,t){return t.points-e.points})},e.editGeneral=function(e){$.extend(!0,t.general,e)},e.getEnemies=function(){let e=JSON.parse(JSON.stringify(t.players));return e.splice(o(),1),e},e.getPlayerById=function(e){return t.players[i(e)]},e.getUserPlayer=function(){return t.players[o()]},e.getEnemy1vs1=function(){if(void 0!==r())return t.players[r()]},e.getAllPlayers=function(){return t.players},e.duplicateAllPlayers=function(){return JSON.parse(JSON.stringify(t.players))},e.getGeneral=function(){return t.general};let i=function(e){for(let n=0;n<t.players.length;n++)if(t.players[n].playerId===e)return n},r=function(){for(let e=0;e<t.players.length;e++)if(!0!==t.players[e].userPlayer)return e},o=function(){for(let e=0;e<t.players.length;e++)if(!0===t.players[e].userPlayer)return e};return e.getGameTypes=function(){return n},e.generateNewMatchTiles=function(){let t="";for(let e=0;e<25;e++)switch(Math.floor(3*Math.random())){case 0:t+="R";break;case 1:t+="Y";break;case 2:t+="G"}return e.formatMatchTiles(t)},e.formatMatchTiles=function(e){let t=new Array(5),n=0;for(let i=0;i<5;i++){t[i]=new Array(5);for(let r=0;r<5;r++)t[i][r]=e.charAt(n),n++}return t},e.formatTimeDecimals=function(e){let t=Math.floor(e/10%100).toString(),n=Math.floor(e/1e3%60).toString(),i=Math.floor(e/6e4%60).toString();return t=t.length<2?"0"+t:t,"0"!==i?i+":"+n+":"+t:n+":"+t},e.formatTimeSeconds=function(e){let t=Math.floor(e%6e4/1e3).toString(),n=Math.floor(e%36e5/6e4).toString(),i=Math.floor(e%864e5/36e5).toString();return(i="0"===i?"":i+":")+n+":"+(t=t.length<2?"0"+t:t)},e.formatTimeStatic=function(e){switch(e){case 15e3:return"15_SECONDS";case 3e4:return"30_SECONDS";case 6e4:return"1_MINUTE";case 12e4:return"2_MINUTES"}},e.formatChatDate=function(e){let t=new Date(e),n=t.getHours(),i=t.getMinutes();return n+":"+(i=i<10?"0"+i:i)},e.calculateArcadeMatchPoints=function(){let t=e.getMatchWinner();if(void 0!==t){t.match.points+=2*t.match.pathLength;let n=e.getGeneral().timerSetting;t.match.points+=Math.floor(15*t.match.time/n)}},e.calculateRoyaleMatchPoints=function(){for(let n=0;n<t.players.length;n++){t.players[n].match.points+=2*t.players[n].match.pathLength;let i=e.getGeneral().timerSetting;t.players[n].match.points+=Math.floor(15*t.players[n].match.time/i)}},e.getPlayersOrderedByMatchResult=function(){let t=e.duplicateAllPlayers();return t.sort(function(e,t){return t.match.pathLength-e.match.pathLength!=0?t.match.pathLength-e.match.pathLength:t.match.time-e.match.time}),t},e.getMatchWinner=function(){let n=e.getPlayersOrderedByMatchResult()[0];for(let e=0;e<t.players.length;e++)if(n.playerId===t.players[e].playerId)return t.players[e]},e}),angular.module("codyColor").factory("navigationHandler",function(){let e={},t=!0;return e.initializeBackBlock=function(e){e.$on("$locationChangeStart",function(e){t?(alert("Utilizza i comandi interni alla pagina per navigare tra le schermate!"),e.preventDefault()):t=!0})},e.goToPage=function(e,n){t=!1,e.search({}),e.path(n).replace()},e}),angular.module("codyColor").config(["$routeProvider",function(e){e.when("/",{templateUrl:"pages/splash.html",controller:"splashCtrl"}).when("/home",{templateUrl:"pages/home.html",controller:"homeCtrl"}).when("/login",{templateUrl:"pages/login.html",controller:"loginCtrl"}).when("/rules",{templateUrl:"pages/rules.html",controller:"emptyCtrl"}).when("/random-mmaking",{templateUrl:"pages/random-mmaking.html",controller:"randomMmakingCtrl"}).when("/custom-mmaking",{templateUrl:"pages/custom-mmaking.html",controller:"customMmakingCtrl"}).when("/royale-mmaking",{templateUrl:"pages/royale-mmaking.html",controller:"royaleMmakingCtrl"}).when("/custom-new-match",{templateUrl:"pages/custom-new-match.html",controller:"customNewMatchCtrl"}).when("/royale-new-match",{templateUrl:"pages/royale-new-match.html",controller:"royaleNewMatchCtrl"}).when("/arcade-match",{templateUrl:"pages/arcade-match.html",controller:"arcadeMatchCtrl"}).when("/arcade-aftermatch",{templateUrl:"pages/arcade-aftermatch.html",controller:"arcadeAftermatchCtrl"}).when("/royale-match",{templateUrl:"pages/royale-match.html",controller:"royaleMatchCtrl"}).when("/royale-aftermatch",{templateUrl:"pages/royale-aftermatch.html",controller:"royaleAftermatchCtrl"}).when("/bootmp-mmaking",{templateUrl:"pages/bootmp-mmaking.html",controller:"bootmpMmakingCtrl"}).when("/bootmp-match",{templateUrl:"pages/bootmp-match.html",controller:"bootmpMatchCtrl"}).when("/bootmp-aftermatch",{templateUrl:"pages/bootmp-aftermatch.html",controller:"bootmpAftermatchCtrl"}).when("/terms",{templateUrl:"pages/terms.html",controller:"emptyCtrl"}).when("/privacy",{templateUrl:"pages/privacy.html",controller:"emptyCtrl"}).when("/rankings",{templateUrl:"pages/rankings.html",controller:"rankingsCtrl"}).otherwise({templateUrl:"pages/404.html",controller:"emptyCtrl"})}]),angular.module("codyColor").factory("pathHandler",["gameData","scopeService",function(e,t){let n,i,r={},o={},a=[];r.quitGame=function(){for(let e=0;e<4;e++)for(let t=0;t<5;t++)void 0!==a[e]&&void 0!==a[e][t]&&void 0!==a[e][t].walkingTimer&&(clearInterval(a[e][t].walkingTimer),a[e][t].walkingTimer=void 0);void 0!==o.walkingTimer&&(clearInterval(o.walkingTimer),o.walkingTimer=void 0),o={},a=[]},r.getPlayerRoby=function(){return o},r.getEnemiesRoby=function(){return a},r.initialize=function(e){n=new Array(4);for(let e=0;e<4;e++){n[e]=new Array(5);for(let t=0;t<5;t++)n[e][t]=$("#start-"+e.toString()+t.toString())}i=new Array(5);for(let e=0;e<5;e++){i[e]=new Array(5);for(let t=0;t<5;t++)i[e][t]=$("#tile-"+e.toString()+t.toString())}o={element:$("#player-roby"),show:!1,setShow:function(n){t.safeApply(e,function(){o.show=n})},animationFinished:!1,brokenPosition:n[2][2].position(),walkingTimer:void 0,path:void 0,positionedImage:"roby-positioned",walkingImages:["roby-walking-1","roby-walking-2"],brokenImage:"roby-broken",image:o.positionedImage,startPosition:{side:-1,distance:-1},changeImage:function(n){t.safeApply(e,function(){o.image=n})}},a=new Array(4);for(let i=0;i<4;i++){a[i]=new Array(5);for(let r=0;r<5;r++)a[i][r]={element:$("#enemy-roby-"+i.toString()+r.toString()),show:!1,setShow:function(n){t.safeApply(e,function(){a[i][r].show=n})},animationFinished:!1,brokenPosition:n[2][3].position(),walkingTimer:void 0,positionedImage:"enemy-positioned",walkingImages:["enemy-walking-1","enemy-walking-2"],brokenImage:"enemy-broken",image:"enemy-positioned",changeImage:function(n){t.safeApply(e,function(){a[i][r].image=n})}}}},r.positionRoby=function(e,t){if(-1===t.side&&-1===t.distance)return;let i=e?o:a[t.side][t.distance];if(void 0===i)return;i.setShow(!0);let r=n[t.side][t.distance].position(),s="rotate("+l((t.side+2).mod(4)).toString()+"deg)";i.element.css({left:r.left,top:r.top,transform:s}),i.changeImage(i.positionedImage)},r.animateActiveRobys=function(e){s(o,e,!0);for(let t=0;t<4;t++)for(let n=0;n<5;n++)!0===a[t][n].show&&s(a[t][n],e,!1)};let s=function(e,t,r){if(-1===e.startPosition.distance&&-1===e.startPosition.side)return e.element.delay(1e3),void e.element.queue(function(n){e.animationFinished=!0,u(t),n()});e.element.delay(1e3),r||e.element.delay(100),e.element.queue(function(t){let n=0;e.walkingTimer=setInterval(function(){e.changeImage(0===n?e.walkingImages[0]:e.walkingImages[1]),n=(n+1).mod(2)},500),t()});for(let t=0;t<e.pathLength;t++){let n=i[e.tilesCoords[t].x][e.tilesCoords[t].y].position();e.element.animate({left:n.left,top:n.top},{duration:800}),e.element.delay(200),e.element.queue(function(n){t+1<e.pathLength?e.element.css({transform:"rotate("+l(e.direction[t+1]).toString()+"deg)"}):e.element.css({transform:"rotate("+l(e.endPosition.side).toString()+"deg)"}),n()})}let o=n[e.endPosition.side][e.endPosition.distance].position();e.element.animate({left:o.left,top:o.top},{duration:800}),e.element.queue(function(t){void 0!==e.walkingTimer&&clearInterval(e.walkingTimer),e.walkingTimer=void 0,e.changeImage(e.positionedImage),t()}),e.element.delay(1e3),e.element.queue(function(n){e.animationFinished=!0,u(t),n()})},u=function(e){let t=!0;if(o.animationFinished||(t=!1),a.length>0)for(let e=0;e<4;e++)for(let n=0;n<5;n++)if(a[e][n].show&&!a[e][n].animationFinished){t=!1;break}t&&e()};r.calculateAllPlayersPath=function(){for(let t=0;t<e.getAllPlayers().length;t++)c({player:e.getAllPlayers()[t]})},r.calculateUserPlayerPath=function(){c({player:e.getUserPlayer()})},r.calculateBootEnemyPath=function(){let t,n=[];for(let e=0;e<4;e++)for(let t=0;t<5;t++)n.push(c({customStart:{side:e,distance:t}}));switch(n.sort(function(e,t){return e.pathLength-t.pathLength}),e.getGeneral().bootEnemySetting){case 1:t=n[Math.floor(10*Math.random())];break;case 2:t=n[Math.floor(10*Math.random())+10];break;case 3:t=n[19]}e.editEnemy1vs1({match:t}),$.extend(!0,a[t.startPosition.side][t.startPosition.distance],t)};let c=function(t){let n={startPosition:{side:-1,distance:-1},endPosition:{side:-1,distance:-1},tilesCoords:[],direction:[],pathLength:0};if(void 0!==t.customStart?n.startPosition=t.customStart:n.startPosition=t.player.match.startPosition,-1===n.startPosition.distance&&-1===n.startPosition.side)return void 0!==t.player&&e.editPlayer({match:n},t.player.playerId),n;switch(n.startPosition.side){case 0:n.tilesCoords.push({x:0,y:n.startPosition.distance});break;case 1:n.tilesCoords.push({x:n.startPosition.distance,y:4});break;case 2:n.tilesCoords.push({x:4,y:n.startPosition.distance});break;case 3:n.tilesCoords.push({x:n.startPosition.distance,y:0})}n.direction.push((n.startPosition.side+2).mod(4)),n.pathLength++;let i=!1;for(;!i;){let t=n.tilesCoords[n.pathLength-1],r=n.direction[n.pathLength-1],o={x:-1,y:-1},a=-1;switch(e.getGeneral().tiles[t.x][t.y]){case"Y":a=(r-1).mod(4);break;case"R":a=(r+1).mod(4);break;case"G":a=r}switch(a){case 0:o.x=t.x-1,o.y=t.y;break;case 1:o.x=t.x,o.y=t.y+1;break;case 2:o.x=t.x+1,o.y=t.y;break;case 3:o.x=t.x,o.y=t.y-1}0===a&&o.x<0?(n.endPosition.side=0,n.endPosition.distance=o.y,i=!0):1===a&&o.y>4?(n.endPosition.side=1,n.endPosition.distance=o.x,i=!0):2===a&&o.x>4?(n.endPosition.side=2,n.endPosition.distance=o.y,i=!0):3===a&&o.y<0&&(n.endPosition.side=3,n.endPosition.distance=o.x,i=!0),!1===i&&(n.pathLength++,n.direction.push(a),n.tilesCoords.push(o))}return void 0!==t.player&&($.extend(!0,t.player.match,n),t.player.userPlayer?$.extend(!0,o,n):$.extend(!0,a[n.startPosition.side][n.startPosition.distance],n)),n};Number.prototype.mod=function(e){return(this%e+e)%e},$.fn.rotateRobot=function(e,t,n){let i=$.speed(200,"swing",n),r=i.step;return this.each(function(n,o){i.complete=$.proxy(i.complete,o),i.step=function(e){if($.style(o,"transform","rotate("+e+"deg)"),r)return r.apply(o,arguments)},$({deg:l(e)}).animate({deg:l(t)},i)})};let l=function(e){switch(e){case 0:return 0;case 1:return 90;case 2:return 180;case 3:return 270;default:return 0}};return r}]),function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],i=n.length,r=window.console=window.console||{};i--;)r[e=n[i]]||(r[e]=t)}(),angular.module("codyColor").factory("rabbit",["gameData","sessionHandler","settings","authHandler",function(e,t,n,i){let r={};const o="/queue/serverControl",a="/topic/clientsControl",s="/topic/general",u="/topic/gameRooms",c="/topic/custGameRooms",l="/topic/agaGameRooms",h="c_connectedSignal",f="s_generalInfo",d="c_gameRequest",p="s_gameResponse",g="c_playerQuit",m="s_gameQuit",v="s_playerAdded",y="s_playerRemoved",b="c_validation",A="c_ready",w="s_startMatch",_="c_positioned",C="s_startAnimation",S="c_endAnimation",E="s_endMatch",T="c_heartbeat",k="c_chat",I="c_signUpRequest",x="c_logInRequest",D="s_authResponse",N="c_userDeleteRequest",P="s_userDeleteResponse",O="c_rankingsRequest",M="s_rankingsResponse";let R,L,F,U,B,j={},V={};r.getBrokerConnectionState=function(){return void 0===R&&(R=!1),R},r.getServerConnectionState=function(){return void 0===L&&(L=!1),L},r.setPageCallbacks=function(e){j=e},r.connect=function(){(F=Stomp.client(n.rabbitSocketUrl)).connect(n.rabbitUsername,n.rabbitPassword,q,H,n.rabbitVHost)},r.subscribeGameRoom=function(){V.gameRoom=F.subscribe(z(),K),U=setInterval(function(){W({msgType:T,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,gameType:e.getGeneral().gameType})},5e3)},r.sendGameRequest=function(){W({msgType:d,nickname:e.getUserPlayer().nickname,correlationId:t.getSessionId(),gameType:e.getGeneral().gameType,gameName:e.getGeneral().gameName,userId:i.getFirebaseUserData().uid,timerSetting:e.getGeneral().timerSetting,maxPlayersSetting:e.getGeneral().maxPlayersSetting,code:e.getGeneral().code,startDate:e.getGeneral().startDate})},r.sendSignUpRequest=function(e){W({msgType:I,nickname:e,email:i.getFirebaseUserData().email,correlationId:t.getSessionId(),userId:i.getFirebaseUserData().uid})},r.sendLogInRequest=function(){W({msgType:x,correlationId:t.getSessionId(),userId:i.getFirebaseUserData().uid})},r.sendRankingsRequest=function(){W({msgType:O,correlationId:t.getSessionId()})},r.sendUserDeleteRequest=function(){W({msgType:N,correlationId:t.getSessionId(),userId:i.getFirebaseUserData().uid})},r.sendReadyMessage=function(){G({msgType:A,organizer:e.getUserPlayer().organizer,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,nickname:e.getUserPlayer().nickname,gameType:e.getGeneral().gameType,clientDirect:!0})},r.sendValidationMessage=function(){G({msgType:b,organizer:e.getUserPlayer().organizer,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,nickname:e.getUserPlayer().nickname,gameType:e.getGeneral().gameType})},r.sendPlayerPositionedMessage=function(){G({msgType:_,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,gameType:e.getGeneral().gameType,matchTime:e.getUserPlayer().match.time,side:e.getUserPlayer().match.startPosition.side,distance:e.getUserPlayer().match.startPosition.distance})},r.sendPlayerQuitRequest=function(){G({msgType:g,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,gameType:e.getGeneral().gameType})},r.sendEndAnimationMessage=function(){G({msgType:S,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,matchPoints:e.getUserPlayer().match.points,pathLength:e.getUserPlayer().match.pathLength,winner:!0===e.getMatchWinner().userPlayer,gameType:e.getGeneral().gameType})},r.sendChatMessage=function(t){let n={msgType:k,gameRoomId:e.getGeneral().gameRoomId,playerId:e.getUserPlayer().playerId,sender:e.getUserPlayer().nickname,body:t,date:(new Date).getTime(),clientDirect:!0,gameType:e.getGeneral().gameType};return G(n),n},r.quitGame=function(){void 0!==V.gameRoom&&V.gameRoom.unsubscribe(),void 0!==U&&(clearInterval(U),U=void 0),j={}};let q=function(){R=!0;let e=a+"."+t.getSessionId();V.serverDirect=F.subscribe(e,K),V.general=F.subscribe(s,K),W({msgType:h,correlationId:t.getSessionId()}),void 0!==j.onConnected&&j.onConnected()},H=function(e){"connectionLost"===e&&(R=!1,L=!1,setTimeout(function(){r.connect()},1e4),void 0!==j.onConnectionLost&&j.onConnectionLost())},W=function(e){$.extend(!0,e,{msgId:Math.floor(1e5*Math.random()).toString()}),F.send(o,{durable:!1,exclusive:!1},JSON.stringify(e))},G=function(t){-1!==e.getGeneral().gameRoomId&&-1!==e.getUserPlayer().playerId&&($.extend(!0,t,{msgId:Math.floor(1e5*Math.random()).toString()}),F.send(z(),{durable:!1,exclusive:!1},JSON.stringify(t)))},z=function(){switch(e.getGeneral().gameType){case e.getGameTypes().random:return u+"."+e.getGeneral().gameRoomId;case e.getGameTypes().custom:return c+"."+e.getGeneral().gameRoomId;case e.getGameTypes().royale:return l+"."+e.getGeneral().gameRoomId}},K=function(n){let i=JSON.parse(n.body);if(void 0===B||B!==i.msgId)B=i.msgId;else if(B===i.msgId)return void console.log("Received duplicate message. Ignored.");switch(i.msgType){case p:return void(void 0!==j.onGameRequestResponse&&j.onGameRequestResponse(i));case D:return void(void 0!==j.onLogInResponse&&j.onLogInResponse(i));case P:return void(void 0!==j.onUserDeletedResponse&&j.onUserDeletedResponse(i));case M:return void(void 0!==j.onRankingsResponse&&j.onRankingsResponse(i));case f:return L=!0,t.setGeneralInfo({totalMatches:i.totalMatches,connectedPlayers:i.connectedPlayers,randomWaitingPlayers:i.randomWaitingPlayers,requiredClientVersion:i.requiredClientVersion}),void(void 0!==j.onGeneralInfoMessage&&j.onGeneralInfoMessage(i))}switch(i.msgType){case A:void 0!==j.onReadyMessage&&i.playerId!==e.getUserPlayer().playerId&&j.onReadyMessage(i);break;case _:void 0!==j.onEnemyPositioned&&i.playerId!==e.getUserPlayer().playerId&&j.onEnemyPositioned(i);break;case k:void 0!==j.onChatMessage&&i.playerId!==e.getUserPlayer().playerId&&j.onChatMessage(i);break;case C:void 0!==j.onStartAnimation&&j.onStartAnimation(i);break;case w:void 0!==j.onStartMatch&&j.onStartMatch(i);break;case E:void 0!==j.onEndMatch&&j.onEndMatch(i);break;case m:void 0!==j.onGameQuit&&j.onGameQuit(i);break;case v:void 0!==j.onPlayerAdded&&i.playerId!==e.getUserPlayer().playerId&&j.onPlayerAdded(i);break;case y:void 0!==j.onPlayerRemoved&&j.onPlayerRemoved(i)}};return r}]),angular.module("codyColor").factory("rankingsHandler",function(){let e={},t={},n=void 0;e.updateNeeded=function(){return void 0===n||i()},e.updateRankings=function(e){(void 0===n||i())&&(t=e,n=new Date)},e.getRankings=function(){return t};let i=function(){return n.getTime()+6e4<=(new Date).getTime()};return e}),angular.module("codyColor").service("scopeService",function(){return{safeApply:function(e,t){var n=e.$root.$$phase;"$apply"===n||"$digest"===n?t&&"function"==typeof t&&t():e.$apply(t)}}}),angular.module("codyColor").factory("sessionHandler",function(){let e,t={};let n={totalMatches:0,connectedEnemies:0,randomWaitingPlayers:0,requiredClientVersion:void 0};const i=Math.floor(1e5*Math.random()).toString(),r=new NoSleep;return t.enableNoSleep=function(){r.enable()},t.validateSession=function(){e=!0},t.isSessionInvalid=function(){return void 0===e||!1===e},t.setGeneralInfo=function(e){n=e},t.getTotalMatches=function(){return n.totalMatches},t.getConnectedPlayers=function(){return n.connectedPlayers},t.getRandomWaitingPlayers=function(){return n.randomWaitingPlayers},t.getRequiredClientVersion=function(){return n.requiredClientVersion},t.isClientVersionValid=function(){return void 0===n.requiredClientVersion||"3.0.5"===n.requiredClientVersion},t.getClientVersion=function(){return"3.0.5"},t.getSessionId=function(){return i},t}),angular.module("codyColor").factory("translationHandler",["$translate",function(e){let t={setTranslation:function(t,n,i){e(i).then(function(e){t[n]=e},function(e){t[n]=e})}};return t}]),function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,i=e.ui.mouse.prototype,r=i._mouseInit,o=i._mouseDestroy;i._touchStart=function(e){!n&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(n=!0,this._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},i._touchMove=function(e){n&&(this._touchMoved=!0,t(e,"mousemove"))},i._touchEnd=function(e){n&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),n=!1)},i._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)},i._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}}(jQuery),function(e,t,n){function i(e,t){return typeof e===t}function r(e){var t=w.className,n=b._config.classPrefix||"";if(_&&(t=t.baseVal),b._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}b._config.enableClasses&&(t+=" "+n+e.join(" "+n),_?w.className.baseVal=t:w.className=t)}function o(e,t){if("object"==typeof e)for(var n in e)E(e,n)&&o(n,e[n]);else{var i=(e=e.toLowerCase()).split("."),a=b[i[0]];if(2==i.length&&(a=a[i[1]]),void 0!==a)return b;t="function"==typeof t?t():t,1==i.length?b[i[0]]=t:(!b[i[0]]||b[i[0]]instanceof Boolean||(b[i[0]]=new Boolean(b[i[0]])),b[i[0]][i[1]]=t),r([(t&&0!=t?"":"no-")+i.join("-")]),b._trigger(e,t)}return b}function a(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):_?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function s(e,n,i,r){var o,s,u,c,l="modernizr",h=a("div"),f=function(){var e=t.body;return e||((e=a(_?"svg":"body")).fake=!0),e}();if(parseInt(i,10))for(;i--;)(u=a("div")).id=r?r[i]:l+(i+1),h.appendChild(u);return(o=a("style")).type="text/css",o.id="s"+l,(f.fake?f:h).appendChild(o),f.appendChild(h),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),h.id=l,f.fake&&(f.style.background="",f.style.overflow="hidden",c=w.style.overflow,w.style.overflow="hidden",w.appendChild(f)),s=n(h,e),f.fake?(f.parentNode.removeChild(f),w.style.overflow=c,w.offsetHeight):h.parentNode.removeChild(h),!!s}function u(e,t){return!!~(""+e).indexOf(t)}function c(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(t,n,i){var r;if("getComputedStyle"in e){r=getComputedStyle.call(e,t,n);var o=e.console;if(null!==r)i&&(r=r.getPropertyValue(i));else if(o){o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else r=!n&&t.currentStyle&&t.currentStyle[i];return r}function h(t,i){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(c(t[r]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];r--;)o.push("("+c(t[r])+":"+i+")");return s("@supports ("+(o=o.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==l(e,null,"position")})}return n}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function d(e,t,r,o){function s(){l&&(delete N.style,delete N.modElem)}if(o=!i(o,"undefined")&&o,!i(r,"undefined")){var c=h(e,r);if(!i(c,"undefined"))return c}for(var l,d,p,g,m,v=["modernizr","tspan","samp"];!N.style&&v.length;)l=!0,N.modElem=a(v.shift()),N.style=N.modElem.style;for(p=e.length,d=0;p>d;d++)if(g=e[d],m=N.style[g],u(g,"-")&&(g=f(g)),N.style[g]!==n){if(o||i(r,"undefined"))return s(),"pfx"!=t||g;try{N.style[g]=r}catch(e){}if(N.style[g]!=m)return s(),"pfx"!=t||g}return s(),!1}function p(e,t){return function(){return e.apply(t,arguments)}}function g(e,t,n,r,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+x.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?d(s,t,r,o):function(e,t,n){var r;for(var o in e)if(e[o]in t)return!1===n?e[o]:i(r=t[e[o]],"function")?p(r,n||t):r;return!1}(s=(e+" "+S.join(a+" ")+a).split(" "),t,n)}function m(e,t,i){return g(e,n,n,t,i)}var v=[],y={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){v.push({name:e,fn:t,options:n})},addAsyncTest:function(e){v.push({name:null,fn:e})}},b=function(){};b.prototype=y,b=new b;var A=[],w=t.documentElement,_="svg"===w.nodeName.toLowerCase(),C="Moz O ms Webkit",S=y._config.usePrefixes?C.toLowerCase().split(" "):[];y._domPrefixes=S;var E,T=y._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];y._prefixes=T,function(){var e={}.hasOwnProperty;E=i(e,"undefined")||i(e.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),y._l={},y.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),b.hasOwnProperty(e)&&setTimeout(function(){b._trigger(e,b[e])},0)},y._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e]}},b._q.push(function(){y.addTest=o});var k=function(){var e=!("onblur"in t.documentElement);return function(t,i){var r;return!!t&&(i&&"string"!=typeof i||(i=a(i||"div")),!(r=(t="on"+t)in i)&&e&&(i.setAttribute||(i=a("div")),i.setAttribute(t,""),r="function"==typeof i[t],i[t]!==n&&(i[t]=n),i.removeAttribute(t)),r)}}();y.hasEvent=k;var I=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return s("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();y.mq=I;y.prefixedCSSValue=function(e,t){var n=!1,i=a("div").style;if(e in i){var r=S.length;for(i[e]=t,n=i[e];r--&&!n;)i[e]="-"+S[r]+"-"+t,n=i[e]}return""===n&&(n=!1),n};var x=y._config.usePrefixes?C.split(" "):[];y._cssomPrefixes=x;var D={elem:a("modernizr")};b._q.push(function(){delete D.elem});var N={style:D.elem.style};b._q.unshift(function(){delete N.style}),y.testAllProps=g,y.testAllProps=m,y.testProp=function(e,t,i){return d([e],n,t,i)},y.testStyles=s,b.addTest("customelements","customElements"in e),b.addTest("history",function(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")||"file:"===location.protocol)&&(e.history&&"pushState"in e.history)}),b.addTest("pointerevents",function(){var e=!1,t=S.length;for(e=b.hasEvent("pointerdown");t--&&!e;)k(S[t]+"pointerdown")&&(e=!0);return e}),b.addTest("postmessage","postMessage"in e),b.addTest("webgl",function(){var t=a("canvas"),n="probablySupportsContext"in t?"probablySupportsContext":"supportsContext";return n in t?t[n]("webgl")||t[n]("experimental-webgl"):"WebGLRenderingContext"in e});var P=!1;try{P="WebSocket"in e&&2===e.WebSocket.CLOSING}catch(e){}b.addTest("websockets",P),b.addTest("cssanimations",m("animationName","a",!0)),function(){b.addTest("csscolumns",function(){var e=!1,t=m("columnCount");try{(e=!!t)&&(e=new Boolean(e))}catch(e){}return e});for(var e,t,n=["Width","Span","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","BreakBefore","BreakAfter","BreakInside"],i=0;i<n.length;i++)e=n[i].toLowerCase(),t=m("column"+n[i]),("breakbefore"===e||"breakafter"===e||"breakinside"==e)&&(t=t||m(n[i])),b.addTest("csscolumns."+e,t)}(),b.addTest("flexbox",m("flexBasis","1px",!0)),b.addTest("picture","HTMLPictureElement"in e),b.addAsyncTest(function(){var e,t,n,i=a("img"),r="sizes"in i;!r&&"srcset"in i?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){o("sizes",2==i.width)},i.onload=n,i.onerror=n,i.setAttribute("sizes","9px"),i.srcset=e+" 1w,"+t+" 8w",i.src=e):o("sizes",r)}),b.addTest("srcset","srcset"in a("img")),b.addTest("webworkers","Worker"in e),function(){var e,t,n,r,o,a;for(var s in v)if(v.hasOwnProperty(s)){if(e=[],(t=v[s]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)1===(a=e[o].split(".")).length?b[a[0]]=r:(!b[a[0]]||b[a[0]]instanceof Boolean||(b[a[0]]=new Boolean(b[a[0]])),b[a[0]][a[1]]=r),A.push((r?"":"no-")+a.join("-"))}}(),r(A),delete y.addTest,delete y.addAsyncTest;for(var O=0;O<b._q.length;O++)b._q[O]();e.Modernizr=b}(window,document),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NoSleep=t():e.NoSleep=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=r.webm,a=r.mp4,s="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("muted",""),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",o),this._addSourceToVideo(this.noSleepVideo,"mp4",a),this.noSleepVideo.addEventListener("loadedmetadata",function(){t.noSleepVideo.duration<=1?t.noSleepVideo.setAttribute("loop",""):t.noSleepVideo.addEventListener("timeupdate",function(){t.noSleepVideo.currentTime>.5&&(t.noSleepVideo.currentTime=Math.random())})}))}return i(e,[{key:"_addSourceToVideo",value:function(e,t,n){var i=document.createElement("source");i.src=n,i.type="video/"+t,e.appendChild(i)}},{key:"enable",value:function(){s?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval(function(){document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){s?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=u},function(e,t,n){"use strict";e.exports={webm:"data:video/webm;base64, GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64, AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}}])}),function(){var e,t,n,i,r={}.hasOwnProperty,o=[].slice;e={LF:"\n",NULL:"\0"},n=function(){var t;function n(e,t,n,i){this.command=e,this.headers=null!=t?t:{},this.body=null!=n?n:"",this.escapeHeaderValues=null!=i&&i}return n.prototype.toString=function(){var t,i,o,a,s;for(i in t=[this.command],(a=!1===this.headers["content-length"])&&delete this.headers["content-length"],o=this.headers)r.call(o,i)&&(s=o[i],this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?t.push(i+":"+n.frEscape(s)):t.push(i+":"+s));return this.body&&!a&&t.push("content-length:"+n.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},n.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t,i){var r,o,a,s,u,c,l,h,f,d,p,g,m,v,y,b,A,w;for(null==i&&(i=!1),s=t.search(RegExp(""+e.LF+e.LF)),a=(u=t.substring(0,s).split(e.LF)).shift(),c={},w=function(e){return e.replace(/^\s+|\s+$/g,"")},f=0,g=(v=u.reverse()).length;f<g;f++)h=(m=v[f]).indexOf(":"),c[w(m.substring(0,h))]=i&&"CONNECT"!==a&&"CONNECTED"!==a?n.frUnEscape(w(m.substring(h+1))):w(m.substring(h+1));if(r="",A=s+2,c["content-length"])p=parseInt(c["content-length"]),r=(""+t).substring(A,A+p);else for(o=null,l=d=y=A,b=t.length;(y<=b?d<b:d>b)&&(o=t.charAt(l))!==e.NULL;l=y<=b?++d:--d)r+=o;return new n(a,c,r,i)},n.unmarshall=function(n,i){var r,o,a,s;return null==i&&(i=!1),o=n.split(RegExp(""+e.NULL+e.LF+"*")),(s={frames:[],partial:""}).frames=function(){var e,n,a,s;for(s=[],e=0,n=(a=o.slice(0,-1)).length;e<n;e++)r=a[e],s.push(t(r,i));return s}(),(a=o.slice(-1)[0])===e.LF||-1!==a.search(RegExp(""+e.NULL+e.LF+"*$"))?s.frames.push(t(a,i)):s.partial=a,s},n.marshall=function(t,i,r,o){return new n(t,i,r,o).toString()+e.NULL},n.frEscape=function(e){return(""+e).replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")},n.frUnEscape=function(e){return(""+e).replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")},n}(),t=function(){var t;function r(e){this.ws_fn=function(){var t;return(t=e()).binaryType="arraybuffer",t},this.reconnect_delay=0,this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}return r.prototype.debug=function(e){},t=function(){return Date.now?Date.now():(new Date).valueOf},r.prototype._transmit=function(e,t,i){var r;for(r=n.marshall(e,t,i,this.escapeHeaderValues),"function"==typeof this.debug&&this.debug(">>> "+r);;){if(!(r.length>this.maxWebSocketFrameSize))return this.ws.send(r);this.ws.send(r.substring(0,this.maxWebSocketFrameSize)),r=r.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+r.length)}},r.prototype._setupHeartbeat=function(n){var r,o,a,s,u,c,l;if((r=n.version)===i.VERSIONS.V1_1||r===i.VERSIONS.V1_2)return s=(o=function(){var e,t,i,r;for(r=[],e=0,t=(i=n["heart-beat"].split(",")).length;e<t;e++)c=i[e],r.push(parseInt(c));return r}())[0],a=o[1],0!==this.heartbeat.outgoing&&0!==a&&(u=Math.max(this.heartbeat.outgoing,a),"function"==typeof this.debug&&this.debug("send PING every "+u+"ms"),this.pinger=i.setInterval(u,(l=this,function(){return l.ws.send(e.LF),"function"==typeof l.debug?l.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==s?(u=Math.max(this.heartbeat.incoming,s),"function"==typeof this.debug&&this.debug("check PONG every "+u+"ms"),this.ponger=i.setInterval(u,function(e){return function(){var n;if((n=t()-e.serverActivity)>2*u)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close()}}(this))):void 0},r.prototype._parseConnect=function(){var e,t,n,i,r;if(r={},(e=1<=arguments.length?o.call(arguments,0):[]).length<2)throw"Connect requires at least 2 arguments";if("function"==typeof e[1])r=e[0],n=e[1],i=e[2],t=e[3];else switch(e.length){case 6:r.login=e[0],r.passcode=e[1],n=e[2],i=e[3],t=e[4],r.host=e[5];break;default:r.login=e[0],r.passcode=e[1],n=e[2],i=e[3],t=e[4]}return[r,n,i,t]},r.prototype.connect=function(){var e,t;return e=1<=arguments.length?o.call(arguments,0):[],this.escapeHeaderValues=!1,t=this._parseConnect.apply(this,e),this.headers=t[0],this.connectCallback=t[1],this.errorCallback=t[2],this.closeEventCallback=t[3],this._active=!0,this._connect()},r.prototype._connect=function(){var r,o,a,s,u;if(s=this.headers,a=this.errorCallback,o=this.closeEventCallback,this._active)return"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws=this.ws_fn(),r=function(e){var t,n,i,r,o,a;for(a="",o=e.length,r=0;r<o;)switch((t=e[r++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(t);break;case 12:case 13:n=e[r++],a+=String.fromCharCode((31&t)<<6|63&n);break;case 14:n=e[r++],i=e[r++],a+=String.fromCharCode((15&t)<<12|(63&n)<<6|(63&i)<<0)}return a},this.ws.onmessage=(u=this,function(o){var s,c,l,h,f,d,p,g,m,v,y;if(l="undefined"!=typeof ArrayBuffer&&o.data instanceof ArrayBuffer?(s=new Uint8Array(o.data),"function"==typeof u.debug&&u.debug("--- got data length: "+s.length),r(s)):o.data,u.serverActivity=t(),l!==e.LF)for("function"==typeof u.debug&&u.debug("<<< "+l),y=n.unmarshall(u.partialData+l,u.escapeHeaderValues),u.partialData=y.partial,f=0,d=(m=y.frames).length;f<d;f++)switch((h=m[f]).command){case"CONNECTED":if("function"==typeof u.debug&&u.debug("connected to server "+h.headers.server),u.connected=!0,u.version=h.headers.version,u.version===i.VERSIONS.V1_2&&(u.escapeHeaderValues=!0),!u._active)return void u.disconnect();u._setupHeartbeat(h.headers),"function"==typeof u.connectCallback&&u.connectCallback(h);break;case"MESSAGE":v=h.headers.subscription,(g=u.subscriptions[v]||u.onreceive)?(c=u,p=u.version===i.VERSIONS.V1_2?h.headers.ack:h.headers["message-id"],h.ack=function(e){return null==e&&(e={}),c.ack(p,v,e)},h.nack=function(e){return null==e&&(e={}),c.nack(p,v,e)},g(h)):"function"==typeof u.debug&&u.debug("Unhandled received MESSAGE: "+h);break;case"RECEIPT":h.headers["receipt-id"]===u.closeReceipt?(u.ws.onclose=null,u.ws.close(),u._cleanUp(),"function"==typeof u._disconnectCallback&&u._disconnectCallback()):"function"==typeof u.onreceipt&&u.onreceipt(h);break;case"ERROR":"function"==typeof a&&a(h);break;default:"function"==typeof u.debug&&u.debug("Unhandled frame: "+h)}else"function"==typeof u.debug&&u.debug("<<< PONG")}),this.ws.onclose=function(e){return function(t){var n;return n="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(n),"function"==typeof o&&o(t),e._cleanUp(),"function"==typeof a&&a("connectionLost"),e._schedule_reconnect()}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),s["accept-version"]=i.VERSIONS.supportedVersions(),s["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",s)}}(this);this.debug("Client has been marked inactive, will not attempt to connect")},r.prototype._schedule_reconnect=function(){if(this.reconnect_delay>0)return"function"==typeof this.debug&&this.debug("STOMP: scheduling reconnection in "+this.reconnect_delay+"ms"),this._reconnector=setTimeout((e=this,function(){return e.connected?"function"==typeof e.debug?e.debug("STOMP: already connected"):void 0:("function"==typeof e.debug&&e.debug("STOMP: attempting to reconnect"),e._connect())}),this.reconnect_delay);var e},r.prototype.disconnect=function(e,t){var n;if(null==t&&(t={}),this._disconnectCallback=e,this._active=!1,this.connected){t.receipt||(t.receipt="close-"+this.counter++),this.closeReceipt=t.receipt;try{return this._transmit("DISCONNECT",t)}catch(e){return n=e,"function"==typeof this.debug?this.debug("Ignoring error during disconnect",n):void 0}}},r.prototype._cleanUp=function(){if(this._reconnector&&clearTimeout(this._reconnector),this.connected=!1,this.subscriptions={},this.partial="",this.pinger&&i.clearInterval(this.pinger),this.ponger)return i.clearInterval(this.ponger)},r.prototype.send=function(e,t,n){return null==t&&(t={}),null==n&&(n=""),t.destination=e,this._transmit("SEND",t,n)},r.prototype.subscribe=function(e,t,n){var i;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=e,this.subscriptions[n.id]=t,this._transmit("SUBSCRIBE",n),i=this,{id:n.id,unsubscribe:function(e){return i.unsubscribe(n.id,e)}}},r.prototype.unsubscribe=function(e,t){return null==t&&(t={}),delete this.subscriptions[e],t.id=e,this._transmit("UNSUBSCRIBE",t)},r.prototype.begin=function(e){var t,n;return n=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),t=this,{id:n,commit:function(){return t.commit(n)},abort:function(){return t.abort(n)}}},r.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},r.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},r.prototype.ack=function(e,t,n){return null==n&&(n={}),this.version===i.VERSIONS.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit("ACK",n)},r.prototype.nack=function(e,t,n){return null==n&&(n={}),this.version===i.VERSIONS.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit("NACK",n)},r}(),(i={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.2,1.1,1.0"}},client:function(e,n){return null==n&&(n=["v10.stomp","v11.stomp","v12.stomp"]),new t(function(){return new(i.WebSocketClass||WebSocket)(e,n)})},over:function(e){return new t("function"==typeof e?e:function(){return e})},Frame:n}).setInterval=function(e,t){return setInterval(t,e)},i.clearInterval=function(e){return clearInterval(e)},"undefined"!=typeof exports&&null!==exports&&(exports.Stomp=i),"undefined"!=typeof window&&null!==window?window.Stomp=i:exports||(self.Stomp=i)}.call(this);